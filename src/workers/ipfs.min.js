(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Ipfs = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Ipfs=(()=>{var g6e=Object.create;var Gm=Object.defineProperty;var m6e=Object.getOwnPropertyDescriptor;var b6e=Object.getOwnPropertyNames;var w6e=Object.getPrototypeOf,_6e=Object.prototype.hasOwnProperty;var zC=t=>Gm(t,"__esModule",{value:!0});var ps=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var tt=(t,e)=>()=>(t&&(e=t(t=0)),e);var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),kt=(t,e)=>{zC(t);for(var r in e)Gm(t,r,{get:e[r],enumerable:!0})},v6e=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of b6e(e))!_6e.call(t,i)&&i!=="default"&&Gm(t,i,{get:()=>e[i],enumerable:!(r=m6e(e,i))||r.enumerable});return t},A=t=>v6e(zC(Gm(t!=null?g6e(w6e(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var GC=g(Wm=>{f();"use strict";Wm.byteLength=S6e;Wm.toByteArray=x6e;Wm.fromByteArray=T6e;var Xo=[],ys=[],E6e=typeof Uint8Array!="undefined"?Uint8Array:Array,__="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ql=0,HC=__.length;Ql<HC;++Ql)Xo[Ql]=__[Ql],ys[__.charCodeAt(Ql)]=Ql;var Ql,HC;ys["-".charCodeAt(0)]=62;ys["_".charCodeAt(0)]=63;function $C(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function S6e(t){var e=$C(t),r=e[0],i=e[1];return(r+i)*3/4-i}function A6e(t,e,r){return(e+r)*3/4-r}function x6e(t){var e,r=$C(t),i=r[0],n=r[1],s=new E6e(A6e(t,i,n)),o=0,a=n>0?i-4:i,c;for(c=0;c<a;c+=4)e=ys[t.charCodeAt(c)]<<18|ys[t.charCodeAt(c+1)]<<12|ys[t.charCodeAt(c+2)]<<6|ys[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return n===2&&(e=ys[t.charCodeAt(c)]<<2|ys[t.charCodeAt(c+1)]>>4,s[o++]=e&255),n===1&&(e=ys[t.charCodeAt(c)]<<10|ys[t.charCodeAt(c+1)]<<4|ys[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function R6e(t){return Xo[t>>18&63]+Xo[t>>12&63]+Xo[t>>6&63]+Xo[t&63]}function I6e(t,e,r){for(var i,n=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(R6e(i));return n.join("")}function T6e(t){for(var e,r=t.length,i=r%3,n=[],s=16383,o=0,a=r-i;o<a;o+=s)n.push(I6e(t,o,o+s>a?a:o+s));return i===1?(e=t[r-1],n.push(Xo[e>>2]+Xo[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(Xo[e>>10]+Xo[e>>4&63]+Xo[e<<2&63]+"=")),n.join("")}});var WC=g(v_=>{f();v_.read=function(t,e,r,i,n){var s,o,a=n*8-i-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?n-1:0,d=r?-1:1,p=t[e+h];for(h+=d,s=p&(1<<-l)-1,p>>=-l,l+=a;l>0;s=s*256+t[e+h],h+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=i;l>0;o=o*256+t[e+h],h+=d,l-=8);if(s===0)s=1-u;else{if(s===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-u}return(p?-1:1)*o*Math.pow(2,s-i)};v_.write=function(t,e,r,i,n,s){var o,a,c,u=s*8-n-1,l=(1<<u)-1,h=l>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,y=i?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=d/c:e+=d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*c-1)*Math.pow(2,n),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;t[r+p]=a&255,p+=y,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;t[r+p]=o&255,p+=y,o/=256,u-=8);t[r+p-y]|=m*128}});var Gt=g(sd=>{f();"use strict";var E_=GC(),rd=WC(),YC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;sd.Buffer=ne;sd.SlowBuffer=N6e;sd.INSPECT_MAX_BYTES=50;var Ym=2147483647;sd.kMaxLength=Ym;ne.TYPED_ARRAY_SUPPORT=P6e();!ne.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P6e(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(ne.prototype,"parent",{enumerable:!0,get:function(){if(!!ne.isBuffer(this))return this.buffer}});Object.defineProperty(ne.prototype,"offset",{enumerable:!0,get:function(){if(!!ne.isBuffer(this))return this.byteOffset}});function ac(t){if(t>Ym)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,ne.prototype),e}function ne(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S_(t)}return XC(t,e,r)}ne.poolSize=8192;function XC(t,e,r){if(typeof t=="string")return O6e(t,e);if(ArrayBuffer.isView(t))return k6e(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Qo(t,ArrayBuffer)||t&&Qo(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Qo(t,SharedArrayBuffer)||t&&Qo(t.buffer,SharedArrayBuffer)))return x_(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return ne.from(i,e,r);let n=D6e(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return ne.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}ne.from=function(t,e,r){return XC(t,e,r)};Object.setPrototypeOf(ne.prototype,Uint8Array.prototype);Object.setPrototypeOf(ne,Uint8Array);function QC(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function C6e(t,e,r){return QC(t),t<=0?ac(t):e!==void 0?typeof r=="string"?ac(t).fill(e,r):ac(t).fill(e):ac(t)}ne.alloc=function(t,e,r){return C6e(t,e,r)};function S_(t){return QC(t),ac(t<0?0:R_(t)|0)}ne.allocUnsafe=function(t){return S_(t)};ne.allocUnsafeSlow=function(t){return S_(t)};function O6e(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!ne.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=ZC(t,e)|0,i=ac(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function A_(t){let e=t.length<0?0:R_(t.length)|0,r=ac(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function k6e(t){if(Qo(t,Uint8Array)){let e=new Uint8Array(t);return x_(e.buffer,e.byteOffset,e.byteLength)}return A_(t)}function x_(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,ne.prototype),i}function D6e(t){if(ne.isBuffer(t)){let e=R_(t.length)|0,r=ac(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||P_(t.length)?ac(0):A_(t);if(t.type==="Buffer"&&Array.isArray(t.data))return A_(t.data)}function R_(t){if(t>=Ym)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ym.toString(16)+" bytes");return t|0}function N6e(t){return+t!=t&&(t=0),ne.alloc(+t)}ne.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ne.prototype};ne.compare=function(e,r){if(Qo(e,Uint8Array)&&(e=ne.from(e,e.offset,e.byteLength)),Qo(r,Uint8Array)&&(r=ne.from(r,r.offset,r.byteLength)),!ne.isBuffer(e)||!ne.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,o=Math.min(i,n);s<o;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};ne.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ne.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ne.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=ne.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let o=e[i];if(Qo(o,Uint8Array))s+o.length>n.length?(ne.isBuffer(o)||(o=ne.from(o)),o.copy(n,s)):Uint8Array.prototype.set.call(n,o,s);else if(ne.isBuffer(o))o.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return n};function ZC(t,e){if(ne.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Qo(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T_(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return lO(t).length;default:if(n)return i?-1:T_(t).length;e=(""+e).toLowerCase(),n=!0}}ne.byteLength=ZC;function B6e(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return H6e(this,e,r);case"utf8":case"utf-8":return tO(this,e,r);case"ascii":return V6e(this,e,r);case"latin1":case"binary":return z6e(this,e,r);case"base64":return F6e(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $6e(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}ne.prototype._isBuffer=!0;function Zl(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}ne.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Zl(this,r,r+1);return this};ne.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Zl(this,r,r+3),Zl(this,r+1,r+2);return this};ne.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Zl(this,r,r+7),Zl(this,r+1,r+6),Zl(this,r+2,r+5),Zl(this,r+3,r+4);return this};ne.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?tO(this,0,e):B6e.apply(this,arguments)};ne.prototype.toLocaleString=ne.prototype.toString;ne.prototype.equals=function(e){if(!ne.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ne.compare(this,e)===0};ne.prototype.inspect=function(){let e="",r=sd.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};YC&&(ne.prototype[YC]=ne.prototype.inspect);ne.prototype.compare=function(e,r,i,n,s){if(Qo(e,Uint8Array)&&(e=ne.from(e,e.offset,e.byteLength)),!ne.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let o=s-n,a=i-r,c=Math.min(o,a),u=this.slice(n,s),l=e.slice(r,i);for(let h=0;h<c;++h)if(u[h]!==l[h]){o=u[h],a=l[h];break}return o<a?-1:a<o?1:0};function JC(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,P_(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=ne.from(e,i)),ne.isBuffer(e))return e.length===0?-1:eO(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):eO(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function eO(t,e,r,i,n){let s=1,o=t.length,a=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function c(l,h){return s===1?l[h]:l.readUInt16BE(h*s)}let u;if(n){let l=-1;for(u=r;u<o;u++)if(c(t,u)===c(e,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===a)return l*s}else l!==-1&&(u-=u-l),l=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){let l=!0;for(let h=0;h<a;h++)if(c(t,u+h)!==c(e,h)){l=!1;break}if(l)return u}return-1}ne.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};ne.prototype.indexOf=function(e,r,i){return JC(this,e,r,i,!0)};ne.prototype.lastIndexOf=function(e,r,i){return JC(this,e,r,i,!1)};function L6e(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let o;for(o=0;o<i;++o){let a=parseInt(e.substr(o*2,2),16);if(P_(a))return o;t[r+o]=a}return o}function M6e(t,e,r,i){return Xm(T_(e,t.length-r),t,r,i)}function j6e(t,e,r,i){return Xm(X6e(e),t,r,i)}function q6e(t,e,r,i){return Xm(lO(e),t,r,i)}function U6e(t,e,r,i){return Xm(Q6e(e,t.length-r),t,r,i)}ne.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return L6e(this,e,r,i);case"utf8":case"utf-8":return M6e(this,e,r,i);case"ascii":case"latin1":case"binary":return j6e(this,e,r,i);case"base64":return q6e(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U6e(this,e,r,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};ne.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F6e(t,e,r){return e===0&&r===t.length?E_.fromByteArray(t):E_.fromByteArray(t.slice(e,r))}function tO(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n+a<=r){let c,u,l,h;switch(a){case 1:s<128&&(o=s);break;case 2:c=t[n+1],(c&192)==128&&(h=(s&31)<<6|c&63,h>127&&(o=h));break;case 3:c=t[n+1],u=t[n+2],(c&192)==128&&(u&192)==128&&(h=(s&15)<<12|(c&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=t[n+1],u=t[n+2],l=t[n+3],(c&192)==128&&(u&192)==128&&(l&192)==128&&(h=(s&15)<<18|(c&63)<<12|(u&63)<<6|l&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=a}return K6e(i)}var rO=4096;function K6e(t){let e=t.length;if(e<=rO)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=rO));return r}function V6e(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function z6e(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function H6e(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=Z6e[t[s]];return n}function $6e(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}ne.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,ne.prototype),n};function vi(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}ne.prototype.readUintLE=ne.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||vi(e,r,this.length);let n=this[e],s=1,o=0;for(;++o<r&&(s*=256);)n+=this[e+o]*s;return n};ne.prototype.readUintBE=ne.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||vi(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};ne.prototype.readUint8=ne.prototype.readUInt8=function(e,r){return e=e>>>0,r||vi(e,1,this.length),this[e]};ne.prototype.readUint16LE=ne.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||vi(e,2,this.length),this[e]|this[e+1]<<8};ne.prototype.readUint16BE=ne.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||vi(e,2,this.length),this[e]<<8|this[e+1]};ne.prototype.readUint32LE=ne.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||vi(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ne.prototype.readUint32BE=ne.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||vi(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ne.prototype.readBigUInt64LE=hu(function(e){e=e>>>0,nd(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&U1(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});ne.prototype.readBigUInt64BE=hu(function(e){e=e>>>0,nd(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&U1(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});ne.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||vi(e,r,this.length);let n=this[e],s=1,o=0;for(;++o<r&&(s*=256);)n+=this[e+o]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};ne.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||vi(e,r,this.length);let n=r,s=1,o=this[e+--n];for(;n>0&&(s*=256);)o+=this[e+--n]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};ne.prototype.readInt8=function(e,r){return e=e>>>0,r||vi(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ne.prototype.readInt16LE=function(e,r){e=e>>>0,r||vi(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};ne.prototype.readInt16BE=function(e,r){e=e>>>0,r||vi(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};ne.prototype.readInt32LE=function(e,r){return e=e>>>0,r||vi(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ne.prototype.readInt32BE=function(e,r){return e=e>>>0,r||vi(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ne.prototype.readBigInt64LE=hu(function(e){e=e>>>0,nd(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&U1(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});ne.prototype.readBigInt64BE=hu(function(e){e=e>>>0,nd(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&U1(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});ne.prototype.readFloatLE=function(e,r){return e=e>>>0,r||vi(e,4,this.length),rd.read(this,e,!0,23,4)};ne.prototype.readFloatBE=function(e,r){return e=e>>>0,r||vi(e,4,this.length),rd.read(this,e,!1,23,4)};ne.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||vi(e,8,this.length),rd.read(this,e,!0,52,8)};ne.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||vi(e,8,this.length),rd.read(this,e,!1,52,8)};function Rn(t,e,r,i,n,s){if(!ne.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}ne.prototype.writeUintLE=ne.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let a=Math.pow(2,8*i)-1;Rn(this,e,r,i,a,0)}let s=1,o=0;for(this[r]=e&255;++o<i&&(s*=256);)this[r+o]=e/s&255;return r+i};ne.prototype.writeUintBE=ne.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let a=Math.pow(2,8*i)-1;Rn(this,e,r,i,a,0)}let s=i-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+i};ne.prototype.writeUint8=ne.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,1,255,0),this[r]=e&255,r+1};ne.prototype.writeUint16LE=ne.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};ne.prototype.writeUint16BE=ne.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};ne.prototype.writeUint32LE=ne.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};ne.prototype.writeUint32BE=ne.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function iO(t,e,r,i,n){uO(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function nO(t,e,r,i,n){uO(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}ne.prototype.writeBigUInt64LE=hu(function(e,r=0){return iO(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeBigUInt64BE=hu(function(e,r=0){return nO(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});ne.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let c=Math.pow(2,8*i-1);Rn(this,e,r,i,c-1,-c)}let s=0,o=1,a=0;for(this[r]=e&255;++s<i&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+i};ne.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let c=Math.pow(2,8*i-1);Rn(this,e,r,i,c-1,-c)}let s=i-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+i};ne.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};ne.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};ne.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};ne.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};ne.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Rn(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};ne.prototype.writeBigInt64LE=hu(function(e,r=0){return iO(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ne.prototype.writeBigInt64BE=hu(function(e,r=0){return nO(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function sO(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function oO(t,e,r,i,n){return e=+e,r=r>>>0,n||sO(t,e,r,4,34028234663852886e22,-34028234663852886e22),rd.write(t,e,r,i,23,4),r+4}ne.prototype.writeFloatLE=function(e,r,i){return oO(this,e,r,!0,i)};ne.prototype.writeFloatBE=function(e,r,i){return oO(this,e,r,!1,i)};function aO(t,e,r,i,n){return e=+e,r=r>>>0,n||sO(t,e,r,8,17976931348623157e292,-17976931348623157e292),rd.write(t,e,r,i,52,8),r+8}ne.prototype.writeDoubleLE=function(e,r,i){return aO(this,e,r,!0,i)};ne.prototype.writeDoubleBE=function(e,r,i){return aO(this,e,r,!1,i)};ne.prototype.copy=function(e,r,i,n){if(!ne.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};ne.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ne.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let o=e.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let o=ne.isBuffer(e)?e:ne.from(e,n),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=o[s%a]}return this};var id={};function I_(t,e,r){id[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}I_("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);I_("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);I_("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=cO(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=cO(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function cO(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function G6e(t,e,r){nd(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&U1(e,t.length-(r+1))}function uO(t,e,r,i,n,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new id.ERR_OUT_OF_RANGE("value",a,t)}G6e(i,n,s)}function nd(t,e){if(typeof t!="number")throw new id.ERR_INVALID_ARG_TYPE(e,"number",t)}function U1(t,e,r){throw Math.floor(t)!==t?(nd(t,r),new id.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new id.ERR_BUFFER_OUT_OF_BOUNDS:new id.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var W6e=/[^+/0-9A-Za-z-_]/g;function Y6e(t){if(t=t.split("=")[0],t=t.trim().replace(W6e,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function T_(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let o=0;o<i;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function X6e(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Q6e(t,e){let r,i,n,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function lO(t){return E_.toByteArray(Y6e(t))}function Xm(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Qo(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function P_(t){return t!==t}var Z6e=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function hu(t){return typeof BigInt=="undefined"?J6e:t}function J6e(){throw new Error("BigInt not supported")}});var yO=g((Cet,pO)=>{f();var $r=pO.exports={},Zo,Jo;function C_(){throw new Error("setTimeout has not been defined")}function O_(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Zo=setTimeout:Zo=C_}catch(t){Zo=C_}try{typeof clearTimeout=="function"?Jo=clearTimeout:Jo=O_}catch(t){Jo=O_}})();function fO(t){if(Zo===setTimeout)return setTimeout(t,0);if((Zo===C_||!Zo)&&setTimeout)return Zo=setTimeout,setTimeout(t,0);try{return Zo(t,0)}catch(e){try{return Zo.call(null,t,0)}catch(r){return Zo.call(this,t,0)}}}function ebe(t){if(Jo===clearTimeout)return clearTimeout(t);if((Jo===O_||!Jo)&&clearTimeout)return Jo=clearTimeout,clearTimeout(t);try{return Jo(t)}catch(e){try{return Jo.call(null,t)}catch(r){return Jo.call(this,t)}}}var cc=[],od=!1,Jl,Qm=-1;function tbe(){!od||!Jl||(od=!1,Jl.length?cc=Jl.concat(cc):Qm=-1,cc.length&&hO())}function hO(){if(!od){var t=fO(tbe);od=!0;for(var e=cc.length;e;){for(Jl=cc,cc=[];++Qm<e;)Jl&&Jl[Qm].run();Qm=-1,e=cc.length}Jl=null,od=!1,ebe(t)}}$r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];cc.push(new dO(t,e)),cc.length===1&&!od&&fO(hO)};function dO(t,e){this.fun=t,this.array=e}dO.prototype.run=function(){this.fun.apply(null,this.array)};$r.title="browser";$r.browser=!0;$r.env={};$r.argv=[];$r.version="";$r.versions={};function uc(){}$r.on=uc;$r.addListener=uc;$r.once=uc;$r.off=uc;$r.removeListener=uc;$r.removeAllListeners=uc;$r.emit=uc;$r.prependListener=uc;$r.prependOnceListener=uc;$r.listeners=function(t){return[]};$r.binding=function(t){throw new Error("process.binding is not supported")};$r.cwd=function(){return"/"};$r.chdir=function(t){throw new Error("process.chdir is not supported")};$r.umask=function(){return 0}});var Buffer,process,f=tt(()=>{({Buffer}=Gt()),process=yO()});var mO=g((ket,gO)=>{f();"use strict";gO.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var du=g((vO,EO)=>{f();"use strict";var Zm=mO(),{hasOwnProperty:bO}=Object.prototype,{propertyIsEnumerable:rbe}=Object,ad=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),ibe=vO,wO={concatArrays:!1,ignoreUndefined:!1},Jm=t=>{let e=[];for(let r in t)bO.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let i of r)rbe.call(t,i)&&e.push(i)}return e};function cd(t){return Array.isArray(t)?nbe(t):Zm(t)?sbe(t):t}function nbe(t){let e=t.slice(0,0);return Jm(t).forEach(r=>{ad(e,r,cd(t[r]))}),e}function sbe(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return Jm(t).forEach(r=>{ad(e,r,cd(t[r]))}),e}var _O=(t,e,r,i)=>(r.forEach(n=>{typeof e[n]=="undefined"&&i.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?ad(t,n,k_(t[n],e[n],i)):ad(t,n,cd(e[n])))}),t),obe=(t,e,r)=>{let i=t.slice(0,0),n=0;return[t,e].forEach(s=>{let o=[];for(let a=0;a<s.length;a++)!bO.call(s,a)||(o.push(String(a)),s===t?ad(i,n++,s[a]):ad(i,n++,cd(s[a])));i=_O(i,s,Jm(s).filter(a=>!o.includes(a)),r)}),i};function k_(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?obe(t,e,r):!Zm(e)||!Zm(t)?cd(e):_O(t,e,Jm(e),r)}EO.exports=function(...t){let e=k_(cd(wO),this!==ibe&&this||{},wO),r={_:{}};for(let i of t)if(i!==void 0){if(!Zm(i))throw new TypeError("`"+i+"` is not an Option Object");r=k_(r,{_:i},e)}return r._}});var D_=g((Net,AO)=>{f();function abe(){return typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}AO.exports=abe});var K1=g((Bet,xO)=>{f();"use strict";var cbe=D_(),e3=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,F1=cbe(),ube=e3&&!F1,lbe=F1&&!e3,fbe=F1&&e3,hbe=typeof ps=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!F1,dbe=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,pbe=typeof process!="undefined"&&typeof process.env!="undefined"&&!1,ybe=typeof navigator!="undefined"&&navigator.product==="ReactNative";xO.exports={isTest:pbe,isElectron:F1,isElectronMain:lbe,isElectronRenderer:fbe,isNode:hbe,isBrowser:ube,isWebWorker:dbe,isEnvWithDom:e3,isReactNative:ybe}});var N_=g((Let,RO)=>{f();var ud=1e3,ld=ud*60,fd=ld*60,ef=fd*24,gbe=ef*7,mbe=ef*365.25;RO.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return bbe(t);if(r==="number"&&isFinite(t))return e.long?_be(t):wbe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function bbe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*mbe;case"weeks":case"week":case"w":return r*gbe;case"days":case"day":case"d":return r*ef;case"hours":case"hour":case"hrs":case"hr":case"h":return r*fd;case"minutes":case"minute":case"mins":case"min":case"m":return r*ld;case"seconds":case"second":case"secs":case"sec":case"s":return r*ud;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wbe(t){var e=Math.abs(t);return e>=ef?Math.round(t/ef)+"d":e>=fd?Math.round(t/fd)+"h":e>=ld?Math.round(t/ld)+"m":e>=ud?Math.round(t/ud)+"s":t+"ms"}function _be(t){var e=Math.abs(t);return e>=ef?t3(t,e,ef,"day"):e>=fd?t3(t,e,fd,"hour"):e>=ld?t3(t,e,ld,"minute"):e>=ud?t3(t,e,ud,"second"):t+" ms"}function t3(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var TO=g((Met,IO)=>{f();function vbe(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=n,r.enabled=o,r.humanize=N_(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let h=0;for(let d=0;d<l.length;d++)h=(h<<5)-h+l.charCodeAt(d),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(l){let h,d=null,p,y;function m(...w){if(!m.enabled)return;let b=m,v=Number(new Date),x=v-(h||v);b.diff=x,b.prev=h,b.curr=v,h=v,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let B=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(R,N)=>{if(R==="%%")return"%";B++;let F=r.formatters[N];if(typeof F=="function"){let U=w[B];R=F.call(b,U),w.splice(B,1),B--}return R}),r.formatArgs.call(b,w),(b.log||r.log).apply(b,w)}return m.namespace=l,m.useColors=r.useColors(),m.color=r.selectColor(l),m.extend=i,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==r.namespaces&&(p=r.namespaces,y=r.enabled(l)),y),set:w=>{d=w}}),typeof r.init=="function"&&r.init(m),m}function i(l,h){let d=r(this.namespace+(typeof h=="undefined"?":":h)+l);return d.log=this.log,d}function n(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let h,d=(typeof l=="string"?l:"").split(/[\s,]+/),p=d.length;for(h=0;h<p;h++)!d[h]||(l=d[h].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let h,d;for(h=0,d=r.skips.length;h<d;h++)if(r.skips[h].test(l))return!1;for(h=0,d=r.names.length;h<d;h++)if(r.names[h].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}IO.exports=vbe});var ce=g(($n,r3)=>{f();$n.formatArgs=Sbe;$n.save=Abe;$n.load=xbe;$n.useColors=Ebe;$n.storage=Rbe();$n.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();$n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ebe(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Sbe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+r3.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}$n.log=console.debug||console.log||(()=>{});function Abe(t){try{t?$n.storage.setItem("debug",t):$n.storage.removeItem("debug")}catch(e){}}function xbe(){let t;try{t=$n.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Rbe(){try{return localStorage}catch(t){}}r3.exports=TO()($n);var{formatters:Ibe}=r3.exports;Ibe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var _t=g((jet,CO)=>{f();"use strict";function PO(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Tbe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return PO(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),PO(new n,r)}}CO.exports=Tbe});var DO=g((qet,kO)=>{f();"use strict";function OO(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Pbe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return OO(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),OO(new n,r)}}kO.exports=Pbe});var BO=g((Uet,NO)=>{f();"use strict";NO.exports=Cbe;function Cbe(t,e){for(var r=new Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(a,c){r[i]=function(l){if(s)if(s=!1,l)c(l);else{for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d++]=arguments[d];a.apply(null,h)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,c(u))}})}});var qO=g(jO=>{f();"use strict";var i3=jO;i3.length=function(e){var r=e.length;if(!r)return 0;for(var i=0;--r%4>1&&e.charAt(r)==="=";)++i;return Math.ceil(e.length*3)/4-i};var hd=new Array(64),LO=new Array(123);for(yo=0;yo<64;)LO[hd[yo]=yo<26?yo+65:yo<52?yo+71:yo<62?yo-4:yo-59|43]=yo++;var yo;i3.encode=function(e,r,i){for(var n=null,s=[],o=0,a=0,c;r<i;){var u=e[r++];switch(a){case 0:s[o++]=hd[u>>2],c=(u&3)<<4,a=1;break;case 1:s[o++]=hd[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[o++]=hd[c|u>>6],s[o++]=hd[u&63],a=0;break}o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=hd[c],s[o++]=61,a===1&&(s[o++]=61)),n?(o&&n.push(String.fromCharCode.apply(String,s.slice(0,o))),n.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var MO="invalid encoding";i3.decode=function(e,r,i){for(var n=i,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=LO[c])===void 0)throw Error(MO);switch(s){case 0:o=c,s=1;break;case 1:r[i++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:r[i++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:r[i++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(MO);return i-n};i3.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var FO=g((Ket,UO)=>{f();"use strict";UO.exports=n3;function n3(){this._listeners={}}n3.prototype.on=function(e,r,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:i||this}),this};n3.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};n3.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}});var WO=g((Vet,GO)=>{f();"use strict";GO.exports=KO(KO);function KO(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),i=r[3]===128;function n(c,u,l){e[0]=c,u[l]=r[0],u[l+1]=r[1],u[l+2]=r[2],u[l+3]=r[3]}function s(c,u,l){e[0]=c,u[l]=r[3],u[l+1]=r[2],u[l+2]=r[1],u[l+3]=r[0]}t.writeFloatLE=i?n:s,t.writeFloatBE=i?s:n;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=i?o:a,t.readFloatBE=i?a:o}():function(){function e(i,n,s,o){var a=n<0?1:0;if(a&&(n=-n),n===0)i(1/n>0?0:2147483648,s,o);else if(isNaN(n))i(2143289344,s,o);else if(n>34028234663852886e22)i((a<<31|2139095040)>>>0,s,o);else if(n<11754943508222875e-54)i((a<<31|Math.round(n/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(n)/Math.LN2),u=Math.round(n*Math.pow(2,-c)*8388608)&8388607;i((a<<31|c+127<<23|u)>>>0,s,o)}}t.writeFloatLE=e.bind(null,VO),t.writeFloatBE=e.bind(null,zO);function r(i,n,s){var o=i(n,s),a=(o>>31)*2+1,c=o>>>23&255,u=o&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,HO),t.readFloatBE=r.bind(null,$O)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),i=r[7]===128;function n(c,u,l){e[0]=c,u[l]=r[0],u[l+1]=r[1],u[l+2]=r[2],u[l+3]=r[3],u[l+4]=r[4],u[l+5]=r[5],u[l+6]=r[6],u[l+7]=r[7]}function s(c,u,l){e[0]=c,u[l]=r[7],u[l+1]=r[6],u[l+2]=r[5],u[l+3]=r[4],u[l+4]=r[3],u[l+5]=r[2],u[l+6]=r[1],u[l+7]=r[0]}t.writeDoubleLE=i?n:s,t.writeDoubleBE=i?s:n;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=i?o:a,t.readDoubleBE=i?a:o}():function(){function e(i,n,s,o,a,c){var u=o<0?1:0;if(u&&(o=-o),o===0)i(0,a,c+n),i(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))i(0,a,c+n),i(2146959360,a,c+s);else if(o>17976931348623157e292)i(0,a,c+n),i((u<<31|2146435072)>>>0,a,c+s);else{var l;if(o<22250738585072014e-324)l=o/5e-324,i(l>>>0,a,c+n),i((u<<31|l/4294967296)>>>0,a,c+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),l=o*Math.pow(2,-h),i(l*4503599627370496>>>0,a,c+n),i((u<<31|h+1023<<20|l*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,VO,0,4),t.writeDoubleBE=e.bind(null,zO,4,0);function r(i,n,s,o,a){var c=i(o,a+n),u=i(o,a+s),l=(u>>31)*2+1,h=u>>>20&2047,d=4294967296*(u&1048575)+c;return h===2047?d?NaN:l*(1/0):h===0?l*5e-324*d:l*Math.pow(2,h-1075)*(d+4503599627370496)}t.readDoubleLE=r.bind(null,HO,0,4),t.readDoubleBE=r.bind(null,$O,4,0)}(),t}function VO(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function zO(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function HO(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function $O(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var YO=g((exports,module)=>{f();"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var QO=g(XO=>{f();"use strict";var B_=XO;B_.length=function(e){for(var r=0,i=0,n=0;n<e.length;++n)i=e.charCodeAt(n),i<128?r+=1:i<2048?r+=2:(i&64512)==55296&&(e.charCodeAt(n+1)&64512)==56320?(++n,r+=4):r+=3;return r};B_.read=function(e,r,i){var n=i-r;if(n<1)return"";for(var s=null,o=[],a=0,c;r<i;)c=e[r++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};B_.write=function(e,r,i){for(var n=i,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):(s&64512)==55296&&((o=e.charCodeAt(a+1))&64512)==56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128);return i-n}});var JO=g((Het,ZO)=>{f();"use strict";ZO.exports=Obe;function Obe(t,e,r){var i=r||8192,n=i>>>1,s=null,o=i;return function(c){if(c<1||c>n)return t(c);o+c>i&&(s=t(i),o=0);var u=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),u}}});var tk=g(($et,ek)=>{f();"use strict";ek.exports=Ei;var V1=yu();function Ei(t,e){this.lo=t>>>0,this.hi=e>>>0}var tf=Ei.zero=new Ei(0,0);tf.toNumber=function(){return 0};tf.zzEncode=tf.zzDecode=function(){return this};tf.length=function(){return 1};var kbe=Ei.zeroHash="\0\0\0\0\0\0\0\0";Ei.fromNumber=function(e){if(e===0)return tf;var r=e<0;r&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return r&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new Ei(i,n)};Ei.from=function(e){if(typeof e=="number")return Ei.fromNumber(e);if(V1.isString(e))if(V1.Long)e=V1.Long.fromString(e);else return Ei.fromNumber(parseInt(e,10));return e.low||e.high?new Ei(e.low>>>0,e.high>>>0):tf};Ei.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;return r||(i=i+1>>>0),-(r+i*4294967296)}return this.lo+this.hi*4294967296};Ei.prototype.toLong=function(e){return V1.Long?new V1.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var pu=String.prototype.charCodeAt;Ei.fromHash=function(e){return e===kbe?tf:new Ei((pu.call(e,0)|pu.call(e,1)<<8|pu.call(e,2)<<16|pu.call(e,3)<<24)>>>0,(pu.call(e,4)|pu.call(e,5)<<8|pu.call(e,6)<<16|pu.call(e,7)<<24)>>>0)};Ei.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ei.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Ei.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Ei.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}});var yu=g(L_=>{f();"use strict";var Ke=L_;Ke.asPromise=BO();Ke.base64=qO();Ke.EventEmitter=FO();Ke.float=WO();Ke.inquire=YO();Ke.utf8=QO();Ke.pool=JO();Ke.LongBits=tk();Ke.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Ke.global=Ke.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||L_;Ke.emptyArray=Object.freeze?Object.freeze([]):[];Ke.emptyObject=Object.freeze?Object.freeze({}):{};Ke.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Ke.isString=function(e){return typeof e=="string"||e instanceof String};Ke.isObject=function(e){return e&&typeof e=="object"};Ke.isset=Ke.isSet=function(e,r){var i=e[r];return i!=null&&e.hasOwnProperty(r)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};Ke.Buffer=function(){try{var t=Ke.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();Ke._Buffer_from=null;Ke._Buffer_allocUnsafe=null;Ke.newBuffer=function(e){return typeof e=="number"?Ke.Buffer?Ke._Buffer_allocUnsafe(e):new Ke.Array(e):Ke.Buffer?Ke._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};Ke.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;Ke.Long=Ke.global.dcodeIO&&Ke.global.dcodeIO.Long||Ke.global.Long||Ke.inquire("long");Ke.key2Re=/^true|false|0|1$/;Ke.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Ke.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Ke.longToHash=function(e){return e?Ke.LongBits.from(e).toHash():Ke.LongBits.zeroHash};Ke.longFromHash=function(e,r){var i=Ke.LongBits.fromHash(e);return Ke.Long?Ke.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))};function rk(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)(t[i[n]]===void 0||!r)&&(t[i[n]]=e[i[n]]);return t}Ke.merge=rk;Ke.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function ik(t){function e(r,i){if(!(this instanceof e))return new e(r,i);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&rk(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}Ke.newError=ik;Ke.ProtocolError=ik("ProtocolError");Ke.oneOfGetter=function(e){for(var r={},i=0;i<e.length;++i)r[e[i]]=1;return function(){for(var n=Object.keys(this),s=n.length-1;s>-1;--s)if(r[n[s]]===1&&this[n[s]]!==void 0&&this[n[s]]!==null)return n[s]}};Ke.oneOfSetter=function(e){return function(r){for(var i=0;i<e.length;++i)e[i]!==r&&delete this[e[i]]}};Ke.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Ke._configure=function(){var t=Ke.Buffer;if(!t){Ke._Buffer_from=Ke._Buffer_allocUnsafe=null;return}Ke._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,i){return new t(r,i)},Ke._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var V_=g((Wet,ak)=>{f();"use strict";ak.exports=jt;var gs=yu(),M_,s3=gs.LongBits,nk=gs.base64,sk=gs.utf8;function z1(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function j_(){}function Dbe(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function jt(){this.len=0,this.head=new z1(j_,0,0),this.tail=this.head,this.states=null}var ok=function(){return gs.Buffer?function(){return(jt.create=function(){return new M_})()}:function(){return new jt}};jt.create=ok();jt.alloc=function(e){return new gs.Array(e)};gs.Array!==Array&&(jt.alloc=gs.pool(jt.alloc,gs.Array.prototype.subarray));jt.prototype._push=function(e,r,i){return this.tail=this.tail.next=new z1(e,r,i),this.len+=r,this};function q_(t,e,r){e[r]=t&255}function Nbe(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function U_(t,e){this.len=t,this.next=void 0,this.val=e}U_.prototype=Object.create(z1.prototype);U_.prototype.fn=Nbe;jt.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new U_((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};jt.prototype.int32=function(e){return e<0?this._push(F_,10,s3.fromNumber(e)):this.uint32(e)};jt.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function F_(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}jt.prototype.uint64=function(e){var r=s3.from(e);return this._push(F_,r.length(),r)};jt.prototype.int64=jt.prototype.uint64;jt.prototype.sint64=function(e){var r=s3.from(e).zzEncode();return this._push(F_,r.length(),r)};jt.prototype.bool=function(e){return this._push(q_,1,e?1:0)};function K_(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}jt.prototype.fixed32=function(e){return this._push(K_,4,e>>>0)};jt.prototype.sfixed32=jt.prototype.fixed32;jt.prototype.fixed64=function(e){var r=s3.from(e);return this._push(K_,4,r.lo)._push(K_,4,r.hi)};jt.prototype.sfixed64=jt.prototype.fixed64;jt.prototype.float=function(e){return this._push(gs.float.writeFloatLE,4,e)};jt.prototype.double=function(e){return this._push(gs.float.writeDoubleLE,8,e)};var Bbe=gs.Array.prototype.set?function(e,r,i){r.set(e,i)}:function(e,r,i){for(var n=0;n<e.length;++n)r[i+n]=e[n]};jt.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(q_,1,0);if(gs.isString(e)){var i=jt.alloc(r=nk.length(e));nk.decode(e,i,0),e=i}return this.uint32(r)._push(Bbe,r,e)};jt.prototype.string=function(e){var r=sk.length(e);return r?this.uint32(r)._push(sk.write,r,e):this._push(q_,1,0)};jt.prototype.fork=function(){return this.states=new Dbe(this),this.head=this.tail=new z1(j_,0,0),this.len=0,this};jt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new z1(j_,0,0),this.len=0),this};jt.prototype.ldelim=function(){var e=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=r,this.len+=i),this};jt.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,r,i),i+=e.len,e=e.next;return r};jt._configure=function(t){M_=t,jt.create=ok(),M_._configure()}});var lk=g((Yet,uk)=>{f();"use strict";uk.exports=ea;var ck=V_();(ea.prototype=Object.create(ck.prototype)).constructor=ea;var gu=yu();function ea(){ck.call(this)}ea._configure=function(){ea.alloc=gu._Buffer_allocUnsafe,ea.writeBytesBuffer=gu.Buffer&&gu.Buffer.prototype instanceof Uint8Array&&gu.Buffer.prototype.set.name==="set"?function(e,r,i){r.set(e,i)}:function(e,r,i){if(e.copy)e.copy(r,i,0,e.length);else for(var n=0;n<e.length;)r[i++]=e[n++]}};ea.prototype.bytes=function(e){gu.isString(e)&&(e=gu._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(ea.writeBytesBuffer,r,e),this};function Lbe(t,e,r){t.length<40?gu.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}ea.prototype.string=function(e){var r=gu.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Lbe,r,e),this};ea._configure()});var $_=g((Xet,yk)=>{f();"use strict";yk.exports=Gr;var ta=yu(),z_,fk=ta.LongBits,Mbe=ta.utf8;function go(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Gr(t){this.buf=t,this.pos=0,this.len=t.length}var hk=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Gr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Gr(e);throw Error("illegal buffer")},dk=function(){return ta.Buffer?function(r){return(Gr.create=function(n){return ta.Buffer.isBuffer(n)?new z_(n):hk(n)})(r)}:hk};Gr.create=dk();Gr.prototype._slice=ta.Array.prototype.subarray||ta.Array.prototype.slice;Gr.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,go(this,10);return e}}();Gr.prototype.int32=function(){return this.uint32()|0};Gr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function H_(){var t=new fk(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw go(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw go(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Gr.prototype.bool=function(){return this.uint32()!==0};function o3(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Gr.prototype.fixed32=function(){if(this.pos+4>this.len)throw go(this,4);return o3(this.buf,this.pos+=4)};Gr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw go(this,4);return o3(this.buf,this.pos+=4)|0};function pk(){if(this.pos+8>this.len)throw go(this,8);return new fk(o3(this.buf,this.pos+=4),o3(this.buf,this.pos+=4))}Gr.prototype.float=function(){if(this.pos+4>this.len)throw go(this,4);var e=ta.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Gr.prototype.double=function(){if(this.pos+8>this.len)throw go(this,4);var e=ta.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Gr.prototype.bytes=function(){var e=this.uint32(),r=this.pos,i=this.pos+e;if(i>this.len)throw go(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};Gr.prototype.string=function(){var e=this.bytes();return Mbe.read(e,0,e.length)};Gr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw go(this,e);this.pos+=e}else do if(this.pos>=this.len)throw go(this);while(this.buf[this.pos++]&128);return this};Gr.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Gr._configure=function(t){z_=t,Gr.create=dk(),z_._configure();var e=ta.Long?"toLong":"toNumber";ta.merge(Gr.prototype,{int64:function(){return H_.call(this)[e](!1)},uint64:function(){return H_.call(this)[e](!0)},sint64:function(){return H_.call(this).zzDecode()[e](!1)},fixed64:function(){return pk.call(this)[e](!0)},sfixed64:function(){return pk.call(this)[e](!1)}})}});var wk=g((Qet,bk)=>{f();"use strict";bk.exports=rf;var gk=$_();(rf.prototype=Object.create(gk.prototype)).constructor=rf;var mk=yu();function rf(t){gk.call(this,t)}rf._configure=function(){mk.Buffer&&(rf.prototype._slice=mk.Buffer.prototype.slice)};rf.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};rf._configure()});var vk=g((Zet,_k)=>{f();"use strict";_k.exports=H1;var G_=yu();(H1.prototype=Object.create(G_.EventEmitter.prototype)).constructor=H1;function H1(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");G_.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}H1.prototype.rpcCall=function t(e,r,i,n,s){if(!n)throw TypeError("request must be specified");var o=this;if(!s)return G_.asPromise(t,o,e,r,i,n);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(c,u){if(c)return o.emit("error",c,e),s(c);if(u===null){o.end(!0);return}if(!(u instanceof i))try{u=i[o.responseDelimited?"decodeDelimited":"decode"](u)}catch(l){return o.emit("error",l,e),s(l)}return o.emit("data",u,e),s(null,u)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};H1.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Sk=g(Ek=>{f();"use strict";var jbe=Ek;jbe.Service=vk()});var xk=g((ett,Ak)=>{f();"use strict";Ak.exports={}});var Tk=g(Ik=>{f();"use strict";var In=Ik;In.build="minimal";In.Writer=V_();In.BufferWriter=lk();In.Reader=$_();In.BufferReader=wk();In.util=yu();In.rpc=Sk();In.roots=xk();In.configure=Rk;function Rk(){In.util._configure(),In.Writer._configure(In.BufferWriter),In.Reader._configure(In.BufferReader)}Rk()});var Si=g((rtt,Pk)=>{f();"use strict";Pk.exports=Tk()});function Bk(t,e,r){e=e||[],r=r||0;for(var i=r;t>=Vbe;)e[r++]=t&255|Nk,t/=128;for(;t&Kbe;)e[r++]=t&255|Nk,t>>>=7;return e[r]=t|0,Bk.bytes=r-i+1,e}function Y_(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o)throw Y_.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&Lk)<<i:(s&Lk)*Math.pow(2,i),i+=7}while(s>=Hbe);return Y_.bytes=n-e,r}var Ube,Nk,Fbe,Kbe,Vbe,zbe,Hbe,Lk,$be,Gbe,Wbe,Ybe,Xbe,Qbe,Zbe,Jbe,e5e,t5e,r5e,i5e,$1,Mk=tt(()=>{f();Ube=Bk,Nk=128,Fbe=127,Kbe=~Fbe,Vbe=Math.pow(2,31);zbe=Y_,Hbe=128,Lk=127;$be=Math.pow(2,7),Gbe=Math.pow(2,14),Wbe=Math.pow(2,21),Ybe=Math.pow(2,28),Xbe=Math.pow(2,35),Qbe=Math.pow(2,42),Zbe=Math.pow(2,49),Jbe=Math.pow(2,56),e5e=Math.pow(2,63),t5e=function(t){return t<$be?1:t<Gbe?2:t<Wbe?3:t<Ybe?4:t<Xbe?5:t<Qbe?6:t<Zbe?7:t<Jbe?8:t<e5e?9:10},r5e={encode:Ube,decode:zbe,encodingLength:t5e},i5e=r5e,$1=i5e});var G1,pd,yd,c3=tt(()=>{f();Mk();G1=t=>[$1.decode(t),$1.decode.bytes],pd=(t,e,r=0)=>($1.encode(t,e,r),e),yd=t=>$1.encodingLength(t)});var gd={};kt(gd,{coerce:()=>ms,empty:()=>qk,equals:()=>X_,fromHex:()=>s5e,fromString:()=>Q_,isBinary:()=>o5e,toHex:()=>n5e,toString:()=>Z_});var qk,n5e,s5e,X_,ms,o5e,Q_,Z_,bu=tt(()=>{f();qk=new Uint8Array(0),n5e=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),s5e=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):qk},X_=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ms=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},o5e=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),Q_=t=>new TextEncoder().encode(t),Z_=t=>new TextDecoder().decode(t)});var bd={};kt(bd,{Digest:()=>md,create:()=>W1,decode:()=>Wr,equals:()=>J_});var W1,Wr,J_,md,Gi=tt(()=>{f();bu();c3();W1=(t,e)=>{let r=e.byteLength,i=yd(t),n=i+yd(r),s=new Uint8Array(n+r);return pd(t,s,0),pd(r,s,i),s.set(e,n),new md(t,r,e,s)},Wr=t=>{let e=ms(t),[r,i]=G1(e),[n,s]=G1(e.subarray(i)),o=e.subarray(i+s);if(o.byteLength!==n)throw new Error("Incorrect length");return new md(r,n,o,e)},J_=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&X_(t.bytes,e.bytes),md=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}});function a5e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,w=0,b=0,v=y.length;b!==v&&y[b]===0;)b++,m++;for(var x=(v-b)*l+1>>>0,B=new Uint8Array(x);b!==v;){for(var O=y[b],R=0,N=x-1;(O!==0||R<w)&&N!==-1;N--,R++)O+=256*B[N]>>>0,B[N]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");w=R,b++}for(var F=x-w;F!==x&&B[F]===0;)F++;for(var U=c.repeat(m);F<x;++F)U+=t.charAt(B[F]);return U}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var w=0,b=0;y[m]===c;)w++,m++;for(var v=(y.length-m)*u+1>>>0,x=new Uint8Array(v);y[m];){var B=r[y.charCodeAt(m)];if(B===255)return;for(var O=0,R=v-1;(B!==0||O<b)&&R!==-1;R--,O++)B+=a*x[R]>>>0,x[R]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");b=O,m++}if(y[m]!==" "){for(var N=v-b;N!==v&&x[N]===0;)N++;for(var F=new Uint8Array(w+(v-N)),U=w;N!==v;)F[U++]=x[N++];return F}}}function p(y){var m=d(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var c5e,u5e,Uk,Fk=tt(()=>{f();c5e=a5e,u5e=c5e,Uk=u5e});var Kk,Vk,zk,Hk,$k,u3,wu,l5e,f5e,Br,ra=tt(()=>{f();Fk();bu();Kk=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Vk=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseDecode=i}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return Hk(this,e)}},zk=class{constructor(e){this.decoders=e}or(e){return Hk(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Hk=(t,e)=>new zk({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),$k=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Kk(e,r,i),this.decoder=new Vk(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},u3=({name:t,prefix:e,encode:r,decode:i})=>new $k(t,e,r,i),wu=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=Uk(r,e);return u3({prefix:t,name:e,encode:i,decode:s=>ms(n(s))})},l5e=(t,e,r,i)=>{let n={};for(let l=0;l<e.length;++l)n[e[l]]=l;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let l=0;l<s;++l){let h=n[t[l]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},f5e=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Br=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>u3({prefix:e,name:t,encode(n){return f5e(n,i,r)},decode(n){return l5e(n,i,r,t)}})});var mo={};kt(mo,{base58btc:()=>ft,base58flickr:()=>h5e});var ft,h5e,Yr=tt(()=>{f();ra();ft=wu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),h5e=wu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var dc={};kt(dc,{base32:()=>tr,base32hex:()=>p5e,base32hexpad:()=>g5e,base32hexpadupper:()=>m5e,base32hexupper:()=>y5e,base32pad:()=>tv,base32padupper:()=>d5e,base32upper:()=>ev,base32z:()=>b5e});var tr,ev,tv,d5e,p5e,y5e,g5e,m5e,b5e,Mi=tt(()=>{f();ra();tr=Br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ev=Br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tv=Br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),d5e=Br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),p5e=Br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),y5e=Br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),g5e=Br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),m5e=Br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),b5e=Br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var _u={};kt(_u,{CID:()=>q});var q,w5e,_5e,v5e,Y1,E5e,Gk,Wk,l3,f3,S5e,A5e,x5e,ye=tt(()=>{f();c3();Gi();Yr();Mi();bu();q=class{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:f3,byteLength:f3,code:l3,version:l3,multihash:l3,bytes:l3,_baseCache:f3,asCID:f3})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Y1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==E5e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return q.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=W1(e,r);return q.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&J_(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return _5e(r,n,e||ft.encoder);default:return v5e(r,n,e||tr.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return A5e(/^0\.0/,x5e),!!(e&&(e[Wk]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof q)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:s}=e;return new q(r,i,n,s||Gk(r,i,n.bytes))}else if(e!=null&&e[Wk]===!0){let{version:r,multihash:i,code:n}=e,s=Wr(i);return q.create(r,n,s)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Y1)throw new Error(`Version 0 CID must use dag-pb (code: ${Y1}) block encoding`);return new q(e,r,i,i.bytes)}case 1:{let n=Gk(e,r,i.bytes);return new q(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return q.create(0,Y1,e)}static createV1(e,r){return q.create(1,e,r)}static decode(e){let[r,i]=q.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=q.inspectBytes(e),i=r.size-r.multihashSize,n=ms(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=n.subarray(r.multihashSize-r.digestSize),o=new md(r.multihashCode,r.digestSize,s,n);return[r.version===0?q.createV0(o):q.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[h,d]=G1(e.subarray(r));return r+=d,h},n=i(),s=Y1;if(n===18?(n=0,r=0):n===1&&(s=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let o=r,a=i(),c=i(),u=r+c,l=u-o;return{version:n,codec:s,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,r){let[i,n]=w5e(e,r),s=q.decode(n);return s._baseCache.set(i,e),s}},w5e=(t,e)=>{switch(t[0]){case"Q":{let r=e||ft;return[ft.prefix,r.decode(`${ft.prefix}${t}`)]}case ft.prefix:{let r=e||ft;return[ft.prefix,r.decode(t)]}case tr.prefix:{let r=e||tr;return[tr.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},_5e=(t,e,r)=>{let{prefix:i}=r;if(i!==ft.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let s=r.encode(t).slice(1);return e.set(i,s),s}else return n},v5e=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let s=r.encode(t);return e.set(i,s),s}else return n},Y1=112,E5e=18,Gk=(t,e,r)=>{let i=yd(t),n=i+yd(e),s=new Uint8Array(n+r.byteLength);return pd(t,s,0),pd(e,s,i),s.set(r,n),s},Wk=Symbol.for("@ipld/js-cid/CID"),l3={writable:!1,configurable:!1,enumerable:!0},f3={writable:!1,enumerable:!1,configurable:!1},S5e="0.0.0-dev",A5e=(t,e)=>{if(t.test(S5e))console.warn(e);else throw new Error(e)},x5e=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Su,fN,s2=tt(()=>{f();Gi();Su=({name:t,code:e,encode:r})=>new fN(t,e,r),fN=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return W1(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var Ad=tt(()=>{f();ye();c3();bu();s2();Gi()});var xd={};kt(xd,{base64:()=>S3,base64pad:()=>c8e,base64url:()=>A3,base64urlpad:()=>u8e});var S3,c8e,A3,u8e,nf=tt(()=>{f();ra();S3=Br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),c8e=Br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),A3=Br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),u8e=Br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var c2={};kt(c2,{identity:()=>Qn});var Qn,gc=tt(()=>{f();s2();bu();Qn=Su({name:"identity",code:0,encode:t=>ms(t)})});var vv={};kt(vv,{identity:()=>w8e});var w8e,gN=tt(()=>{f();ra();bu();w8e=u3({prefix:"\0",name:"identity",encode:t=>Z_(t),decode:t=>Q_(t)})});var Ev={};kt(Ev,{base2:()=>_8e});var _8e,mN=tt(()=>{f();ra();_8e=Br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Sv={};kt(Sv,{base8:()=>v8e});var v8e,bN=tt(()=>{f();ra();v8e=Br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Av={};kt(Av,{base10:()=>E8e});var E8e,wN=tt(()=>{f();ra();E8e=wu({prefix:"9",name:"base10",alphabet:"0123456789"})});var x3={};kt(x3,{base16:()=>S8e,base16upper:()=>A8e});var S8e,A8e,xv=tt(()=>{f();ra();S8e=Br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),A8e=Br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var R3={};kt(R3,{base36:()=>Rd,base36upper:()=>x8e});var Rd,x8e,u2=tt(()=>{f();ra();Rd=wu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),x8e=wu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var vs={};kt(vs,{sha256:()=>Sr,sha512:()=>R8e});var _N,Sr,R8e,ti=tt(()=>{f();s2();_N=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Sr=Su({name:"sha2-256",code:18,encode:_N("SHA-256")}),R8e=Su({name:"sha2-512",code:19,encode:_N("SHA-512")})});var l2={};kt(l2,{code:()=>fi,decode:()=>P8e,encode:()=>T8e,name:()=>I8e});var I8e,fi,T8e,P8e,Es=tt(()=>{f();bu();I8e="raw",fi=85,T8e=t=>ms(t),P8e=t=>ms(t)});var Iv={};kt(Iv,{code:()=>Rv,decode:()=>N8e,encode:()=>D8e,name:()=>k8e});var C8e,O8e,k8e,Rv,D8e,N8e,Tv=tt(()=>{f();C8e=new TextEncoder,O8e=new TextDecoder,k8e="json",Rv=512,D8e=t=>C8e.encode(JSON.stringify(t)),N8e=t=>JSON.parse(O8e.decode(t))});var sf,I3,T3,P3=tt(()=>{f();gN();mN();bN();wN();xv();Mi();u2();Yr();nf();ti();gc();Es();Tv();Ad();sf={...vv,...Ev,...Sv,...Av,...x3,...dc,...R3,...mo,...xd},I3={...vs,...c2},T3={raw:l2,json:Iv}});function SN(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var AN,Pv,B8e,C3,Cv=tt(()=>{f();P3();AN=SN("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Pv=SN("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),B8e={utf8:AN,"utf-8":AN,hex:sf.base16,latin1:Pv,ascii:Pv,binary:Pv,...sf},C3=B8e});var ri={};kt(ri,{fromString:()=>Ye});function Ye(t,e="utf8"){let r=C3[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var ht=tt(()=>{f();Cv()});var kv=g((jit,RN)=>{f();"use strict";var xN="[a-fA-F\\d:]",Ru=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${xN})|(?<=${xN})(?=\\s|$))`:"",_o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ii="[a-fA-F\\d]{1,4}",O3=`
(?:
(?:${ii}:){7}(?:${ii}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${ii}:){6}(?:${_o}|:${ii}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${ii}:){5}(?::${_o}|(?::${ii}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${ii}:){4}(?:(?::${ii}){0,1}:${_o}|(?::${ii}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${ii}:){3}(?:(?::${ii}){0,2}:${_o}|(?::${ii}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${ii}:){2}(?:(?::${ii}){0,3}:${_o}|(?::${ii}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${ii}:){1}(?:(?::${ii}){0,4}:${_o}|(?::${ii}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${ii}){0,5}:${_o}|(?::${ii}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),L8e=new RegExp(`(?:^${_o}$)|(?:^${O3}$)`),M8e=new RegExp(`^${_o}$`),j8e=new RegExp(`^${O3}$`),Ov=t=>t&&t.exact?L8e:new RegExp(`(?:${Ru(t)}${_o}${Ru(t)})|(?:${Ru(t)}${O3}${Ru(t)})`,"g");Ov.v4=t=>t&&t.exact?M8e:new RegExp(`${Ru(t)}${_o}${Ru(t)}`,"g");Ov.v6=t=>t&&t.exact?j8e:new RegExp(`${Ru(t)}${O3}${Ru(t)}`,"g");RN.exports=Ov});var Nv=g((qit,IN)=>{f();"use strict";var Dv=kv(),Pd=t=>Dv({exact:!0}).test(t);Pd.v4=t=>Dv.v4({exact:!0}).test(t);Pd.v6=t=>Dv.v6({exact:!0}).test(t);Pd.version=t=>Pd(t)?Pd.v4(t)?4:6:void 0;IN.exports=Pd});var rr={};kt(rr,{toString:()=>He});function He(t,e="utf8"){let r=C3[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var Qe=tt(()=>{f();Cv()});var kN=g((Fit,ON)=>{f();"use strict";var Bv=Nv(),{toString:TN}=(Qe(),rr),q8e=Bv,Lv=Bv.v4,PN=Bv.v6,CN=function(t,e,r){r=~~r;let i;if(Lv(t))i=e||new Uint8Array(r+4),t.split(/\./g).map(function(n){i[r++]=parseInt(n,10)&255});else if(PN(t)){let n=t.split(":",8),s;for(s=0;s<n.length;s++){let o=Lv(n[s]),a;o&&(a=CN(n[s]),n[s]=TN(a.slice(0,2),"base16")),a&&++s<8&&n.splice(s,0,TN(a.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(s=0;s<n.length&&n[s]!=="";s++);let o=[s,"1"];for(s=9-n.length;s>0;s--)o.push("0");n.splice.apply(n,o)}for(i=e||new Uint8Array(r+16),s=0;s<n.length;s++){let o=parseInt(n[s],16);i[r++]=o>>8&255,i[r++]=o&255}}if(!i)throw Error("Invalid ip address: "+t);return i},U8e=function(t,e,r){e=~~e,r=r||t.length-e;let i=[],n,s=new DataView(t.buffer);if(r===4){for(let o=0;o<r;o++)i.push(t[e+o]);n=i.join(".")}else if(r===16){for(let o=0;o<r;o+=2)i.push(s.getUint16(e+o).toString(16));n=i.join(":"),n=n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),n=n.replace(/:{3,4}/,"::")}return n};ON.exports={isIP:q8e,isV4:Lv,isV6:PN,toBytes:CN,toString:U8e}});var f2=g((Kit,NN)=>{f();"use strict";function Pn(t){if(typeof t=="number"){if(Pn.codes[t])return Pn.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(Pn.names[t])return Pn.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var Ss=-1;Pn.lengthPrefixedVarSize=Ss;Pn.V=Ss;Pn.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Ss,"ip6zone"],[53,Ss,"dns","resolvable"],[54,Ss,"dns4","resolvable"],[55,Ss,"dns6","resolvable"],[56,Ss,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Ss,"unix",!1,"path"],[421,Ss,"ipfs"],[421,Ss,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Ss,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Ss,"memory"]];Pn.names={};Pn.codes={};Pn.table.map(t=>{let e=DN.apply(null,t);return Pn.codes[e.code]=e,Pn.names[e.name]=e,null});Pn.object=DN;function DN(t,e,r,i,n){return{code:t,size:e,name:r,resolvable:Boolean(i),path:Boolean(n)}}NN.exports=Pn});var MN=g((Vit,LN)=>{f();LN.exports=Mv;var BN=128,F8e=127,K8e=~F8e,V8e=Math.pow(2,31);function Mv(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw Mv.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var i=r;t>=V8e;)e[r++]=t&255|BN,t/=128;for(;t&K8e;)e[r++]=t&255|BN,t>>>=7;return e[r]=t|0,Mv.bytes=r-i+1,e}});var UN=g((zit,qN)=>{f();qN.exports=jv;var z8e=128,jN=127;function jv(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o||i>49)throw jv.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&jN)<<i:(s&jN)*Math.pow(2,i),i+=7}while(s>=z8e);return jv.bytes=n-e,r}});var KN=g((Hit,FN)=>{f();var H8e=Math.pow(2,7),$8e=Math.pow(2,14),G8e=Math.pow(2,21),W8e=Math.pow(2,28),Y8e=Math.pow(2,35),X8e=Math.pow(2,42),Q8e=Math.pow(2,49),Z8e=Math.pow(2,56),J8e=Math.pow(2,63);FN.exports=function(t){return t<H8e?1:t<$8e?2:t<G8e?3:t<W8e?4:t<Y8e?5:t<X8e?6:t<Q8e?7:t<Z8e?8:t<J8e?9:10}});var Cn=g(($it,VN)=>{f();VN.exports={encode:MN(),decode:UN(),encodingLength:KN()}});var As={};kt(As,{concat:()=>ji});function ji(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));let r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var Wi=tt(()=>{f()});var QN=g((Git,XN)=>{f();"use strict";var k3=kN(),zN=f2(),{CID:ewe}=(ye(),_u),{base32:HN}=(Mi(),dc),{base58btc:twe}=(Yr(),mo),rwe=(Gi(),bd),Cd=Cn(),{toString:D3}=(Qe(),rr),{fromString:$N}=(ht(),ri),{concat:N3}=(Wi(),As);XN.exports=h2;function h2(t,e){return e instanceof Uint8Array?h2.toString(t,e):h2.toBytes(t,e)}h2.toString=function(e,r){switch(zN(e).code){case 4:case 41:return iwe(r);case 6:case 273:case 33:case 132:return WN(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return swe(r);case 421:return awe(r);case 444:return YN(r);case 445:return YN(r);default:return D3(r,"base16")}};h2.toBytes=function(e,r){switch(zN(e).code){case 4:return GN(r);case 41:return GN(r);case 6:case 273:case 33:case 132:return qv(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return nwe(r);case 421:return owe(r);case 444:return cwe(r);case 445:return uwe(r);default:return $N(r,"base16")}};function GN(t){if(!k3.isIP(t))throw new Error("invalid ip address");return k3.toBytes(t)}function iwe(t){let e=k3.toString(t);if(!e||!k3.isIP(e))throw new Error("invalid ip address");return e}function qv(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function WN(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function nwe(t){let e=$N(t),r=Uint8Array.from(Cd.encode(e.length));return N3([r,e],r.length+e.length)}function swe(t){let e=Cd.decode(t);if(t=t.slice(Cd.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return D3(t)}function owe(t){let e;t[0]==="Q"||t[0]==="1"?e=rwe.decode(twe.decode(`z${t}`)).bytes:e=ewe.parse(t).multihash.bytes;let r=Uint8Array.from(Cd.encode(e.length));return N3([r,e],r.length+e.length)}function awe(t){let e=Cd.decode(t),r=t.slice(Cd.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return D3(r,"base58btc")}function cwe(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=HN.decode("b"+e[0]),i=parseInt(e[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");let n=qv(i);return N3([r,n],r.length+n.length)}function uwe(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=HN.decode("b"+e[0]),i=parseInt(e[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");let n=qv(i);return N3([r,n],r.length+n.length)}function YN(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),i=D3(e,"base32"),n=WN(r);return i+":"+n}});var uB=g((Wit,cB)=>{f();"use strict";var ZN=QN(),Uv=f2(),d2=Cn(),{concat:JN}=(Wi(),As),{toString:lwe}=(Qe(),rr);cB.exports={stringToStringTuples:eB,stringTuplesToString:tB,tuplesToStringTuples:iB,stringTuplesToTuples:rB,bytesToTuples:Fv,tuplesToBytes:nB,bytesToString:fwe,stringToBytes:oB,fromString:hwe,fromBytes:aB,validateBytes:Kv,isValidBytes:dwe,cleanPath:B3,ParseError:Vv,protoFromTuple:p2,sizeForAddr:sB};function eB(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let i=0;i<r.length;i++){let n=r[i],s=Uv(n);if(s.size===0){e.push([n]);continue}if(i++,i>=r.length)throw Vv("invalid address: "+t);if(s.path){e.push([n,B3(r.slice(i).join("/"))]);break}e.push([n,r[i]])}return e}function tB(t){let e=[];return t.map(r=>{let i=p2(r);return e.push(i.name),r.length>1&&e.push(r[1]),null}),B3(e.join("/"))}function rB(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=p2(e);return e.length>1?[r.code,ZN.toBytes(r.code,e[1])]:[r.code]})}function iB(t){return t.map(e=>{let r=p2(e);return e[1]?[r.code,ZN.toString(r.code,e[1])]:[r.code]})}function nB(t){return aB(JN(t.map(e=>{let r=p2(e),i=Uint8Array.from(d2.encode(r.code));return e.length>1&&(i=JN([i,e[1]])),i})))}function sB(t,e){return t.size>0?t.size/8:t.size===0?0:d2.decode(e)+d2.decode.bytes}function Fv(t){let e=[],r=0;for(;r<t.length;){let i=d2.decode(t,r),n=d2.decode.bytes,s=Uv(i),o=sB(s,t.slice(r+n));if(o===0){e.push([i]),r+=n;continue}let a=t.slice(r+n,r+n+o);if(r+=o+n,r>t.length)throw Vv("Invalid address Uint8Array: "+lwe(t,"base16"));e.push([i,a])}return e}function fwe(t){let e=Fv(t),r=iB(e);return tB(r)}function oB(t){t=B3(t);let e=eB(t),r=rB(e);return nB(r)}function hwe(t){return oB(t)}function aB(t){let e=Kv(t);if(e)throw e;return Uint8Array.from(t)}function Kv(t){try{Fv(t)}catch(e){return e}}function dwe(t){return Kv(t)===void 0}function B3(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Vv(t){return new Error("Error parsing address: "+t)}function p2(t){return Uv(t[0])}});var hB=g((Yit,fB)=>{f();"use strict";function lB(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function pwe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return lB(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),lB(new n,r)}}fB.exports=pwe});var Zn={};kt(Zn,{equals:()=>aa});function aa(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var qi=tt(()=>{f()});var ct=g((Xit,yB)=>{f();"use strict";var vo=uB(),Od=f2(),dB=Cn(),{CID:ywe}=(ye(),_u),{base58btc:gwe}=(Yr(),mo),mwe=hB(),bwe=Symbol.for("nodejs.util.inspect.custom"),{toString:L3}=(Qe(),rr),{equals:wwe}=(qi(),Zn),zv=new Map,pB=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ln=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,pB,{value:!0}),e instanceof Uint8Array)this.bytes=vo.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=vo.fromString(e)}else if(ln.isMultiaddr(e))this.bytes=vo.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return vo.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},Od(e)))}protoCodes(){let e=[],r=this.bytes,i=0;for(;i<r.length;){let n=dB.decode(r,i),s=dB.decode.bytes,o=Od(n);i+=vo.sizeForAddr(o,r.slice(i+s))+s,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return vo.bytesToTuples(this.bytes)}stringTuples(){let e=vo.bytesToTuples(this.bytes);return vo.tuplesToStringTuples(e)}encapsulate(e){return e=new ln(e),new ln(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),i=this.toString(),n=i.lastIndexOf(r);if(n<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new ln(i.slice(0,n))}decapsulateCode(e){let r=this.tuples();for(let i=r.length-1;i>=0;i--)if(r[i][0]===e)return new ln(vo.tuplesToBytes(r.slice(0,i)));return this}getPeerId(){try{let r=this.stringTuples().filter(i=>i[0]===Od.names.ipfs.code).pop();if(r&&r[1]){let i=r[1];return i[0]==="Q"||i[0]==="1"?L3(gwe.decode(`z${i}`),"base58btc"):L3(ywe.parse(i).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!Od(r[0]).path)[0][1],e||(e=null)}catch(r){e=null}return e}equals(e){return wwe(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(n=>n.resolvable);if(!e)return[this];let r=zv.get(e.name);if(!r)throw mwe(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(n=>new ln(n))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),i=this.toString().split("/").slice(1);if(i.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(i[2]!=="tcp"&&i[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:i[1],port:parseInt(i[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let i;switch(e.family){case 4:i="ip4";break;case 6:i="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new ln("/"+[i,e.address,r,e.port].join("/"))}static isName(e){return ln.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof ln||Boolean(e&&e[pB])}[bwe](){return"<Multiaddr "+L3(this.bytes,"base16")+" - "+vo.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+L3(this.bytes,"base16")+" - "+vo.bytesToString(this.bytes)+">"}};ln.protocols=Od;ln.resolvers=zv;function _we(t){return new ln(t)}yB.exports={Multiaddr:ln,multiaddr:_we,protocols:Od,resolvers:zv}});var af=g((Qit,xB)=>{f();"use strict";var{Multiaddr:Hv}=ct(),gB=Ze("dns4"),mB=Ze("dns6"),bB=Ze("dnsaddr"),of=Yi(Ze("dns"),bB,gB,mB),y2=Yi(Ze("ip4"),Ze("ip6")),kd=Yi(yt(y2,Ze("tcp")),yt(of,Ze("tcp"))),$v=yt(y2,Ze("udp")),wB=yt($v,Ze("utp")),_B=yt($v,Ze("quic")),Dd=Yi(yt(kd,Ze("ws")),yt(of,Ze("ws"))),Nd=Yi(yt(kd,Ze("wss")),yt(of,Ze("wss"))),M3=Yi(yt(kd,Ze("http")),yt(y2,Ze("http")),yt(of,Ze("http"))),j3=Yi(yt(kd,Ze("https")),yt(y2,Ze("https")),yt(of,Ze("https"))),Gv=Yi(yt(Dd,Ze("p2p-webrtc-star"),Ze("p2p")),yt(Nd,Ze("p2p-webrtc-star"),Ze("p2p")),yt(Dd,Ze("p2p-webrtc-star")),yt(Nd,Ze("p2p-webrtc-star"))),vwe=Yi(yt(Dd,Ze("p2p-websocket-star"),Ze("p2p")),yt(Nd,Ze("p2p-websocket-star"),Ze("p2p")),yt(Dd,Ze("p2p-websocket-star")),yt(Nd,Ze("p2p-websocket-star"))),Wv=Yi(yt(M3,Ze("p2p-webrtc-direct"),Ze("p2p")),yt(j3,Ze("p2p-webrtc-direct"),Ze("p2p")),yt(M3,Ze("p2p-webrtc-direct")),yt(j3,Ze("p2p-webrtc-direct"))),Bd=Yi(Dd,Nd,M3,j3,Gv,Wv,kd,wB,_B,of),Ewe=Yi(yt(Bd,Ze("p2p-stardust"),Ze("p2p")),yt(Bd,Ze("p2p-stardust"))),Iu=Yi(yt(Bd,Ze("p2p")),Gv,Wv,Ze("p2p")),vB=Yi(yt(Iu,Ze("p2p-circuit"),Iu),yt(Iu,Ze("p2p-circuit")),yt(Ze("p2p-circuit"),Iu),yt(Bd,Ze("p2p-circuit")),yt(Ze("p2p-circuit"),Bd),Ze("p2p-circuit")),EB=()=>Yi(yt(vB,EB),vB),Ld=EB(),SB=Yi(yt(Ld,Iu,Ld),yt(Iu,Ld),yt(Ld,Iu),Ld,Iu);xB.exports={DNS:of,DNS4:gB,DNS6:mB,DNSADDR:bB,IP:y2,TCP:kd,UDP:$v,QUIC:_B,UTP:wB,HTTP:M3,HTTPS:j3,WebSockets:Dd,WebSocketsSecure:Nd,WebSocketStar:vwe,WebRTCStar:Gv,WebRTCDirect:Wv,Reliable:Bd,Stardust:Ewe,Circuit:Ld,P2P:SB,IPFS:SB};function AB(t){function e(r){if(!Hv.isMultiaddr(r))try{r=new Hv(r)}catch(n){return!1}let i=t(r.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function yt(...t){function e(r){if(r.length<t.length)return null;let i=r;return t.some(n=>(i=typeof n=="function"?n().partialMatch(r):n.partialMatch(r),Array.isArray(i)&&(r=i),i===null)),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:AB(e),partialMatch:e}}function Yi(...t){function e(i){let n=null;return t.some(s=>{let o=typeof s=="function"?s().partialMatch(i):s.partialMatch(i);return o?(n=o,!0):!1}),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:AB(e),partialMatch:e}}function Ze(t){let e=t;function r(n){let s;if(typeof n=="string"||n instanceof Uint8Array)try{s=new Hv(n)}catch(a){return!1}else s=n;let o=s.protoNames();return o.length===1&&o[0]===e}function i(n){return n.length===0?null:n[0]===e?n.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:i}}});var Yv=g((Zit,TB)=>{f();"use strict";var Swe=typeof navigator!="undefined"&&navigator.product==="ReactNative";function Awe(){return Swe?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var g2=self.URL,RB=Awe(),IB=class{constructor(e="",r=RB){this.super=new g2(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return g2.createObjectURL(e)}static revokeObjectURL(e){g2.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function xwe(t){if(typeof t=="string")return new g2(t).toString();if(!(t instanceof g2)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",i=t.port?":"+t.port:"",n=t.protocol?t.protocol+"//":"",s=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"",l=t.path||u+a;return`${n}${e||r}${s||o+i}${l}${c}`}}TB.exports={URLWithLegacySupport:IB,URLSearchParams:self.URLSearchParams,defaultBase:RB,format:xwe}});var OB=g((Jit,CB)=>{f();"use strict";var{URLWithLegacySupport:PB,format:Rwe}=Yv();CB.exports=(t,e={},r={},i)=>{let n=e.protocol?e.protocol.replace(":",""):"http";n=(r[n]||i||n)+":";let s;try{s=new PB(t)}catch(a){s={}}let o=Object.assign({},e,{protocol:n||s.protocol,host:e.host||s.host});return new PB(t,Rwe(o)).toString()}});var q3=g((ent,kB)=>{f();"use strict";var{URLWithLegacySupport:Iwe,format:Twe,URLSearchParams:Pwe,defaultBase:Cwe}=Yv(),Owe=OB();kB.exports={URL:Iwe,URLSearchParams:Pwe,format:Twe,relative:Owe,defaultBase:Cwe}});var jd=g((tnt,HB)=>{f();"use strict";var{base58btc:kwe}=(Yr(),mo),{base32:Dwe}=(Mi(),dc),Nwe=(Gi(),bd),{Multiaddr:DB}=ct(),Bwe=af(),{CID:Xv}=(ye(),_u),{URL:Lwe}=q3(),{toString:Mwe}=(Qe(),rr),Qv=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,Md=/^\/(ip[fn]s)\/([^/?#]+)/,NB=1,BB=2,m2=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,LB=1,MB=2,jwe=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function qwe(t){let e=Zv(t);try{Nwe.decode(kwe.decode("z"+e))}catch{return!1}return!0}function Uwe(t){try{Dwe.decode(t)}catch{return!1}return!0}function b2(t){try{return typeof t=="string"?Boolean(Xv.parse(t)):t instanceof Uint8Array?Boolean(Xv.decode(t)):Boolean(Xv.asCID(t))}catch(e){return!1}}function jB(t){if(!t)return!1;if(DB.isMultiaddr(t))return!0;try{return new DB(t),!0}catch(e){return!1}}function Fwe(t){return jB(t)&&Bwe.P2P.matches(t)}function w2(t,e,r=NB,i=BB){let n=Zv(t);if(!n)return!1;let s=n.match(e);if(!s||s[r]!=="ipfs")return!1;let o=s[i];return o&&e===m2&&(o=o.toLowerCase()),b2(o)}function U3(t,e,r=NB,i=BB){let n=Zv(t);if(!n)return!1;let s=n.match(e);if(!s||s[r]!=="ipns")return!1;let o=s[i];if(o&&e===m2){if(o=o.toLowerCase(),b2(o))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:a}=new Lwe(`http://${o}`);return jwe.test(a)}catch(a){return!1}}return!0}function qB(t){return typeof t=="string"}function Zv(t){return t instanceof Uint8Array?Mwe(t,"base58btc"):qB(t)?t:!1}var Jv=t=>w2(t,m2,MB,LB),e7=t=>U3(t,m2,MB,LB),UB=t=>Jv(t)||e7(t),FB=t=>w2(t,Qv)||Jv(t),KB=t=>U3(t,Qv)||e7(t),VB=t=>FB(t)||KB(t)||UB(t),zB=t=>w2(t,Md)||U3(t,Md);HB.exports={multihash:qwe,multiaddr:jB,peerMultiaddr:Fwe,cid:b2,base32cid:t=>Uwe(t)&&b2(t),ipfsSubdomain:Jv,ipnsSubdomain:e7,subdomain:UB,subdomainGatewayPattern:m2,ipfsUrl:FB,ipnsUrl:KB,url:VB,pathGatewayPattern:Qv,ipfsPath:t=>w2(t,Md),ipnsPath:t=>U3(t,Md),path:zB,pathPattern:Md,urlOrPath:t=>VB(t)||zB(t),cidPath:t=>qB(t)&&!b2(t)&&w2(`/ipfs/${t}`,Md)}});var $B,GB=tt(()=>{f();$B="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var r7={};kt(r7,{customAlphabet:()=>Kwe,customRandom:()=>YB,nanoid:()=>t7,random:()=>WB,urlAlphabet:()=>$B});var WB,YB,Kwe,t7,F3=tt(()=>{f();GB();WB=t=>crypto.getRandomValues(new Uint8Array(t)),YB=(t,e,r)=>{let i=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*i*e/t.length);return()=>{let s="";for(;;){let o=r(n),a=n;for(;a--;)if(s+=t[o[a]&i]||"",s.length===e)return s}}},Kwe=(t,e)=>YB(t,e,WB),t7=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let i=r[t]&63;i<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i<63?e+="_":e+="-"}return e}});var qd={};kt(qd,{Key:()=>Te});function Vwe(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function zwe(t){let e=t.split(":");return e[e.length-1]}function Hwe(t){return[].concat(...t)}var mc,XB,K3,Te,Ar=tt(()=>{f();F3();Qe();ht();mc="/",XB=new TextEncoder().encode(mc),K3=XB[0],Te=class{constructor(e,r){if(typeof e=="string")this._buf=Ye(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==K3)throw new Error("Invalid key")}toString(e="utf8"){return He(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Te(e.join(mc))}static random(){return new Te(t7().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Te(e):e.uint8Array?new Te(e.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=XB),this._buf[0]!==K3){let e=new Uint8Array(this._buf.byteLength+1);e.fill(K3,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===K3;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),i=e.list();for(let n=0;n<r.length;n++){if(i.length<n+1)return!1;let s=r[n],o=i[n];if(s<o)return!0;if(s>o)return!1}return r.length<i.length}reverse(){return Te.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(mc).slice(1)}type(){return Vwe(this.baseNamespace())}name(){return zwe(this.baseNamespace())}instance(e){return new Te(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(mc)||(e+=mc),e+=this.type(),new Te(e)}parent(){let e=this.list();return e.length===1?new Te(mc):new Te(e.slice(0,-1).join(mc))}child(e){return this.toString()===mc?e:e.toString()===mc?this:new Te(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Te.withNamespaces([...this.namespaces(),...Hwe(e.map(r=>r.namespaces()))])}}});var z3=g((ant,V3)=>{f();"use strict";var{AbortController:QB,AbortSignal:$we}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;V3.exports=QB;V3.exports.AbortSignal=$we;V3.exports.default=QB});var Ii=g((cnt,i7)=>{f();"use strict";var H3;globalThis.AbortController&&globalThis.AbortSignal?H3=globalThis:H3=z3();i7.exports.AbortSignal=H3.AbortSignal;i7.exports.AbortController=H3.AbortController});var JB=g((unt,ZB)=>{f();"use strict";ZB.exports=function(){return Date.now()}});var _2=g((lnt,tL)=>{f();"use strict";var $3=JB(),eL=class{constructor(e,r,i){let n=this;this._started=$3(),this._rescheduled=0,this._scheduled=r,this._args=i,this._triggered=!1,this._timerWrapper=()=>{n._rescheduled>0?(n._scheduled=n._rescheduled-($3()-n._started),n._schedule(n._scheduled)):(n._triggered=!0,e.apply(null,n._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=$3();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=$3(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function Gwe(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new eL(arguments[0],arguments[1],t)}tL.exports=Gwe});var ca=g((fnt,iL)=>{f();"use strict";var{AbortController:Wwe}=Ii(),rL=_2(),G3=class extends Wwe{constructor(e){super();this._ms=e,this._timer=rL(()=>this.abort(),e),Object.setPrototypeOf(this,G3.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=rL(()=>this.abort(),this._ms)}};iL.exports={TimeoutController:G3}});var Eo=g((hnt,n7)=>{f();var{AbortController:Ywe}=Ii();function nL(t){let e=new Ywe;function r(){e.abort();for(let i of t)!i||!i.removeEventListener||i.removeEventListener("abort",r)}for(let i of t)if(!(!i||!i.addEventListener)){if(i.aborted){r();break}i.addEventListener("abort",r)}return e.signal}n7.exports=nL;n7.exports.anySignal=nL});var cf=g((bnt,uL)=>{f();"use strict";function cL(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Qwe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return cL(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),cL(new n,r)}}uL.exports=Qwe});var Fd=g((Nnt,gL)=>{f();gL.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),i=Object.create(null);function n(s,o){r[s]=o,e++,e>=t&&(e=0,i=r,r=Object.create(null))}return{has:function(s){return r[s]!==void 0||i[s]!==void 0},remove:function(s){r[s]!==void 0&&(r[s]=void 0),i[s]!==void 0&&(i[s]=void 0)},get:function(s){var o=r[s];if(o!==void 0)return o;if((o=i[s])!==void 0)return n(s,o),o},set:function(s,o){r[s]!==void 0?r[s]=o:n(s,o)},clear:function(){r=Object.create(null),i=Object.create(null)}}}});var wL=g((Lnt,c7)=>{f();"use strict";var Jwe=Object.prototype.hasOwnProperty,hn="~";function S2(){}Object.create&&(S2.prototype=Object.create(null),new S2().__proto__||(hn=!1));function e_e(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function bL(t,e,r,i,n){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new e_e(r,i||t,n),o=hn?hn+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function X3(t,e){--t._eventsCount==0?t._events=new S2:delete t._events[e]}function Xi(){this._events=new S2,this._eventsCount=0}Xi.prototype.eventNames=function(){var e=[],r,i;if(this._eventsCount===0)return e;for(i in r=this._events)Jwe.call(r,i)&&e.push(hn?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Xi.prototype.listeners=function(e){var r=hn?hn+e:e,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o};Xi.prototype.listenerCount=function(e){var r=hn?hn+e:e,i=this._events[r];return i?i.fn?1:i.length:0};Xi.prototype.emit=function(e,r,i,n,s,o){var a=hn?hn+e:e;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,l,h;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,i),!0;case 4:return c.fn.call(c.context,r,i,n),!0;case 5:return c.fn.call(c.context,r,i,n,s),!0;case 6:return c.fn.call(c.context,r,i,n,s,o),!0}for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var d=c.length,p;for(h=0;h<d;h++)switch(c[h].once&&this.removeListener(e,c[h].fn,void 0,!0),u){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,r);break;case 3:c[h].fn.call(c[h].context,r,i);break;case 4:c[h].fn.call(c[h].context,r,i,n);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];c[h].fn.apply(c[h].context,l)}}return!0};Xi.prototype.on=function(e,r,i){return bL(this,e,r,i,!1)};Xi.prototype.once=function(e,r,i){return bL(this,e,r,i,!0)};Xi.prototype.removeListener=function(e,r,i,n){var s=hn?hn+e:e;if(!this._events[s])return this;if(!r)return X3(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!n||o.once)&&(!i||o.context===i)&&X3(this,s);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==r||n&&!o[a].once||i&&o[a].context!==i)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:X3(this,s)}return this};Xi.prototype.removeAllListeners=function(e){var r;return e?(r=hn?hn+e:e,this._events[r]&&X3(this,r)):(this._events=new S2,this._eventsCount=0),this};Xi.prototype.off=Xi.prototype.removeListener;Xi.prototype.addListener=Xi.prototype.on;Xi.prefixed=hn;Xi.EventEmitter=Xi;typeof c7!="undefined"&&(c7.exports=Xi)});var vL=g((Mnt,_L)=>{f();"use strict";_L.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(i=>{i(e())}).then(()=>r),r=>new Promise(i=>{i(e())}).then(()=>{throw r})))});var SL=g((jnt,Q3)=>{f();"use strict";var t_e=vL(),u7=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},EL=(t,e,r)=>new Promise((i,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){i(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{i(r())}catch(c){n(c)}return}let o=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,a=r instanceof Error?r:new u7(o);typeof t.cancel=="function"&&t.cancel(),n(a)},e);t_e(t.then(i,n),()=>{clearTimeout(s)})});Q3.exports=EL;Q3.exports.default=EL;Q3.exports.TimeoutError=u7});var AL=g(l7=>{f();"use strict";Object.defineProperty(l7,"__esModule",{value:!0});function r_e(t,e,r){let i=0,n=t.length;for(;n>0;){let s=n/2|0,o=i+s;r(t[o],e)<=0?(i=++o,n-=s+1):n=s}return i}l7.default=r_e});var RL=g(f7=>{f();"use strict";Object.defineProperty(f7,"__esModule",{value:!0});var i_e=AL(),xL=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let i={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(i);return}let n=i_e.default(this._queue,i,(s,o)=>o.priority-s.priority);this._queue.splice(n,0,i)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};f7.default=xL});var So=g(h7=>{f();"use strict";Object.defineProperty(h7,"__esModule",{value:!0});var n_e=wL(),IL=SL(),s_e=RL(),Z3=()=>{},o_e=new IL.TimeoutError,TL=class extends n_e{constructor(e){var r,i,n,s;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Z3,this._resolveIdle=Z3,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s_e.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(i=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Z3,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Z3,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((i,n)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?e():IL.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&n(o_e)});i(await o)}catch(o){n(o)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async i=>this.add(i,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};h7.default=TL});var d7=g(J3=>{f();"use strict";var PL=class extends Error{constructor(e="Request timed out"){super(e);this.name="TimeoutError"}};J3.TimeoutError=PL;var CL=class extends Error{constructor(e="The operation was aborted."){super(e);this.name="AbortError"}};J3.AbortError=CL;var OL=class extends Error{constructor(e){super(e.statusText);this.name="HTTPError",this.response=e}};J3.HTTPError=OL});var kL=g(()=>{f()});var A2=g((Kd,DL)=>{f();"use strict";var a_e=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof wc!="undefined")return wc;throw new Error("unable to locate global object")},wc=a_e();DL.exports=Kd=wc.fetch;wc.fetch&&(Kd.default=wc.fetch.bind(wc));Kd.Headers=wc.Headers;Kd.Request=wc.Request;Kd.Response=wc.Response});var y7=g((Hnt,p7)=>{f();"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?p7.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:p7.exports={default:A2().default,Headers:A2().Headers,Request:A2().Request,Response:A2().Response}});var NL=g(($nt,g7)=>{f();"use strict";var{isElectronMain:c_e}=K1();c_e?g7.exports=kL():g7.exports=y7()});var jL=g((Gnt,ML)=>{f();"use strict";var{TimeoutError:u_e,AbortError:l_e}=d7(),{Response:BL,Request:f_e,Headers:m7,default:h_e}=NL(),d_e=(t,e={})=>{let r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);let{timeout:i,headers:n}=e;if(i&&i>0&&i<1/0&&(r.timeout=i),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),n)for(let[s,o]of new m7(n))r.setRequestHeader(s,o);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((s,o)=>{let a=c=>{switch(c.type){case"error":{s(BL.error());break}case"load":{s(new LL(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:g_e(r.getAllResponseHeaders())}));break}case"timeout":{o(new u_e);break}case"abort":{o(new l_e);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(e.body)})},p_e=h_e,y_e=(t,e={})=>e.onUploadProgress!=null?d_e(t,e):p_e(t,e),g_e=t=>{let e=new m7;for(let r of t.trim().split(/[\r\n]+/)){let i=r.indexOf(": ");i>0&&e.set(r.slice(0,i),r.slice(i+1))}return e},LL=class extends BL{constructor(e,r,i){super(r,i);Object.defineProperty(this,"url",{value:e})}};ML.exports={fetch:y_e,Request:f_e,Headers:m7}});var Vd=g((Wnt,zL)=>{f();"use strict";var{fetch:m_e,Request:b_e,Headers:w_e}=jL(),{TimeoutError:b7,HTTPError:qL}=d7(),UL=du().bind({ignoreUndefined:!0}),{URL:FL,URLSearchParams:KL}=q3(),{AbortController:__e}=Ii(),v_e=Eo(),E_e=(t,e,r)=>{if(e===void 0)return t;let i=Date.now(),n=()=>Date.now()-i>=e;return new Promise((s,o)=>{let a=setTimeout(()=>{n()&&(o(new b7),r.abort())},e),c=u=>h=>{if(clearTimeout(a),n()){o(new b7);return}u(h)};t.then(c(s),c(o))})},S_e={throwHttpErrors:!0,credentials:"same-origin"},dn=class{constructor(e={}){this.opts=UL(S_e,e)}async fetch(e,r={}){let i=UL(this.opts,r),n=new w_e(i.headers);if(typeof e!="string"&&!(e instanceof FL||e instanceof b_e))throw new TypeError("`resource` must be a string, URL, or Request");let s=new FL(e.toString(),i.base),{searchParams:o,transformSearchParams:a,json:c}=i;o&&(typeof a=="function"?s.search=a(new KL(i.searchParams)):s.search=new KL(i.searchParams)),c&&(i.body=JSON.stringify(i.json),n.set("content-type","application/json"));let u=new __e,l=v_e([u.signal,i.signal]),h=await E_e(m_e(s.toString(),{...i,signal:l,timeout:void 0,headers:n}),i.timeout,u);if(!h.ok&&i.throwHttpErrors)throw i.handleError&&await i.handleError(h),new qL(h);return h.iterator=function(){return VL(h.body)},h.ndjson=async function*(){for await(let d of A_e(h.iterator()))r.transform?yield r.transform(d):yield d},h}post(e,r={}){return this.fetch(e,{...r,method:"POST"})}get(e,r={}){return this.fetch(e,{...r,method:"GET"})}put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}},A_e=async function*(t){let e=new TextDecoder,r="";for await(let i of t){r+=e.decode(i,{stream:!0});let n=r.split(/\r?\n/);for(let s=0;s<n.length-1;s++){let o=n[s].trim();o.length>0&&(yield JSON.parse(o))}r=n[n.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},VL=t=>{if(I_e(t)){let e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(R_e(t)){let e=t.getReader();return async function*(){try{for(;;){let{done:r,value:i}=await e.read();if(r)return;i&&(yield i)}}finally{e.releaseLock()}}()}if(x_e(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},x_e=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",R_e=t=>t&&typeof t.getReader=="function",I_e=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");dn.HTTPError=qL;dn.TimeoutError=b7;dn.streamToAsyncIterator=VL;dn.post=(t,e)=>new dn(e).post(t,e);dn.get=(t,e)=>new dn(e).get(t,e);dn.put=(t,e)=>new dn(e).put(t,e);dn.delete=(t,e)=>new dn(e).delete(t,e);dn.options=(t,e)=>new dn(e).options(t,e);zL.exports=dn});var r4=g((tst,QL)=>{f();"use strict";var uf=Si(),t4=uf.Reader,XL=uf.Writer,Qi=uf.util,xs=uf.roots["libp2p-crypto-keys"]||(uf.roots["libp2p-crypto-keys"]={});xs.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();xs.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Qi.newBuffer([]),t.encode=function(r,i){return i||(i=XL.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof t4||(r=t4.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new xs.PublicKey;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Qi.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Qi.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof xs.PublicKey)return r;var i=new xs.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Qi.base64.decode(r.Data,i.Data=Qi.newBuffer(Qi.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Qi.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?xs.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Qi.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,uf.util.toJSONOptions)},t}();xs.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Qi.newBuffer([]),t.encode=function(r,i){return i||(i=XL.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof t4||(r=t4.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new xs.PrivateKey;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Qi.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Qi.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof xs.PrivateKey)return r;var i=new xs.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Qi.base64.decode(r.Data,i.Data=Qi.newBuffer(Qi.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Qi.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?xs.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Qi.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,uf.util.toJSONOptions)},t}();QL.exports=xs});var vt=g((rst,ZL)=>{f();ZL.exports={options:{usePureJavaScript:!1}}});var tM=g((ist,eM)=>{f();var _7={};eM.exports=_7;var JL={};_7.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=k_e(t,e);else{var n=0,s=e.length,o=e.charAt(0),a=[0];for(n=0;n<t.length;++n){for(var c=0,u=t[n];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=o;for(n=a.length-1;n>=0;--n)i+=e[a[n]]}if(r){var l=new RegExp(".{1,"+r+"}","g");i=i.match(l).join(`\r
`)}return i};_7.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=JL[e];if(!r){r=JL[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),o=[0],i=0;i<t.length;i++){var a=r[t.charCodeAt(i)];if(a===void 0)return;for(var c=0,u=a;c<o.length;++c)u+=o[c]*n,o[c]=u&255,u>>=8;for(;u>0;)o.push(u&255),u>>=8}for(var l=0;t[l]===s&&l<t.length-1;++l)o.push(0);return typeof Buffer!="undefined"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function k_e(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%i,a=a/i|0;for(;a>0;)s.push(a%i),a=a/i|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=n;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}});var fr=g((nst,sM)=>{f();var rM=vt(),iM=tM(),H=sM.exports=rM.util=rM.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){H.nextTick=process.nextTick,typeof setImmediate=="function"?H.setImmediate=setImmediate:H.setImmediate=H.nextTick;return}if(typeof setImmediate=="function"){H.setImmediate=function(){return setImmediate.apply(void 0,arguments)},H.nextTick=function(a){return setImmediate(a)};return}if(H.setImmediate=function(a){setTimeout(a,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(l){l()})}};var o=a,t="forge.setImmediate",e=[];H.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(n,{attributes:!0});var s=H.setImmediate;H.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(e.push(c),e.length===1&&n.setAttribute("a",i=!i))}}H.nextTick=H.setImmediate})();H.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;H.globalScope=function(){return H.isNodejs?globalThis:typeof self=="undefined"?window:self}();H.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};H.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};H.isArrayBufferView=function(t){return t&&H.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function x2(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}H.ByteBuffer=v7;function v7(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(H.isArrayBuffer(t)||H.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof v7||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}H.ByteStringBuffer=v7;var D_e=4096;H.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>D_e&&(this.data.substr(0,1),this._constructedStringLength=0)};H.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};H.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};H.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};H.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};H.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};H.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(H.encodeUtf8(t))};H.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};H.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};H.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};H.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};H.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};H.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};H.ByteStringBuffer.prototype.putInt=function(t,e){x2(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};H.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};H.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};H.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};H.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};H.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};H.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};H.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};H.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};H.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};H.ByteStringBuffer.prototype.getInt=function(t){x2(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};H.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};H.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};H.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};H.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};H.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};H.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};H.ByteStringBuffer.prototype.copy=function(){var t=H.createBuffer(this.data);return t.read=this.read,t};H.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};H.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};H.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};H.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};H.ByteStringBuffer.prototype.toString=function(){return H.decodeUtf8(this.bytes())};function N_e(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=H.isArrayBuffer(t),i=H.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}H.DataBuffer=N_e;H.DataBuffer.prototype.length=function(){return this.write-this.read};H.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};H.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};H.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};H.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};H.DataBuffer.prototype.putBytes=function(t,e){if(H.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(H.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof H.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&H.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof H.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=H.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=H.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};H.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};H.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};H.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};H.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};H.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};H.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};H.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};H.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};H.DataBuffer.prototype.putInt=function(t,e){x2(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};H.DataBuffer.prototype.putSignedInt=function(t,e){return x2(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};H.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};H.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};H.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};H.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};H.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};H.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};H.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};H.DataBuffer.prototype.getInt=function(t){x2(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};H.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};H.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};H.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};H.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};H.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};H.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};H.DataBuffer.prototype.copy=function(){return new H.DataBuffer(this)};H.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};H.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};H.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};H.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};H.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return H.binary.raw.encode(e);if(t==="hex")return H.binary.hex.encode(e);if(t==="base64")return H.binary.base64.encode(e);if(t==="utf8")return H.text.utf8.decode(e);if(t==="utf16")return H.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};H.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=H.encodeUtf8(t)),new H.ByteBuffer(t)};H.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};H.xorBytes=function(t,e,r){for(var i="",n="",s="",o=0,a=0;r>0;--r,++o)n=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(i+=s,s="",a=0),s+=String.fromCharCode(n),++a;return i+=s,i};H.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};H.bytesToHex=function(t){return H.createBuffer(t).toHex()};H.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var ku="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Du=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],nM="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";H.encode64=function(t,e){for(var r="",i="",n,s,o,a=0;a<t.length;)n=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=ku.charAt(n>>2),r+=ku.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=ku.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":ku.charAt(o&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};H.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,o=0;o<t.length;)r=Du[t.charCodeAt(o++)-43],i=Du[t.charCodeAt(o++)-43],n=Du[t.charCodeAt(o++)-43],s=Du[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};H.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};H.decodeUtf8=function(t){return decodeURIComponent(escape(t))};H.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:iM.encode,decode:iM.decode}};H.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};H.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};H.binary.hex.encode=H.bytesToHex;H.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};H.binary.base64.encode=function(t,e){for(var r="",i="",n,s,o,a=0;a<t.byteLength;)n=t[a++],s=t[a++],o=t[a++],r+=ku.charAt(n>>2),r+=ku.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=ku.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":ku.charAt(o&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};H.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,o,a,c=0,u=r;c<t.length;)n=Du[t.charCodeAt(c++)-43],s=Du[t.charCodeAt(c++)-43],o=Du[t.charCodeAt(c++)-43],a=Du[t.charCodeAt(c++)-43],i[u++]=n<<2|s>>4,o!==64&&(i[u++]=(s&15)<<4|o>>2,a!==64&&(i[u++]=(o&3)<<6|a));return e?u-r:i.subarray(0,u)};H.binary.base58.encode=function(t,e){return H.binary.baseN.encode(t,nM,e)};H.binary.base58.decode=function(t,e){return H.binary.baseN.decode(t,nM,e)};H.text={utf8:{},utf16:{}};H.text.utf8.encode=function(t,e,r){t=H.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};H.text.utf8.decode=function(t){return H.decodeUtf8(String.fromCharCode.apply(null,t))};H.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a),s+=2;return e?s-r:i};H.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};H.deflate=function(t,e,r){if(e=H.decode64(t.deflate(H.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};H.inflate=function(t,e,r){var i=t.inflate(H.encode64(e)).rval;return i===null?null:H.decode64(i)};var E7=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=H.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},S7=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(H.decode64(r))),r},B_e=function(t,e,r,i){var n=S7(t,e);n===null&&(n={}),n[r]=i,E7(t,e,n)},L_e=function(t,e,r){var i=S7(t,e);return i!==null&&(i=r in i?i[r]:null),i},M_e=function(t,e,r){var i=S7(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),E7(t,e,i)}},j_e=function(t,e){E7(t,e,null)},i4=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,o=null;for(var a in r){n=r[a];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return i};H.setItem=function(t,e,r,i,n){i4(B_e,arguments,n)};H.getItem=function(t,e,r,i){return i4(L_e,arguments,i)};H.removeItem=function(t,e,r,i){i4(M_e,arguments,i)};H.clearItems=function(t,e,r){i4(j_e,arguments,r)};H.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?(i.port!==80&&i.scheme==="http"||i.port!==443&&i.scheme==="https")&&(i.fullHost+=":"+i.port):i.scheme==="http"?i.port=80:i.scheme==="https"&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var n4=null;H.getQueryVariables=function(t){var e=function(i){for(var n={},s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("="),c,u;a>0?(c=s[o].substring(0,a),u=s[o].substring(a+1)):(c=s[o],u=null),c in n||(n[c]=[]),!(c in Object.prototype)&&u!==null&&n[c].push(unescape(u))}return n},r;return typeof t=="undefined"?(n4===null&&(typeof window!="undefined"&&window.location&&window.location.search?n4=e(window.location.search.substring(1)):n4={}),r=n4):r=e(t),r};H.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");n.length>0&&n[0]===""&&n.shift();var s=r===""?{}:H.getQueryVariables(r);return{pathString:e,queryString:r,path:n,query:s}};H.makeRequest=function(t){var e=H.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(i){return typeof i=="undefined"?e.path:e.path[i]},getQuery:function(i,n){var s;return typeof i=="undefined"?s=e.query:(s=e.query[i],s&&typeof n!="undefined"&&(s=s[n])),s},getQueryLast:function(i,n){var s,o=r.getQuery(i);return o?s=o[o.length-1]:s=n,s}};return r};H.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")};H.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};H.format=function(t){for(var e=/%./g,r,i,n=0,s=[],o=0;r=e.exec(t);){i=t.substring(o,e.lastIndex-2),i.length>0&&s.push(i),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};H.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=i===void 0?".":i,c=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(n-u).toFixed(s).slice(2):"")};H.formatSize=function(t){return t>=1073741824?t=H.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=H.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=H.formatNumber(t/1024,0)+" KiB":t=H.formatNumber(t,0)+" bytes",t};H.bytesFromIP=function(t){return t.indexOf(".")!==-1?H.bytesFromIPv4(t):t.indexOf(":")!==-1?H.bytesFromIPv6(t):null};H.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=H.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};H.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=H.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=H.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};H.bytesToIP=function(t){return t.length===4?H.bytesToIPv4(t):t.length===16?H.bytesToIPv6(t):null};H.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};H.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=H.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var c=r[i];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};H.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in H&&!t.update)return e(null,H.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return H.cores=navigator.hardwareConcurrency,e(null,H.cores);if(typeof Worker=="undefined")return H.cores=1,e(null,H.cores);if(typeof Blob=="undefined")return H.cores=2,e(null,H.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(o,a,c){if(a===0){var u=Math.floor(o.reduce(function(l,h){return l+h},0)/o.length);return H.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,H.cores)}n(c,function(l,h){o.push(s(c,h)),i(o,a-1,c)})}function n(o,a){for(var c=[],u=[],l=0;l<o;++l){var h=new Worker(r);h.addEventListener("message",function(d){if(u.push(d.data),u.length===o){for(var p=0;p<o;++p)c[p].terminate();a(null,u)}}),c.push(h)}for(var l=0;l<o;++l)c[l].postMessage(l)}function s(o,a){for(var c=[],u=0;u<o;++u)for(var l=a[u],h=c[u]=[],d=0;d<o;++d)if(u!==d){var p=a[d];(l.st>p.st&&l.st<p.et||p.st>l.st&&p.st<l.et)&&h.push(d)}return c.reduce(function(y,m){return Math.max(y,m.length)},0)}}});var zd=g((sst,oM)=>{f();var R2=vt();R2.pki=R2.pki||{};var A7=oM.exports=R2.pki.oids=R2.oids=R2.oids||{};function ge(t,e){A7[t]=e,A7[e]=t}function Yt(t,e){A7[t]=e}ge("1.2.840.113549.1.1.1","rsaEncryption");ge("1.2.840.113549.1.1.4","md5WithRSAEncryption");ge("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ge("1.2.840.113549.1.1.7","RSAES-OAEP");ge("1.2.840.113549.1.1.8","mgf1");ge("1.2.840.113549.1.1.9","pSpecified");ge("1.2.840.113549.1.1.10","RSASSA-PSS");ge("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ge("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ge("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ge("1.3.101.112","EdDSA25519");ge("1.2.840.10040.4.3","dsa-with-sha1");ge("1.3.14.3.2.7","desCBC");ge("1.3.14.3.2.26","sha1");ge("2.16.840.1.101.3.4.2.1","sha256");ge("2.16.840.1.101.3.4.2.2","sha384");ge("2.16.840.1.101.3.4.2.3","sha512");ge("1.2.840.113549.2.5","md5");ge("1.2.840.113549.1.7.1","data");ge("1.2.840.113549.1.7.2","signedData");ge("1.2.840.113549.1.7.3","envelopedData");ge("1.2.840.113549.1.7.4","signedAndEnvelopedData");ge("1.2.840.113549.1.7.5","digestedData");ge("1.2.840.113549.1.7.6","encryptedData");ge("1.2.840.113549.1.9.1","emailAddress");ge("1.2.840.113549.1.9.2","unstructuredName");ge("1.2.840.113549.1.9.3","contentType");ge("1.2.840.113549.1.9.4","messageDigest");ge("1.2.840.113549.1.9.5","signingTime");ge("1.2.840.113549.1.9.6","counterSignature");ge("1.2.840.113549.1.9.7","challengePassword");ge("1.2.840.113549.1.9.8","unstructuredAddress");ge("1.2.840.113549.1.9.14","extensionRequest");ge("1.2.840.113549.1.9.20","friendlyName");ge("1.2.840.113549.1.9.21","localKeyId");ge("1.2.840.113549.1.9.22.1","x509Certificate");ge("1.2.840.113549.1.12.10.1.1","keyBag");ge("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ge("1.2.840.113549.1.12.10.1.3","certBag");ge("1.2.840.113549.1.12.10.1.4","crlBag");ge("1.2.840.113549.1.12.10.1.5","secretBag");ge("1.2.840.113549.1.12.10.1.6","safeContentsBag");ge("1.2.840.113549.1.5.13","pkcs5PBES2");ge("1.2.840.113549.1.5.12","pkcs5PBKDF2");ge("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ge("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ge("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ge("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ge("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ge("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ge("1.2.840.113549.2.7","hmacWithSHA1");ge("1.2.840.113549.2.8","hmacWithSHA224");ge("1.2.840.113549.2.9","hmacWithSHA256");ge("1.2.840.113549.2.10","hmacWithSHA384");ge("1.2.840.113549.2.11","hmacWithSHA512");ge("1.2.840.113549.3.7","des-EDE3-CBC");ge("2.16.840.1.101.3.4.1.2","aes128-CBC");ge("2.16.840.1.101.3.4.1.22","aes192-CBC");ge("2.16.840.1.101.3.4.1.42","aes256-CBC");ge("2.5.4.3","commonName");ge("2.5.4.5","serialName");ge("2.5.4.6","countryName");ge("2.5.4.7","localityName");ge("2.5.4.8","stateOrProvinceName");ge("2.5.4.9","streetAddress");ge("2.5.4.10","organizationName");ge("2.5.4.11","organizationalUnitName");ge("2.5.4.13","description");ge("2.5.4.15","businessCategory");ge("2.5.4.17","postalCode");ge("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ge("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ge("2.16.840.1.113730.1.1","nsCertType");ge("2.16.840.1.113730.1.13","nsComment");Yt("2.5.29.1","authorityKeyIdentifier");Yt("2.5.29.2","keyAttributes");Yt("2.5.29.3","certificatePolicies");Yt("2.5.29.4","keyUsageRestriction");Yt("2.5.29.5","policyMapping");Yt("2.5.29.6","subtreesConstraint");Yt("2.5.29.7","subjectAltName");Yt("2.5.29.8","issuerAltName");Yt("2.5.29.9","subjectDirectoryAttributes");Yt("2.5.29.10","basicConstraints");Yt("2.5.29.11","nameConstraints");Yt("2.5.29.12","policyConstraints");Yt("2.5.29.13","basicConstraints");ge("2.5.29.14","subjectKeyIdentifier");ge("2.5.29.15","keyUsage");Yt("2.5.29.16","privateKeyUsagePeriod");ge("2.5.29.17","subjectAltName");ge("2.5.29.18","issuerAltName");ge("2.5.29.19","basicConstraints");Yt("2.5.29.20","cRLNumber");Yt("2.5.29.21","cRLReason");Yt("2.5.29.22","expirationDate");Yt("2.5.29.23","instructionCode");Yt("2.5.29.24","invalidityDate");Yt("2.5.29.25","cRLDistributionPoints");Yt("2.5.29.26","issuingDistributionPoint");Yt("2.5.29.27","deltaCRLIndicator");Yt("2.5.29.28","issuingDistributionPoint");Yt("2.5.29.29","certificateIssuer");Yt("2.5.29.30","nameConstraints");ge("2.5.29.31","cRLDistributionPoints");ge("2.5.29.32","certificatePolicies");Yt("2.5.29.33","policyMappings");Yt("2.5.29.34","policyConstraints");ge("2.5.29.35","authorityKeyIdentifier");Yt("2.5.29.36","policyConstraints");ge("2.5.29.37","extKeyUsage");Yt("2.5.29.46","freshestCRL");Yt("2.5.29.54","inhibitAnyPolicy");ge("1.3.6.1.4.1.11129.2.4.2","timestampList");ge("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ge("1.3.6.1.5.5.7.3.1","serverAuth");ge("1.3.6.1.5.5.7.3.2","clientAuth");ge("1.3.6.1.5.5.7.3.3","codeSigning");ge("1.3.6.1.5.5.7.3.4","emailProtection");ge("1.3.6.1.5.5.7.3.8","timeStamping")});var Nu=g((ost,cM)=>{f();var xr=vt();fr();zd();var Ce=cM.exports=xr.asn1=xr.asn1||{};Ce.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Ce.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Ce.create=function(t,e,r,i,n){if(xr.util.isArray(i)){for(var s=[],o=0;o<i.length;++o)i[o]!==void 0&&s.push(i[o]);i=s}var a={tagClass:t,type:e,constructed:r,composed:r||xr.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(a.bitStringContents=n.bitStringContents,a.original=Ce.copy(a)),a};Ce.copy=function(t,e){var r;if(xr.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(Ce.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Ce.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Ce.equals=function(t,e,r){if(xr.util.isArray(t)){if(!xr.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!Ce.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Ce.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};Ce.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function I2(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var q_e=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;I2(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};Ce.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=xr.util.createBuffer(t)),s4(t,t.length(),0,e)};function s4(t,e,r,i){var n;I2(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;n=t.length();var c=q_e(t,e);if(e-=n-t.length(),c!==void 0&&c>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var l,h,d=(s&32)==32;if(d)if(l=[],c===void 0)for(;;){if(I2(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),l.push(s4(t,e,r+1,i)),e-=n-t.length()}else for(;c>0;)n=t.length(),l.push(s4(t,c,r+1,i)),e-=n-t.length(),c-=n-t.length();if(l===void 0&&o===Ce.Class.UNIVERSAL&&a===Ce.Type.BITSTRING&&(h=t.bytes(c)),l===void 0&&i.decodeBitStrings&&o===Ce.Class.UNIVERSAL&&a===Ce.Type.BITSTRING&&c>1){var p=t.read,y=e,m=0;if(a===Ce.Type.BITSTRING&&(I2(t,e,1),m=t.getByte(),e--),m===0)try{n=t.length();var w={verbose:i.verbose,strict:!0,decodeBitStrings:!0},b=s4(t,e,r+1,w),v=n-t.length();e-=v,a==Ce.Type.BITSTRING&&v++;var x=b.tagClass;v===c&&(x===Ce.Class.UNIVERSAL||x===Ce.Class.CONTEXT_SPECIFIC)&&(l=[b])}catch(O){}l===void 0&&(t.read=p,e=y)}if(l===void 0){if(c===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===Ce.Type.BMPSTRING)for(l="";c>0;c-=2)I2(t,e,2),l+=String.fromCharCode(t.getInt16()),e-=2;else l=t.getBytes(c)}var B=h===void 0?null:{bitStringContents:h};return Ce.create(o,a,d,l,B)}Ce.toDer=function(t){var e=xr.util.createBuffer(),r=t.tagClass|t.type,i=xr.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=Ce.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(Ce.toDer(t.value[s]))}else if(t.type===Ce.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===Ce.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var o=i.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(i),e};Ce.oidToDer=function(t){var e=t.split("."),r=xr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,o,a=2;a<e.length;++a){i=!0,n=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,i||(o|=128),n.push(o),i=!1;while(s>0);for(var c=n.length-1;c>=0;--c)r.putByte(n[c])}return r};Ce.derToOid=function(t){var e;typeof t=="string"&&(t=xr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};Ce.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,o,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var l=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),d=l*60+h;d*=6e4,c==="+"?e.setTime(+e-d):e.setTime(+e+d)}return e};Ce.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,l=!1;t.charAt(t.length-1)==="Z"&&(l=!0);var h=t.length-5,d=t.charAt(h);if(d==="+"||d==="-"){var p=parseInt(t.substr(h+1,2),10),y=parseInt(t.substr(h+4,2),10);u=p*60+y,u*=6e4,d==="+"&&(u*=-1),l=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),l?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,o,a,c),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(s,o,a,c)),e};Ce.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};Ce.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};Ce.integerToDer=function(t){var e=xr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Ce.derToInteger=function(t){typeof t=="string"&&(t=xr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Ce.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&xr.util.isArray(e.value))for(var s=0,o=0;n&&o<e.value.length;++o)n=e.value[o].optional||!1,t.value[s]&&(n=Ce.validate(t.value[s],e.value[o],r,i),n?++s:e.value[o].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var aM=/[^\\u0000-\\u00ff]/;Ce.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case Ce.Class.UNIVERSAL:i+="Universal:";break;case Ce.Class.APPLICATION:i+="Application:";break;case Ce.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case Ce.Class.PRIVATE:i+="Private:";break}if(t.tagClass===Ce.Class.UNIVERSAL)switch(i+=t.type,t.type){case Ce.Type.NONE:i+=" (None)";break;case Ce.Type.BOOLEAN:i+=" (Boolean)";break;case Ce.Type.INTEGER:i+=" (Integer)";break;case Ce.Type.BITSTRING:i+=" (Bit string)";break;case Ce.Type.OCTETSTRING:i+=" (Octet string)";break;case Ce.Type.NULL:i+=" (Null)";break;case Ce.Type.OID:i+=" (Object Identifier)";break;case Ce.Type.ODESC:i+=" (Object Descriptor)";break;case Ce.Type.EXTERNAL:i+=" (External or Instance of)";break;case Ce.Type.REAL:i+=" (Real)";break;case Ce.Type.ENUMERATED:i+=" (Enumerated)";break;case Ce.Type.EMBEDDED:i+=" (Embedded PDV)";break;case Ce.Type.UTF8:i+=" (UTF8)";break;case Ce.Type.ROID:i+=" (Relative Object Identifier)";break;case Ce.Type.SEQUENCE:i+=" (Sequence)";break;case Ce.Type.SET:i+=" (Set)";break;case Ce.Type.PRINTABLESTRING:i+=" (Printable String)";break;case Ce.Type.IA5String:i+=" (IA5String (ASCII))";break;case Ce.Type.UTCTIME:i+=" (UTC time)";break;case Ce.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case Ce.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=Ce.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));i+=n+"Sub values: "+o+a}else{if(i+=n+"Value: ",t.type===Ce.Type.OID){var c=Ce.derToOid(t.value);i+=c,xr.pki&&xr.pki.oids&&c in xr.pki.oids&&(i+=" ("+xr.pki.oids[c]+") ")}if(t.type===Ce.Type.INTEGER)try{i+=Ce.derToInteger(t.value)}catch(l){i+="0x"+xr.util.bytesToHex(t.value)}else if(t.type===Ce.Type.BITSTRING){if(t.value.length>1?i+="0x"+xr.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===Ce.Type.OCTETSTRING?(aM.test(t.value)||(i+="("+t.value+") "),i+="0x"+xr.util.bytesToHex(t.value)):t.type===Ce.Type.UTF8?i+=xr.util.decodeUtf8(t.value):t.type===Ce.Type.PRINTABLESTRING||t.type===Ce.Type.IA5String?i+=t.value:aM.test(t.value)?i+="0x"+xr.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var R7=g((ast,uM)=>{f();var Ti=vt();fr();uM.exports=Ti.cipher=Ti.cipher||{};Ti.cipher.algorithms=Ti.cipher.algorithms||{};Ti.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ti.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ti.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Ti.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ti.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ti.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Ti.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Ti.cipher.algorithms[t]=e};Ti.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Ti.cipher.algorithms?Ti.cipher.algorithms[t]:null};var x7=Ti.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};x7.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Ti.util.createBuffer(),this.output=t.output||Ti.util.createBuffer(),this.mode.start(e)};x7.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};x7.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var T7=g((cst,lM)=>{f();var Pi=vt();fr();Pi.cipher=Pi.cipher||{};var Et=lM.exports=Pi.cipher.modes=Pi.cipher.modes||{};Et.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.ecb.prototype.start=function(t){};Et.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};Et.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};Et.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Et.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};Et.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=o4(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Et.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};Et.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};Et.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Et.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};Et.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Pi.util.createBuffer(),this._partialBytes=0};Et.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o4(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Et.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Et.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Pi.util.createBuffer(),this._partialBytes=0};Et.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o4(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Et.ofb.prototype.decrypt=Et.ofb.prototype.encrypt;Et.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Pi.util.createBuffer(),this._partialBytes=0};Et.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o4(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}a4(this._inBlock)};Et.ctr.prototype.decrypt=Et.ctr.prototype.encrypt;Et.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Pi.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Et.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Pi.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Pi.util.createBuffer(t.additionalData):r=Pi.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Pi.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(I7(i*8)))}this._inBlock=this._j0.slice(0),a4(this._inBlock),this._partialBytes=0,r=Pi.util.createBuffer(r),this._aDataLength=I7(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Et.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var o=i%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a4(this._inBlock)};Et.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a4(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};Et.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Pi.util.createBuffer();var i=this._aDataLength.concat(I7(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Et.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};Et.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Et.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};Et.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Et.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),o=0;o<n;++o){var a=[0,0,0,0],c=o/i|0,u=(i-1-o%i)*e;a[c]=1<<e-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};Et.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var o=1;o<s;++o){var a=n[s],c=n[o];n[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var u=n[s^i];n[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function o4(t,e){if(typeof t=="string"&&(t=Pi.util.createBuffer(t)),Pi.util.isArray(t)&&t.length>4){var r=t;t=Pi.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Pi.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function a4(t){t[t.length-1]=t[t.length-1]+1&4294967295}function I7(t){return[t/4294967296|0,t&4294967295]}});var Gd=g((ust,pM)=>{f();var hr=vt();R7();T7();fr();pM.exports=hr.aes=hr.aes||{};hr.aes.startEncrypting=function(t,e,r,i){var n=c4({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};hr.aes.createEncryptionCipher=function(t,e){return c4({key:t,output:null,decrypt:!1,mode:e})};hr.aes.startDecrypting=function(t,e,r,i){var n=c4({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};hr.aes.createDecryptionCipher=function(t,e){return c4({key:t,output:null,decrypt:!0,mode:e})};hr.aes.Algorithm=function(t,e){P7||hM();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return O7(r._w,i,n,!1)},decrypt:function(i,n){return O7(r._w,i,n,!0)}}}),r._init=!1};hr.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=hr.util.createBuffer(e);else if(hr.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=hr.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!hr.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!hr.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=dM(e,t.decrypt&&!o),this._init=!0}};hr.aes._expandKey=function(t,e){return P7||hM(),dM(t,e)};hr.aes._updateBlock=O7;Hd("AES-ECB",hr.cipher.modes.ecb);Hd("AES-CBC",hr.cipher.modes.cbc);Hd("AES-CFB",hr.cipher.modes.cfb);Hd("AES-OFB",hr.cipher.modes.ofb);Hd("AES-CTR",hr.cipher.modes.ctr);Hd("AES-GCM",hr.cipher.modes.gcm);function Hd(t,e){var r=function(){return new hr.aes.Algorithm(t,e)};hr.cipher.registerAlgorithm(t,r)}var P7=!1,$d=4,pn,C7,fM,lf,Ao;function hM(){P7=!0,fM=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;pn=new Array(256),C7=new Array(256),lf=new Array(4),Ao=new Array(4);for(var e=0;e<4;++e)lf[e]=new Array(256),Ao[e]=new Array(256);for(var r=0,i=0,n,s,o,a,c,u,l,e=0;e<256;++e){a=i^i<<1^i<<2^i<<3^i<<4,a=a>>8^a&255^99,pn[r]=a,C7[a]=r,c=t[a],n=t[r],s=t[n],o=t[s],u=c<<24^a<<16^a<<8^(a^c),l=(n^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^n^o);for(var h=0;h<4;++h)lf[h][r]=u,Ao[h][a]=l,u=u<<24|u>>>8,l=l<<24|l>>>8;r===0?r=i=1:(r=n^t[t[t[n^o]]],i^=t[t[i]])}}function dM(t,e){for(var r=t.slice(0),i,n=1,s=r.length,o=s+6+1,a=$d*o,c=s;c<a;++c)i=r[c-1],c%s==0?(i=pn[i>>>16&255]<<24^pn[i>>>8&255]<<16^pn[i&255]<<8^pn[i>>>24]^fM[n]<<24,n++):s>6&&c%s==4&&(i=pn[i>>>24]<<24^pn[i>>>16&255]<<16^pn[i>>>8&255]<<8^pn[i&255]),r[c]=r[c-s]^i;if(e){var u,l=Ao[0],h=Ao[1],d=Ao[2],p=Ao[3],y=r.slice(0);a=r.length;for(var c=0,m=a-$d;c<a;c+=$d,m-=$d)if(c===0||c===a-$d)y[c]=r[m],y[c+1]=r[m+3],y[c+2]=r[m+2],y[c+3]=r[m+1];else for(var w=0;w<$d;++w)u=r[m+w],y[c+(3&-w)]=l[pn[u>>>24]]^h[pn[u>>>16&255]]^d[pn[u>>>8&255]]^p[pn[u&255]];r=y}return r}function O7(t,e,r,i){var n=t.length/4-1,s,o,a,c,u;i?(s=Ao[0],o=Ao[1],a=Ao[2],c=Ao[3],u=C7):(s=lf[0],o=lf[1],a=lf[2],c=lf[3],u=pn);var l,h,d,p,y,m,w;l=e[0]^t[0],h=e[i?3:1]^t[1],d=e[2]^t[2],p=e[i?1:3]^t[3];for(var b=3,v=1;v<n;++v)y=s[l>>>24]^o[h>>>16&255]^a[d>>>8&255]^c[p&255]^t[++b],m=s[h>>>24]^o[d>>>16&255]^a[p>>>8&255]^c[l&255]^t[++b],w=s[d>>>24]^o[p>>>16&255]^a[l>>>8&255]^c[h&255]^t[++b],p=s[p>>>24]^o[l>>>16&255]^a[h>>>8&255]^c[d&255]^t[++b],l=y,h=m,d=w;r[0]=u[l>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],r[i?3:1]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[l&255]^t[++b],r[2]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[l>>>8&255]<<8^u[h&255]^t[++b],r[i?1:3]=u[p>>>24]<<24^u[l>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b]}function c4(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=hr.cipher.createDecipher(r,t.key):i=hr.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,o){var a=null;o instanceof hr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,n.call(i,o)},i}});var l4=g((lst,gM)=>{f();var Rr=vt();R7();T7();fr();gM.exports=Rr.des=Rr.des||{};Rr.des.startEncrypting=function(t,e,r,i){var n=u4({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Rr.des.createEncryptionCipher=function(t,e){return u4({key:t,output:null,decrypt:!1,mode:e})};Rr.des.startDecrypting=function(t,e,r,i){var n=u4({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Rr.des.createDecryptionCipher=function(t,e){return u4({key:t,output:null,decrypt:!0,mode:e})};Rr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return yM(r._keys,i,n,!1)},decrypt:function(i,n){return yM(r._keys,i,n,!0)}}}),r._init=!1};Rr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Rr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=W_e(e),this._init=!0}};ua("DES-ECB",Rr.cipher.modes.ecb);ua("DES-CBC",Rr.cipher.modes.cbc);ua("DES-CFB",Rr.cipher.modes.cfb);ua("DES-OFB",Rr.cipher.modes.ofb);ua("DES-CTR",Rr.cipher.modes.ctr);ua("3DES-ECB",Rr.cipher.modes.ecb);ua("3DES-CBC",Rr.cipher.modes.cbc);ua("3DES-CFB",Rr.cipher.modes.cfb);ua("3DES-OFB",Rr.cipher.modes.ofb);ua("3DES-CTR",Rr.cipher.modes.ctr);function ua(t,e){var r=function(){return new Rr.des.Algorithm(t,e)};Rr.cipher.registerAlgorithm(t,r)}var U_e=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],F_e=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],K_e=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],V_e=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],z_e=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],H_e=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],$_e=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],G_e=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function W_e(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=t.length()>8?3:1,w=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,x,B=0;B<m;B++){var O=t.getInt32(),R=t.getInt32();x=(O>>>4^R)&252645135,R^=x,O^=x<<4,x=(R>>>-16^O)&65535,O^=x,R^=x<<-16,x=(O>>>2^R)&858993459,R^=x,O^=x<<2,x=(R>>>-16^O)&65535,O^=x,R^=x<<-16,x=(O>>>1^R)&1431655765,R^=x,O^=x<<1,x=(R>>>8^O)&16711935,O^=x,R^=x<<8,x=(O>>>1^R)&1431655765,R^=x,O^=x<<1,x=O<<8|R>>>20&240,O=R<<24|R<<8&16711680|R>>>8&65280|R>>>24&240,R=x;for(var N=0;N<b.length;++N){b[N]?(O=O<<2|O>>>26,R=R<<2|R>>>26):(O=O<<1|O>>>27,R=R<<1|R>>>27),O&=-15,R&=-15;var F=e[O>>>28]|r[O>>>24&15]|i[O>>>20&15]|n[O>>>16&15]|s[O>>>12&15]|o[O>>>8&15]|a[O>>>4&15],U=c[R>>>28]|u[R>>>24&15]|l[R>>>20&15]|h[R>>>16&15]|d[R>>>12&15]|p[R>>>8&15]|y[R>>>4&15];x=(U>>>16^F)&65535,w[v++]=F^x,w[v++]=U^x<<16}}return w}function yM(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],c=e[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<n;u+=3){for(var l=s[u+1],h=s[u+2],d=s[u];d!=l;d+=h){var p=c^t[d],y=(c>>>4|c<<28)^t[d+1];o=a,a=c,c=o^(F_e[p>>>24&63]|V_e[p>>>16&63]|H_e[p>>>8&63]|G_e[p&63]|U_e[y>>>24&63]|K_e[y>>>16&63]|z_e[y>>>8&63]|$_e[y&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function u4(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Rr.cipher.createDecipher(r,t.key):i=Rr.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,o){var a=null;o instanceof Rr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,n.call(i,o)},i}});var Bu=g((fst,mM)=>{f();var f4=vt();mM.exports=f4.md=f4.md||{};f4.md.algorithms=f4.md.algorithms||{}});var wM=g((hst,bM)=>{f();var _c=vt();Bu();fr();var Y_e=bM.exports=_c.hmac=_c.hmac||{};Y_e.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in _c.md.algorithms)e=_c.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=_c.util.createBuffer(o);else if(_c.util.isArray(o)){var a=o;o=_c.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=_c.util.createBuffer(),i=_c.util.createBuffer(),u=o.length();for(var c=0;c<u;++c){var a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);t=o,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var ff=g(()=>{f()});var k7=g((yst,_M)=>{f();var yn=vt();wM();Bu();fr();var X_e=yn.pkcs5=yn.pkcs5||{},vc;yn.util.isNodejs&&!yn.options.usePureJavaScript&&(vc=ff());_M.exports=yn.pbkdf2=X_e.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),yn.util.isNodejs&&!yn.options.usePureJavaScript&&vc.pbkdf2&&(n===null||typeof n!="object")&&(vc.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?vc.pbkdf2Sync.length===4?vc.pbkdf2(t,e,r,i,function(x,B){if(x)return s(x);s(null,B.toString("binary"))}):vc.pbkdf2(t,e,r,i,n,function(x,B){if(x)return s(x);s(null,B.toString("binary"))}):vc.pbkdf2Sync.length===4?vc.pbkdf2Sync(t,e,r,i).toString("binary"):vc.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in yn.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=yn.md[n].create()}var o=n.digestLength;if(i>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var c=Math.ceil(i/o),u=i-(c-1)*o,l=yn.hmac.create();l.start(n,t);var h="",d,p,y;if(!s){for(var m=1;m<=c;++m){l.start(null,null),l.update(e),l.update(yn.util.int32ToBytes(m)),d=y=l.digest().getBytes();for(var w=2;w<=r;++w)l.start(null,null),l.update(y),p=l.digest().getBytes(),d=yn.util.xorBytes(d,p,o),y=p;h+=m<c?d:d.substr(0,u)}return h}var m=1,w;function b(){if(m>c)return s(null,h);l.start(null,null),l.update(e),l.update(yn.util.int32ToBytes(m)),d=y=l.digest().getBytes(),w=2,v()}function v(){if(w<=r)return l.start(null,null),l.update(y),p=l.digest().getBytes(),d=yn.util.xorBytes(d,p,o),y=p,++w,yn.util.setImmediate(v);h+=m<c?d:d.substr(0,u),++m,b()}b()}});var p4=g((gst,EM)=>{f();var h4=vt();fr();var vM=EM.exports=h4.pem=h4.pem||{};vM.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=d4(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=d4(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=d4(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=d4(t.headers[n]);return t.procType&&(r+=`\r
`),r+=h4.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};vM.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var o={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:h4.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var a=s[2].split(n),c=0;s&&c<a.length;){for(var u=a[c].replace(/\s+$/,""),l=c+1;l<a.length;++l){var h=a[l];if(!/\s/.test(h[0]))break;u+=h,c=l}if(s=u.match(i),s){for(var d={name:s[1],values:[]},p=s[2].split(","),y=0;y<p.length;++y)d.values.push(Q_e(p[y]));if(o.procType)if(!o.contentDomain&&d.name==="Content-Domain")o.contentDomain=p[0]||"";else if(!o.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:p[0],parameters:p[1]||null}}else o.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:p[0],type:p[1]}}}++c}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function d4(t){for(var e=t.name+": ",r=[],i=function(c,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,o=-1,n=0;n<e.length;++n,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=n-o-1,o=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(o=n);return e}function Q_e(t){return t.replace(/^\s+/,"")}});var TM=g((mst,IM)=>{f();var la=vt();Bu();fr();var SM=IM.exports=la.sha256=la.sha256||{};la.md.sha256=la.md.algorithms.sha256=SM;SM.create=function(){AM||Z_e();var t=null,e=la.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=la.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=la.util.encodeUtf8(n));var o=n.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=i.fullMessageLength.length-1;a>=0;--a)i.fullMessageLength[a]+=o[1],o[1]=o[0]+(i.fullMessageLength[a]/4294967296>>>0),i.fullMessageLength[a]=i.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(n),RM(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=la.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,o=s&i.blockLength-1;n.putBytes(D7.substr(0,i.blockLength-o));for(var a,c,u=i.fullMessageLength[0]*8,l=0;l<i.fullMessageLength.length-1;++l)a=i.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,n.putInt32(u>>>0),u=a>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};RM(h,r,n);var d=la.util.createBuffer();return d.putInt32(h.h0),d.putInt32(h.h1),d.putInt32(h.h2),d.putInt32(h.h3),d.putInt32(h.h4),d.putInt32(h.h5),d.putInt32(h.h6),d.putInt32(h.h7),d},i};var D7=null,AM=!1,xM=null;function Z_e(){D7=String.fromCharCode(128),D7+=la.util.fillString(String.fromCharCode(0),64),xM=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],AM=!0}function RM(t,e,r){for(var i,n,s,o,a,c,u,l,h,d,p,y,m,w,b,v=r.length();v>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(l=t.h0,h=t.h1,d=t.h2,p=t.h3,y=t.h4,m=t.h5,w=t.h6,b=t.h7,u=0;u<64;++u)o=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),a=w^y&(m^w),s=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&h|d&(l^h),i=b+o+a+xM[u]+e[u],n=s+c,b=w,w=m,m=y,y=p+i>>>0,p=d,d=h,h=l,l=i+n>>>0;t.h0=t.h0+l|0,t.h1=t.h1+h|0,t.h2=t.h2+d|0,t.h3=t.h3+p|0,t.h4=t.h4+y|0,t.h5=t.h5+m|0,t.h6=t.h6+w|0,t.h7=t.h7+b|0,v-=64}}});var CM=g((bst,PM)=>{f();var fa=vt();fr();var y4=null;fa.util.isNodejs&&!fa.options.usePureJavaScript&&!process.versions["node-webkit"]&&(y4=ff());var J_e=PM.exports=fa.prng=fa.prng||{};J_e.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,l){if(!l)return e.generateSync(u);var h=e.plugin.cipher,d=e.plugin.increment,p=e.plugin.formatKey,y=e.plugin.formatSeed,m=fa.util.createBuffer();e.key=null,w();function w(b){if(b)return l(b);if(m.length()>=u)return l(null,m.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return fa.util.nextTick(function(){s(w)});var v=h(e.key,e.seed);e.generated+=v.length,m.putBytes(v),e.key=p(h(e.key,d(e.seed))),e.seed=y(h(e.key,e.seed)),fa.util.setImmediate(w)}},e.generateSync=function(u){var l=e.plugin.cipher,h=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed;e.key=null;for(var y=fa.util.createBuffer();y.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&o();var m=l(e.key,e.seed);e.generated+=m.length,y.putBytes(m),e.key=d(l(e.key,h(e.seed))),e.seed=p(l(e.key,e.seed))}return y.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return a(),u();var l=32-e.pools[0].messageLength<<5;e.seedFile(l,function(h,d){if(h)return u(h);e.collect(d),a(),u()})}function o(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var l=1,h=0;h<32;++h)e.reseeds%l==0&&(u.update(e.pools[h].digest().getBytes()),e.pools[h].start()),l=l<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var d=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(d),e.generated=0}function c(u){var l=null,h=fa.util.globalScope,d=h.crypto||h.msCrypto;d&&d.getRandomValues&&(l=function(O){return d.getRandomValues(O)});var p=fa.util.createBuffer();if(l)for(;p.length()<u;){var y=Math.max(1,Math.min(u-p.length(),65536)/4),m=new Uint32Array(Math.floor(y));try{l(m);for(var w=0;w<m.length;++w)p.putInt32(m[w])}catch(O){if(!(typeof QuotaExceededError!="undefined"&&O instanceof QuotaExceededError))throw O}}if(p.length()<u)for(var b,v,x,B=Math.floor(Math.random()*65536);p.length()<u;){v=16807*(B&65535),b=16807*(B>>16),v+=(b&32767)<<16,v+=b>>15,v=(v&2147483647)+(v>>31),B=v&4294967295;for(var w=0;w<3;++w)x=B>>>(w<<3),x^=Math.floor(Math.random()*256),p.putByte(String.fromCharCode(x&255))}return p.getBytes(u)}return y4?(e.seedFile=function(u,l){y4.randomBytes(u,function(h,d){if(h)return l(h);l(null,d.toString())})},e.seedFileSync=function(u){return y4.randomBytes(u).toString()}):(e.seedFile=function(u,l){try{l(null,c(u))}catch(h){l(h)}},e.seedFileSync=c),e.collect=function(u){for(var l=u.length,h=0;h<l;++h)e.pools[e.pool].update(u.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,l){for(var h="",d=0;d<l;d+=8)h+=String.fromCharCode(u>>d&255);e.collect(h)},e.registerWorker=function(u){if(u===self)e.seedFile=function(h,d){function p(y){var m=y.data;m.forge&&m.forge.prng&&(self.removeEventListener("message",p),d(m.forge.prng.err,m.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:h}}})};else{var l=function(h){var d=h.data;d.forge&&d.forge.prng&&e.seedFile(d.forge.prng.needed,function(p,y){u.postMessage({forge:{prng:{err:p,bytes:y}}})})};u.addEventListener("message",l)}},e}});var hf=g((wst,N7)=>{f();var Ci=vt();Gd();TM();CM();fr();(function(){if(Ci.random&&Ci.random.getBytes){N7.exports=Ci.random;return}(function(t){var e={},r=new Array(4),i=Ci.util.createBuffer();e.formatKey=function(h){var d=Ci.util.createBuffer(h);return h=new Array(4),h[0]=d.getInt32(),h[1]=d.getInt32(),h[2]=d.getInt32(),h[3]=d.getInt32(),Ci.aes._expandKey(h,!1)},e.formatSeed=function(h){var d=Ci.util.createBuffer(h);return h=new Array(4),h[0]=d.getInt32(),h[1]=d.getInt32(),h[2]=d.getInt32(),h[3]=d.getInt32(),h},e.cipher=function(h,d){return Ci.aes._updateBlock(h,d,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(h){return++h[3],h},e.md=Ci.md.sha256;function n(){var h=Ci.prng.create(e);return h.getBytes=function(d,p){return h.generate(d,p)},h.getBytesSync=function(d){return h.generate(d)},h}var s=n(),o=null,a=Ci.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(h){return c.getRandomValues(h)}),Ci.options.usePureJavaScript||!Ci.util.isNodejs&&!o){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var l in navigator)try{typeof navigator[l]=="string"&&(u+=navigator[l])}catch(h){}s.collect(u),u=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!Ci.random)Ci.random=s;else for(var l in s)Ci.random[l]=s[l];Ci.random.createInstance=n,N7.exports=Ci.random})(typeof jQuery!="undefined"?jQuery:null)})()});var NM=g((_st,DM)=>{f();var On=vt();fr();var B7=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],OM=[1,2,3,5],eve=function(t,e){return t<<e&65535|(t&65535)>>16-e},tve=function(t,e){return(t&65535)>>e|t<<16-e&65535};DM.exports=On.rc2=On.rc2||{};On.rc2.expandKey=function(t,e){typeof t=="string"&&(t=On.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),o=255>>(n&7),a;for(a=i;a<128;a++)r.putByte(B7[r.at(a-1)+r.at(a-i)&255]);for(r.setAt(128-s,B7[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,B7[r.at(a+1)^r.at(a+s)]);return r};var kM=function(t,e,r){var i=!1,n=null,s=null,o=null,a,c,u,l,h=[];for(t=On.rc2.expandKey(t,e),u=0;u<64;u++)h.push(t.getInt16Le());r?(a=function(y){for(u=0;u<4;u++)y[u]+=h[l]+(y[(u+3)%4]&y[(u+2)%4])+(~y[(u+3)%4]&y[(u+1)%4]),y[u]=eve(y[u],OM[u]),l++},c=function(y){for(u=0;u<4;u++)y[u]+=h[y[(u+3)%4]&63]}):(a=function(y){for(u=3;u>=0;u--)y[u]=tve(y[u],OM[u]),y[u]-=h[l]+(y[(u+3)%4]&y[(u+2)%4])+(~y[(u+3)%4]&y[(u+1)%4]),l--},c=function(y){for(u=3;u>=0;u--)y[u]-=h[y[(u+3)%4]&63]});var d=function(y){var m=[];for(u=0;u<4;u++){var w=n.getInt16Le();o!==null&&(r?w^=o.getInt16Le():o.putInt16Le(w)),m.push(w&65535)}l=r?0:63;for(var b=0;b<y.length;b++)for(var v=0;v<y[b][0];v++)y[b][1](m);for(u=0;u<4;u++)o!==null&&(r?o.putInt16Le(m[u]):m[u]^=o.getInt16Le()),s.putInt16Le(m[u])},p=null;return p={start:function(y,m){y&&typeof y=="string"&&(y=On.util.createBuffer(y)),i=!1,n=On.util.createBuffer(),s=m||new On.util.createBuffer,o=y,p.output=s},update:function(y){for(i||n.putBuffer(y);n.length()>=8;)d([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(y){var m=!0;if(r)if(y)m=y(8,n,!r);else{var w=n.length()===8?8:8-n.length();n.fillWithByte(w,w)}if(m&&(i=!0,p.update()),!r&&(m=n.length()===0,m))if(y)m=y(8,s,!r);else{var b=s.length(),v=s.at(b-1);v>b?m=!1:s.truncate(v)}return m}},p};On.rc2.startEncrypting=function(t,e,r){var i=On.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};On.rc2.createEncryptionCipher=function(t,e){return kM(t,e,!0)};On.rc2.startDecrypting=function(t,e,r){var i=On.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};On.rc2.createDecryptionCipher=function(t,e){return kM(t,e,!1)}});var b4=g((vst,KM)=>{f();var L7=vt();KM.exports=L7.jsbn=L7.jsbn||{};var Ec,rve=244837814094590,BM=(rve&16777215)==15715070;function fe(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}L7.jsbn.BigInteger=fe;function qt(){return new fe(null)}function ive(t,e,r,i,n,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[i]+n;n=Math.floor(o/67108864),r.data[i++]=o&67108863}return n}function nve(t,e,r,i,n,s){for(var o=e&32767,a=e>>15;--s>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,l=a*c+u*o;c=o*c+((l&32767)<<15)+r.data[i]+(n&1073741823),n=(c>>>30)+(l>>>15)+a*u+(n>>>30),r.data[i++]=c&1073741823}return n}function LM(t,e,r,i,n,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,l=a*c+u*o;c=o*c+((l&16383)<<14)+r.data[i]+n,n=(c>>28)+(l>>14)+a*u,r.data[i++]=c&268435455}return n}typeof navigator=="undefined"?(fe.prototype.am=LM,Ec=28):BM&&navigator.appName=="Microsoft Internet Explorer"?(fe.prototype.am=nve,Ec=30):BM&&navigator.appName!="Netscape"?(fe.prototype.am=ive,Ec=26):(fe.prototype.am=LM,Ec=28);fe.prototype.DB=Ec;fe.prototype.DM=(1<<Ec)-1;fe.prototype.DV=1<<Ec;var M7=52;fe.prototype.FV=Math.pow(2,M7);fe.prototype.F1=M7-Ec;fe.prototype.F2=2*Ec-M7;var sve="0123456789abcdefghijklmnopqrstuvwxyz",g4=new Array,Wd,Rs;Wd="0".charCodeAt(0);for(Rs=0;Rs<=9;++Rs)g4[Wd++]=Rs;Wd="a".charCodeAt(0);for(Rs=10;Rs<36;++Rs)g4[Wd++]=Rs;Wd="A".charCodeAt(0);for(Rs=10;Rs<36;++Rs)g4[Wd++]=Rs;function MM(t){return sve.charAt(t)}function jM(t,e){var r=g4[t.charCodeAt(e)];return r??-1}function ove(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function ave(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Lu(t){var e=qt();return e.fromInt(t),e}function cve(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var o=r==8?t[i]&255:jM(t,i);if(o<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&fe.ZERO.subTo(this,this)}function uve(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function lve(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(i=this.data[o]>>a)>0&&(n=!0,s=MM(i));o>=0;)a<e?(i=(this.data[o]&(1<<a)-1)<<e-a,i|=this.data[--o]>>(a+=this.DB-e)):(i=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),i>0&&(n=!0),n&&(s+=MM(i));return n?s:"0"}function fve(){var t=qt();return fe.ZERO.subTo(this,t),t}function hve(){return this.s<0?this.negate():this}function dve(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function m4(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function pve(){return this.t<=0?0:this.DB*(this.t-1)+m4(this.data[this.t-1]^this.s&this.DM)}function yve(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function gve(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function mve(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>i|o,o=(this.data[a]&n)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function bve(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<n,e.data[o-r]=this.data[o]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function wve(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function _ve(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&fe.ZERO.subTo(e,e)}function vve(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Eve(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=qt());var s=qt(),o=this.s,a=t.s,c=this.DB-m4(i.data[i.t-1]);c>0?(i.lShiftTo(c,s),n.lShiftTo(c,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,l=s.data[u-1];if(l!=0){var h=l*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),d=this.FV/h,p=(1<<this.F1)/h,y=1<<this.F2,m=r.t,w=m-u,b=e??qt();for(s.dlShiftTo(w,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),fe.ONE.dlShiftTo(u,b),b.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--w>=0;){var v=r.data[--m]==l?this.DM:Math.floor(r.data[m]*d+(r.data[m-1]+y)*p);if((r.data[m]+=s.am(0,v,r,w,0,u))<v)for(s.dlShiftTo(w,b),r.subTo(b,r);r.data[m]<--v;)r.subTo(b,r)}e!=null&&(r.drShiftTo(u,e),o!=a&&fe.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&fe.ZERO.subTo(r,r)}}}function Sve(t){var e=qt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(fe.ZERO)>0&&t.subTo(e,e),e}function df(t){this.m=t}function Ave(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function xve(t){return t}function Rve(t){t.divRemTo(this.m,null,t)}function Ive(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Tve(t,e){t.squareTo(e),this.reduce(e)}df.prototype.convert=Ave;df.prototype.revert=xve;df.prototype.reduce=Rve;df.prototype.mulTo=Ive;df.prototype.sqrTo=Tve;function Pve(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function pf(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Cve(t){var e=qt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(fe.ZERO)>0&&this.m.subTo(e,e),e}function Ove(t){var e=qt();return t.copyTo(e),this.reduce(e),e}function kve(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Dve(t,e){t.squareTo(e),this.reduce(e)}function Nve(t,e,r){t.multiplyTo(e,r),this.reduce(r)}pf.prototype.convert=Cve;pf.prototype.revert=Ove;pf.prototype.reduce=kve;pf.prototype.mulTo=Nve;pf.prototype.sqrTo=Dve;function Bve(){return(this.t>0?this.data[0]&1:this.s)==0}function Lve(t,e){if(t>4294967295||t<1)return fe.ONE;var r=qt(),i=qt(),n=e.convert(this),s=m4(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var o=r;r=i,i=o}return e.revert(r)}function Mve(t,e){var r;return t<256||e.isEven()?r=new df(e):r=new pf(e),this.exp(t,r)}fe.prototype.copyTo=ove;fe.prototype.fromInt=ave;fe.prototype.fromString=cve;fe.prototype.clamp=uve;fe.prototype.dlShiftTo=yve;fe.prototype.drShiftTo=gve;fe.prototype.lShiftTo=mve;fe.prototype.rShiftTo=bve;fe.prototype.subTo=wve;fe.prototype.multiplyTo=_ve;fe.prototype.squareTo=vve;fe.prototype.divRemTo=Eve;fe.prototype.invDigit=Pve;fe.prototype.isEven=Bve;fe.prototype.exp=Lve;fe.prototype.toString=lve;fe.prototype.negate=fve;fe.prototype.abs=hve;fe.prototype.compareTo=dve;fe.prototype.bitLength=pve;fe.prototype.mod=Sve;fe.prototype.modPowInt=Mve;fe.ZERO=Lu(0);fe.ONE=Lu(1);function jve(){var t=qt();return this.copyTo(t),t}function qve(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Uve(){return this.t==0?this.s:this.data[0]<<24>>24}function Fve(){return this.t==0?this.s:this.data[0]<<16>>16}function Kve(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Vve(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function zve(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=Lu(r),n=qt(),s=qt(),o="";for(this.divRemTo(i,n,s);n.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,n.divRemTo(i,n,s);return s.intValue().toString(t)+o}function Hve(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,o=0,a=0;a<t.length;++a){var c=jM(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(n=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),n&&fe.ZERO.subTo(this,this)}function $ve(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(fe.ONE.shiftLeft(t-1),j7,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(fe.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function Gve(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function Wve(t){return this.compareTo(t)==0}function Yve(t){return this.compareTo(t)<0?this:t}function Xve(t){return this.compareTo(t)>0?this:t}function Qve(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Zve(t,e){return t&e}function Jve(t){var e=qt();return this.bitwiseTo(t,Zve,e),e}function j7(t,e){return t|e}function e7e(t){var e=qt();return this.bitwiseTo(t,j7,e),e}function qM(t,e){return t^e}function t7e(t){var e=qt();return this.bitwiseTo(t,qM,e),e}function UM(t,e){return t&~e}function r7e(t){var e=qt();return this.bitwiseTo(t,UM,e),e}function i7e(){for(var t=qt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function n7e(t){var e=qt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function s7e(t){var e=qt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function o7e(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function a7e(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+o7e(this.data[t]);return this.s<0?this.t*this.DB:-1}function c7e(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function u7e(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=c7e(this.data[r]^e);return t}function l7e(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function f7e(t,e){var r=fe.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function h7e(t){return this.changeBit(t,j7)}function d7e(t){return this.changeBit(t,UM)}function p7e(t){return this.changeBit(t,qM)}function y7e(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function g7e(t){var e=qt();return this.addTo(t,e),e}function m7e(t){var e=qt();return this.subTo(t,e),e}function b7e(t){var e=qt();return this.multiplyTo(t,e),e}function w7e(t){var e=qt();return this.divRemTo(t,e,null),e}function _7e(t){var e=qt();return this.divRemTo(t,null,e),e}function v7e(t){var e=qt(),r=qt();return this.divRemTo(t,e,r),new Array(e,r)}function E7e(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function S7e(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function T2(){}function FM(t){return t}function A7e(t,e,r){t.multiplyTo(e,r)}function x7e(t,e){t.squareTo(e)}T2.prototype.convert=FM;T2.prototype.revert=FM;T2.prototype.mulTo=A7e;T2.prototype.sqrTo=x7e;function R7e(t){return this.exp(t,new T2)}function I7e(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function T7e(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function Yd(t){this.r2=qt(),this.q3=qt(),fe.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function P7e(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=qt();return t.copyTo(e),this.reduce(e),e}function C7e(t){return t}function O7e(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function k7e(t,e){t.squareTo(e),this.reduce(e)}function D7e(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Yd.prototype.convert=P7e;Yd.prototype.revert=C7e;Yd.prototype.reduce=O7e;Yd.prototype.mulTo=D7e;Yd.prototype.sqrTo=k7e;function N7e(t,e){var r=t.bitLength(),i,n=Lu(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new df(e):e.isEven()?s=new Yd(e):s=new pf(e);var o=new Array,a=3,c=i-1,u=(1<<i)-1;if(o[1]=s.convert(this),i>1){var l=qt();for(s.sqrTo(o[1],l);a<=u;)o[a]=qt(),s.mulTo(l,o[a-2],o[a]),a+=2}var h=t.t-1,d,p=!0,y=qt(),m;for(r=m4(t.data[h])-1;h>=0;){for(r>=c?d=t.data[h]>>r-c&u:(d=(t.data[h]&(1<<r+1)-1)<<c-r,h>0&&(d|=t.data[h-1]>>this.DB+r-c)),a=i;(d&1)==0;)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--h),p)o[d].copyTo(n),p=!1;else{for(;a>1;)s.sqrTo(n,y),s.sqrTo(y,n),a-=2;a>0?s.sqrTo(n,y):(m=n,n=y,y=m),s.mulTo(y,o[d],n)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(n,y),m=n,n=y,y=m,--r<0&&(r=this.DB-1,--h)}return s.revert(n)}function B7e(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function L7e(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function M7e(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return fe.ZERO;for(var r=t.clone(),i=this.clone(),n=Lu(1),s=Lu(0),o=Lu(0),a=Lu(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(o,n),s.subTo(a,s)):(i.subTo(r,i),e&&o.subTo(n,o),a.subTo(s,a))}if(i.compareTo(fe.ONE)!=0)return fe.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var xo=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],j7e=(1<<26)/xo[xo.length-1];function q7e(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=xo[xo.length-1]){for(e=0;e<xo.length;++e)if(r.data[0]==xo[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<xo.length;){for(var i=xo[e],n=e+1;n<xo.length&&i<j7e;)i*=xo[n++];for(i=r.modInt(i);e<n;)if(i%xo[e++]==0)return!1}return r.millerRabin(t)}function U7e(t){var e=this.subtract(fe.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=F7e(),s,o=0;o<t;++o){do s=new fe(this.bitLength(),n);while(s.compareTo(fe.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(i,this);if(a.compareTo(fe.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(fe.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function F7e(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}fe.prototype.chunkSize=Kve;fe.prototype.toRadix=zve;fe.prototype.fromRadix=Hve;fe.prototype.fromNumber=$ve;fe.prototype.bitwiseTo=Qve;fe.prototype.changeBit=f7e;fe.prototype.addTo=y7e;fe.prototype.dMultiply=E7e;fe.prototype.dAddOffset=S7e;fe.prototype.multiplyLowerTo=I7e;fe.prototype.multiplyUpperTo=T7e;fe.prototype.modInt=L7e;fe.prototype.millerRabin=U7e;fe.prototype.clone=jve;fe.prototype.intValue=qve;fe.prototype.byteValue=Uve;fe.prototype.shortValue=Fve;fe.prototype.signum=Vve;fe.prototype.toByteArray=Gve;fe.prototype.equals=Wve;fe.prototype.min=Yve;fe.prototype.max=Xve;fe.prototype.and=Jve;fe.prototype.or=e7e;fe.prototype.xor=t7e;fe.prototype.andNot=r7e;fe.prototype.not=i7e;fe.prototype.shiftLeft=n7e;fe.prototype.shiftRight=s7e;fe.prototype.getLowestSetBit=a7e;fe.prototype.bitCount=u7e;fe.prototype.testBit=l7e;fe.prototype.setBit=h7e;fe.prototype.clearBit=d7e;fe.prototype.flipBit=p7e;fe.prototype.add=g7e;fe.prototype.subtract=m7e;fe.prototype.multiply=b7e;fe.prototype.divide=w7e;fe.prototype.remainder=_7e;fe.prototype.divideAndRemainder=v7e;fe.prototype.modPow=N7e;fe.prototype.modInverse=M7e;fe.prototype.pow=R7e;fe.prototype.gcd=B7e;fe.prototype.isProbablePrime=q7e});var GM=g((Est,$M)=>{f();var ha=vt();Bu();fr();var VM=$M.exports=ha.sha1=ha.sha1||{};ha.md.sha1=ha.md.algorithms.sha1=VM;VM.create=function(){zM||K7e();var t=null,e=ha.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=ha.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=ha.util.encodeUtf8(n));var o=n.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=i.fullMessageLength.length-1;a>=0;--a)i.fullMessageLength[a]+=o[1],o[1]=o[0]+(i.fullMessageLength[a]/4294967296>>>0),i.fullMessageLength[a]=i.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(n),HM(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=ha.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,o=s&i.blockLength-1;n.putBytes(q7.substr(0,i.blockLength-o));for(var a,c,u=i.fullMessageLength[0]*8,l=0;l<i.fullMessageLength.length-1;++l)a=i.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,n.putInt32(u>>>0),u=a>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};HM(h,r,n);var d=ha.util.createBuffer();return d.putInt32(h.h0),d.putInt32(h.h1),d.putInt32(h.h2),d.putInt32(h.h3),d.putInt32(h.h4),d},i};var q7=null,zM=!1;function K7e(){q7=String.fromCharCode(128),q7+=ha.util.fillString(String.fromCharCode(0),64),zM=!0}function HM(t,e,r){for(var i,n,s,o,a,c,u,l,h=r.length();h>=64;){for(n=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,l=0;l<16;++l)i=r.getInt32(),e[l]=i,u=a^s&(o^a),i=(n<<5|n>>>27)+u+c+1518500249+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;l<20;++l)i=e[l-3]^e[l-8]^e[l-14]^e[l-16],i=i<<1|i>>>31,e[l]=i,u=a^s&(o^a),i=(n<<5|n>>>27)+u+c+1518500249+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;l<32;++l)i=e[l-3]^e[l-8]^e[l-14]^e[l-16],i=i<<1|i>>>31,e[l]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+1859775393+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;l<40;++l)i=e[l-6]^e[l-16]^e[l-28]^e[l-32],i=i<<2|i>>>30,e[l]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+1859775393+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;l<60;++l)i=e[l-6]^e[l-16]^e[l-28]^e[l-32],i=i<<2|i>>>30,e[l]=i,u=s&o|a&(s^o),i=(n<<5|n>>>27)+u+c+2400959708+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;l<80;++l)i=e[l-6]^e[l-16]^e[l-28]^e[l-32],i=i<<2|i>>>30,e[l]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+3395469782+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,h-=64}}});var XM=g((Sst,YM)=>{f();var da=vt();fr();hf();GM();var WM=YM.exports=da.pkcs1=da.pkcs1||{};WM.encode_rsa_oaep=function(t,e,r){var i,n,s,o;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=da.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),c=a-2*s.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}i||(i=""),s.update(i,"raw");for(var l=s.digest(),h="",d=c-e.length,p=0;p<d;p++)h+="\0";var y=l.getBytes()+h+""+e;if(!n)n=da.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=s.digestLength,u}var m=w4(n,a-s.digestLength-1,o),w=da.util.xorBytes(y,m,y.length),b=w4(w,s.digestLength,o),v=da.util.xorBytes(n,b,n.length);return"\0"+v+w};WM.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var w=new Error("RSAES-OAEP encoded message length is invalid.");throw w.length=e.length,w.expectedLength=o,w}if(n===void 0?n=da.md.sha1.create():n.start(),s||(s=n),o<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var a=n.digest().getBytes(),c=e.charAt(0),u=e.substring(1,n.digestLength+1),l=e.substring(1+n.digestLength),h=w4(l,n.digestLength,s),d=da.util.xorBytes(u,h,u.length),p=w4(d,o-n.digestLength-1,s),y=da.util.xorBytes(l,p,l.length),m=y.substring(0,n.digestLength),w=c!=="\0",b=0;b<n.digestLength;++b)w|=a.charAt(b)!==m.charAt(b);for(var v=1,x=n.digestLength,B=n.digestLength;B<y.length;B++){var O=y.charCodeAt(B),R=O&1^1,N=v?65534:0;w|=O&N,v=v&R,x+=v}if(w||y.charCodeAt(x)!==1)throw new Error("Invalid RSAES-OAEP padding.");return y.substring(x+1)};function w4(t,e,r){r||(r=da.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),i+=r.digest().getBytes()}return i.substring(0,e)}});var QM=g((Ast,U7)=>{f();var Mu=vt();fr();b4();hf();(function(){if(Mu.prime){U7.exports=Mu.prime;return}var t=U7.exports=Mu.prime=Mu.prime||{},e=Mu.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(h,d){return h|d};t.generateProbablePrime=function(h,d,p){typeof d=="function"&&(p=d,d={}),d=d||{};var y=d.algorithm||"PRIMEINC";typeof y=="string"&&(y={name:y}),y.options=y.options||{};var m=d.prng||Mu.random,w={nextBytes:function(b){for(var v=m.getBytesSync(b.length),x=0;x<b.length;++x)b[x]=v.charCodeAt(x)}};if(y.name==="PRIMEINC")return s(h,w,y.options,p);throw new Error("Invalid prime generation algorithm: "+y.name)};function s(h,d,p,y){return"workers"in p?c(h,d,p,y):o(h,d,p,y)}function o(h,d,p,y){var m=u(h,d),w=0,b=l(m.bitLength());"millerRabinTests"in p&&(b=p.millerRabinTests);var v=10;"maxBlockTime"in p&&(v=p.maxBlockTime),a(m,h,d,w,b,v,y)}function a(h,d,p,y,m,w,b){var v=+new Date;do{if(h.bitLength()>d&&(h=u(d,p)),h.isProbablePrime(m))return b(null,h);h.dAddOffset(r[y++%8],0)}while(w<0||+new Date-v<w);Mu.util.setImmediate(function(){a(h,d,p,y,m,w,b)})}function c(h,d,p,y){if(typeof Worker=="undefined")return o(h,d,p,y);var m=u(h,d),w=p.workers,b=p.workLoad||100,v=b*30/8,x=p.workerScript||"forge/prime.worker.js";if(w===-1)return Mu.util.estimateCores(function(O,R){O&&(R=2),w=R-1,B()});B();function B(){w=Math.max(1,w);for(var O=[],R=0;R<w;++R)O[R]=new Worker(x);for(var N=w,R=0;R<w;++R)O[R].addEventListener("message",U);var F=!1;function U(ie){if(!F){--N;var te=ie.data;if(te.found){for(var ae=0;ae<O.length;++ae)O[ae].terminate();return F=!0,y(null,new e(te.prime,16))}m.bitLength()>h&&(m=u(h,d));var ue=m.toString(16);ie.target.postMessage({hex:ue,workLoad:b}),m.dAddOffset(v,0)}}}}function u(h,d){var p=new e(h,d),y=h-1;return p.testBit(y)||p.bitwiseTo(e.ONE.shiftLeft(y),n,p),p.dAddOffset(31-p.mod(i).byteValue(),0),p}function l(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var P2=g((xst,nj)=>{f();var ut=vt();Nu();b4();zd();XM();QM();hf();fr();typeof Dt=="undefined"&&(Dt=ut.jsbn.BigInteger);var Dt,F7=ut.util.isNodejs?ff():null,J=ut.asn1,Is=ut.util;ut.pki=ut.pki||{};nj.exports=ut.pki.rsa=ut.rsa=ut.rsa||{};var lt=ut.pki,V7e=[6,4,2,4,2,4,6,2],z7e={name:"PrivateKeyInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},H7e={name:"RSAPrivateKey",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},$7e={name:"RSAPublicKey",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},G7e=ut.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:J.Class.UNIVERSAL,type:J.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},W7e=function(t){var e;if(t.algorithm in lt.oids)e=lt.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=J.oidToDer(e).getBytes(),n=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]),s=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);s.value.push(J.create(J.Class.UNIVERSAL,J.Type.OID,!1,i)),s.value.push(J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,""));var o=J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(o),J.toDer(n).getBytes()},ZM=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Dt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Dt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new Dt(ut.util.bytesToHex(ut.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(Dt.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var o=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(i.modInverse(e.n)).mod(e.n),o};lt.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=JM(t,e,r)):(n=ut.util.createBuffer(),n.putBytes(t));for(var o=new Dt(n.toHex(),16),a=ZM(o,e,i),c=a.toString(16),u=ut.util.createBuffer(),l=s-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(ut.util.hexToBytes(c)),u.getBytes()};lt.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var o=new Dt(ut.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=ZM(o,e,r),c=a.toString(16),u=ut.util.createBuffer(),l=n-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(ut.util.hexToBytes(c)),i!==!1?_4(u.getBytes(),e,r):u.getBytes()};lt.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||ut.random,n={nextBytes:function(a){for(var c=i.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new Dt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};lt.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Dt(null);r.fromInt(30);for(var i=0,n=function(h,d){return h|d},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new Dt(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Dt.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(X7e(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(V7e[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(Dt.ONE).gcd(t.e).compareTo(Dt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Dt.ONE),t.q1=t.q.subtract(Dt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Dt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var l=t.e.modInverse(t.phi);t.keys={privateKey:lt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:lt.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};lt.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!ut.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(ej("generateKeyPair"))return F7.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return i(a);i(null,{privateKey:lt.privateKeyFromPem(u),publicKey:lt.publicKeyFromPem(c)})});if(tj("generateKey")&&tj("exportKey"))return Is.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ij(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Is.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){i(a)}).then(function(a){if(a){var c=lt.privateKeyFromAsn1(J.fromDer(ut.util.createBuffer(a)));i(null,{privateKey:c,publicKey:lt.setRsaPublicKey(c.n,c.e)})}});if(rj("generateKey")&&rj("exportKey")){var n=Is.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ij(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(a){var c=a.target.result,u=Is.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(l){var h=l.target.result,d=lt.privateKeyFromAsn1(J.fromDer(ut.util.createBuffer(h)));i(null,{privateKey:d,publicKey:lt.setRsaPublicKey(d.n,d.e)})},u.onerror=function(l){i(l)}},n.onerror=function(a){i(a)};return}}else if(ej("generateKeyPairSync")){var s=F7.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:lt.privateKeyFromPem(s.privateKey),publicKey:lt.publicKeyFromPem(s.publicKey)}}}var o=lt.rsa.createKeyPairGenerationState(t,e,r);if(!i)return lt.rsa.stepKeyPairGenerationState(o,0),o.keys;Y7e(o,r,i)};lt.setRsaPublicKey=lt.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(a,c,u){return JM(a,c,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(a,c){return ut.pkcs1.encode_rsa_oaep(c,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(a){return a}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var o=n.encode(i,r,!0);return lt.rsa.encrypt(o,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(a,c){c=_4(c,r,!0);var u=J.fromDer(c);return a===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(a,c){return c=_4(c,r,!0),a===c}});var o=lt.rsa.decrypt(n,r,!0,!1);return s.verify(i,o,r.n.bitLength())},r};lt.setRsaPrivateKey=lt.rsa.setPrivateKey=function(t,e,r,i,n,s,o,a){var c={n:t,e,d:r,p:i,q:n,dP:s,dQ:o,qInv:a};return c.decrypt=function(u,l,h){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var d=lt.rsa.decrypt(u,c,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:_4};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(p,y){return ut.pkcs1.decode_rsa_oaep(y,p,h)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(d,c,!1)},c.sign=function(u,l){var h=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:W7e},h=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return u}},h=1);var d=l.encode(u,c.n.bitLength());return lt.rsa.encrypt(d,c,h)},c};lt.wrapRsaPrivateKey=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(0).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(lt.oids.rsaEncryption).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")]),J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,J.toDer(t).getBytes())])};lt.privateKeyFromAsn1=function(t){var e={},r=[];if(J.validate(t,z7e,e,r)&&(t=J.fromDer(ut.util.createBuffer(e.privateKey))),e={},r=[],!J.validate(t,H7e,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,o,a,c,u,l,h;return n=ut.util.createBuffer(e.privateKeyModulus).toHex(),s=ut.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=ut.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=ut.util.createBuffer(e.privateKeyPrime1).toHex(),c=ut.util.createBuffer(e.privateKeyPrime2).toHex(),u=ut.util.createBuffer(e.privateKeyExponent1).toHex(),l=ut.util.createBuffer(e.privateKeyExponent2).toHex(),h=ut.util.createBuffer(e.privateKeyCoefficient).toHex(),lt.setRsaPrivateKey(new Dt(n,16),new Dt(s,16),new Dt(o,16),new Dt(a,16),new Dt(c,16),new Dt(u,16),new Dt(l,16),new Dt(h,16))};lt.privateKeyToAsn1=lt.privateKeyToRSAPrivateKey=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(0).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.n)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.e)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.d)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.p)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.q)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.dP)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.dQ)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.qInv))])};lt.publicKeyFromAsn1=function(t){var e={},r=[];if(J.validate(t,G7e,e,r)){var i=J.derToOid(e.publicKeyOid);if(i!==lt.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!J.validate(t,$7e,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=ut.util.createBuffer(e.publicKeyModulus).toHex(),o=ut.util.createBuffer(e.publicKeyExponent).toHex();return lt.setRsaPublicKey(new Dt(s,16),new Dt(o,16))};lt.publicKeyToAsn1=lt.publicKeyToSubjectPublicKeyInfo=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(lt.oids.rsaEncryption).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")]),J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,[lt.publicKeyToRSAPublicKey(t)])])};lt.publicKeyToRSAPublicKey=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.n)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,pa(t.e))])};function JM(t,e,r){var i=ut.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var o=n-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)i.putByte(a)}else for(;o>0;){for(var u=0,l=ut.random.getBytes(o),c=0;c<o;++c)a=l.charCodeAt(c),a===0?++u:i.putByte(a);o=u}return i.putByte(0),i.putBytes(t),i}function _4(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=ut.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=n-3-i;for(var u=0;u<c;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(a===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var l=s.getByte();if(l!==0||c!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Y7e(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,c){ut.prime.generateProbablePrime(a,i,c)}function o(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Dt.ONE).gcd(t.e).compareTo(Dt.ONE)!==0){t.p=null,n();return}if(t.q.subtract(Dt.ONE).gcd(t.e).compareTo(Dt.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(Dt.ONE),t.q1=t.q.subtract(Dt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Dt.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var l=t.e.modInverse(t.phi);t.keys={privateKey:lt.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:lt.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function pa(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=ut.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function X7e(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function ej(t){return ut.util.isNodejs&&typeof F7[t]=="function"}function tj(t){return typeof Is.globalScope!="undefined"&&typeof Is.globalScope.crypto=="object"&&typeof Is.globalScope.crypto.subtle=="object"&&typeof Is.globalScope.crypto.subtle[t]=="function"}function rj(t){return typeof Is.globalScope!="undefined"&&typeof Is.globalScope.msCrypto=="object"&&typeof Is.globalScope.msCrypto.subtle=="object"&&typeof Is.globalScope.msCrypto.subtle[t]=="function"}function ij(t){for(var e=ut.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var K7=g((Rst,uj)=>{f();var Be=vt();Gd();Nu();l4();Bu();zd();k7();p4();hf();NM();P2();fr();typeof sj=="undefined"&&(sj=Be.jsbn.BigInteger);var sj,se=Be.asn1,pt=Be.pki=Be.pki||{};uj.exports=pt.pbe=Be.pbe=Be.pbe||{};var yf=pt.oids,Q7e={name:"EncryptedPrivateKeyInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Z7e={name:"PBES2Algorithms",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},J7e={name:"pkcs-12PbeParams",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"iterations"}]};pt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=Be.random.getBytesSync(r.saltSize),n=r.count,s=se.integerToDer(n),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,l,h;switch(r.algorithm){case"aes128":o=16,u=16,l=yf["aes128-CBC"],h=Be.aes.createEncryptionCipher;break;case"aes192":o=24,u=16,l=yf["aes192-CBC"],h=Be.aes.createEncryptionCipher;break;case"aes256":o=32,u=16,l=yf["aes256-CBC"],h=Be.aes.createEncryptionCipher;break;case"des":o=8,u=8,l=yf.desCBC,h=Be.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),y=cj(p),m=Be.pkcs5.pbkdf2(e,i,n,o,y),w=Be.random.getBytesSync(u),b=h(m);b.start(w),b.update(se.toDer(t)),b.finish(),c=b.output.getBytes();var v=eEe(i,s,o,p);a=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(yf.pkcs5PBES2).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(yf.pkcs5PBKDF2).getBytes()),v]),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(l).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,w)])])])}else if(r.algorithm==="3des"){o=24;var x=new Be.util.ByteBuffer(i),m=pt.pbe.generatePkcs12Key(e,x,1,n,o),w=pt.pbe.generatePkcs12Key(e,x,2,n,o),b=Be.des.createEncryptionCipher(m);b.start(w),b.update(se.toDer(t)),b.finish(),c=b.output.getBytes(),a=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(yf["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,i),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,s.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var B=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[a,se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,c)]);return B};pt.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!se.validate(t,Q7e,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var o=se.derToOid(i.encryptionOid),a=pt.pbe.getCipher(o,i.encryptionParams,e),c=Be.util.createBuffer(i.encryptedData);return a.update(c),a.finish()&&(r=se.fromDer(a.output)),r};pt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:se.toDer(t).getBytes()};return Be.pem.encode(r,{maxline:e})};pt.encryptedPrivateKeyFromPem=function(t){var e=Be.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return se.fromDer(e.body)};pt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=pt.wrapRsaPrivateKey(pt.privateKeyToAsn1(t));return i=pt.encryptPrivateKeyInfo(i,e,r),pt.encryptedPrivateKeyToPem(i)}var n,s,o,a;switch(r.algorithm){case"aes128":n="AES-128-CBC",o=16,s=Be.random.getBytesSync(16),a=Be.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",o=24,s=Be.random.getBytesSync(16),a=Be.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",o=32,s=Be.random.getBytesSync(16),a=Be.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",o=24,s=Be.random.getBytesSync(8),a=Be.des.createEncryptionCipher;break;case"des":n="DES-CBC",o=8,s=Be.random.getBytesSync(8),a=Be.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=Be.pbe.opensslDeriveBytes(e,s.substr(0,8),o),l=a(u);l.start(s),l.update(se.toDer(pt.privateKeyToAsn1(t))),l.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:Be.util.bytesToHex(s).toUpperCase()},body:l.output.getBytes()};return Be.pem.encode(h)};pt.decryptRsaPrivateKey=function(t,e){var r=null,i=Be.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,o;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,o=Be.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=Be.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=Be.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=Be.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=Be.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(h){return Be.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,o=function(h){return Be.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,o=function(h){return Be.rc2.createDecryptionCipher(h,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var a=Be.util.hexToBytes(i.dekInfo.parameters),c=Be.pbe.opensslDeriveBytes(e,a.substr(0,8),s),u=o(c);if(u.start(a),u.update(Be.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=pt.decryptPrivateKeyInfo(se.fromDer(r),e):r=se.fromDer(r),r!==null&&(r=pt.privateKeyFromAsn1(r)),r};pt.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var o,a;if(typeof s=="undefined"||s===null){if(!("sha1"in Be.md))throw new Error('"sha1" hash algorithm unavailable.');s=Be.md.sha1.create()}var c=s.digestLength,u=s.blockLength,l=new Be.util.ByteBuffer,h=new Be.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)h.putInt16(t.charCodeAt(a));h.putInt16(0)}var d=h.length(),p=e.length(),y=new Be.util.ByteBuffer;y.fillWithByte(r,u);var m=u*Math.ceil(p/u),w=new Be.util.ByteBuffer;for(a=0;a<m;a++)w.putByte(e.at(a%p));var b=u*Math.ceil(d/u),v=new Be.util.ByteBuffer;for(a=0;a<b;a++)v.putByte(h.at(a%d));var x=w;x.putBuffer(v);for(var B=Math.ceil(n/c),O=1;O<=B;O++){var R=new Be.util.ByteBuffer;R.putBytes(y.bytes()),R.putBytes(x.bytes());for(var N=0;N<i;N++)s.start(),s.update(R.getBytes()),R=s.digest();var F=new Be.util.ByteBuffer;for(a=0;a<u;a++)F.putByte(R.at(a%c));var U=Math.ceil(p/u)+Math.ceil(d/u),ie=new Be.util.ByteBuffer;for(o=0;o<U;o++){var te=new Be.util.ByteBuffer(x.getBytes(u)),ae=511;for(a=F.length()-1;a>=0;a--)ae=ae>>8,ae+=F.at(a)+te.at(a),te.setAt(a,ae&255);ie.putBuffer(te)}x=ie,l.putBuffer(R)}return l.truncate(l.length()-n),l};pt.pbe.getCipher=function(t,e,r){switch(t){case pt.oids.pkcs5PBES2:return pt.pbe.getCipherForPBES2(t,e,r);case pt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pt.oids["pbewithSHAAnd40BitRC2-CBC"]:return pt.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};pt.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!se.validate(e,Z7e,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=se.derToOid(i.kdfOid),t!==pt.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=se.derToOid(i.encOid),t!==pt.oids["aes128-CBC"]&&t!==pt.oids["aes192-CBC"]&&t!==pt.oids["aes256-CBC"]&&t!==pt.oids["des-EDE3-CBC"]&&t!==pt.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=i.kdfSalt,a=Be.util.createBuffer(i.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(pt.oids[t]){case"aes128-CBC":c=16,u=Be.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=Be.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=Be.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=Be.des.createDecryptionCipher;break;case"desCBC":c=8,u=Be.des.createDecryptionCipher;break}var l=aj(i.prfOid),h=Be.pkcs5.pbkdf2(r,o,a,c,l),d=i.encIv,p=u(h);return p.start(d),p};pt.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!se.validate(e,J7e,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var o=Be.util.createBuffer(i.salt),a=Be.util.createBuffer(i.iterations);a=a.getInt(a.length()<<3);var c,u,l;switch(t){case pt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=Be.des.startDecrypting;break;case pt.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(m,w){var b=Be.rc2.createDecryptionCipher(m,40);return b.start(w,null),b};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=aj(i.prfOid),d=pt.pbe.generatePkcs12Key(r,o,1,a,c,h);h.start();var p=pt.pbe.generatePkcs12Key(r,o,2,a,u,h);return l(d,p)};pt.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in Be.md))throw new Error('"md5" hash algorithm unavailable.');i=Be.md.md5.create()}e===null&&(e="");for(var n=[oj(i,t+e)],s=16,o=1;s<r;++o,s+=16)n.push(oj(i,n[o-1]+t+e));return n.join("").substr(0,r)};function oj(t,e){return t.start().update(e).digest().getBytes()}function aj(t){var e;if(!t)e="hmacWithSHA1";else if(e=pt.oids[se.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return cj(e)}function cj(t){var e=Be.md;switch(t){case"hmacWithSHA224":e=Be.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function eEe(t,e,r,i){var n=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,t),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Be.util.hexToBytes(r.toString(16))),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(pt.oids[i]).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.NULL,!1,"")])),n}});var Ts=g((Ist,fj)=>{f();"use strict";function lj(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function tEe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return lj(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),lj(new n,r)}}fj.exports=tEe});var C2=g(hj=>{f();"use strict";hj.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var V7=g((Pst,pj)=>{f();"use strict";var{concat:rEe}=(Wi(),As),{fromString:dj}=(ht(),ri),iEe=C2();function nEe({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let o=iEe.get();r*=8;async function a(u,l){let h=o.getRandomValues(new Uint8Array(n)),d=o.getRandomValues(new Uint8Array(e)),p={name:t,iv:d},y={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},m=await o.subtle.importKey("raw",dj(l),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),w=await o.subtle.deriveKey(y,m,{name:t,length:r},!0,["encrypt"]),b=await o.subtle.encrypt(p,w,u);return rEe([h,p.iv,new Uint8Array(b)])}async function c(u,l){let h=u.slice(0,n),d=u.slice(n,n+e),p=u.slice(n+e),y={name:t,iv:d},m={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},w=await o.subtle.importKey("raw",dj(l),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),b=await o.subtle.deriveKey(m,w,{name:t,length:r},!0,["decrypt"]),v=await o.subtle.decrypt(y,b,p);return new Uint8Array(v)}return{encrypt:a,decrypt:c}}pj.exports={create:nEe}});var gj=g((Cst,yj)=>{f();"use strict";var{base64:sEe}=(nf(),xd),oEe=V7();yj.exports={import:async function(t,e){let r=sEe.decode(t);return await oEe.create().decrypt(r,e)}}});var $7=g((Ost,_j)=>{f();var _r=vt();Bu();fr();var O2=_j.exports=_r.sha512=_r.sha512||{};_r.md.sha512=_r.md.algorithms.sha512=O2;var mj=_r.sha384=_r.sha512.sha384=_r.sha512.sha384||{};mj.create=function(){return O2.create("SHA-384")};_r.md.sha384=_r.md.algorithms.sha384=mj;_r.sha512.sha256=_r.sha512.sha256||{create:function(){return O2.create("SHA-512/256")}};_r.md["sha512/256"]=_r.md.algorithms["sha512/256"]=_r.sha512.sha256;_r.sha512.sha224=_r.sha512.sha224||{create:function(){return O2.create("SHA-512/224")}};_r.md["sha512/224"]=_r.md.algorithms["sha512/224"]=_r.sha512.sha224;O2.create=function(t){if(bj||aEe(),typeof t=="undefined"&&(t="SHA-512"),!(t in gf))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=gf[t],r=null,i=_r.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);i=_r.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=_r.util.encodeUtf8(c));var l=c.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var h=a.fullMessageLength.length-1;h>=0;--h)a.fullMessageLength[h]+=l[1],l[1]=l[0]+(a.fullMessageLength[h]/4294967296>>>0),a.fullMessageLength[h]=a.fullMessageLength[h]>>>0,l[0]=l[1]/4294967296>>>0;return i.putBytes(c),wj(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),a},a.digest=function(){var c=_r.util.createBuffer();c.putBytes(i.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=u&a.blockLength-1;c.putBytes(z7.substr(0,a.blockLength-l));for(var h,d,p=a.fullMessageLength[0]*8,y=0;y<a.fullMessageLength.length-1;++y)h=a.fullMessageLength[y+1]*8,d=h/4294967296>>>0,p+=d,c.putInt32(p>>>0),p=h>>>0;c.putInt32(p);for(var m=new Array(r.length),y=0;y<r.length;++y)m[y]=r[y].slice(0);wj(m,n,c);var w=_r.util.createBuffer(),b;t==="SHA-512"?b=m.length:t==="SHA-384"?b=m.length-2:b=m.length-4;for(var y=0;y<b;++y)w.putInt32(m[y][0]),(y!==b-1||t!=="SHA-512/224")&&w.putInt32(m[y][1]);return w},a};var z7=null,bj=!1,H7=null,gf=null;function aEe(){z7=String.fromCharCode(128),z7+=_r.util.fillString(String.fromCharCode(0),128),H7=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],gf={},gf["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],gf["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],gf["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],gf["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],bj=!0}function wj(t,e,r){for(var i,n,s,o,a,c,u,l,h,d,p,y,m,w,b,v,x,B,O,R,N,F,U,ie,te,ae,ue,De,ve,Ne,ee,Me,dt,ze,$e,le=r.length();le>=128;){for(ve=0;ve<16;++ve)e[ve][0]=r.getInt32()>>>0,e[ve][1]=r.getInt32()>>>0;for(;ve<80;++ve)Me=e[ve-2],Ne=Me[0],ee=Me[1],i=((Ne>>>19|ee<<13)^(ee>>>29|Ne<<3)^Ne>>>6)>>>0,n=((Ne<<13|ee>>>19)^(ee<<3|Ne>>>29)^(Ne<<26|ee>>>6))>>>0,ze=e[ve-15],Ne=ze[0],ee=ze[1],s=((Ne>>>1|ee<<31)^(Ne>>>8|ee<<24)^Ne>>>7)>>>0,o=((Ne<<31|ee>>>1)^(Ne<<24|ee>>>8)^(Ne<<25|ee>>>7))>>>0,dt=e[ve-7],$e=e[ve-16],ee=n+dt[1]+o+$e[1],e[ve][0]=i+dt[0]+s+$e[0]+(ee/4294967296>>>0)>>>0,e[ve][1]=ee>>>0;for(m=t[0][0],w=t[0][1],b=t[1][0],v=t[1][1],x=t[2][0],B=t[2][1],O=t[3][0],R=t[3][1],N=t[4][0],F=t[4][1],U=t[5][0],ie=t[5][1],te=t[6][0],ae=t[6][1],ue=t[7][0],De=t[7][1],ve=0;ve<80;++ve)u=((N>>>14|F<<18)^(N>>>18|F<<14)^(F>>>9|N<<23))>>>0,l=((N<<18|F>>>14)^(N<<14|F>>>18)^(F<<23|N>>>9))>>>0,h=(te^N&(U^te))>>>0,d=(ae^F&(ie^ae))>>>0,a=((m>>>28|w<<4)^(w>>>2|m<<30)^(w>>>7|m<<25))>>>0,c=((m<<4|w>>>28)^(w<<30|m>>>2)^(w<<25|m>>>7))>>>0,p=(m&b|x&(m^b))>>>0,y=(w&v|B&(w^v))>>>0,ee=De+l+d+H7[ve][1]+e[ve][1],i=ue+u+h+H7[ve][0]+e[ve][0]+(ee/4294967296>>>0)>>>0,n=ee>>>0,ee=c+y,s=a+p+(ee/4294967296>>>0)>>>0,o=ee>>>0,ue=te,De=ae,te=U,ae=ie,U=N,ie=F,ee=R+n,N=O+i+(ee/4294967296>>>0)>>>0,F=ee>>>0,O=x,R=B,x=b,B=v,b=m,v=w,ee=n+o,m=i+s+(ee/4294967296>>>0)>>>0,w=ee>>>0;ee=t[0][1]+w,t[0][0]=t[0][0]+m+(ee/4294967296>>>0)>>>0,t[0][1]=ee>>>0,ee=t[1][1]+v,t[1][0]=t[1][0]+b+(ee/4294967296>>>0)>>>0,t[1][1]=ee>>>0,ee=t[2][1]+B,t[2][0]=t[2][0]+x+(ee/4294967296>>>0)>>>0,t[2][1]=ee>>>0,ee=t[3][1]+R,t[3][0]=t[3][0]+O+(ee/4294967296>>>0)>>>0,t[3][1]=ee>>>0,ee=t[4][1]+F,t[4][0]=t[4][0]+N+(ee/4294967296>>>0)>>>0,t[4][1]=ee>>>0,ee=t[5][1]+ie,t[5][0]=t[5][0]+U+(ee/4294967296>>>0)>>>0,t[5][1]=ee>>>0,ee=t[6][1]+ae,t[6][0]=t[6][0]+te+(ee/4294967296>>>0)>>>0,t[6][1]=ee>>>0,ee=t[7][1]+De,t[7][0]=t[7][0]+ue+(ee/4294967296>>>0)>>>0,t[7][1]=ee>>>0,le-=128}}});var Ej=g((kst,vj)=>{f();"use strict";var v4=65536;function cEe(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>v4)for(;r<t;)r+v4>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+v4)),r+=v4);else crypto.getRandomValues(e);return e}vj.exports=cEe});var k2=g((Dst,Sj)=>{f();"use strict";var uEe=Ej(),lEe=Ts();Sj.exports=function(t){if(isNaN(t)||t<=0)throw lEe(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return uEe(t)}});var E4=g(D2=>{f();"use strict";fr();b4();var fEe=vt(),{fromString:hEe}=(ht(),ri),{toString:Aj}=(Qe(),rr),{concat:xj}=(Wi(),As);D2.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=xj([new Uint8Array(e-r.length),r])}return Aj(r,"base64url")};D2.base64urlToBigInteger=t=>{let e=D2.base64urlToBuffer(t);return new fEe.jsbn.BigInteger(Aj(e,"base16"),16)};D2.base64urlToBuffer=(t,e)=>{let r=hEe(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=xj([new Uint8Array(e-r.length),r])}return r}});var Tj=g(N2=>{f();"use strict";Nu();P2();var ju=vt(),{bigIntegerToUintBase64url:ya,base64urlToBigInteger:ga}=E4(),{fromString:Rj}=(ht(),ri),{toString:Ij}=(Qe(),rr);N2.pkcs1ToJwk=function(t){let e=ju.asn1.fromDer(Ij(t,"ascii")),r=ju.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:ya(r.n),e:ya(r.e),d:ya(r.d),p:ya(r.p),q:ya(r.q),dp:ya(r.dP),dq:ya(r.dQ),qi:ya(r.qInv),alg:"RS256",kid:"2011-04-29"}};N2.jwkToPkcs1=function(t){let e=ju.pki.privateKeyToAsn1({n:ga(t.n),e:ga(t.e),d:ga(t.d),p:ga(t.p),q:ga(t.q),dP:ga(t.dp),dQ:ga(t.dq),qInv:ga(t.qi)});return Rj(ju.asn1.toDer(e).getBytes(),"ascii")};N2.pkixToJwk=function(t){let e=ju.asn1.fromDer(Ij(t,"ascii")),r=ju.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:ya(r.n),e:ya(r.e),alg:"RS256",kid:"2011-04-29"}};N2.jwkToPkix=function(t){let e=ju.pki.publicKeyToAsn1({n:ga(t.n),e:ga(t.e)});return Rj(ju.asn1.toDer(e).getBytes(),"ascii")}});var kj=g((Lst,Oj)=>{f();"use strict";P2();var Pj=vt(),{base64urlToBigInteger:dEe}=E4();function Cj(t,e){return e.map(r=>dEe(t[r]))}function pEe(t){return Pj.pki.setRsaPrivateKey(...Cj(t,["n","e","d","p","q","dp","dq","qi"]))}function yEe(t){return Pj.pki.setRsaPublicKey(...Cj(t,["n","e"]))}Oj.exports={jwk2pub:yEe,jwk2priv:pEe}});var Bj=g(Ac=>{f();"use strict";var Sc=C2(),gEe=k2(),{toString:mEe}=(Qe(),rr),{fromString:bEe}=(ht(),ri);Ac.utils=Tj();Ac.generateKey=async function(t){let e=await Sc.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Dj(e);return{privateKey:r[0],publicKey:r[1]}};Ac.unmarshalPrivateKey=async function(t){let r=[await Sc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await wEe(t)],i=await Dj({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};Ac.getRandomValues=gEe;Ac.hashAndSign=async function(t,e){let r=await Sc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await Sc.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};Ac.hashAndVerify=async function(t,e,r){let i=await Sc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Sc.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function Dj(t){return Promise.all([Sc.get().subtle.exportKey("jwk",t.privateKey),Sc.get().subtle.exportKey("jwk",t.publicKey)])}function wEe(t){return Sc.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:_Ee,jwk2priv:vEe}=kj();function Nj(t,e,r,i){let n=e?_Ee(t):vEe(t),s=mEe(Uint8Array.from(r),"ascii"),o=i(s,n);return bEe(o,"ascii")}Ac.encrypt=function(t,e){return Nj(t,!0,e,(r,i)=>i.encrypt(r))};Ac.decrypt=function(t,e){return Nj(t,!1,e,(r,i)=>i.decrypt(r))}});var S4=g((jst,Lj)=>{f();"use strict";var{base64:EEe}=(nf(),xd),SEe=V7();Lj.exports={export:async function(t,e){let i=await SEe.create().encrypt(t,e);return EEe.encode(i)}}});var Fj=g((qst,Uj)=>{f();"use strict";var{sha256:Mj}=(ti(),vs),jj=Ts(),{equals:qj}=(qi(),Zn),{toString:AEe}=(Qe(),rr);$7();var A4=vt(),Ps=Bj(),x4=r4(),xEe=S4(),R4=class{constructor(e){this._key=e}async verify(e,r){return Ps.hashAndVerify(this._key,r,e)}marshal(){return Ps.utils.jwkToPkix(this._key)}get bytes(){return x4.PublicKey.encode({Type:x4.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return Ps.encrypt(this._key,e)}equals(e){return qj(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Mj.digest(this.bytes);return e}},B2=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Ps.getRandomValues(16)}async sign(e){return Ps.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw jj(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new R4(this._publicKey)}decrypt(e){return Ps.decrypt(this._key,e)}marshal(){return Ps.utils.jwkToPkcs1(this._key)}get bytes(){return x4.PrivateKey.encode({Type:x4.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return qj(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Mj.digest(this.bytes);return e}async id(){let e=await this.public.hash();return AEe(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new A4.util.ByteBuffer(this.marshal()),n=A4.asn1.fromDer(i),s=A4.pki.privateKeyFromAsn1(n),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return A4.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return xEe.export(this.bytes,e);throw jj(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function REe(t){let e=Ps.utils.pkcs1ToJwk(t),r=await Ps.unmarshalPrivateKey(e);return new B2(r.privateKey,r.publicKey)}function IEe(t){let e=Ps.utils.pkixToJwk(t);return new R4(e)}async function TEe(t){let e=await Ps.unmarshalPrivateKey(t);return new B2(e.privateKey,e.publicKey)}async function PEe(t){let e=await Ps.generateKey(t);return new B2(e.privateKey,e.publicKey)}Uj.exports={RsaPublicKey:R4,RsaPrivateKey:B2,unmarshalRsaPublicKey:IEe,unmarshalRsaPrivateKey:REe,generateKeyPair:PEe,fromJwk:TEe}});var Yj=g((Tr,Wj)=>{f();"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.utils=Tr.verify=Tr.sign=Tr.getPublicKey=Tr.SignResult=Tr.Signature=Tr.Point=Tr.ExtendedPoint=Tr.CURVE=void 0;var Nr={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};Tr.CURVE=Nr;var gn=32,L2=19681161376707505956807079304988542015446066515923890162744021073123829784752n,CEe=25063068953384623474111414158702152701244531502492656460079210482610430750235n,OEe=54469307008909316920995813868745141605393597292927456921205312896311721017578n,kEe=1159843021668779879193775521855586647937357759715417654439879720876111806838n,DEe=40440834346308536858101042469323190826248399146238708352240133220865137265952n,or=class{constructor(e,r,i,n){this.x=e,this.y=r,this.z=i,this.t=n}static fromAffine(e){if(!(e instanceof Ir))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Ir.ZERO)?or.ZERO:new or(e.x,e.y,1n,pe(e.x*e.y))}static toAffineBatch(e){let r=BEe(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){let r=Y7(e.slice(0,gn)),i=this.calcElligatorRistrettoMap(r),n=Y7(e.slice(gn,gn*2)),s=this.calcElligatorRistrettoMap(n);return i.add(s)}static calcElligatorRistrettoMap(e){let{d:r}=Nr,i=pe(L2*e*e),n=pe((i+1n)*kEe),s=-1n,o=pe((s-r*i)*pe(i+r)),{isValid:a,value:c}=Q7(n,o),u=pe(c*e);Uu(u)||(u=pe(-u)),a||(c=u),a||(s=i);let l=pe(s*(i-1n)*DEe-o),h=c*c,d=pe((c+c)*o),p=pe(l*CEe),y=pe(1n-h),m=pe(1n+h);return new or(pe(d*m),pe(y*p),pe(p*m),pe(d*y))}static fromRistrettoBytes(e){let{a:r,d:i}=Nr,n="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",s=Y7(e);if(!jEe(Vj(s,gn),e)||Uu(s))throw new Error(n);let o=pe(s*s),a=pe(1n+r*o),c=pe(1n-r*o),u=pe(a*a),l=pe(c*c),h=pe(r*i*u-l),{isValid:d,value:p}=Hj(pe(h*l)),y=pe(p*c),m=pe(p*y*h),w=pe((s+s)*y);Uu(w)&&(w=pe(-w));let b=pe(a*m),v=pe(w*b);if(!d||Uu(v)||b===0n)throw new Error(n);return new or(w,b,1n,v)}toRistrettoBytes(){let{x:e,y:r,z:i,t:n}=this,s=pe((i+r)*(i-r)),o=pe(e*r),{value:a}=Hj(pe(s*o**2n)),c=pe(a*s),u=pe(a*o),l=pe(c*u*n),h;Uu(n*l)?([e,r]=[pe(r*L2),pe(e*L2)],h=pe(c*OEe)):h=u,Uu(e*l)&&(r=pe(-r));let d=pe((i-r)*h);return Uu(d)&&(d=pe(-d)),Vj(d,gn)}equals(e){let r=this,i=e,[n,s,o,a]=[r.t,i.t,r.z,i.z];return pe(n*a)===pe(s*o)}negate(){return new or(pe(-this.x),this.y,this.z,pe(-this.t))}double(){let e=this.x,r=this.y,i=this.z,{a:n}=Nr,s=pe(e**2n),o=pe(r**2n),a=pe(2n*i**2n),c=pe(n*s),u=pe((e+r)**2n-s-o),l=pe(c+o),h=pe(l-a),d=pe(c-o),p=pe(u*h),y=pe(l*d),m=pe(u*d),w=pe(h*l);return new or(p,y,w,m)}add(e){let r=this.x,i=this.y,n=this.z,s=this.t,o=e.x,a=e.y,c=e.z,u=e.t,l=pe((i-r)*(a+o)),h=pe((i+r)*(a-o)),d=pe(h-l);if(d===0n)return this.double();let p=pe(n*2n*u),y=pe(s*2n*c),m=pe(y+p),w=pe(h+l),b=pe(y-p),v=pe(m*d),x=pe(w*b),B=pe(m*b),O=pe(d*w);return new or(v,x,O,B)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){if(!zj(e))throw new TypeError("Point#multiply: expected number or bigint");let r=pe(BigInt(e),Nr.n);if(r===1n)return this;let i=or.ZERO,n=this;for(;r>0n;)r&1n&&(i=i.add(n)),n=n.double(),r>>=1n;return i}precomputeWindow(e){let r=256/e+1,i=[],n=this,s=n;for(let o=0;o<r;o++){s=n,i.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(n),i.push(s);n=s.double()}return i}wNAF(e,r){!r&&this.equals(or.BASE)&&(r=Ir.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&G7.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=or.normalizeZ(n),G7.set(r,n)));let s=or.ZERO,o=or.ZERO,a=256/i+1,c=2**(i-1),u=BigInt(2**i-1),l=2**i,h=BigInt(i);for(let d=0;d<a;d++){let p=d*c,y=Number(e&u);if(e>>=h,y>c&&(y-=l,e+=1n),y===0)o=o.add(d%2?n[p].negate():n[p]);else{let m=n[p+Math.abs(y)-1];s=s.add(y<0?m.negate():m)}}return[s,o]}multiply(e,r){if(!zj(e))throw new TypeError("Point#multiply: expected number or bigint");let i=pe(BigInt(e),Nr.n);return or.normalizeZ(this.wNAF(i,r))[0]}toAffine(e=X7(this.z)){let r=pe(this.x*e),i=pe(this.y*e);return new Ir(r,i)}};Tr.ExtendedPoint=or;or.BASE=new or(Nr.Gx,Nr.Gy,1n,pe(Nr.Gx*Nr.Gy));or.ZERO=new or(0n,1n,1n,0n);var G7=new WeakMap,Ir=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,G7.delete(this)}static fromHex(e){let{d:r,P:i}=Nr,n=e instanceof Uint8Array?e:M2(e);if(n.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let s=n[31],o=s&~128,a=(s&128)!=0,c=Uint8Array.from(Array.from(n.slice(0,31)).concat(o)),u=Xd(c);if(u>=i)throw new Error("Point.fromHex expects hex <= Fp");let l=pe(u*u),h=pe(l-1n),d=pe(r*l+1n),{isValid:p,value:y}=Q7(h,d);if(!p)throw new Error("Point.fromHex: invalid y coordinate");let m=(y&1n)===1n;return a!==m&&(y=pe(-y)),new Ir(y,u)}static async fromPrivateKey(e){let r=await Tr.utils.sha512(Gj(e));return Ir.BASE.multiply($j(r))}toRawBytes(){let e=W7(this.y),r=new Uint8Array(gn);for(let n=e.length-2,s=0;s<gn&&n>=0;n-=2,s++)r[s]=Number.parseInt(e[n]+e[n+1],16);let i=this.x&1n?128:0;return r[gn-1]|=i,r}toHex(){return Kj(this.toRawBytes())}toX25519(){return pe((1n+this.y)*X7(1n-this.y))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Ir(pe(-this.x),this.y)}add(e){return or.fromAffine(this).add(or.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return or.fromAffine(this).multiply(e,this).toAffine()}};Tr.Point=Ir;Ir.BASE=new Ir(Nr.Gx,Nr.Gy);Ir.ZERO=new Ir(0n,1n);var qu=class{constructor(e,r){this.r=e,this.s=r}static fromHex(e){e=J7(e);let r=Ir.fromHex(e.slice(0,32)),i=Xd(e.slice(32));if(!qEe(i))throw new Error("Signature.fromHex expects s <= CURVE.n");return new qu(r,i)}toRawBytes(){let e=M2(W7(this.s)).reverse(),r=new Uint8Array(gn);r.set(e);let i=new Uint8Array(gn*2);return i.set(this.r.toRawBytes()),i.set(r,32),i}toHex(){return Kj(this.toRawBytes())}};Tr.Signature=qu;Tr.SignResult=qu;function NEe(...t){if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}function Kj(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function M2(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2;e[r]=Number.parseInt(t.slice(i,i+2),16)}return e}function W7(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Vj(t,e=gn){let r=W7(t).padStart(e*2,"0");return M2(r).reverse()}function Uu(t){return(pe(t)&1n)===1n}function zj(t){return!!(typeof t=="bigint"&&t>0n||typeof t=="number"&&t>0&&Number.isSafeInteger(t))}function Xd(t){let e=0n;for(let r=0;r<t.length;r++)e+=BigInt(t[r])<<8n*BigInt(r);return e}function Y7(t){return pe(Xd(t)&2n**255n-1n)}function pe(t,e=Nr.P){let r=t%e;return r>=0n?r:e+r}function X7(t,e=Nr.P){if(t===0n||e<=0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=pe(t,e),i=e,[n,s,o,a]=[0n,1n,1n,0n];for(;r!==0n;){let u=i/r,l=i%r,h=n-o*u,d=s-a*u;[i,r]=[r,l],[n,s]=[o,a],[o,a]=[h,d]}if(i!==1n)throw new Error("invert: does not exist");return pe(n,e)}function BEe(t,e=Nr.P){let r=t.length,i=new Array(r),n=1n;for(let s=0;s<r;s++)t[s]!==0n&&(i[s]=n,n=pe(n*t[s],e));n=X7(n,e);for(let s=r-1;s>=0;s--){if(t[s]===0n)continue;let o=pe(n*t[s],e);t[s]=pe(n*i[s],e),n=o}return t}function ma(t,e){let{P:r}=Nr,i=t;for(;e-- >0n;)i*=i,i%=r;return i}function LEe(t){let{P:e}=Nr,i=t*t%e*t%e,n=ma(i,2n)*i%e,s=ma(n,1n)*t%e,o=ma(s,5n)*s%e,a=ma(o,10n)*o%e,c=ma(a,20n)*a%e,u=ma(c,40n)*c%e,l=ma(u,80n)*u%e,h=ma(l,80n)*u%e,d=ma(h,10n)*o%e;return ma(d,2n)*t%e}function Q7(t,e){let r=pe(e*e*e),i=pe(r*r*e),n=pe(t*r*LEe(t*i)),s=pe(e*n*n),o=n,a=pe(n*L2),c=s===t,u=s===pe(-t),l=s===pe(-t*L2);return c&&(n=o),(u||l)&&(n=a),Uu(n)&&(n=pe(-n)),{isValid:c||u,value:n}}function Hj(t){return Q7(1n,t)}async function Z7(...t){let e=NEe(...t),r=await Tr.utils.sha512(e),i=Xd(r);return pe(i,Nr.n)}function MEe(t){return t.slice(gn)}function $j(t){let e=gn-1,r=t.slice(0,gn);return r[0]&=248,r[e]&=127,r[e]|=64,pe(Xd(r),Nr.n)}function jEe(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function J7(t){return t instanceof Uint8Array?t:M2(t)}function qEe(t){return 0<t&&t<Nr.n}function Gj(t){let e;if(typeof t=="bigint"||typeof t=="number"&&Number.isSafeInteger(t)){if(e=BigInt(t),e<0n||e>2n**256n)throw new Error("Expected 32 bytes of private key");t=e.toString(16).padStart(gn*2,"0")}if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");return M2(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");return t}else throw new TypeError("Expected valid private key")}async function UEe(t){let e=await Ir.fromPrivateKey(t);return typeof t=="string"?e.toHex():e.toRawBytes()}Tr.getPublicKey=UEe;async function FEe(t,e){let r=await Tr.utils.sha512(Gj(e)),i=$j(r),n=Ir.BASE.multiply(i),s=J7(t),o=await Z7(MEe(r),s),a=Ir.BASE.multiply(o),c=await Z7(a.toRawBytes(),n.toRawBytes(),s),u=pe(o+c*i,Nr.n),l=new qu(a,u);return typeof t=="string"?l.toHex():l.toRawBytes()}Tr.sign=FEe;async function KEe(t,e,r){e=J7(e),r instanceof Ir||(r=Ir.fromHex(r)),t instanceof qu||(t=qu.fromHex(t));let i=await Z7(t.r.toRawBytes(),r.toRawBytes(),e),n=or.fromAffine(r).multiplyUnsafe(i),s=or.BASE.multiply(t.s);return or.fromAffine(t.r).add(n).subtract(s).multiplyUnsafe(8n).equals(or.ZERO)}Tr.verify=KEe;Ir.BASE._setWindowSize(8);var Fu=(()=>{let t=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof Wj!="undefined"&&typeof ps=="function"&&!t?ff():void 0,web:t}})();Tr.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(t=32)=>{if(Fu.web)return Fu.web.getRandomValues(new Uint8Array(t));if(Fu.node){let{randomBytes:e}=Fu.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=1024;for(;t--;){let e=Tr.utils.randomBytes(32),r=Xd(e);if(r>1n&&r<Nr.n)return e}throw new Error("Valid private key was not found in 1024 iterations. PRNG is broken")},sha512:async t=>{if(Fu.web){let e=await Fu.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Fu.node)return Uint8Array.from(Fu.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Ir.BASE){let r=e.equals(Ir.BASE)?e:new Ir(e.x,e.y);return r._setWindowSize(t),r.multiply(1n),r}}});var Qj=g(Ku=>{f();"use strict";var j2=Yj(),VEe=32,zEe=64,I4=32;Ku.publicKeyLength=VEe;Ku.privateKeyLength=zEe;Ku.generateKey=async function(){let t=j2.utils.randomPrivateKey(),e=await j2.getPublicKey(t);return{privateKey:Xj(t,e),publicKey:e}};Ku.generateKeyFromSeed=async function(t){if(t.length!==I4)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await j2.getPublicKey(e);return{privateKey:Xj(e,r),publicKey:r}};Ku.hashAndSign=function(t,e){let r=t.slice(0,I4);return j2.sign(e,r)};Ku.hashAndVerify=function(t,e,r){return j2.verify(e,r,t)};function Xj(t,e){let r=new Uint8Array(Ku.privateKeyLength);for(let i=0;i<I4;i++)r[i]=t[i],r[I4+i]=e[i];return r}});var rq=g((Fst,tq)=>{f();"use strict";var Zj=Ts(),{equals:Jj}=(qi(),Zn),{sha256:eq}=(ti(),vs),{base58btc:HEe}=(Yr(),mo),{identity:$Ee}=(gc(),c2),Zi=Qj(),T4=r4(),GEe=S4(),P4=class{constructor(e){this._key=Zd(e,Zi.publicKeyLength)}async verify(e,r){return Zi.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return T4.PublicKey.encode({Type:T4.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Jj(this.bytes,e.bytes)}async hash(){let{bytes:e}=await eq.digest(this.bytes);return e}},Qd=class{constructor(e,r){this._key=Zd(e,Zi.privateKeyLength),this._publicKey=Zd(r,Zi.publicKeyLength)}async sign(e){return Zi.hashAndSign(this._key,e)}get public(){return new P4(this._publicKey)}marshal(){return this._key}get bytes(){return T4.PrivateKey.encode({Type:T4.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Jj(this.bytes,e.bytes)}async hash(){let{bytes:e}=await eq.digest(this.bytes);return e}async id(){let e=await $Ee.digest(this.public.bytes);return HEe.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return GEe.export(this.bytes,e);throw Zj(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function WEe(t){if(t.length>Zi.privateKeyLength){t=Zd(t,Zi.privateKeyLength+Zi.publicKeyLength);let i=t.slice(0,Zi.privateKeyLength),n=t.slice(Zi.privateKeyLength,t.length);return new Qd(i,n)}t=Zd(t,Zi.privateKeyLength);let e=t.slice(0,Zi.privateKeyLength),r=t.slice(Zi.publicKeyLength);return new Qd(e,r)}function YEe(t){return t=Zd(t,Zi.publicKeyLength),new P4(t)}async function XEe(){let{privateKey:t,publicKey:e}=await Zi.generateKey();return new Qd(t,e)}async function QEe(t){let{privateKey:e,publicKey:r}=await Zi.generateKeyFromSeed(t);return new Qd(e,r)}function Zd(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw Zj(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}tq.exports={Ed25519PublicKey:P4,Ed25519PrivateKey:Qd,unmarshalEd25519PrivateKey:WEe,unmarshalEd25519PublicKey:YEe,generateKeyPair:XEe,generateKeyPairFromSeed:QEe}});var mq=g(Bt=>{f();"use strict";var ZEe=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.utils=Bt.schnorr=Bt.verify=Bt.signSync=Bt.sign=Bt.getSharedSecret=Bt.recoverPublicKey=Bt.getPublicKey=Bt.SignResult=Bt.Signature=Bt.Point=Bt.CURVE=void 0;var JEe=ZEe(ff()),Nt=BigInt(0),Lr=BigInt(1),Xr=BigInt(2),Jd=BigInt(3),e9e=BigInt(8),iq=Xr**BigInt(256),ir={a:Nt,b:BigInt(7),P:iq-Xr**BigInt(32)-BigInt(977),n:iq-BigInt("432420386565659656852420866394968145599"),h:Lr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};Bt.CURVE=ir;function nq(t){let{a:e,b:r}=ir;return Fe(t**Jd+e*t+r)}var C4=ir.a===Nt,Vt=class{constructor(e,r,i){this.x=e,this.y=r,this.z=i}static fromAffine(e){if(!(e instanceof Xt))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new Vt(e.x,e.y,Lr)}static toAffineBatch(e){let r=r9e(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return Vt.toAffineBatch(e).map(Vt.fromAffine)}equals(e){let r=this,i=e,n=Fe(r.z*r.z),s=Fe(r.z*n),o=Fe(i.z*i.z),a=Fe(i.z*o);return Fe(r.x*o)===Fe(n*i.x)&&Fe(r.y*a)===Fe(s*i.y)}negate(){return new Vt(this.x,Fe(-this.y),this.z)}double(){let e=this.x,r=this.y,i=this.z,n=Fe(e**Xr),s=Fe(r**Xr),o=Fe(s**Xr),a=Fe(Xr*(Fe(Fe((e+s)**Xr))-n-o)),c=Fe(Jd*n),u=Fe(c**Xr),l=Fe(u-Xr*a),h=Fe(c*(a-l)-e9e*o),d=Fe(Xr*r*i);return new Vt(l,h,d)}add(e){if(!(e instanceof Vt))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,i=this.y,n=this.z,s=e.x,o=e.y,a=e.z;if(s===Nt||o===Nt)return this;if(r===Nt||i===Nt)return e;let c=Fe(n**Xr),u=Fe(a**Xr),l=Fe(r*u),h=Fe(s*c),d=Fe(i*a*u),p=Fe(Fe(o*n)*c),y=Fe(h-l),m=Fe(p-d);if(y===Nt)return m===Nt?this.double():Vt.ZERO;let w=Fe(y**Xr),b=Fe(y*w),v=Fe(l*w),x=Fe(m**Xr-b-Xr*v),B=Fe(m*(v-x)-d*b),O=Fe(n*a*y);return new Vt(x,B,O)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=aq(e);if(!C4){let l=Vt.ZERO,h=this;for(;r>Nt;)r&Lr&&(l=l.add(h)),h=h.double(),r>>=Lr;return l}let{k1neg:i,k1:n,k2neg:s,k2:o}=uq(r),a=Vt.ZERO,c=Vt.ZERO,u=this;for(;n>Nt||o>Nt;)n&Lr&&(a=a.add(u)),o&Lr&&(c=c.add(u)),u=u.double(),n>>=Lr,o>>=Lr;return i&&(a=a.negate()),s&&(c=c.negate()),c=new Vt(Fe(c.x*ir.beta),c.y,c.z),a.add(c)}precomputeWindow(e){let r=C4?128/e+1:256/e+1,i=[],n=this,s=n;for(let o=0;o<r;o++){s=n,i.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(n),i.push(s);n=s.double()}return i}wNAF(e,r){!r&&this.equals(Vt.BASE)&&(r=Xt.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&eE.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=Vt.normalizeZ(n),eE.set(r,n)));let s=Vt.ZERO,o=Vt.ZERO,a=C4?128/i+1:256/i+1,c=2**(i-1),u=BigInt(2**i-1),l=2**i,h=BigInt(i);for(let d=0;d<a;d++){let p=d*c,y=Number(e&u);if(e>>=h,y>c&&(y-=l,e+=Lr),y===0){let m=n[p];d%2&&(m=m.negate()),o=o.add(m)}else{let m=n[p+Math.abs(y)-1];y<0&&(m=m.negate()),s=s.add(m)}}return{p:s,f:o}}multiply(e,r){let i=aq(e),n,s;if(C4){let{k1neg:o,k1:a,k2neg:c,k2:u}=uq(i),{p:l,f:h}=this.wNAF(a,r),{p:d,f:p}=this.wNAF(u,r);o&&(l=l.negate()),c&&(d=d.negate()),d=new Vt(Fe(d.x*ir.beta),d.y,d.z),n=l.add(d),s=h.add(p)}else{let{p:o,f:a}=this.wNAF(i,r);n=o,s=a}return Vt.normalizeZ([n,s])[0]}toAffine(e=F2(this.z)){let r=e**Xr,i=Fe(this.x*r),n=Fe(this.y*r*e);return new Xt(i,n)}};Vt.BASE=new Vt(ir.Gx,ir.Gy,Lr);Vt.ZERO=new Vt(Nt,Lr,Nt);var eE=new WeakMap,Xt=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,eE.delete(this)}static fromCompressedHex(e){let r=e.length===32,i=Cs(r?e:e.slice(1)),n=nq(i),s=t9e(n),o=(s&Lr)===Lr;r?o&&(s=Fe(-s)):(e[0]&1)==1!==o&&(s=Fe(-s));let a=new Xt(i,s);return a.assertValidity(),a}static fromUncompressedHex(e){let r=Cs(e.slice(1,33)),i=Cs(e.slice(33)),n=new Xt(r,i);return n.assertValidity(),n}static fromHex(e){let r=D4(e),i=r[0];if(r.length===32||r.length===33&&(i===2||i===3))return this.fromCompressedHex(r);if(r.length===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(e){return Xt.BASE.multiply(tp(e))}static fromSignature(e,r,i){let n=e instanceof Uint8Array?Cs(e):Rc(e),s=hq(r),{r:o,s:a}=s;if(i!==0&&i!==1)throw new Error("Cannot recover signature: invalid yParity bit");let c=2+(i&1),u=Xt.fromHex(`0${c}${Vu(o)}`),l=Vt.fromAffine(u).multiplyUnsafe(a),h=Vt.BASE.multiply(n),d=F2(o,ir.n),y=l.subtract(h).multiplyUnsafe(d).toAffine();return y.assertValidity(),y}toRawBytes(e=!1){return zu(this.toHex(e))}toHex(e=!1){let r=Vu(this.x);return e?`${this.y&Lr?"03":"02"}${r}`:`04${r}${Vu(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{P:r}=ir,{x:i,y:n}=this;if(i===Nt||n===Nt||i>=r||n>=r)throw new Error(e);let s=Fe(n*n),o=nq(i);if((s-o)%r!==Nt)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Xt(this.x,Fe(-this.y))}double(){return Vt.fromAffine(this).double().toAffine()}add(e){return Vt.fromAffine(this).add(Vt.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Vt.fromAffine(this).multiply(e,this).toAffine()}};Bt.Point=Xt;Xt.BASE=new Xt(ir.Gx,ir.Gy);Xt.ZERO=new Xt(Nt,Nt);function sq(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}var xc=class{constructor(e,r){this.r=e,this.s=r}static fromCompact(e){if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=e instanceof Uint8Array?O4(e):e;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let i=new xc(Rc(r.slice(0,64)),Rc(r.slice(64,128)));return i.assertValidity(),i}static fromDER(e){let r="Signature.fromDER";if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let i=e instanceof Uint8Array?O4(e):e,n=U2(i.slice(2,4));if(i.slice(0,2)!=="30"||n!==i.length-4||i.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${i}`);let s=U2(i.slice(6,8)),o=8+s,a=i.slice(8,o);if(a.startsWith("00")&&U2(a.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let c=Rc(a);if(i.slice(o,o+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let l=U2(i.slice(o+2,o+4)),h=n-l-s-10;if(h>0||h===-4)throw new Error(`${r}: Invalid total length`);if(l>n-s-4)throw new Error(`${r}: Invalid s`);let d=o+4,p=i.slice(d,d+l);if(p.startsWith("00")&&U2(p.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let y=Rc(p),m=new xc(c,y);return m.assertValidity(),m}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!ep(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!ep(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(e=!1){return zu(this.toDERHex(e))}toDERHex(e=!1){let r=sq(q2(this.s));if(e)return r;let i=sq(q2(this.r)),n=q2(i.length/2),s=q2(r.length/2);return`30${q2(i.length/2+r.length/2+4)}02${n}${i}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return zu(this.toCompactHex())}toCompactHex(){return Vu(this.r)+Vu(this.s)}};Bt.Signature=xc;Bt.SignResult=xc;function oq(...t){if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}function O4(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function Vu(t){return t.toString(16).padStart(64,"0")}function k4(t){return zu(Vu(t))}function q2(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Rc(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function zu(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2;e[r]=Number.parseInt(t.slice(i,i+2),16)}return e}function D4(t){return t instanceof Uint8Array?t:zu(t)}function Cs(t){return Rc(O4(t))}function U2(t){return Number.parseInt(t,16)*2}function aq(t){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&ep(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Fe(t,e=ir.P){let r=t%e;return r>=0?r:e+r}function Os(t,e){let{P:r}=ir,i=t;for(;e-- >Nt;)i*=i,i%=r;return i}function t9e(t){let{P:e}=ir,r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,l=Os(u,Jd)*u%e,h=Os(l,Jd)*u%e,d=Os(h,Xr)*c%e,p=Os(d,i)*d%e,y=Os(p,n)*p%e,m=Os(y,o)*y%e,w=Os(m,a)*m%e,b=Os(w,o)*y%e,v=Os(b,Jd)*u%e,x=Os(v,s)*p%e,B=Os(x,r)*c%e;return Os(B,Xr)}function F2(t,e=ir.P){if(t===Nt||e<=Nt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Fe(t,e),i=e,n=Nt,s=Lr,o=Lr,a=Nt;for(;r!==Nt;){let u=i/r,l=i%r,h=n-o*u,d=s-a*u;i=r,r=l,n=o,s=a,o=h,a=d}if(i!==Lr)throw new Error("invert: does not exist");return Fe(n,e)}function r9e(t,e=ir.P){let r=t.length,i=new Array(r),n=Lr;for(let s=0;s<r;s++)t[s]!==Nt&&(i[s]=n,n=Fe(n*t[s],e));n=F2(n,e);for(let s=r-1;s>=0;s--){if(t[s]===Nt)continue;let o=Fe(n*t[s],e);t[s]=Fe(n*i[s],e),n=o}return t}var cq=(t,e)=>(t+e/Xr)/e,N4=Xr**BigInt(128);function uq(t){let{n:e}=ir,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Lr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=cq(s*t,e),a=cq(-i*t,e),c=Fe(t-o*r-a*n,e),u=Fe(-o*i-a*s,e),l=c>N4,h=u>N4;if(l&&(c=e-c),h&&(u=e-u),c>N4||u>N4)throw new Error("splitScalarEndo: Endomorphism failed");return{k1neg:l,k1:c,k2neg:h,k2:u}}function i9e(t){typeof t!="string"&&(t=O4(t));let e=Rc(t||"0"),i=t.length/2*8-256;return i>0&&(e=e>>BigInt(i)),e>=ir.n&&(e-=ir.n),e}function lq(t,e){if(t==null)throw new Error(`sign: expected valid msgHash, not "${t}"`);let r=typeof t=="string"?Rc(t):Cs(t),i=k4(r),n=Cs(i),s=k4(e),o=new Uint8Array(32).fill(1),a=new Uint8Array(32).fill(0),c=Uint8Array.from([0]),u=Uint8Array.from([1]);return{h1:i,h1n:n,x:s,v:o,k:a,b0:c,b1:u}}async function n9e(t,e){let r=tp(e),{h1:i,h1n:n,x:s,v:o,k:a,b0:c,b1:u}=lq(t,r),l=Bt.utils.hmacSha256;a=await l(a,o,c,s,i),o=await l(a,o),a=await l(a,o,u,s,i),o=await l(a,o);for(let h=0;h<1e3;h++){o=await l(a,o);let d=fq(o,n,r);if(d)return d;a=await l(a,o,c),o=await l(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function s9e(t,e){let r=tp(e),{h1:i,h1n:n,x:s,v:o,k:a,b0:c,b1:u}=lq(t,r),l=Bt.utils.hmacSha256Sync;if(!l)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(a=l(a,o,c,s,i),a instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");o=l(a,o),a=l(a,o,u,s,i),o=l(a,o);for(let h=0;h<1e3;h++){o=l(a,o);let d=fq(o,n,r);if(d)return d;a=l(a,o,c),o=l(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function ep(t){return 0<t&&t<ir.n}function fq(t,e,r){let i=Cs(t);if(!ep(i))return;let n=ir.n,s=Xt.BASE.multiply(i),o=Fe(s.x,n),a=Fe(F2(i,n)*(e+o*r),n);if(!(o===Nt||a===Nt))return[s,o,a]}function tp(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=Rc(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=Cs(t)}else throw new TypeError("Expected valid private key");if(!ep(e))throw new Error("Expected private key: 0 < key < n");return e}function tE(t){return t instanceof Xt?(t.assertValidity(),t):Xt.fromHex(t)}function hq(t){return t instanceof xc?(t.assertValidity(),t):xc.fromDER(t)}function o9e(t,e=!1){let r=Xt.fromPrivateKey(t);return typeof t=="string"?r.toHex(e):r.toRawBytes(e)}Bt.getPublicKey=o9e;function a9e(t,e,r){let i=Xt.fromSignature(t,e,r);return typeof t=="string"?i.toHex():i.toRawBytes()}Bt.recoverPublicKey=a9e;function dq(t){let e=t instanceof Uint8Array,r=typeof t=="string",i=(e||r)&&t.length;return e?i===33||i===65:r?i===66||i===130:t instanceof Xt}function c9e(t,e,r=!1){if(dq(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!dq(e))throw new TypeError("getSharedSecret: second arg must be public key");let i=tE(e);i.assertValidity();let n=i.multiply(tp(t));return typeof t=="string"?n.toHex(r):n.toRawBytes(r)}Bt.getSharedSecret=c9e;function pq(t,e,r=!1){let[i,n,s]=t,{canonical:o,der:a,recovered:c}=e,u=(i.x===n?0:2)|Number(i.y&Lr),l=s,h=ir.n>>Lr;s>h&&o&&(l=ir.n-s,u^=1);let d=new xc(n,l);d.assertValidity();let p=a===!1?d.toCompactHex():d.toDERHex(),y=r?p:zu(p);return c?[y,u]:y}async function u9e(t,e,r={}){return pq(await n9e(t,e),r,typeof t=="string")}Bt.sign=u9e;function l9e(t,e,r={}){return pq(s9e(t,e),r,typeof t=="string")}Bt.signSync=l9e;function f9e(t,e,r){let{n:i}=ir,n;try{n=hq(t)}catch(w){return!1}let{r:s,s:o}=n,a=i9e(e);if(a===Nt)return!1;let c=Vt.fromAffine(tE(r)),u=F2(o,i),l=Fe(a*u,i),h=Fe(s*u,i),d=Vt.BASE.multiply(l),p=c.multiplyUnsafe(h),y=d.add(p).toAffine();return Fe(y.x,i)===s}Bt.verify=f9e;async function rE(t,...e){let r=new Uint8Array(t.split("").map(s=>s.charCodeAt(0))),i=await Bt.utils.sha256(r),n=await Bt.utils.sha256(oq(i,i,...e));return Cs(n)}async function yq(t,e,r){let i=k4(t),n=await rE("BIP0340/challenge",i,e.toRawX(),r);return Fe(n,ir.n)}function iE(t){return Fe(t.y,Xr)===Nt}var mf=class{constructor(e,r){if(this.r=e,this.s=r,e<=Nt||r<=Nt||e>=ir.P||r>=ir.n)throw new Error("Invalid signature")}static fromHex(e){let r=D4(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let i=Cs(r.slice(0,32)),n=Cs(r.slice(32));return new mf(i,n)}toHex(){return Vu(this.r)+Vu(this.s)}toRawBytes(){return zu(this.toHex())}};function h9e(t){let e=Xt.fromPrivateKey(t);return typeof t=="string"?e.toHexX():e.toRawX()}async function d9e(t,e,r=Bt.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);e||(e=Nt);let{n:i}=ir,n=D4(t),s=tp(e),o=D4(r);if(o.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let a=Xt.fromPrivateKey(s),c=iE(a)?s:i-s,u=await rE("BIP0340/aux",o),l=c^u,h=await rE("BIP0340/nonce",k4(l),a.toRawX(),n),d=Fe(h,i);if(d===Nt)throw new Error("sign: Creation of signature failed. k is zero");let p=Xt.fromPrivateKey(d),y=iE(p)?d:i-d,m=await yq(p.x,a,n),w=new mf(p.x,Fe(y+m*c,i));if(!await gq(w.toRawBytes(),n,a.toRawX()))throw new Error("sign: Invalid signature produced");return typeof t=="string"?w.toHex():w.toRawBytes()}async function gq(t,e,r){let i=t instanceof mf?t:mf.fromHex(t),n=typeof e=="string"?zu(e):e,s=tE(r),o=await yq(i.r,s,n),a=Xt.fromPrivateKey(i.s),c=s.multiply(o),u=a.subtract(c);return!(u.equals(Xt.BASE)||!iE(u)||u.x!==i.r)}Bt.schnorr={Signature:mf,getPublicKey:h9e,sign:d9e,verify:gq};Xt.BASE._setWindowSize(8);var Jn={node:JEe.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};Bt.utils={isValidPrivateKey(t){try{return tp(t),!0}catch(e){return!1}},randomBytes:(t=32)=>{if(Jn.web)return Jn.web.getRandomValues(new Uint8Array(t));if(Jn.node){let{randomBytes:e}=Jn.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=8;for(;t--;){let e=Bt.utils.randomBytes(32),r=Cs(e);if(ep(r)&&r!==Lr)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async t=>{if(Jn.web){let e=await Jn.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}else if(Jn.node){let{createHash:e}=Jn.node;return Uint8Array.from(e("sha256").update(t).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Jn.web){let r=await Jn.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=oq(...e),n=await Jn.web.subtle.sign("HMAC",r,i);return new Uint8Array(n)}else if(Jn.node){let{createHmac:r}=Jn.node,i=r("sha256",t);for(let n of e)i.update(n);return Uint8Array.from(i.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=Xt.BASE){let r=e===Xt.BASE?e:new Xt(e.x,e.y);return r._setWindowSize(t),r.multiply(Jd),r}}});var _q=g((Vst,wq)=>{f();"use strict";var K2=Ts(),Hu=mq(),{sha256:bq}=(ti(),vs);wq.exports=()=>{let t=32;function e(){return Hu.utils.randomPrivateKey()}async function r(u,l){let{digest:h}=await bq.digest(l);try{return await Hu.sign(h,u)}catch(d){throw K2(d,"ERR_INVALID_INPUT")}}async function i(u,l,h){try{let{digest:d}=await bq.digest(h);return Hu.verify(l,d,u)}catch(d){throw K2(d,"ERR_INVALID_INPUT")}}function n(u){return Hu.Point.fromHex(u).toRawBytes(!0)}function s(u){return Hu.Point.fromHex(u).toRawBytes(!1)}function o(u){try{Hu.getPublicKey(u,!0)}catch(l){throw K2(l,"ERR_INVALID_PRIVATE_KEY")}}function a(u){try{Hu.Point.fromHex(u)}catch(l){throw K2(l,"ERR_INVALID_PUBLIC_KEY")}}function c(u){try{return Hu.getPublicKey(u,!0)}catch(l){throw K2(l,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:i,compressPublicKey:n,decompressPublicKey:s,validatePrivateKey:o,validatePublicKey:a,computePublicKey:c}}});var Aq=g((zst,Sq)=>{f();"use strict";var{sha256:vq}=(ti(),vs),p9e=Ts(),{equals:Eq}=(qi(),Zn),{toString:y9e}=(Qe(),rr),g9e=S4();Sq.exports=(t,e,r)=>{r=r||_q()();class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,l){return r.hashAndVerify(this._key,l,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Eq(this.bytes,u.bytes)}async hash(){let{bytes:u}=await vq.digest(this.bytes);return u}}class n{constructor(u,l){this._key=u,this._publicKey=l||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Eq(this.bytes,u.bytes)}async hash(){let{bytes:u}=await vq.digest(this.bytes);return u}async id(){let u=await this.public.hash();return y9e(u,"base58btc")}async export(u,l="libp2p-key"){if(l==="libp2p-key")return g9e.export(this.bytes,u);throw p9e(new Error(`export format '${l}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(c){return new n(c)}function o(c){return new i(c)}async function a(){let c=await r.generateKey();return new n(c)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:o,generateKeyPair:a}}});var Rq=g((Hst,xq)=>{f();"use strict";xq.exports={SHA1:20,SHA256:32,SHA512:64}});var nE=g(Tq=>{f();"use strict";var Iq=C2(),m9e=Rq(),b9e={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},w9e=async(t,e)=>{let r=await Iq.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};Tq.create=async function(t,e){let r=b9e[t],i=await Iq.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return w9e(i,n)},length:m9e[t]}}});var Dq=g((Gst,kq)=>{f();"use strict";var Pq=Ts(),{concat:Cq}=(Wi(),As),{fromString:_9e}=(ht(),ri),v9e=nE(),Oq={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};kq.exports=async(t,e,r)=>{let i=Oq[t];if(!i){let v=Object.keys(Oq).join(" / ");throw Pq(new Error(`unknown cipher type '${t}'. Must be ${v}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw Pq(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,o=20,a=_9e("key expansion"),c=2*(s+n+o),u=await v9e.create(e,r),l=await u.digest(a),h=[],d=0;for(;d<c;){let v=await u.digest(Cq([l,a])),x=v.length;d+x>c&&(x=c-d),h.push(v),d+=x,l=await u.digest(l)}let p=c/2,y=Cq(h),m=y.slice(0,p),w=y.slice(p,c),b=v=>({iv:v.slice(0,s),cipherKey:v.slice(s,s+n),macKey:v.slice(s+n)});return{k1:b(m),k2:b(w)}}});var Bq=g((Wst,Nq)=>{f();"use strict";var E9e=Ts();Nq.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw E9e(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var Fq=g(Uq=>{f();"use strict";var S9e=Ts(),V2=C2(),{base64urlToBuffer:Lq}=E4(),A9e=Bq(),{toString:sE}=(Qe(),rr),{concat:x9e}=(Wi(),As),{equals:R9e}=(qi(),Zn),Mq={"P-256":256,"P-384":384,"P-521":521};Uq.generateEphmeralKeyPair=async function(t){A9e(Object.keys(Mq),t);let e=await V2.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let o;s?o=await V2.get().subtle.importKey("jwk",T9e(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):o=e.privateKey;let a=[await V2.get().subtle.importKey("jwk",qq(t,n),{name:"ECDH",namedCurve:t},!1,[]),o],c=await V2.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:a[0]},a[1],Mq[t]);return new Uint8Array(c,c.byteOffset,c.byteLength)},i=await V2.get().subtle.exportKey("jwk",e.publicKey);return{key:I9e(i),genSharedKey:r}};var jq={"P-256":32,"P-384":48,"P-521":66};function I9e(t){let e=jq[t.crv];return x9e([Uint8Array.from([4]),Lq(t.x,e),Lq(t.y,e)],1+e*2)}function qq(t,e){let r=jq[t];if(R9e(!e.slice(0,1),Uint8Array.from([4])))throw S9e(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:sE(e.slice(1,r+1),"base64url"),y:sE(e.slice(1+r),"base64url"),ext:!0}}var T9e=(t,e)=>({...qq(t,e.public),d:sE(e.private,"base64url")})});var Vq=g((Xst,Kq)=>{f();"use strict";var P9e=Fq();Kq.exports=async t=>P9e.generateEphmeralKeyPair(t)});var L4=g((Qst,Hq)=>{f();"use strict";var ba=r4();Nu();K7();var oE=vt(),z2=Ts(),{fromString:C9e}=(ht(),ri),O9e=gj(),ks={rsa:Fj(),ed25519:rq(),secp256k1:Aq()(ba,k2())},B4={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function rp(t){let e=ks[t.toLowerCase()];if(!e){let r=Object.keys(ks).join(" / ");throw z2(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var k9e=async(t,e)=>rp(t).generateKeyPair(e),D9e=async(t,e,r)=>{let i=rp(t);if(t.toLowerCase()!=="ed25519")throw z2(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},N9e=t=>{let e=ba.PublicKey.decode(t),r=e.Data;switch(e.Type){case ba.KeyType.RSA:return ks.rsa.unmarshalRsaPublicKey(r);case ba.KeyType.Ed25519:return ks.ed25519.unmarshalEd25519PublicKey(r);case ba.KeyType.Secp256k1:if(ks.secp256k1)return ks.secp256k1.unmarshalSecp256k1PublicKey(r);throw z2(new Error(B4.message),B4.code);default:rp(e.Type)}},B9e=(t,e)=>(e=(e||"rsa").toLowerCase(),rp(e),t.bytes),zq=async t=>{let e=ba.PrivateKey.decode(t),r=e.Data;switch(e.Type){case ba.KeyType.RSA:return ks.rsa.unmarshalRsaPrivateKey(r);case ba.KeyType.Ed25519:return ks.ed25519.unmarshalEd25519PrivateKey(r);case ba.KeyType.Secp256k1:if(ks.secp256k1)return ks.secp256k1.unmarshalSecp256k1PrivateKey(r);throw z2(new Error(B4.message),B4.code);default:rp(e.Type)}},L9e=(t,e)=>(e=(e||"rsa").toLowerCase(),rp(e),t.bytes),M9e=async(t,e)=>{try{let n=await O9e.import(t,e);return zq(n)}catch(n){}let r=oE.pki.decryptRsaPrivateKey(t,e);if(r===null)throw z2(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=oE.asn1.toDer(oE.pki.privateKeyToAsn1(r));return i=C9e(i.getBytes(),"ascii"),ks.rsa.unmarshalRsaPrivateKey(i)};Hq.exports={supportedKeys:ks,keysPBM:ba,keyStretcher:Dq(),generateEphemeralKeyPair:Vq(),generateKeyPair:k9e,generateKeyPairFromSeed:D9e,unmarshalPublicKey:N9e,marshalPublicKey:B9e,unmarshalPrivateKey:zq,marshalPrivateKey:L9e,import:M9e}});var M4=g((Zst,aE)=>{f();"use strict";function j9e(t,{className:e,symbolName:r}){let i=Symbol.for(r),n={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=s=>!!(s&&s[i]),n}function q9e(t,{className:e,symbolName:r,withoutNew:i}){let n=Symbol.for(r),s={[e]:function(...o){if(i&&!(this instanceof s))return new s(...o);let a=t.call(this,...o)||this;return a&&!a[n]&&Object.defineProperty(a,n,{value:!0}),a}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=o=>!!(o&&o[n]),s}aE.exports=j9e;aE.exports.proto=q9e});var Wq=g((Jst,Gq)=>{f();"use strict";var ip=Si(),$q=ip.Reader,U9e=ip.Writer,hi=ip.util,H2=ip.roots["libp2p-peer-id"]||(ip.roots["libp2p-peer-id"]={});H2.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.id=hi.newBuffer([]),t.prototype.pubKey=hi.newBuffer([]),t.prototype.privKey=hi.newBuffer([]),t.encode=function(r,i){return i||(i=U9e.create()),i.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&i.uint32(26).bytes(r.privKey),i},t.decode=function(r,i){r instanceof $q||(r=$q.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new H2.PeerIdProto;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("id"))throw hi.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof H2.PeerIdProto)return r;var i=new H2.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?hi.base64.decode(r.id,i.id=hi.newBuffer(hi.base64.length(r.id)),0):r.id.length&&(i.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?hi.base64.decode(r.pubKey,i.pubKey=hi.newBuffer(hi.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?hi.base64.decode(r.privKey,i.privKey=hi.newBuffer(hi.base64.length(r.privKey)),0):r.privKey.length&&(i.privKey=r.privKey)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.id="":(n.id=[],i.bytes!==Array&&(n.id=hi.newBuffer(n.id))),i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=hi.newBuffer(n.pubKey))),i.bytes===String?n.privKey="":(n.privKey=[],i.bytes!==Array&&(n.privKey=hi.newBuffer(n.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(n.id=i.bytes===String?hi.base64.encode(r.id,0,r.id.length):i.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?hi.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(n.privKey=i.bytes===String?hi.base64.encode(r.privKey,0,r.privKey.length):i.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,ip.util.toJSONOptions)},t}();Gq.exports=H2});var Je=g((Ji,rU)=>{f();"use strict";var{CID:cE}=(ye(),_u),F9e=(Mi(),dc),K9e=(u2(),R3),V9e=(Yr(),mo),z9e=(nf(),xd),{base58btc:uE}=(Yr(),mo),{base32:H9e}=(Mi(),dc),{base16:Yq}=(xv(),x3),$2=(Gi(),bd),wa=L4(),$9e=M4(),{PeerIdProto:Xq}=Wq(),{equals:bf}=(qi(),Zn),{fromString:G2}=(ht(),ri),{toString:G9e}=(Qe(),rr),{identity:j4}=(gc(),c2),Qq={...F9e,...K9e,...V9e,...z9e},W9e=Object.keys(Qq).reduce((t,e)=>t.or(Qq[e]),H9e.decoder),Y9e=112,Zq=114,Jq=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&i&&!bf(r.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=uE.encode(this.id).substring(1),this._privKey=r,this._pubKey=i}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=$2.decode(this.id);e.code===j4.code&&(this._pubKey=wa.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return wa.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return wa.marshalPrivateKey(this.privKey)}marshal(e){return Xq.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:tU(this.marshalPrivKey()),pubKey:tU(this.marshalPubKey())}}toHexString(){return Yq.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=cE.createV1(Zq,$2.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return bf(this.id,e);if(e.id)return bf(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&bf(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if($2.decode(this.id).code===j4.code)return!0}catch(e){}return!1}},_a=$9e(Jq,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});Ji=rU.exports=_a;var W2=t=>t.bytes.length<=42?$2.create(j4.code,t.bytes).bytes:t.hash(),lE=async(t,e)=>{let r=await W2(e);return new _a(r,t,e)};Ji.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await wa.generateKeyPair(t.keyType,t.bits);return lE(e,e.public)};Ji.createFromHexString=t=>new _a(Yq.decode("f"+t));Ji.createFromBytes=t=>{try{let e=cE.decode(t);if(!eU(e))throw new Error("Supplied PeerID CID is invalid");return Ji.createFromCID(e)}catch{if($2.decode(t).code!==j4.code)throw new Error("Supplied PeerID CID is invalid");return new _a(t)}};Ji.createFromB58String=t=>Ji.createFromBytes(uE.decode("z"+t));var eU=t=>t.code===Zq||t.code===Y9e;Ji.createFromCID=t=>{if(t=cE.asCID(t),!t||!eU(t))throw new Error("Supplied PeerID CID is invalid");return new _a(t.multihash.bytes)};Ji.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=G2(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await wa.unmarshalPublicKey(e);return lE(void 0,r)};Ji.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=G2(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await wa.unmarshalPrivateKey(t);return lE(e,e.public)};Ji.createFromJSON=async t=>{let e=uE.decode("z"+t.id),r=t.privKey&&G2(t.privKey,"base64pad"),i=t.pubKey&&G2(t.pubKey,"base64pad"),n=i&&await wa.unmarshalPublicKey(i);if(!r)return new _a(e,void 0,n);let s=await wa.unmarshalPrivateKey(r),o=await W2(s.public),a;if(n&&(a=await W2(n)),n&&!bf(o,a))throw new Error("Public and private key do not match");if(e&&!bf(o,e))throw new Error("Id and private key do not match");return new _a(e,s,n)};Ji.createFromProtobuf=async t=>{typeof t=="string"&&(t=G2(t,"base16"));let{id:e,privKey:r,pubKey:i}=Xq.decode(t);r=r?await wa.unmarshalPrivateKey(r):!1,i=i?await wa.unmarshalPublicKey(i):!1;let n,s;if(r&&(s=await W2(r.public)),i&&(n=await W2(i)),r){if(i&&!bf(s,n))throw new Error("Public and private key do not match");return new _a(s,r,r.public)}if(i)return new _a(n,void 0,i);if(e)return new _a(e);throw new Error("Protobuf did not contain any usable key material")};Ji.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),Ji.createFromBytes(W9e.decode(t)));Ji.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function tU(t){if(t)return G9e(t,"base64pad")}});var kn=g((not,sU)=>{f();"use strict";var Q9e=async t=>{let e;for await(let r of t)e=r;return e};sU.exports=Q9e});var yU=g((kot,pU)=>{f();"use strict";function dU(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Z9e(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return dU(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),dU(new n,r)}}pU.exports=Z9e});var pE={};kt(pE,{abortedError:()=>J9e,dbDeleteFailedError:()=>Q2,dbOpenFailedError:()=>X2,dbWriteFailedError:()=>Z2,notFoundError:()=>ni});function X2(t){return t=t||new Error("Cannot open database"),(0,sp.default)(t,"ERR_DB_OPEN_FAILED")}function Q2(t){return t=t||new Error("Delete failed"),(0,sp.default)(t,"ERR_DB_DELETE_FAILED")}function Z2(t){return t=t||new Error("Write failed"),(0,sp.default)(t,"ERR_DB_WRITE_FAILED")}function ni(t){return t=t||new Error("Not Found"),(0,sp.default)(t,"ERR_NOT_FOUND")}function J9e(t){return t=t||new Error("Aborted"),(0,sp.default)(t,"ERR_ABORTED")}var sp,Ds=tt(()=>{f();sp=A(yU())});var gU=g((Not,yE)=>{f();var Dot=function(){typeof yE!="undefined"&&(yE.exports=b);var t=24*3600,e=3200,r=(365*400+97)*e/400,i=t*r,n=i*1e3,s=1e3*1e4*1e4*t,o=16777216,a=65536*65536,c=1e3*1e3,u=1e3*1e3*1e3,l="000000000",h=Math.trunc||Me,d=b.prototype;b.fromDate=U,b.fromInt64BE=Ne(0,1,2,3,0,4),b.fromInt64LE=Ne(3,2,1,0,4,0),b.fromString=F,b.fromTimeT=ie,d.year=0,d.time=0,d.nano=0,d.addNano=R,d.getNano=N,d.getTimeT=ae,d.getYear=v,d.toDate=B,d.toJSON=ue,d.toString=De,d.writeInt64BE=ve(0,1,2,3,0,4),d.writeInt64LE=ve(3,2,1,0,4,0);var p="%Y-%m-%dT%H:%M:%S.%NZ",y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],w={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return b;function b(le,Z,we){var je=this;if(!(je instanceof b))return new b(le,Z,we);je.time=+le||0,je.nano=+Z||0,je.year=+we||0,x(je)}function v(){var le=this.toDate().getUTCFullYear();return le+this.year}function x(le){var Z=le.year,we=le.time,je=le.nano,Ue,Re;if(je<0||c<=je){var rt=Math.floor(je/c);je-=rt*c,we+=rt,Ue=1}var P=Z%e;if(we<-s||s<we||P){Re=h(we/n),Re&&(Z+=Re*e,we-=Re*n);var k=O(we);k.setUTCFullYear(P+k.getUTCFullYear()),Z-=P,we=+k,Re=h(Z/e);var L=we+Re*n;Re&&-s<=L&&L<=s&&(Z-=Re*e,we=L),Ue=1}return Ue&&(le.year=Z,le.time=we,le.nano=je),le}function B(){var le=x(this);return O(le.time)}function O(le){var Z=new Date(0);return Z.setTime(le),Z}function R(le){return this.nano+=+le||0,this}function N(){var le=x(this);return(le.time%1e3*c+ +le.nano+u)%u}function F(le){var Z,we=new b;le+="";var je=le.replace(/^\s*[+\-]?\d+/,function(Ue){var Re=+Ue,rt=1970+(Re-1970)%400;return we.year=Re-rt,rt}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(Ue,Re,rt){return Re<0&&(rt*=-1),Z=(+Re*60+ +rt)*6e4,""}).replace(/\.\d+$/,function(Ue){return we.nano=+(Ue+l).substr(1,9),""}).split(/\D+/);if(je.length>1?je[1]--:je[1]=0,we.time=Z=Date.UTC.apply(Date,je)-(Z||0),isNaN(Z))throw new TypeError("Invalid Date");return x(we)}function U(le){return new b(+le)}function ie(le){return te(le,0)}function te(le,Z){Z|=0,Z*=a,le=+le||0;var we=h(Z/i)+h(le/i),je=Z%i+le%i,Ue=h(je/i);return Ue&&(we+=Ue,je-=Ue*i),new b(je*1e3,0,we*e)}function ae(){var le=x(this),Z=Math.floor(le.time/1e3),we=le.year;return we&&(Z+=we*r*t/e),Z}function ue(){return this.toString().replace(/0{1,6}Z$/,"Z")}function De(le){var Z=this,we=Z.toDate(),je={H:L,L:D,M:I,N:M,S:T,Y:Re,a:j,b:V,d:P,e:k,m:rt};return Ue(le||p);function Ue(G){return G.replace(/%./g,function(X){var re=X[1],me=w[re],Ee=je[re];return me?Ue(me):Ee?Ee():X})}function Re(){var G=Z.getYear();return G>999999?"+"+G:G>9999?"+"+$e(G,6):G>=0?$e(G,4):G>=-999999?"-"+$e(-G,6):G}function rt(){return ze(we.getUTCMonth()+1)}function P(){return ze(we.getUTCDate())}function k(){return dt(we.getUTCDate())}function L(){return ze(we.getUTCHours())}function I(){return ze(we.getUTCMinutes())}function T(){return ze(we.getUTCSeconds())}function D(){return $e(we.getUTCMilliseconds(),3)}function M(){return $e(Z.getNano(),9)}function j(){return m[we.getUTCDay()]}function V(){return y[we.getUTCMonth()]}}function ve(le,Z,we,je,Ue,Re){return rt;function rt(k,L){var I=x(this);k||(k=new Array(8)),ee(k,L|=0);var T=Math.floor(I.time/1e3),D=I.year*(r*t/e),M=h(D/a)+h(T/a),j=D%a+T%a,V=Math.floor(j/a);return V&&(M+=V,j-=V*a),P(k,L+Ue,M),P(k,L+Re,j),k}function P(k,L,I){k[L+le]=I>>24&255,k[L+Z]=I>>16&255,k[L+we]=I>>8&255,k[L+je]=I&255}}function Ne(le,Z,we,je,Ue,Re){return rt;function rt(k,L){ee(k,L|=0);var I=P(k,L+Ue),T=P(k,L+Re);return te(T,I)}function P(k,L){return k[L+le]*o+(k[L+Z]<<16|k[L+we]<<8|k[L+je])}}function ee(le,Z){var we=le&&le.length;if(we==null)throw new TypeError("Invalid Buffer");if(we<Z+8)throw new RangeError("Out of range")}function Me(le){var Z=le-le%1;return Z===0&&(le<0||le===0&&1/le!=1/0)?-0:Z}function dt(le){return(le>9?"":" ")+(le|0)}function ze(le){return(le>9?"":"0")+(le|0)}function $e(le,Z){return(l+(le|0)).substr(-Z)}}()});var wU=g((Bot,bU)=>{f();"use strict";Gd();var q4=vt(),{toString:op}=(Qe(),rr),{fromString:mU}=(ht(),ri);bU.exports={createCipheriv:(t,e,r)=>{let i=q4.cipher.createCipher("AES-CTR",op(e,"ascii"));return i.start({iv:op(r,"ascii")}),{update:n=>(i.update(q4.util.createBuffer(op(n,"ascii"))),mU(i.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,r)=>{let i=q4.cipher.createDecipher("AES-CTR",op(e,"ascii"));return i.start({iv:op(r,"ascii")}),{update:n=>(i.update(q4.util.createBuffer(op(n,"ascii"))),mU(i.output.getBytes(),"ascii"))}}}});var EU=g((Lot,vU)=>{f();"use strict";var eSe=Ts(),_U={16:"aes-128-ctr",32:"aes-256-ctr"};vU.exports=function(t){let e=_U[t.length];if(!e){let r=Object.entries(_U).map(([i,n])=>`${i} (${n})`).join(" / ");throw eSe(new Error(`Invalid key length ${t.length} bytes. Must be ${r}`),"ERR_INVALID_KEY_LENGTH")}return e}});var xU=g(AU=>{f();"use strict";var SU=wU(),tSe=EU();AU.create=async function(t,e){let r=tSe(t),i=SU.createCipheriv(r,t,e),n=SU.createDecipheriv(r,t,e);return{async encrypt(o){return i.update(o)},async decrypt(o){return n.update(o)}}}});var TU=g((jot,IU)=>{f();"use strict";var rSe=k7(),iSe=fr(),nSe=Ts(),RU={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function sSe(t,e,r,i,n){let s=RU[n];if(!s){let a=Object.keys(RU).join(" / ");throw nSe(new Error(`Hash '${n}' is unknown or not supported. Must be ${a}`),"ERR_UNSUPPORTED_HASH_TYPE")}let o=rSe(t,e,r,i,s);return iSe.encode64(o)}IU.exports=sSe});var Ic=g(ap=>{f();"use strict";var oSe=nE(),aSe=xU(),cSe=L4();ap.aes=aSe;ap.hmac=oSe;ap.keys=cSe;ap.randomBytes=k2();ap.pbkdf2=TU()});var OU=g((Uot,CU)=>{f();"use strict";function PU(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function uSe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return PU(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),PU(new n,r)}}CU.exports=uSe});var KU=g((Fot,FU)=>{f();FU.exports=dr;var Ns=null;try{Ns=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function dr(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}dr.prototype.__isLong__;Object.defineProperty(dr.prototype,"__isLong__",{value:!0});function Dn(t){return(t&&t.__isLong__)===!0}dr.isLong=Dn;var kU={},DU={};function wf(t,e){var r,i,n;return e?(t>>>=0,(n=0<=t&&t<256)&&(i=DU[t],i)?i:(r=pr(t,(t|0)<0?-1:0,!0),n&&(DU[t]=r),r)):(t|=0,(n=-128<=t&&t<128)&&(i=kU[t],i)?i:(r=pr(t,t<0?-1:0,!1),n&&(kU[t]=r),r))}dr.fromInt=wf;function Bs(t,e){if(isNaN(t))return e?_f:Ls;if(e){if(t<0)return _f;if(t>=BU)return UU}else{if(t<=-LU)return Nn;if(t+1>=LU)return qU}return t<0?Bs(-t,e).neg():pr(t%cp|0,t/cp|0,e)}dr.fromNumber=Bs;function pr(t,e,r){return new dr(t,e,r)}dr.fromBits=pr;var U4=Math.pow;function gE(t,e,r){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ls;if(typeof e=="number"?(r=e,e=!1):e=!!e,r=r||10,r<2||36<r)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return gE(t.substring(1),e,r).neg();for(var n=Bs(U4(r,8)),s=Ls,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+a),r);if(a<8){var u=Bs(U4(r,a));s=s.mul(u).add(Bs(c))}else s=s.mul(n),s=s.add(Bs(c))}return s.unsigned=e,s}dr.fromString=gE;function Io(t,e){return typeof t=="number"?Bs(t,e):typeof t=="string"?gE(t,e):pr(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}dr.fromValue=Io;var NU=1<<16,lSe=1<<24,cp=NU*NU,BU=cp*cp,LU=BU/2,MU=wf(lSe),Ls=wf(0);dr.ZERO=Ls;var _f=wf(0,!0);dr.UZERO=_f;var up=wf(1);dr.ONE=up;var jU=wf(1,!0);dr.UONE=jU;var mE=wf(-1);dr.NEG_ONE=mE;var qU=pr(4294967295|0,2147483647|0,!1);dr.MAX_VALUE=qU;var UU=pr(4294967295|0,4294967295|0,!0);dr.MAX_UNSIGNED_VALUE=UU;var Nn=pr(0,2147483648|0,!1);dr.MIN_VALUE=Nn;var Se=dr.prototype;Se.toInt=function(){return this.unsigned?this.low>>>0:this.low};Se.toNumber=function(){return this.unsigned?(this.high>>>0)*cp+(this.low>>>0):this.high*cp+(this.low>>>0)};Se.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Nn)){var r=Bs(e),i=this.div(r),n=i.mul(r).sub(this);return i.toString(e)+n.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Bs(U4(e,6),this.unsigned),o=this,a="";;){var c=o.div(s),u=o.sub(c.mul(s)).toInt()>>>0,l=u.toString(e);if(o=c,o.isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}};Se.getHighBits=function(){return this.high};Se.getHighBitsUnsigned=function(){return this.high>>>0};Se.getLowBits=function(){return this.low};Se.getLowBitsUnsigned=function(){return this.low>>>0};Se.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Nn)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1};Se.isZero=function(){return this.high===0&&this.low===0};Se.eqz=Se.isZero;Se.isNegative=function(){return!this.unsigned&&this.high<0};Se.isPositive=function(){return this.unsigned||this.high>=0};Se.isOdd=function(){return(this.low&1)==1};Se.isEven=function(){return(this.low&1)==0};Se.equals=function(e){return Dn(e)||(e=Io(e)),this.unsigned!==e.unsigned&&this.high>>>31==1&&e.high>>>31==1?!1:this.high===e.high&&this.low===e.low};Se.eq=Se.equals;Se.notEquals=function(e){return!this.eq(e)};Se.neq=Se.notEquals;Se.ne=Se.notEquals;Se.lessThan=function(e){return this.comp(e)<0};Se.lt=Se.lessThan;Se.lessThanOrEqual=function(e){return this.comp(e)<=0};Se.lte=Se.lessThanOrEqual;Se.le=Se.lessThanOrEqual;Se.greaterThan=function(e){return this.comp(e)>0};Se.gt=Se.greaterThan;Se.greaterThanOrEqual=function(e){return this.comp(e)>=0};Se.gte=Se.greaterThanOrEqual;Se.ge=Se.greaterThanOrEqual;Se.compare=function(e){if(Dn(e)||(e=Io(e)),this.eq(e))return 0;var r=this.isNegative(),i=e.isNegative();return r&&!i?-1:!r&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Se.comp=Se.compare;Se.negate=function(){return!this.unsigned&&this.eq(Nn)?Nn:this.not().add(up)};Se.neg=Se.negate;Se.add=function(e){Dn(e)||(e=Io(e));var r=this.high>>>16,i=this.high&65535,n=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,c=e.low>>>16,u=e.low&65535,l=0,h=0,d=0,p=0;return p+=s+u,d+=p>>>16,p&=65535,d+=n+c,h+=d>>>16,d&=65535,h+=i+a,l+=h>>>16,h&=65535,l+=r+o,l&=65535,pr(d<<16|p,l<<16|h,this.unsigned)};Se.subtract=function(e){return Dn(e)||(e=Io(e)),this.add(e.neg())};Se.sub=Se.subtract;Se.multiply=function(e){if(this.isZero())return Ls;if(Dn(e)||(e=Io(e)),Ns){var r=Ns.mul(this.low,this.high,e.low,e.high);return pr(r,Ns.get_high(),this.unsigned)}if(e.isZero())return Ls;if(this.eq(Nn))return e.isOdd()?Nn:Ls;if(e.eq(Nn))return this.isOdd()?Nn:Ls;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(MU)&&e.lt(MU))return Bs(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,n=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,c=e.high&65535,u=e.low>>>16,l=e.low&65535,h=0,d=0,p=0,y=0;return y+=o*l,p+=y>>>16,y&=65535,p+=s*l,d+=p>>>16,p&=65535,p+=o*u,d+=p>>>16,p&=65535,d+=n*l,h+=d>>>16,d&=65535,d+=s*u,h+=d>>>16,d&=65535,d+=o*c,h+=d>>>16,d&=65535,h+=i*l+n*u+s*c+o*a,h&=65535,pr(p<<16|y,h<<16|d,this.unsigned)};Se.mul=Se.multiply;Se.divide=function(e){if(Dn(e)||(e=Io(e)),e.isZero())throw Error("division by zero");if(Ns){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Ns.div_u:Ns.div_s)(this.low,this.high,e.low,e.high);return pr(r,Ns.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?_f:Ls;var i,n,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _f;if(e.gt(this.shru(1)))return jU;s=_f}else{if(this.eq(Nn)){if(e.eq(up)||e.eq(mE))return Nn;if(e.eq(Nn))return up;var o=this.shr(1);return i=o.div(e).shl(1),i.eq(Ls)?e.isNegative()?up:mE:(n=this.sub(e.mul(i)),s=i.add(n.div(e)),s)}else if(e.eq(Nn))return this.unsigned?_f:Ls;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Ls}for(n=this;n.gte(e);){i=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),c=a<=48?1:U4(2,a-48),u=Bs(i),l=u.mul(e);l.isNegative()||l.gt(n);)i-=c,u=Bs(i,this.unsigned),l=u.mul(e);u.isZero()&&(u=up),s=s.add(u),n=n.sub(l)}return s};Se.div=Se.divide;Se.modulo=function(e){if(Dn(e)||(e=Io(e)),Ns){var r=(this.unsigned?Ns.rem_u:Ns.rem_s)(this.low,this.high,e.low,e.high);return pr(r,Ns.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Se.mod=Se.modulo;Se.rem=Se.modulo;Se.not=function(){return pr(~this.low,~this.high,this.unsigned)};Se.and=function(e){return Dn(e)||(e=Io(e)),pr(this.low&e.low,this.high&e.high,this.unsigned)};Se.or=function(e){return Dn(e)||(e=Io(e)),pr(this.low|e.low,this.high|e.high,this.unsigned)};Se.xor=function(e){return Dn(e)||(e=Io(e)),pr(this.low^e.low,this.high^e.high,this.unsigned)};Se.shiftLeft=function(e){return Dn(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?pr(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):pr(0,this.low<<e-32,this.unsigned)};Se.shl=Se.shiftLeft;Se.shiftRight=function(e){return Dn(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?pr(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):pr(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Se.shr=Se.shiftRight;Se.shiftRightUnsigned=function(e){if(Dn(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var i=this.low;return pr(i>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?pr(r,0,this.unsigned):pr(r>>>e-32,0,this.unsigned)};Se.shru=Se.shiftRightUnsigned;Se.shr_u=Se.shiftRightUnsigned;Se.toSigned=function(){return this.unsigned?pr(this.low,this.high,!1):this};Se.toUnsigned=function(){return this.unsigned?this:pr(this.low,this.high,!0)};Se.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Se.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Se.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]};dr.fromBytes=function(e,r,i){return i?dr.fromBytesLE(e,r):dr.fromBytesBE(e,r)};dr.fromBytesLE=function(e,r){return new dr(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)};dr.fromBytesBE=function(e,r){return new dr(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}});var Rf=g((Sat,dF)=>{f();"use strict";var SSe=async t=>{let e=[];for await(let r of t)e.push(r);return e};dF.exports=SSe});var pF,hp,Y4,DE=tt(()=>{f();pF=A(Rf()),hp=(t,e)=>async function*(){yield*(await(0,pF.default)(t)).sort(e)}(),Y4=(t,e)=>{let r=new RegExp("^"+e);return t.replace(r,"")}});var Ln=g((xat,yF)=>{f();"use strict";var ASe=async t=>{for await(let e of t);};yF.exports=ASe});var To=g((Rat,gF)=>{f();"use strict";var xSe=async function*(t,e){for await(let r of t)await e(r)&&(yield r)};gF.exports=xSe});var If=g((Iat,mF)=>{f();"use strict";var RSe=async function*(t,e){let r=0;if(!(e<1)){for await(let i of t)if(yield i,r++,r===e)return}};mF.exports=RSe});var NE,Tf,BE,Ui,Pf=tt(()=>{f();DE();NE=A(Ln()),Tf=A(To()),BE=A(If()),Ui=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,i){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(let{key:i,value:n}of e)await this.put(i,n,r),yield{key:i,value:n}}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}async*deleteMany(e,r={}){for await(let i of e)await this.delete(i,r),yield i}batch(){let e=[],r=[];return{put(i,n){e.push({key:i,value:n})},delete(i){r.push(i)},commit:async i=>{await(0,NE.default)(this.putMany(e,i)),e=[],await(0,NE.default)(this.deleteMany(r,i)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let i=this._all(e,r);if(e.prefix!=null&&(i=(0,Tf.default)(i,n=>n.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,Tf.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>hp(n,s),i)),e.offset!=null){let n=0;i=(0,Tf.default)(i,()=>n++>=e.offset)}return e.limit!=null&&(i=(0,BE.default)(i,e.limit)),i}queryKeys(e,r){let i=this._allKeys(e,r);if(e.prefix!=null&&(i=(0,Tf.default)(i,n=>n.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,Tf.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>hp(n,s),i)),e.offset!=null){let n=0;i=(0,Tf.default)(i,()=>n++>=e.offset)}return e.limit!=null&&(i=(0,BE.default)(i,e.limit)),i}}});var wF=g((Oat,bF)=>{f();bF.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var LE=g((Dat,vF)=>{f();var _F=wF();vF.exports=class{constructor(e){this.hwm=e||16,this.head=new _F(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new _F(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Ea=g((Nat,EF)=>{f();var ME=LE();EF.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new ME,i,n,s,o=()=>{if(!r.isEmpty()){if(t.writev){let m,w=[];for(;!r.isEmpty();){if(m=r.shift(),m.error)throw m.error;w.push(m.value)}return{done:m.done,value:w}}let y=r.shift();if(y.error)throw y.error;return y}return s?{done:!0}:new Promise((y,m)=>{n=w=>(n=null,w.error?m(w.error):t.writev&&!w.done?y({done:w.done,value:[w.value]}):y(w),i)})},a=y=>n?n(y):(r.push(y),i),c=y=>(r=new ME,n?n({error:y}):(r.push({error:y}),i)),u=y=>s?i:a({done:!1,value:y}),l=y=>s?i:(s=!0,y?c(y):a({done:!0})),h=()=>(r=new ME,l(),{done:!0}),d=y=>(l(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:o,return:h,throw:d,push:u,end:l},!e)return i;let p=i;return i={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(y){return p.throw(y),e&&(e(y),e=null),{done:!0}},return(){return p.return(),e&&(e(),e=null),{done:!0}},push:u,end(y){return p.end(y),e&&(e(y),e=null),i}},i}});var SF,jE,qE,ISe,ny,UE=tt(()=>{f();Pf();Ds();SF=A(ce()),jE=A(Ea()),qE=A(Ln()),ISe=(0,SF.default)("datastore:core:tiered"),ny=class extends Ui{constructor(e){super();this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map(e=>e.open()))}catch(e){throw X2()}}async put(e,r){try{await Promise.all(this.stores.map(i=>i.put(e,r)))}catch(i){throw Z2()}}async get(e,r){for(let i of this.stores)try{let n=await i.get(e,r);if(n)return n}catch(n){ISe(n)}throw ni()}async has(e,r){for(let i of this.stores)if(await i.has(e,r))return!0;return!1}async delete(e,r){try{await Promise.all(this.stores.map(i=>i.delete(e,r)))}catch(i){throw Q2()}}async*putMany(e,r={}){let i,n=this.stores.map(s=>{let o=(0,jE.default)();return(0,qE.default)(s.putMany(o,r)).catch(a=>{i=a}),o});try{for await(let s of e){if(i)throw i;n.forEach(o=>o.push(s)),yield s}}finally{n.forEach(s=>s.end())}}async*deleteMany(e,r={}){let i,n=this.stores.map(s=>{let o=(0,jE.default)();return(0,qE.default)(s.deleteMany(o,r)).catch(a=>{i=a}),o});try{for await(let s of e){if(i)throw i;n.forEach(o=>o.push(s)),yield s}}finally{n.forEach(s=>s.end())}}async close(){await Promise.all(this.stores.map(e=>e.close()))}batch(){let e=this.stores.map(r=>r.batch());return{put:(r,i)=>{e.forEach(n=>n.put(r,i))},delete:r=>{e.forEach(i=>i.delete(r))},commit:async r=>{for(let i of e)await i.commit(r)}}}query(e,r){return this.stores[this.stores.length-1].query(e,r)}queryKeys(e,r){return this.stores[this.stores.length-1].queryKeys(e,r)}}});var sy=g((FE,KE)=>{f();(function(t,e){typeof FE=="object"&&typeof KE!="undefined"?KE.exports=function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}:typeof define=="function"&&define.amd?define(function(){return function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}}):t.dlv=function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}})(FE)});var dp=tt(()=>{f();Ar()});var X4,VE=tt(()=>{f();X4=`This is a repository of IPLD objects. Each IPLD object is in a single file,
named <base32 encoding of cid>.data. Where <base32 encoding of cid> is the
"base32" encoding of the CID (as specified in
https://github.com/multiformats/multibase) without the 'B' prefix.
All the object files are placed in a tree of directories, based on a
function of the CID. This is a form of sharding similar to
the objects directory in git repositories. Previously, we used
prefixes, we now use the next-to-last two charters.
    func NextToLast(base32cid string) {
      nextToLastLen := 2
      offset := len(base32cid) - nextToLastLen - 1
      return str[offset : offset+nextToLastLen]
    }
For example, an object with a base58 CIDv1 of
    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f
has a base32 CIDv1 of
    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA
and will be placed at
    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data
with 'SC' being the last-to-next two characters and the 'B' at the
beginning of the CIDv1 string is the multibase prefix that is not
stored in the filename.
`});var WE={};kt(WE,{NextToLast:()=>GE,PREFIX:()=>Q4,Prefix:()=>HE,README_FN:()=>zE,SHARDING_FN:()=>Z4,ShardBase:()=>oy,Suffix:()=>$E,parseShardFun:()=>AF,readShardFun:()=>J4,readme:()=>X4});function AF(t){if(t=t.trim(),t.length===0)throw new Error("empty shard string");if(!t.startsWith(Q4))throw new Error(`invalid or no path prefix: ${t}`);let e=t.slice(Q4.length).split("/"),r=e[0];if(r!=="v1")throw new Error(`expect 'v1' version, got '${r}'`);let i=e[1];if(!e[2])throw new Error("missing param");let n=parseInt(e[2],10);switch(i){case"prefix":return new HE(n);case"suffix":return new $E(n);case"next-to-last":return new GE(n);default:throw new Error(`unkown sharding function: ${i}`)}}var Q4,Z4,zE,oy,HE,$E,GE,J4,YE=tt(()=>{f();Ar();VE();VE();Q4="/repo/flatfs/shard/",Z4="SHARDING",zE="_README",oy=class{constructor(e){this.param=e,this.name="base",this._padding=""}fun(e){return"implement me"}toString(){return`${Q4}v1/${this.name}/${this.param}`}},HE=class extends oy{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}},$E=class extends oy{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){let r=this._padding+e;return r.slice(r.length-this.param)}},GE=class extends oy{constructor(e){super(e);this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){let r=this._padding+e,i=r.length-this.param-1;return r.slice(i,i+this.param)}};J4=async(t,e)=>{let r=new Te(t).child(new Te(Z4)),n=await(typeof e.getRaw=="function"?e.getRaw.bind(e):e.get.bind(e))(r);return AF(new TextDecoder().decode(n||"").trim())}});var xF={};kt(xF,{MemoryDatastore:()=>e6});var e6,XE=tt(()=>{f();Pf();Ar();Ds();e6=class extends Ui{constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,r){this.data[e.toString()]=r}async get(e){if(!await this.has(e))throw ni();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,r])=>({key:new Te(e),value:r}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Te(e))}}});var mn=g((Wat,RF)=>{f();"use strict";var TSe=async function*(t,e){for await(let r of t)yield e(r)};RF.exports=TSe});var vr=g((Yat,pp)=>{f();var IF=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},QE=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),t6=t=>t&&typeof t.sink=="function"&&QE(t.source),PSe=t=>e=>(t.sink(e),t.source),TF=(...t)=>{if(t6(t[0])){let e=t[0];t[0]=()=>e.source}else if(QE(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&t6(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)t6(t[e])&&(t[e]=PSe(t[e]));return IF(...t)};pp.exports=TF;pp.exports.pipe=TF;pp.exports.rawPipe=IF;pp.exports.isIterable=QE;pp.exports.isDuplex=t6});var Gu,r6,Sa,ay=tt(()=>{f();Pf();Gu=A(mn()),r6=A(vr()),Sa=class extends Ui{constructor(e,r){super();this.child=e,this.transform=r}open(){return this.child.open()}put(e,r,i){return this.child.put(this.transform.convert(e),r,i)}get(e,r){return this.child.get(this.transform.convert(e),r)}has(e,r){return this.child.has(this.transform.convert(e),r)}delete(e,r){return this.child.delete(this.transform.convert(e),r)}async*putMany(e,r={}){let i=this.transform,n=this.child;yield*(0,r6.pipe)(e,async function*(s){yield*(0,Gu.default)(s,({key:o,value:a})=>({key:i.convert(o),value:a}))},async function*(s){yield*n.putMany(s,r)},async function*(s){yield*(0,Gu.default)(s,({key:o,value:a})=>({key:i.invert(o),value:a}))})}async*getMany(e,r={}){let i=this.transform,n=this.child;yield*(0,r6.pipe)(e,async function*(s){yield*(0,Gu.default)(s,o=>i.convert(o))},async function*(s){yield*n.getMany(s,r)})}async*deleteMany(e,r={}){let i=this.transform,n=this.child;yield*(0,r6.pipe)(e,async function*(s){yield*(0,Gu.default)(s,o=>i.convert(o))},async function*(s){yield*n.deleteMany(s,r)},async function*(s){yield*(0,Gu.default)(s,o=>i.invert(o))})}batch(){let e=this.child.batch();return{put:(r,i)=>{e.put(this.transform.convert(r),i)},delete:r=>{e.delete(this.transform.convert(r))},commit:r=>e.commit(r)}}query(e,r){return(0,Gu.default)(this.child.query(e,r),({key:i,value:n})=>({key:this.transform.invert(i),value:n}))}queryKeys(e,r){return(0,Gu.default)(this.child.queryKeys(e,r),i=>this.transform.invert(i))}close(){return this.child.close()}}});var yp,cy,Wu,PF=tt(()=>{f();dp();YE();Pf();ay();Ds();yp=new Te(Z4),cy=new Te(zE),Wu=class extends Ui{constructor(e,r){super();this.child=new Sa(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=r}async open(){await this.child.open(),this.shard=await Wu.create(this.child,this.shard)}_convertKey(e){let r=e.toString();return r===yp.toString()||r===cy.toString()?e:new Te(this.shard.fun(r)).child(e)}_invertKey(e){let r=e.toString();return r===yp.toString()||r===cy.toString()?e:Te.withNamespaces(e.list().slice(1))}static async createOrOpen(e,r){try{await Wu.create(e,r)}catch(i){if(i&&i.message!=="datastore exists")throw i}return Wu.open(e)}static async open(e){let r=await J4("/",e);return new Wu(e,r)}static async create(e,r){let i=await e.has(yp);if(!i&&!r)throw X2(Error("Shard is required when datastore doesn't have a shard key already."));if(!i){let a=typeof e.putRaw=="function"?e.putRaw.bind(e):e.put.bind(e);return await Promise.all([a(yp,new TextEncoder().encode(r.toString()+`
`)),a(cy,new TextEncoder().encode(X4))]),r}let n=await J4("/",e),s=(n||"").toString(),o=r.toString();if(s!==o)throw new Error(`specified fun ${o} does not match repo shard fun ${s}`);return n}put(e,r,i){return this.child.put(e,r,i)}get(e,r){return this.child.get(e,r)}has(e,r){return this.child.has(e,r)}delete(e,r){return this.child.delete(e,r)}async*putMany(e,r={}){yield*this.child.putMany(e,r)}async*getMany(e,r={}){yield*this.child.getMany(e,r)}async*deleteMany(e,r={}){yield*this.child.deleteMany(e,r)}batch(){return this.child.batch()}query(e,r){let i={offset:e.offset,limit:e.limit,orders:[],filters:[s=>s.key.toString()!==yp.toString(),s=>s.key.toString()!==cy.toString()]},{prefix:n}=e;if(n!=null&&i.filters.push(s=>this._invertKey(s.key).toString().startsWith(n)),e.filters!=null){let s=e.filters.map(o=>({key:c,value:u})=>o({key:this._invertKey(c),value:u}));i.filters=i.filters.concat(s)}return e.orders!=null&&(i.orders=e.orders.map(s=>(a,c)=>s({key:this._invertKey(a.key),value:a.value},{key:this._invertKey(c.key),value:c.value}))),this.child.query(i,r)}queryKeys(e,r){let i={offset:e.offset,limit:e.limit,orders:[],filters:[s=>s.toString()!==yp.toString(),s=>s.toString()!==cy.toString()]},{prefix:n}=e;if(n!=null&&i.filters.push(s=>this._invertKey(s).toString().startsWith(n)),e.filters!=null){let s=e.filters.map(o=>c=>o(this._invertKey(c)));i.filters=i.filters.concat(s)}return e.orders!=null&&(i.orders=e.orders.map(s=>(a,c)=>s(this._invertKey(a),this._invertKey(c)))),this.child.queryKeys(i,r)}close(){return this.child.close()}}});var Yu=g((nct,CF)=>{f();"use strict";var CSe=Ea(),OSe=async function*(...t){let e=CSe();setTimeout(async()=>{try{await Promise.all(t.map(async r=>{for await(let i of r)e.push(i)})),e.end()}catch(r){e.end(r)}},0),yield*e};CF.exports=OSe});var uy,ZE,JE,e9,OF=tt(()=>{f();uy=A(To()),ZE=A(If()),JE=A(Yu());Pf();ay();Ds();DE();Ar();e9=class extends Ui{constructor(e){super();this.mounts=e.slice()}async open(){await Promise.all(this.mounts.map(e=>e.datastore.open()))}_lookup(e){for(let r of this.mounts)if(r.prefix.toString()===e.toString()||r.prefix.isAncestorOf(e)){let i=Y4(e.toString(),r.prefix.toString());return{datastore:r.datastore,mountpoint:r.prefix,rest:new Te(i)}}}put(e,r,i){let n=this._lookup(e);if(n==null)throw Z2(new Error("No datastore mounted for this key"));return n.datastore.put(n.rest,r,i)}get(e,r){let i=this._lookup(e);if(i==null)throw ni(new Error("No datastore mounted for this key"));return i.datastore.get(i.rest,r)}has(e,r){let i=this._lookup(e);return i==null?Promise.resolve(!1):i.datastore.has(i.rest,r)}delete(e,r){let i=this._lookup(e);if(i==null)throw Q2(new Error("No datastore mounted for this key"));return i.datastore.delete(i.rest,r)}async close(){await Promise.all(this.mounts.map(e=>e.datastore.close()))}batch(){let e={},r=i=>{let n=this._lookup(i);if(n==null)throw new Error("No datastore mounted for this key");let s=n.mountpoint.toString();return e[s]==null&&(e[s]=n.datastore.batch()),{batch:e[s],rest:n.rest}};return{put:(i,n)=>{let s=r(i);s.batch.put(s.rest,n)},delete:i=>{let n=r(i);n.batch.delete(n.rest)},commit:async i=>{await Promise.all(Object.keys(e).map(n=>e[n].commit(i)))}}}query(e,r){let i=this.mounts.map(s=>{let o=new Sa(s.datastore,{convert:c=>{throw new Error("should never be called")},invert:c=>s.prefix.child(c)}),a;return e.prefix!=null&&(a=Y4(e.prefix,s.prefix.toString())),o.query({prefix:a,filters:e.filters},r)}),n=(0,JE.default)(...i);if(e.filters&&e.filters.forEach(s=>{n=(0,uy.default)(n,s)}),e.orders&&e.orders.forEach(s=>{n=hp(n,s)}),e.offset!=null){let s=0;n=(0,uy.default)(n,()=>s++>=e.offset)}return e.limit!=null&&(n=(0,ZE.default)(n,e.limit)),n}queryKeys(e,r){let i=this.mounts.map(s=>{let o=new Sa(s.datastore,{convert:c=>{throw new Error("should never be called")},invert:c=>s.prefix.child(c)}),a;return e.prefix!=null&&(a=Y4(e.prefix,s.prefix.toString())),o.queryKeys({prefix:a,filters:e.filters},r)}),n=(0,JE.default)(...i);if(e.filters&&e.filters.forEach(s=>{n=(0,uy.default)(n,s)}),e.orders&&e.orders.forEach(s=>{n=hp(n,s)}),e.offset!=null){let s=0;n=(0,uy.default)(n,()=>s++>=e.offset)}return e.limit!=null&&(n=(0,ZE.default)(n,e.limit)),n}}});var t9,kF=tt(()=>{f();dp();ay();t9=class extends Sa{constructor(e,r){super(e,{convert(i){return r.child(i)},invert(i){if(r.toString()==="/")return i;if(!r.isAncestorOf(i))throw new Error(`Expected prefix: (${r.toString()}) in key: ${i.toString()}`);return new Te(i.toString().slice(r.toString().length),!1)}});this.prefix=r}query(e,r){return e.prefix&&this.prefix.toString()!=="/"?super.query(Object.assign({},e,{prefix:this.prefix.child(new Te(e.prefix)).toString()})):super.query(e,r)}queryKeys(e,r){return e.prefix&&this.prefix.toString()!=="/"?super.queryKeys(Object.assign({},e,{prefix:this.prefix.child(new Te(e.prefix)).toString()})):super.queryKeys(e,r)}}});var DF={};kt(DF,{BaseDatastore:()=>Ui,Errors:()=>Cf,KeyTransformDatastore:()=>Sa,MemoryDatastore:()=>e6,MountDatastore:()=>e9,NamespaceDatastore:()=>t9,ShardingDatastore:()=>Wu,TieredDatastore:()=>ny,shard:()=>kSe});var Cf,kSe,i6=tt(()=>{f();Ds();YE();Pf();XE();ay();PF();OF();UE();kF();Cf={...pE},kSe={...WE}});var r9=g((vct,BF)=>{f();"use strict";function NF(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function DSe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return NF(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),NF(new n,r)}}BF.exports=DSe});var UF=g((Lct,qF)=>{f();"use strict";var mp=Si(),jF=mp.Reader,NSe=mp.Writer,Ms=mp.util,fy=mp.roots["libp2p-record"]||(mp.roots["libp2p-record"]={});fy.Record=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.key=Ms.newBuffer([]),t.prototype.value=Ms.newBuffer([]),t.prototype.timeReceived="",t.encode=function(r,i){return i||(i=NSe.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&i.uint32(10).bytes(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&i.uint32(18).bytes(r.value),r.timeReceived!=null&&Object.hasOwnProperty.call(r,"timeReceived")&&i.uint32(42).string(r.timeReceived),i},t.decode=function(r,i){r instanceof jF||(r=jF.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new fy.Record;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.key=r.bytes();break;case 2:s.value=r.bytes();break;case 5:s.timeReceived=r.string();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof fy.Record)return r;var i=new fy.Record;return r.key!=null&&(typeof r.key=="string"?Ms.base64.decode(r.key,i.key=Ms.newBuffer(Ms.base64.length(r.key)),0):r.key.length&&(i.key=r.key)),r.value!=null&&(typeof r.value=="string"?Ms.base64.decode(r.value,i.value=Ms.newBuffer(Ms.base64.length(r.value)),0):r.value.length&&(i.value=r.value)),r.timeReceived!=null&&(i.timeReceived=String(r.timeReceived)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.key="":(n.key=[],i.bytes!==Array&&(n.key=Ms.newBuffer(n.key))),i.bytes===String?n.value="":(n.value=[],i.bytes!==Array&&(n.value=Ms.newBuffer(n.value))),n.timeReceived=""),r.key!=null&&r.hasOwnProperty("key")&&(n.key=i.bytes===String?Ms.base64.encode(r.key,0,r.key.length):i.bytes===Array?Array.prototype.slice.call(r.key):r.key),r.value!=null&&r.hasOwnProperty("value")&&(n.value=i.bytes===String?Ms.base64.encode(r.value,0,r.value.length):i.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.timeReceived!=null&&r.hasOwnProperty("timeReceived")&&(n.timeReceived=r.timeReceived),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,mp.util.toJSONOptions)},t}();qF.exports=fy});var FF=g((Mct,c9)=>{f();"use strict";c9.exports.toRFC3339=t=>{let e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),n=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0"),c=t.getUTCMilliseconds()*1e3*1e3;return`${e}-${r}-${i}T${n}:${s}:${o}.${c}Z`};c9.exports.parseRFC3339=t=>{let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(!r)throw new Error("Invalid format");let i=parseInt(r[1],10),n=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(i,n,s,o,a,c,u))}});var zF=g((jct,VF)=>{f();"use strict";var{Record:u9}=UF(),KF=FF(),hy=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=r,this.timeReceived=i}serialize(){return u9.encode(this.prepareSerialize()).finish()}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&KF.toRFC3339(this.timeReceived)}}static deserialize(e){let r=u9.decode(e);return hy.fromDeserialized(u9.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}))}static fromDeserialized(e){let r;return e.timeReceived&&(r=KF.parseRFC3339(e.timeReceived)),new hy(e.key,e.value,r)}};VF.exports=hy});var o6=g((qct,$F)=>{f();"use strict";function HF(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function BSe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return HF(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),HF(new n,r)}}$F.exports=BSe});var WF=g((Uct,GF)=>{f();"use strict";var{sha256:LSe}=(ti(),vs),a6=o6(),{toString:MSe}=(Qe(),rr),{equals:jSe}=(qi(),Zn),qSe=async(t,e)=>{if(!(t instanceof Uint8Array))throw a6(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw a6(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if(MSe(t.subarray(0,4))!=="/pk/")throw a6(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");let i=t.slice(4),n=await LSe.digest(e);if(!jSe(i,n.bytes))throw a6(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")};GF.exports={func:qSe,sign:!1}});var XF=g((Fct,YF)=>{f();"use strict";YF.exports={pk:WF()}});var ZF=g((Kct,QF)=>{f();"use strict";var USe=o6(),{toString:FSe}=(Qe(),rr),KSe=(t,e)=>{let r=e.key,n=FSe(r).split("/");if(n.length<3)return;let s=t[n[1].toString()];if(!s){let o="Invalid record keytype";throw USe(new Error(o),"ERR_INVALID_RECORD_KEY_TYPE")}return s.func(r,e.value)};QF.exports={verifyRecord:KSe,validators:XF()}});var eK=g((Vct,JF)=>{f();"use strict";var VSe=(t,e)=>0;JF.exports=VSe});var rK=g((zct,tK)=>{f();"use strict";tK.exports={pk:eK()}});var nK=g((Hct,iK)=>{f();"use strict";var l9=o6(),{toString:zSe}=(Qe(),rr),HSe=(t,e,r)=>{if(r.length===0){let o="No records given";throw l9(new Error(o),"ERR_NO_RECORDS_RECEIVED")}let n=zSe(e).split("/");if(n.length<3){let o="Record key does not have a selector function";throw l9(new Error(o),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}let s=t[n[1].toString()];if(!s){let o=`Unrecognized key prefix: ${n[1]}`;throw l9(new Error(o),"ERR_UNRECOGNIZED_KEY_PREFIX")}return r.length===1?0:s(e,r)};iK.exports={bestRecord:HSe,selectors:rK()}});var Aa=g(($ct,sK)=>{f();"use strict";sK.exports={Record:zF(),validator:ZF(),selection:nK()}});var yK=g((but,pK)=>{f();"use strict";var WSe=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;pK.exports=function(e,r){if(r==null&&(r=!1),e.length<2||e.length>255)return!1;var i=e[e.length-1];if(r){if(i!==".")return!1}else if(i===".")return!1;return WSe.test(e)}});var xa=g((jlt,KK)=>{f();"use strict";var iAe=()=>{let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t};KK.exports=iAe});var Wt=g((qlt,T9)=>{f();"use strict";var _p=typeof Reflect=="object"?Reflect:null,VK=_p&&typeof _p.apply=="function"?_p.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},h6;_p&&typeof _p.ownKeys=="function"?h6=_p.ownKeys:Object.getOwnPropertySymbols?h6=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:h6=function(e){return Object.getOwnPropertyNames(e)};function nAe(t){console&&console.warn&&console.warn(t)}var zK=Number.isNaN||function(e){return e!==e};function nr(){nr.init.call(this)}T9.exports=nr;T9.exports.once=cAe;nr.EventEmitter=nr;nr.prototype._events=void 0;nr.prototype._eventsCount=0;nr.prototype._maxListeners=void 0;var HK=10;function d6(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(nr,"defaultMaxListeners",{enumerable:!0,get:function(){return HK},set:function(t){if(typeof t!="number"||t<0||zK(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");HK=t}});nr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||zK(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $K(t){return t._maxListeners===void 0?nr.defaultMaxListeners:t._maxListeners}nr.prototype.getMaxListeners=function(){return $K(this)};nr.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")VK(c,this,r);else for(var u=c.length,l=QK(c,u),i=0;i<u;++i)VK(l[i],this,r);return!0};function GK(t,e,r,i){var n,s,o;if(d6(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=$K(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,nAe(a)}return t}nr.prototype.addListener=function(e,r){return GK(this,e,r,!1)};nr.prototype.on=nr.prototype.addListener;nr.prototype.prependListener=function(e,r){return GK(this,e,r,!0)};function sAe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function WK(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=sAe.bind(i);return n.listener=r,i.wrapFn=n,n}nr.prototype.once=function(e,r){return d6(r),this.on(e,WK(this,e,r)),this};nr.prototype.prependOnceListener=function(e,r){return d6(r),this.prependListener(e,WK(this,e,r)),this};nr.prototype.removeListener=function(e,r){var i,n,s,o,a;if(d6(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():oAe(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};nr.prototype.off=nr.prototype.removeListener;nr.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function YK(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?aAe(n):QK(n,n.length)}nr.prototype.listeners=function(e){return YK(this,e,!0)};nr.prototype.rawListeners=function(e){return YK(this,e,!1)};nr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):XK.call(t,e)};nr.prototype.listenerCount=XK;function XK(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}nr.prototype.eventNames=function(){return this._eventsCount>0?h6(this._events):[]};function QK(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function oAe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function aAe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function cAe(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}ZK(t,e,s,{once:!0}),e!=="error"&&uAe(t,n,{once:!0})})}function uAe(t,e,r){typeof t.on=="function"&&ZK(t,"error",e,r)}function ZK(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var y6=g((Ult,JK)=>{f();"use strict";var p6=xa(),lAe=Wt().EventEmitter;async function*fAe(t,e={}){let r=e.concurrency||1/0;r<1&&(r=1/0);let i=e.ordered==null?!1:e.ordered,n=new lAe,s=[],o=p6(),a=p6(),c=!1,u,l=!1;n.on("task-complete",()=>{a.resolve()}),Promise.resolve().then(async()=>{try{for await(let y of t){if(s.length===r&&(o=p6(),await o.promise),l)break;let m={done:!1};s.push(m),y().then(w=>{m.done=!0,m.ok=!0,m.value=w,n.emit("task-complete")},w=>{m.done=!0,m.err=w,n.emit("task-complete")})}c=!0,n.emit("task-complete")}catch(y){u=y,n.emit("task-complete")}});function h(){return Boolean(i?s[0]&&s[0].done:s.find(y=>y.done))}function*d(){for(;s.length&&s[0].done;){let y=s[0];if(s.shift(),y.ok)yield y.value;else throw l=!0,o.resolve(),y.err;o.resolve()}}function*p(){for(;h();)for(let y=0;y<s.length;y++)if(s[y].done){let m=s[y];if(s.splice(y,1),y--,m.ok)yield m.value;else throw l=!0,o.resolve(),m.err;o.resolve()}}for(;;){if(h()||(a=p6(),await a.promise),u)throw u;if(i?yield*d():yield*p(),c&&s.length===0)break}}JK.exports=fAe});var vp=g((eft,aV)=>{f();"use strict";async function*dAe(t,e={}){let r=t.getReader();try{for(;;){let i=await r.read();if(i.done)return;yield i.value}}finally{e.preventCancel!==!0&&r.cancel(),r.releaseLock()}}aV.exports=dAe});var lV=g((tft,uV)=>{f();"use strict";var cV=vp();function pAe(t){return typeof t.stream=="function"?cV(t.stream()):cV(new Response(t).body)}uV.exports=pAe});var Ep=g((rft,fV)=>{f();"use strict";function yAe(t){let[e,r]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],i=[];return{peek:()=>e.next(),push:n=>{i.push(n)},next:()=>i.length?{done:!1,value:i.shift()}:e.next(),[r](){return this}}}fV.exports=yAe});var E6=g((yft,SV)=>{f();"use strict";async function*gAe(t,e=1){let r=[];e<1&&(e=1);for await(let i of t)for(r.push(i);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length;)yield r.slice(0,e),r=r.slice(e)}SV.exports=gAe});var S6=g((gft,AV)=>{f();"use strict";var mAe=E6();async function*bAe(t,e=1){for await(let r of mAe(t,e)){let i=r.map(n=>n().then(s=>({ok:!0,value:s}),s=>({ok:!1,err:s})));for(let n=0;n<i.length;n++){let s=await i[n];if(s.ok)yield s.value;else throw s.err}}}AV.exports=bAe});var xV=g((yy,A6)=>{f();(function(t,e){"use strict";var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(p){if(!Array.isArray(p)&&!ArrayBuffer.isView(p))return!1;for(var y=0;y<p.length;y++)if(!Number.isInteger(p[y])||p[y]<0||p[y]>255)return!1;return!0}function n(p,y){return(p&65535)*y+(((p>>>16)*y&65535)<<16)}function s(p,y){return p<<y|p>>>32-y}function o(p){return p^=p>>>16,p=n(p,2246822507),p^=p>>>13,p=n(p,3266489909),p^=p>>>16,p}function a(p,y){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535];var m=[0,0,0,0];return m[3]+=p[3]+y[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=p[2]+y[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=p[1]+y[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=p[0]+y[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function c(p,y){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535];var m=[0,0,0,0];return m[3]+=p[3]*y[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=p[2]*y[3],m[1]+=m[2]>>>16,m[2]&=65535,m[2]+=p[3]*y[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=p[1]*y[3],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=p[2]*y[2],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=p[3]*y[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=p[0]*y[3]+p[1]*y[2]+p[2]*y[1]+p[3]*y[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function u(p,y){return y%=64,y===32?[p[1],p[0]]:y<32?[p[0]<<y|p[1]>>>32-y,p[1]<<y|p[0]>>>32-y]:(y-=32,[p[1]<<y|p[0]>>>32-y,p[0]<<y|p[1]>>>32-y])}function l(p,y){return y%=64,y===0?p:y<32?[p[0]<<y|p[1]>>>32-y,p[1]<<y]:[p[1]<<y-32,0]}function h(p,y){return[p[0]^y[0],p[1]^y[1]]}function d(p){return p=h(p,[0,p[0]>>>1]),p=c(p,[4283543511,3981806797]),p=h(p,[0,p[0]>>>1]),p=c(p,[3301882366,444984403]),p=h(p,[0,p[0]>>>1]),p}r.x86.hash32=function(p,y){if(r.inputValidation&&!i(p))return e;y=y||0;for(var m=p.length%4,w=p.length-m,b=y,v=0,x=3432918353,B=461845907,O=0;O<w;O=O+4)v=p[O]|p[O+1]<<8|p[O+2]<<16|p[O+3]<<24,v=n(v,x),v=s(v,15),v=n(v,B),b^=v,b=s(b,13),b=n(b,5)+3864292196;switch(v=0,m){case 3:v^=p[O+2]<<16;case 2:v^=p[O+1]<<8;case 1:v^=p[O],v=n(v,x),v=s(v,15),v=n(v,B),b^=v}return b^=p.length,b=o(b),b>>>0},r.x86.hash128=function(p,y){if(r.inputValidation&&!i(p))return e;y=y||0;for(var m=p.length%16,w=p.length-m,b=y,v=y,x=y,B=y,O=0,R=0,N=0,F=0,U=597399067,ie=2869860233,te=951274213,ae=2716044179,ue=0;ue<w;ue=ue+16)O=p[ue]|p[ue+1]<<8|p[ue+2]<<16|p[ue+3]<<24,R=p[ue+4]|p[ue+5]<<8|p[ue+6]<<16|p[ue+7]<<24,N=p[ue+8]|p[ue+9]<<8|p[ue+10]<<16|p[ue+11]<<24,F=p[ue+12]|p[ue+13]<<8|p[ue+14]<<16|p[ue+15]<<24,O=n(O,U),O=s(O,15),O=n(O,ie),b^=O,b=s(b,19),b+=v,b=n(b,5)+1444728091,R=n(R,ie),R=s(R,16),R=n(R,te),v^=R,v=s(v,17),v+=x,v=n(v,5)+197830471,N=n(N,te),N=s(N,17),N=n(N,ae),x^=N,x=s(x,15),x+=B,x=n(x,5)+2530024501,F=n(F,ae),F=s(F,18),F=n(F,U),B^=F,B=s(B,13),B+=b,B=n(B,5)+850148119;switch(O=0,R=0,N=0,F=0,m){case 15:F^=p[ue+14]<<16;case 14:F^=p[ue+13]<<8;case 13:F^=p[ue+12],F=n(F,ae),F=s(F,18),F=n(F,U),B^=F;case 12:N^=p[ue+11]<<24;case 11:N^=p[ue+10]<<16;case 10:N^=p[ue+9]<<8;case 9:N^=p[ue+8],N=n(N,te),N=s(N,17),N=n(N,ae),x^=N;case 8:R^=p[ue+7]<<24;case 7:R^=p[ue+6]<<16;case 6:R^=p[ue+5]<<8;case 5:R^=p[ue+4],R=n(R,ie),R=s(R,16),R=n(R,te),v^=R;case 4:O^=p[ue+3]<<24;case 3:O^=p[ue+2]<<16;case 2:O^=p[ue+1]<<8;case 1:O^=p[ue],O=n(O,U),O=s(O,15),O=n(O,ie),b^=O}return b^=p.length,v^=p.length,x^=p.length,B^=p.length,b+=v,b+=x,b+=B,v+=b,x+=b,B+=b,b=o(b),v=o(v),x=o(x),B=o(B),b+=v,b+=x,b+=B,v+=b,x+=b,B+=b,("00000000"+(b>>>0).toString(16)).slice(-8)+("00000000"+(v>>>0).toString(16)).slice(-8)+("00000000"+(x>>>0).toString(16)).slice(-8)+("00000000"+(B>>>0).toString(16)).slice(-8)},r.x64.hash128=function(p,y){if(r.inputValidation&&!i(p))return e;y=y||0;for(var m=p.length%16,w=p.length-m,b=[0,y],v=[0,y],x=[0,0],B=[0,0],O=[2277735313,289559509],R=[1291169091,658871167],N=0;N<w;N=N+16)x=[p[N+4]|p[N+5]<<8|p[N+6]<<16|p[N+7]<<24,p[N]|p[N+1]<<8|p[N+2]<<16|p[N+3]<<24],B=[p[N+12]|p[N+13]<<8|p[N+14]<<16|p[N+15]<<24,p[N+8]|p[N+9]<<8|p[N+10]<<16|p[N+11]<<24],x=c(x,O),x=u(x,31),x=c(x,R),b=h(b,x),b=u(b,27),b=a(b,v),b=a(c(b,[0,5]),[0,1390208809]),B=c(B,R),B=u(B,33),B=c(B,O),v=h(v,B),v=u(v,31),v=a(v,b),v=a(c(v,[0,5]),[0,944331445]);switch(x=[0,0],B=[0,0],m){case 15:B=h(B,l([0,p[N+14]],48));case 14:B=h(B,l([0,p[N+13]],40));case 13:B=h(B,l([0,p[N+12]],32));case 12:B=h(B,l([0,p[N+11]],24));case 11:B=h(B,l([0,p[N+10]],16));case 10:B=h(B,l([0,p[N+9]],8));case 9:B=h(B,[0,p[N+8]]),B=c(B,R),B=u(B,33),B=c(B,O),v=h(v,B);case 8:x=h(x,l([0,p[N+7]],56));case 7:x=h(x,l([0,p[N+6]],48));case 6:x=h(x,l([0,p[N+5]],40));case 5:x=h(x,l([0,p[N+4]],32));case 4:x=h(x,l([0,p[N+3]],24));case 3:x=h(x,l([0,p[N+2]],16));case 2:x=h(x,l([0,p[N+1]],8));case 1:x=h(x,[0,p[N]]),x=c(x,O),x=u(x,31),x=c(x,R),b=h(b,x)}return b=h(b,[0,p.length]),v=h(v,[0,p.length]),b=a(b,v),v=a(v,b),b=d(b),v=d(v),b=a(b,v),v=a(v,b),("00000000"+(b[0]>>>0).toString(16)).slice(-8)+("00000000"+(b[1]>>>0).toString(16)).slice(-8)+("00000000"+(v[0]>>>0).toString(16)).slice(-8)+("00000000"+(v[1]>>>0).toString(16)).slice(-8)},typeof yy!="undefined"?(typeof A6!="undefined"&&A6.exports&&(yy=A6.exports=r),yy.murmurHash3=r):typeof define=="function"&&define.amd?define([],function(){return r}):(r._murmurHash3=t.murmurHash3,r.noConflict=function(){return t.murmurHash3=r._murmurHash3,r._murmurHash3=e,r.noConflict=e,r},t.murmurHash3=r)})(yy)});var IV=g((mft,RV)=>{f();RV.exports=xV()});var gy=g((Dft,OV)=>{f();"use strict";function CV(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function AAe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return CV(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),CV(new n,r)}}OV.exports=AAe});var tn=g((Yft,HV)=>{f();"use strict";var{Buffer:Co}=Gt(),zV=Symbol.for("BufferList");function yr(t){if(!(this instanceof yr))return new yr(t);yr._init.call(this,t)}yr._init=function(e){Object.defineProperty(this,zV,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};yr.prototype._new=function(e){return new yr(e)};yr.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};yr.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};yr.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};yr.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};yr.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||Co.alloc(0);let s=!!e,o=this._offset(i),a=n-i,c=a,u=s&&r||0,l=o[1];if(i===0&&n===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:Co.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,u),u+=this._bufs[h].length;return e}if(c<=this._bufs[o[0]].length-l)return s?this._bufs[o[0]].copy(e,r,l,l+c):this._bufs[o[0]].slice(l,l+c);s||(e=Co.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let d=this._bufs[h].length-l;if(c>d)this._bufs[h].copy(e,u,l),u+=d;else{this._bufs[h].copy(e,u,l,l+c),u+=d;break}c-=d,l&&(l=0)}return e.length>u?e.slice(0,u):e};yr.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),s=this._bufs.slice(i[0],n[0]+1);return n[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),i[1]!==0&&(s[0]=s[0].slice(i[1])),this._new(s)};yr.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};yr.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};yr.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};yr.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(Co.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(Co.from(e));return this};yr.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};yr.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=Co.from([t]):typeof t=="string"?t=Co.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=Co.from(t.buffer,t.byteOffset,t.byteLength):Co.isBuffer(t)||(t=Co.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],s=i[1];for(;n<this._bufs.length;n++){let o=this._bufs[n];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([n,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([n,s]);if(this._match(c,t))return c;s++}s=0}return-1};yr.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?yr.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:yr.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();yr.prototype._isBufferList=function(e){return e instanceof yr||yr.isBufferList(e)};yr.isBufferList=function(e){return e!=null&&e[zV]};HV.exports=yr});var WV=g((Xft,GV)=>{f();var $V=class{constructor(e,r=12,i=8*1024,n=32*1024,s=64,o){this.bits=r,this.min=i,this.max=n,this.asModule=e,this.rabin=new e.Rabin(r,i,n,s,o),this.polynomial=o}fingerprint(e){let{__retain:r,__release:i,__allocArray:n,__getInt32Array:s,Int32Array_ID:o,Uint8Array_ID:a}=this.asModule,c=new Int32Array(Math.ceil(e.length/this.min)),u=r(n(o,c)),l=r(n(a,e)),h=this.rabin.fingerprint(l,u),d=s(h);i(l),i(u);let p=d.indexOf(0);return p>=0?d.subarray(0,p):d}};GV.exports=$V});var az=g(wy=>{f();"use strict";var D9=-8,x6=-4,DAe=0,YV=1,XV=1<<0,R6=1<<1,Qft=1<<2,Zft=1<<3,QV=5,Jft=1<<QV,ZV=1<<10,JV=1<<11,eht=1<<12,NAe=1<<13,ez=14,tht=1<<ez,rht=1<<19,iht=1<<20,nht=1<<21,sht=1<<22,BAe=0,N9=4,LAe=8,MAe=12,tz=12,jAe=16,qAe=typeof BigUint64Array!="undefined",my=Symbol(),by=1024;function rz(t,e){let r=new Uint32Array(t),i=new Uint16Array(t);var n=r[e+x6>>>2]>>>1,s=e>>>1;if(n<=by)return String.fromCharCode.apply(String,i.subarray(s,s+n));let o=[];do{let a=i[s+by-1],c=a>=55296&&a<56320?by-1:by;o.push(String.fromCharCode.apply(String,i.subarray(s,s+=c))),n-=c}while(n>by);return o.join("")+String.fromCharCode.apply(String,i.subarray(s,s+n))}function B9(t){let e={};function r(n,s){return n?rz(n.buffer,s):"<yet unknown>"}let i=t.env=t.env||{};return i.abort=i.abort||function(s,o,a,c){let u=e.memory||i.memory;throw Error("abort: "+r(u,s)+" at "+r(u,o)+":"+a+":"+c)},i.trace=i.trace||function(s,o){let a=e.memory||i.memory;console.log("trace: "+r(a,s)+(o?" ":"")+Array.prototype.slice.call(arguments,2,2+o).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function L9(t,e){let r=e.exports,i=r.memory,n=r.table,s=r.__alloc,o=r.__retain,a=r.__rtti_base||~0;function c(R){let N=new Uint32Array(i.buffer),F=N[a>>>2];if((R>>>=0)>=F)throw Error("invalid id: "+R);return N[(a+4>>>2)+R*2]}function u(R){let N=new Uint32Array(i.buffer),F=N[a>>>2];if((R>>>=0)>=F)throw Error("invalid id: "+R);return N[(a+4>>>2)+R*2+1]}function l(R){return 31-Math.clz32(R>>>QV&31)}function h(R){return 31-Math.clz32(R>>>ez&31)}function d(R){let N=R.length,F=s(N<<1,YV),U=new Uint16Array(i.buffer);for(var ie=0,te=F>>>1;ie<N;++ie)U[te+ie]=R.charCodeAt(ie);return F}t.__allocString=d;function p(R){let N=i.buffer;if(new Uint32Array(N)[R+D9>>>2]!==YV)throw Error("not a string: "+R);return rz(N,R)}t.__getString=p;function y(R,N,F){let U=i.buffer;if(F)switch(R){case 2:return new Float32Array(U);case 3:return new Float64Array(U)}else switch(R){case 0:return new(N?Int8Array:Uint8Array)(U);case 1:return new(N?Int16Array:Uint16Array)(U);case 2:return new(N?Int32Array:Uint32Array)(U);case 3:return new(N?BigInt64Array:BigUint64Array)(U)}throw Error("unsupported align: "+R)}function m(R,N){let F=c(R);if(!(F&(XV|R6)))throw Error("not an array: "+R+" @ "+F);let U=l(F),ie=N.length,te=s(ie<<U,DAe),ae=s(F&R6?jAe:MAe,R),ue=new Uint32Array(i.buffer);ue[ae+BAe>>>2]=o(te),ue[ae+N9>>>2]=te,ue[ae+LAe>>>2]=ie<<U,F&R6&&(ue[ae+tz>>>2]=ie);let De=y(U,F&ZV,F&JV);if(F&NAe)for(let ve=0;ve<ie;++ve)De[(te>>>U)+ve]=o(N[ve]);else De.set(N,te>>>U);return ae}t.__allocArray=m;function w(R){let N=new Uint32Array(i.buffer),F=N[R+D9>>>2],U=c(F);if(!(U&XV))throw Error("not an array: "+F);let ie=l(U);var te=N[R+N9>>>2];let ae=U&R6?N[R+tz>>>2]:N[te+x6>>>2]>>>ie;return y(ie,U&ZV,U&JV).subarray(te>>>=ie,te+ae)}t.__getArrayView=w;function b(R){let N=w(R),F=N.length,U=new Array(F);for(let ie=0;ie<F;ie++)U[ie]=N[ie];return U}t.__getArray=b;function v(R){let N=i.buffer,F=new Uint32Array(N)[R+x6>>>2];return N.slice(R,R+F)}t.__getArrayBuffer=v;function x(R,N,F){return new R(B(R,N,F))}function B(R,N,F){let U=i.buffer,ie=new Uint32Array(U),te=ie[F+N9>>>2];return new R(U,te,ie[te+x6>>>2]>>>N)}t.__getInt8Array=x.bind(null,Int8Array,0),t.__getInt8ArrayView=B.bind(null,Int8Array,0),t.__getUint8Array=x.bind(null,Uint8Array,0),t.__getUint8ArrayView=B.bind(null,Uint8Array,0),t.__getUint8ClampedArray=x.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=B.bind(null,Uint8ClampedArray,0),t.__getInt16Array=x.bind(null,Int16Array,1),t.__getInt16ArrayView=B.bind(null,Int16Array,1),t.__getUint16Array=x.bind(null,Uint16Array,1),t.__getUint16ArrayView=B.bind(null,Uint16Array,1),t.__getInt32Array=x.bind(null,Int32Array,2),t.__getInt32ArrayView=B.bind(null,Int32Array,2),t.__getUint32Array=x.bind(null,Uint32Array,2),t.__getUint32ArrayView=B.bind(null,Uint32Array,2),qAe&&(t.__getInt64Array=x.bind(null,BigInt64Array,3),t.__getInt64ArrayView=B.bind(null,BigInt64Array,3),t.__getUint64Array=x.bind(null,BigUint64Array,3),t.__getUint64ArrayView=B.bind(null,BigUint64Array,3)),t.__getFloat32Array=x.bind(null,Float32Array,2),t.__getFloat32ArrayView=B.bind(null,Float32Array,2),t.__getFloat64Array=x.bind(null,Float64Array,3),t.__getFloat64ArrayView=B.bind(null,Float64Array,3);function O(R,N){let F=new Uint32Array(i.buffer);var U=F[R+D9>>>2];if(U<=F[a>>>2])do if(U==N)return!0;while(U=u(U));return!1}return t.__instanceof=O,t.memory=t.memory||i,t.table=t.table||n,oz(r,t)}function iz(t){return typeof Response!="undefined"&&t instanceof Response}async function nz(t,e){return iz(t=await t)?sz(t,e):L9(B9(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}wy.instantiate=nz;function UAe(t,e){return L9(B9(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))}wy.instantiateSync=UAe;async function sz(t,e){return WebAssembly.instantiateStreaming?L9(B9(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):nz(iz(t=await t)?t.arrayBuffer():t,e)}wy.instantiateStreaming=sz;function oz(t,e){var r=e?Object.create(e):{},i=t.__argumentsLength?function(n){t.__argumentsLength.value=n}:t.__setArgumentsLength||t.__setargc||function(){};for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;let s=t[n],o=n.split("."),a=r;for(;o.length>1;){let l=o.shift();Object.prototype.hasOwnProperty.call(a,l)||(a[l]={}),a=a[l]}let c=o[0],u=c.indexOf("#");if(u>=0){let l=c.substring(0,u),h=a[l];if(typeof h=="undefined"||!h.prototype){let d=function(...p){return d.wrap(d.prototype.constructor(0,...p))};d.prototype={valueOf:function(){return this[my]}},d.wrap=function(p){return Object.create(d.prototype,{[my]:{value:p,writable:!1}})},h&&Object.getOwnPropertyNames(h).forEach(p=>Object.defineProperty(d,p,Object.getOwnPropertyDescriptor(h,p))),a[l]=d}if(c=c.substring(u+1),a=a[l].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let d=t[n.replace("set:","get:")],p=t[n.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return d(this[my])},set:function(y){p(this[my],y)},enumerable:!0})}}else c==="constructor"?(a[c]=(...d)=>(i(d.length),s(...d))).original=s:(a[c]=function(...d){return i(d.length),s(this[my],...d)}).original=s}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:t[n.replace("set:","get:")],set:t[n.replace("get:","set:")],enumerable:!0}):typeof s=="function"&&s!==i?(a[c]=(...l)=>(i(l.length),s(...l))).original=s:a[c]=s}return r}wy.demangle=oz});var uz=g((aht,cz)=>{f();var{instantiate:FAe}=az();M9.supported=typeof WebAssembly!="undefined";function M9(t={}){if(!M9.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return FAe(new Response(new Blob([e],{type:"application/wasm"})),t)}cz.exports=M9});var hz=g((cht,fz)=>{f();var lz=WV(),KAe=uz(),VAe=async(t,e,r,i,n)=>{let s=await KAe();return new lz(s,t,e,r,i,n)};fz.exports={Rabin:lz,create:VAe}});var Sz=g((Rht,Ez)=>{f();"use strict";var T6=7;Ez.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let i=this._internalPositionFor(e,!1);if(r===void 0)i!==-1&&(this._unsetInternalPos(i),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;i===-1?(i=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(i,e,r,n),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,i=new Array(this.length);for(;r<this.length;)i[r]=e(this.get(r),r,this),r++;return i}reduce(e,r){let i=0,n=r;for(;i<this.length;){let s=this.get(i);n=e(n,s,i),i++}return n}find(e){let r=0,i,n;for(;r<this.length&&!i;)n=this.get(r),i=e(n),r++;return i?n:void 0}_internalPositionFor(e,r){let i=this._bytePosFor(e,r);if(i>=this._bitArrays.length)return-1;let n=this._bitArrays[i],s=e-i*T6;if(!((n&1<<s)>0))return-1;let a=this._bitArrays.slice(0,i).reduce(ZAe,0),c=~(4294967295<<s+1),u=vz(n&c);return a+u-1}_bytePosFor(e,r){let i=Math.floor(e/T6),n=i+1;for(;!r&&this._bitArrays.length<n;)this._bitArrays.push(0);return i}_setBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*T6}_unsetBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*T6)}_setInternalPos(e,r,i,n){let s=this._data,o=[r,i];if(n)this._sortData(),s[e]=o;else{if(s.length)if(s[s.length-1][0]>=r)s.push(o);else if(s[0][0]<=r)s.unshift(o);else{let a=Math.round(s.length/2);this._data=s.slice(0,a).concat(o).concat(s.slice(a))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(JAe),this._changedData=!1}bitField(){let e=[],r=8,i=0,n=0,s,o=this._bitArrays.slice();for(;o.length||i;){i===0&&(s=o.shift(),i=7);let c=Math.min(i,r),u=~(255<<c);n|=(s&u)<<8-r,s=s>>>c,i-=c,r-=c,(!r||!i&&!o.length)&&(e.push(n),n=0,r=8)}for(var a=e.length-1;a>0&&e[a]===0;a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(exe)}};function ZAe(t,e){return t+vz(e)}function vz(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function JAe(t,e){return t[0]-e[0]}function exe(t){return t[1]}});var Rz=g((Iht,xz)=>{f();"use strict";var txe=Sz(),{fromString:rxe}=(ht(),ri),Oo=class{constructor(e,r,i=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=i,this._children=new txe,this.key=null}async put(e,r){let i=await this._findNewBucketAndPos(e);await i.bucket._putAt(i,e,r)}async get(e){let r=await this._findChild(e);if(r)return r.value}async del(e){let r=await this._findPlace(e),i=r.bucket._at(r.pos);i&&i.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,i)=>i instanceof Oo?r+i.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let r of e)r instanceof Oo?yield*r.eachLeafSeries():yield r;return[]}serialize(e,r){let i=[];return r(this._children.reduce((n,s,o)=>(s&&(s instanceof Oo?n.push(s.serialize(e,r)):n.push(e(s,o))),n),i))}asyncTransform(e,r){return Az(this,e,r)}toJSON(){return this.serialize(nxe,sxe)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let r=await this._findPlace(e),i=r.bucket._at(r.pos);if(!(i instanceof Oo)&&i&&i.key===e)return i}async _findPlace(e){let r=this._options.hash(typeof e=="string"?rxe(e):e),i=await r.take(this._options.bits),n=this._children.get(i);return n instanceof Oo?n._findPlace(r):{bucket:this,pos:i,hash:r,existingChild:n}}async _findNewBucketAndPos(e){let r=await this._findPlace(e);if(r.existingChild&&r.existingChild.key!==e){let i=new Oo(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,i);let n=await i._findPlace(r.existingChild.hash);return n.bucket._putAt(n,r.existingChild.key,r.existingChild.value),i._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,i){this._putObjectAt(e.pos,{key:r,value:i,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)||this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(ixe);if(e&&!(e instanceof Oo)){let r=e.hash;r.untake(this._options.bits);let i={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(i,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function ixe(t){return Boolean(t)}function nxe(t,e){return t.key}function sxe(t){return t}async function Az(t,e,r){let i=[];for(let n of t._children.compactArray())if(n instanceof Oo)await Az(n,e,r);else{let s=await e(n);i.push({bitField:t._children.bitField(),children:s})}return r(i)}xz.exports=Oo});var Tz=g((Pht,Iz)=>{f();"use strict";var oxe=[255,254,252,248,240,224,192,128],axe=[1,3,7,15,31,63,127,255];Iz.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,i=0;for(;r&&this._haveBits();){let n=this._value[this._currentBytePos],s=this._currentBitPos+1,o=Math.min(s,r),a=cxe(n,s-o,o);i=(i<<o)+a,r-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return i}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function cxe(t,e,r){let i=uxe(e,r);return(t&i)>>>e}function uxe(t,e){return oxe[t]&axe[Math.min(e+t-1,7)]}});var Pz=g((Cht,F9)=>{f();"use strict";var lxe=Tz(),{concat:fxe}=(Wi(),As);function hxe(t){function e(r){return r instanceof P6?r:new P6(r,t)}return e}var P6=class{constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let i=0;for(;r>0;){let n=this._buffers[this._currentBufferIndex],s=Math.min(n.availableBits(),r),o=n.take(s);i=(i<<s)+o,r-=s,this._availableBits-=s,n.availableBits()===0&&this._currentBufferIndex++}return i}untake(e){let r=e;for(;r>0;){let i=this._buffers[this._currentBufferIndex],n=Math.min(i.totalBits()-i.availableBits(),r);i.untake(n),r-=n,this._availableBits+=n,this._currentBufferIndex>0&&i.totalBits()===i.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth?fxe([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),i=new lxe(r);this._buffers.push(i),this._availableBits+=i.availableBits()}};F9.exports=hxe;F9.exports.InfiniteHash=P6});var vy=g((Oht,Oz)=>{f();"use strict";var Cz=Rz(),dxe=Pz();function pxe(t){if(!t||!t.hashFn)throw new Error("please define an options.hashFn");let e={bits:t.bits||8,hash:dxe(t.hashFn)};return new Cz(e)}Oz.exports={createHAMT:pxe,Bucket:Cz}});var kc=g((udt,Wz)=>{f();"use strict";function Gz(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Axe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Gz(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Gz(new n,r)}}Wz.exports=Axe});var mH=g(F6=>{f();var{Buffer:G9}=Gt(),xp=tn(),$xe="0".charCodeAt(0),Gxe=G9.from("ustar\0","binary"),Wxe=G9.from("ustar ","binary"),Yxe=G9.from(" \0","binary"),U6=257,yH=263,Xxe=function(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)},Qxe=function(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null},gH=function(t,e,r,i){for(;r<i;r++)if(t.get(r)===e)return r;return i},Zxe=function(t){let e=8*32;for(let r=0;r<148;r++)e+=t.get(r);for(let r=156;r<512;r++)e+=t.get(r);return e};function Jxe(t){let e;if(t.get(0)===128)e=!0;else if(t.get(0)===255)e=!1;else return null;let r=!1,i=[];for(let o=t.length-1;o>0;o--){let a=t.get(o);e?i.push(a):r&&a===0?i.push(0):r?(r=!1,i.push(256-a)):i.push(255-a)}let n=0,s=i.length;for(let o=0;o<s;o++)n+=i[o]*Math.pow(256,o);return e?n:-1*n}var Qu=function(t,e,r){if(t=t.shallowSlice(e,e+r),e=0,t.get(e)&128)return Jxe(t);{for(;e<t.length&&t.get(e)===32;)e++;let i=Xxe(gH(t,32,e,t.length),t.length,t.length);for(;e<i&&t.get(e)===0;)e++;return i===e?0:parseInt(t.shallowSlice(e,i).toString(),8)}},Rp=function(t,e,r,i){return t.shallowSlice(e,gH(t,0,e,e+r)).toString(i)};F6.decodeLongPath=function(t,e){return t=xp.isBufferList(t)?t:new xp(t),Rp(t,0,t.length,e)};F6.decodePax=function(t){t=xp.isBufferList(t)?t:new xp(t);let e={};for(;t.length;){let r=0;for(;r<t.length&&t.get(r)!==32;)r++;let i=parseInt(t.shallowSlice(0,r).toString(),10);if(!i)return e;let n=t.shallowSlice(r+1,i-1).toString(),s=n.indexOf("=");if(s===-1)return e;e[n.slice(0,s)]=n.slice(s+1),t=t.shallowSlice(i)}return e};F6.decode=function(t,e){t=xp.isBufferList(t)?t:new xp(t);let r=t.get(156)===0?0:t.get(156)-$xe,i=Rp(t,0,100,e),n=Qu(t,100,8),s=Qu(t,108,8),o=Qu(t,116,8),a=Qu(t,124,12),c=Qu(t,136,12),u=Qxe(r),l=t.get(157)===0?null:Rp(t,157,100,e),h=Rp(t,265,32),d=Rp(t,297,32),p=Qu(t,329,8),y=Qu(t,337,8),m=Zxe(t);if(m===8*32)return null;if(m!==Qu(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Gxe.compare(t.slice(U6,U6+6))===0)t.get(345)&&(i=Rp(t,345,155,e)+"/"+i);else if(!(Wxe.compare(t.slice(U6,U6+6))===0&&Yxe.compare(t.slice(yH,yH+2))===0))throw new Error("Invalid tar header: unknown format.");return r===0&&i&&i[i.length-1]==="/"&&(r=5),{name:i,mode:n,uid:s,gid:o,size:a,mtime:new Date(1e3*c),type:u,linkname:l,uname:h,gname:d,devmajor:p,devminor:y}}});var K6=g((upt,bH)=>{f();var W9=tn();bH.exports=t=>{let e=async function*(){let r=yield,i=new W9;for await(let n of t){if(!r){r=yield i.append(n),i=new W9;continue}for(i.append(n);i.length>=r;){let s=i.shallowSlice(0,r);if(i.consume(r),r=yield s,!r){i.length&&(r=yield i,i=new W9);break}}}if(r)throw Object.assign(new Error(`stream ended before ${r} bytes became available`),{code:"ERR_UNDER_READ",buffer:i})}();return e.next(),e}});var _H=g((lpt,wH)=>{f();var Y9=tn(),eRe=K6();wH.exports=function(e){let r=eRe(e),i,n={[Symbol.asyncIterator]:()=>n,async next(s){if(i){let o;if(s==null||i.length===s)o=i,i=null;else if(i.length>s)o=i.shallowSlice(0,s),i=i.shallowSlice(s);else if(i.length<s){let{value:a,done:c}=await r.next(s-i.length);if(c)throw Object.assign(new Error(`stream ended before ${s-i.length} bytes became available`),{code:"ERR_UNDER_READ"});o=new Y9([i,a]),i=null}return{value:o}}return r.next(s)},async nextLte(s){let{done:o,value:a}=await n.next();return o?{done:o}:a.length<=s?{value:a}:(a=Y9.isBufferList(a)?a:new Y9(a),i?i.append(a.shallowSlice(s)):i=a.shallowSlice(s),{value:a.shallowSlice(0,s)})},return(){return r.return()}};return n}});var EH=g((fpt,vH)=>{f();var tRe=xa(),Sy=mH(),rRe=_H();function iRe(t){return t&=511,t&&512-t}async function Ay(t,e){let r=iRe(e);r&&await t.next(r)}vH.exports=t=>(t=t||{},t.highWaterMark=t.highWaterMark||1024*16,e=>async function*(){let r=rRe(e),i,n,s,o;try{for(;;){let a;try{let{done:p,value:y}=await r.next(512);if(p)return;a=y}catch(p){if(p.code==="ERR_UNDER_READ")return;throw p}let c=Sy.decode(a,t.filenameEncoding);if(!c)continue;if(c.type==="gnu-long-path"){let{done:p,value:y}=await r.next(c.size);if(p)return;i=Sy.decodeLongPath(y,t.filenameEncoding),await Ay(r,c.size);continue}if(c.type==="gnu-long-link-path"){let{done:p,value:y}=await r.next(c.size);if(p)return;n=Sy.decodeLongPath(y,t.filenameEncoding),await Ay(r,c.size);continue}if(c.type==="pax-global-header"){let{done:p,value:y}=await r.next(c.size);if(p)return;s=Sy.decodePax(y,t.filenameEncoding),await Ay(r,c.size);continue}if(c.type==="pax-header"){let{done:p,value:y}=await r.next(c.size);if(p)return;o=Sy.decodePax(y,t.filenameEncoding),s&&(o={...s,...o}),await Ay(r,c.size);continue}if(i&&(c.name=i,i=null),n&&(c.linkname=n,n=null),o&&(o.path&&(c.name=o.path),o.linkpath&&(c.linkname=o.linkpath),o.size&&(c.size=parseInt(o.size,10)),c.pax=o,o=null),!c.size||c.type==="directory"){yield{header:c,body:async function*(){}()};continue}let u=c.size,l=tRe(),h=await r.nextLte(Math.min(u,t.highWaterMark));u-=h.value.length,u||l.resolve();let d=async function*(){try{for(yield h.value;u;){let{done:p,value:y}=await r.nextLte(u);if(p){u=0;return}u-=y.length,yield y}}finally{l.resolve()}}();if(yield{header:c,body:d},await l.promise,u)for await(let p of d);await Ay(r,c.size)}}finally{await r.return()}}())});var AH=g((hpt,SH)=>{f();"use strict";SH.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:8,RTLD_LOCAL:4,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGINFO:29,SIGSYS:12,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,UV_FS_O_FILEMAP:0,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_DSYNC:4194304,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488335,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}});var RH=g((dpt,xH)=>{f();var nRe=tn(),X9={string:()=>"",buffer:()=>nRe()};xH.exports=async(t,e)=>{if(e=e||{},e.type&&!X9[e.type])throw new Error(`invalid type "${e.type}"`);let r,i;for await(let n of t)r||(i=e.type||(typeof n=="string"?"string":"buffer"),r=X9[i]()),i==="string"?r+=n:r.append(n);return r||X9[e.type||"buffer"]()}});var IH=g(Z9=>{f();var{Buffer:Ra}=Gt(),sRe=Ra.alloc,oRe="0000000000000000000",aRe="7777777777777777777",cRe="0".charCodeAt(0),uRe=Ra.from("ustar\0","binary"),lRe=Ra.from("00","binary"),fRe=parseInt("7777",8),hRe=257,dRe=263,pRe=function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0},yRe=function(t){let e=8*32;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e},Zu=function(t,e){return t=t.toString(8),t.length>e?aRe.slice(0,e)+" ":oRe.slice(0,e-t.length)+t+" "},Q9=function(t){let e=Ra.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t};Z9.encodePax=function(t){let e="";t.name&&(e+=Q9(" path="+t.name+`
`)),t.linkname&&(e+=Q9(" linkpath="+t.linkname+`
`));let r=t.pax;if(r)for(let i in r)e+=Q9(" "+i+"="+r[i]+`
`);return Ra.from(e)};Z9.encode=function(t){let e=sRe(512),r=t.name,i="";if(t.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),Ra.byteLength(r)!==r.length)return null;for(;Ra.byteLength(r)>100;){let n=r.indexOf("/");if(n===-1)return null;i+=i?"/"+r.slice(0,n):r.slice(0,n),r=r.slice(n+1)}return Ra.byteLength(r)>100||Ra.byteLength(i)>155||t.linkname&&Ra.byteLength(t.linkname)>100?null:(e.write(r),e.write(Zu(t.mode&fRe,6),100),e.write(Zu(t.uid,6),108),e.write(Zu(t.gid,6),116),e.write(Zu(t.size,11),124),e.write(Zu(t.mtime.getTime()/1e3|0,11),136),e[156]=cRe+pRe(t.type),t.linkname&&e.write(t.linkname,157),uRe.copy(e,hRe),lRe.copy(e,dRe),t.uname&&e.write(t.uname,265),t.gname&&e.write(t.gname,297),e.write(Zu(t.devmajor||0,6),329),e.write(Zu(t.devminor||0,6),337),i&&e.write(i,345),e.write(Zu(yRe(e),6),148),e)}});var CH=g((ypt,PH)=>{f();var{Buffer:J9}=Gt(),Df=tn(),{S_IFMT:gRe,S_IFBLK:mRe,S_IFCHR:bRe,S_IFDIR:wRe,S_IFIFO:_Re,S_IFLNK:vRe}=AH(),ERe=RH(),V6=IH(),SRe=parseInt("755",8),ARe=parseInt("644",8),TH=J9.alloc(1024);function xRe(t){switch(t&gRe){case mRe:return"block-device";case bRe:return"character-device";case wRe:return"directory";case _Re:return"fifo";case vRe:return"symlink"}return"file"}function eS(t){if(t&=511,t)return new Df(TH.slice(0,512-t))}function tS(t){if(!t.pax){let e=V6.encode(t);if(e)return e}return RRe(t)}function RRe(t){let e=V6.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),r={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};return new Df([V6.encode(r),e,eS(e.length),V6.encode({...r,size:t.size,type:t.type})])}PH.exports=()=>async function*(t){for await(let{header:e,body:r}of t){if((!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=xRe(e.mode)),e.mode||(e.mode=e.type==="directory"?SRe:ARe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=J9.from(r)),J9.isBuffer(r)||Df.isBufferList(r)){e.size=r.length,yield new Df([tS(e),r,eS(e.size)]);continue}if(e.type==="symlink"&&!e.linkname){e.linkname=(await ERe(r)).toString(),yield tS(e);continue}if(yield tS(e),e.type!=="file"&&e.type!=="contiguous-file")continue;let i=0;for await(let s of r)i+=s.length,yield Df.isBufferList(s)?s:new Df(s);if(i!==e.size)throw new Error("size mismatch");let n=eS(e.size);n&&(yield n)}yield new Df(TH)}});var OH=g(rS=>{f();rS.extract=EH();rS.pack=CH()});var Dc=g(bn=>{f();"use strict";var IRe=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function TRe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}bn.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var i in r)TRe(r,i)&&(t[i]=r[i])}}return t};bn.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var PRe={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray){t.set(e.subarray(r,r+i),n);return}for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,o;for(i=0,e=0,r=t.length;e<r;e++)i+=t[e].length;for(o=new Uint8Array(i),n=0,e=0,r=t.length;e<r;e++)s=t[e],o.set(s,n),n+=s.length;return o}},CRe={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};bn.setTyped=function(t){t?(bn.Buf8=Uint8Array,bn.Buf16=Uint16Array,bn.Buf32=Int32Array,bn.assign(bn,PRe)):(bn.Buf8=Array,bn.Buf16=Array,bn.Buf32=Array,bn.assign(bn,CRe))};bn.setTyped(IRe)});var e$=g(Pp=>{f();"use strict";var ORe=Dc(),kRe=4,kH=0,DH=1,DRe=2;function Ip(t){for(var e=t.length;--e>=0;)t[e]=0}var NRe=0,NH=1,BRe=2,LRe=3,MRe=258,iS=29,xy=256,Ry=xy+1+iS,Tp=30,nS=19,BH=2*Ry+1,Nf=15,sS=16,jRe=7,oS=256,LH=16,MH=17,jH=18,aS=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z6=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qRe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],qH=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],URe=512,Nc=new Array((Ry+2)*2);Ip(Nc);var Iy=new Array(Tp*2);Ip(Iy);var Ty=new Array(URe);Ip(Ty);var Py=new Array(MRe-LRe+1);Ip(Py);var cS=new Array(iS);Ip(cS);var H6=new Array(Tp);Ip(H6);function uS(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}var UH,FH,KH;function lS(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function VH(t){return t<256?Ty[t]:Ty[256+(t>>>7)]}function Cy(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Mn(t,e,r){t.bi_valid>sS-r?(t.bi_buf|=e<<t.bi_valid&65535,Cy(t,t.bi_buf),t.bi_buf=e>>sS-t.bi_valid,t.bi_valid+=r-sS):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function Ia(t,e,r){Mn(t,r[e*2],r[e*2+1])}function zH(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function FRe(t){t.bi_valid===16?(Cy(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function KRe(t,e){var r=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,u,l,h,d,p,y,m=0;for(d=0;d<=Nf;d++)t.bl_count[d]=0;for(r[t.heap[t.heap_max]*2+1]=0,u=t.heap_max+1;u<BH;u++)l=t.heap[u],d=r[r[l*2+1]*2+1]+1,d>c&&(d=c,m++),r[l*2+1]=d,!(l>i)&&(t.bl_count[d]++,p=0,l>=a&&(p=o[l-a]),y=r[l*2],t.opt_len+=y*(d+p),s&&(t.static_len+=y*(n[l*2+1]+p)));if(m!==0){do{for(d=c-1;t.bl_count[d]===0;)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[c]--,m-=2}while(m>0);for(d=c;d!==0;d--)for(l=t.bl_count[d];l!==0;)h=t.heap[--u],!(h>i)&&(r[h*2+1]!==d&&(t.opt_len+=(d-r[h*2+1])*r[h*2],r[h*2+1]=d),l--)}}function HH(t,e,r){var i=new Array(Nf+1),n=0,s,o;for(s=1;s<=Nf;s++)i[s]=n=n+r[s-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=zH(i[a]++,a))}}function VRe(){var t,e,r,i,n,s=new Array(Nf+1);for(r=0,i=0;i<iS-1;i++)for(cS[i]=r,t=0;t<1<<aS[i];t++)Py[r++]=i;for(Py[r-1]=i,n=0,i=0;i<16;i++)for(H6[i]=n,t=0;t<1<<z6[i];t++)Ty[n++]=i;for(n>>=7;i<Tp;i++)for(H6[i]=n<<7,t=0;t<1<<z6[i]-7;t++)Ty[256+n++]=i;for(e=0;e<=Nf;e++)s[e]=0;for(t=0;t<=143;)Nc[t*2+1]=8,t++,s[8]++;for(;t<=255;)Nc[t*2+1]=9,t++,s[9]++;for(;t<=279;)Nc[t*2+1]=7,t++,s[7]++;for(;t<=287;)Nc[t*2+1]=8,t++,s[8]++;for(HH(Nc,Ry+1,s),t=0;t<Tp;t++)Iy[t*2+1]=5,Iy[t*2]=zH(t,5);UH=new uS(Nc,aS,xy+1,Ry,Nf),FH=new uS(Iy,z6,0,Tp,Nf),KH=new uS(new Array(0),qRe,0,nS,jRe)}function $H(t){var e;for(e=0;e<Ry;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Tp;e++)t.dyn_dtree[e*2]=0;for(e=0;e<nS;e++)t.bl_tree[e*2]=0;t.dyn_ltree[oS*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function GH(t){t.bi_valid>8?Cy(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function zRe(t,e,r,i){GH(t),i&&(Cy(t,r),Cy(t,~r)),ORe.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function WH(t,e,r,i){var n=e*2,s=r*2;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function fS(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&WH(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!WH(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function YH(t,e,r){var i,n,s=0,o,a;if(t.last_lit!==0)do i=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],n=t.pending_buf[t.l_buf+s],s++,i===0?Ia(t,n,e):(o=Py[n],Ia(t,o+xy+1,e),a=aS[o],a!==0&&(n-=cS[o],Mn(t,n,a)),i--,o=VH(i),Ia(t,o,r),a=z6[o],a!==0&&(i-=H6[o],Mn(t,i,a)));while(s<t.last_lit);Ia(t,oS,e)}function hS(t,e){var r=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,c=-1,u;for(t.heap_len=0,t.heap_max=BH,o=0;o<s;o++)r[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,r[u*2]=1,t.depth[u]=0,t.opt_len--,n&&(t.static_len-=i[u*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)fS(t,r,o);u=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],fS(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[u*2]=r[o*2]+r[a*2],t.depth[u]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=u,t.heap[1]=u++,fS(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],KRe(t,e),HH(r,c,t.bl_count)}function XH(t,e,r){var i,n=-1,s,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),e[(r+1)*2+1]=65535,i=0;i<=r;i++)s=o,o=e[(i+1)*2+1],!(++a<c&&s===o)&&(a<u?t.bl_tree[s*2]+=a:s!==0?(s!==n&&t.bl_tree[s*2]++,t.bl_tree[LH*2]++):a<=10?t.bl_tree[MH*2]++:t.bl_tree[jH*2]++,a=0,n=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4))}function QH(t,e,r){var i,n=-1,s,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),i=0;i<=r;i++)if(s=o,o=e[(i+1)*2+1],!(++a<c&&s===o)){if(a<u)do Ia(t,s,t.bl_tree);while(--a!=0);else s!==0?(s!==n&&(Ia(t,s,t.bl_tree),a--),Ia(t,LH,t.bl_tree),Mn(t,a-3,2)):a<=10?(Ia(t,MH,t.bl_tree),Mn(t,a-3,3)):(Ia(t,jH,t.bl_tree),Mn(t,a-11,7));a=0,n=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4)}}function HRe(t){var e;for(XH(t,t.dyn_ltree,t.l_desc.max_code),XH(t,t.dyn_dtree,t.d_desc.max_code),hS(t,t.bl_desc),e=nS-1;e>=3&&t.bl_tree[qH[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function $Re(t,e,r,i){var n;for(Mn(t,e-257,5),Mn(t,r-1,5),Mn(t,i-4,4),n=0;n<i;n++)Mn(t,t.bl_tree[qH[n]*2+1],3);QH(t,t.dyn_ltree,e-1),QH(t,t.dyn_dtree,r-1)}function GRe(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return kH;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return DH;for(r=32;r<xy;r++)if(t.dyn_ltree[r*2]!==0)return DH;return kH}var ZH=!1;function WRe(t){ZH||(VRe(),ZH=!0),t.l_desc=new lS(t.dyn_ltree,UH),t.d_desc=new lS(t.dyn_dtree,FH),t.bl_desc=new lS(t.bl_tree,KH),t.bi_buf=0,t.bi_valid=0,$H(t)}function JH(t,e,r,i){Mn(t,(NRe<<1)+(i?1:0),3),zRe(t,e,r,!0)}function YRe(t){Mn(t,NH<<1,3),Ia(t,oS,Nc),FRe(t)}function XRe(t,e,r,i){var n,s,o=0;t.level>0?(t.strm.data_type===DRe&&(t.strm.data_type=GRe(t)),hS(t,t.l_desc),hS(t,t.d_desc),o=HRe(t),n=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=n&&(n=s)):n=s=r+5,r+4<=n&&e!==-1?JH(t,e,r,i):t.strategy===kRe||s===n?(Mn(t,(NH<<1)+(i?1:0),3),YH(t,Nc,Iy)):(Mn(t,(BRe<<1)+(i?1:0),3),$Re(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),YH(t,t.dyn_ltree,t.dyn_dtree)),$H(t),i&&GH(t)}function QRe(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(Py[r]+xy+1)*2]++,t.dyn_dtree[VH(e)*2]++),t.last_lit===t.lit_bufsize-1}Pp._tr_init=WRe;Pp._tr_stored_block=JH;Pp._tr_flush_block=XRe;Pp._tr_tally=QRe;Pp._tr_align=YRe});var dS=g((wpt,t$)=>{f();"use strict";function ZRe(t,e,r,i){for(var n=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do n=n+e[i++]|0,s=s+n|0;while(--o);n%=65521,s%=65521}return n|s<<16|0}t$.exports=ZRe});var pS=g((_pt,r$)=>{f();"use strict";function JRe(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var eIe=JRe();function tIe(t,e,r,i){var n=eIe,s=i+r;t^=-1;for(var o=i;o<s;o++)t=t>>>8^n[(t^e[o])&255];return t^-1}r$.exports=tIe});var $6=g((vpt,i$)=>{f();"use strict";i$.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var h$=g(Ca=>{f();"use strict";var wn=Dc(),qs=e$(),n$=dS(),Ju=pS(),rIe=$6(),Bf=0,iIe=1,nIe=3,el=4,s$=5,Ta=0,o$=1,Us=-2,sIe=-3,yS=-5,oIe=-1,aIe=1,G6=2,cIe=3,uIe=4,lIe=0,fIe=2,W6=8,hIe=9,dIe=15,pIe=8,yIe=29,gIe=256,gS=gIe+1+yIe,mIe=30,bIe=19,wIe=2*gS+1,_Ie=15,Ot=3,tl=258,ko=tl+Ot+1,vIe=32,Y6=42,mS=69,X6=73,Q6=91,Z6=103,Lf=113,Oy=666,pi=1,ky=2,Mf=3,Cp=4,EIe=3;function rl(t,e){return t.msg=rIe[e],e}function a$(t){return(t<<1)-(t>4?9:0)}function il(t){for(var e=t.length;--e>=0;)t[e]=0}function nl(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(wn.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function Ki(t,e){qs._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,nl(t.strm)}function zt(t,e){t.pending_buf[t.pending++]=e}function Dy(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function SIe(t,e,r,i){var n=t.avail_in;return n>i&&(n=i),n===0?0:(t.avail_in-=n,wn.arraySet(e,t.input,t.next_in,n,r),t.state.wrap===1?t.adler=n$(t.adler,e,n,r):t.state.wrap===2&&(t.adler=Ju(t.adler,e,n,r)),t.next_in+=n,t.total_in+=n,n)}function c$(t,e){var r=t.max_chain_length,i=t.strstart,n,s,o=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-ko?t.strstart-(t.w_size-ko):0,u=t.window,l=t.w_mask,h=t.prev,d=t.strstart+tl,p=u[i+o-1],y=u[i+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(n=e,!(u[n+o]!==y||u[n+o-1]!==p||u[n]!==u[i]||u[++n]!==u[i+1])){i+=2,n++;do;while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<d);if(s=tl-(d-i),i=d-tl,s>o){if(t.match_start=e,o=s,s>=a)break;p=u[i+o-1],y=u[i+o]}}while((e=h[e&l])>c&&--r!=0);return o<=t.lookahead?o:t.lookahead}function jf(t){var e=t.w_size,r,i,n,s,o;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ko)){wn.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,r=i;do n=t.head[--r],t.head[r]=n>=e?n-e:0;while(--i);i=e,r=i;do n=t.prev[--r],t.prev[r]=n>=e?n-e:0;while(--i);s+=e}if(t.strm.avail_in===0)break;if(i=SIe(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=Ot)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+Ot-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<Ot)););}while(t.lookahead<ko&&t.strm.avail_in!==0)}function AIe(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(jf(t),t.lookahead===0&&e===Bf)return pi;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((t.strstart===0||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,Ki(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-ko&&(Ki(t,!1),t.strm.avail_out===0))return pi}return t.insert=0,e===el?(Ki(t,!0),t.strm.avail_out===0?Mf:Cp):(t.strstart>t.block_start&&(Ki(t,!1),t.strm.avail_out===0),pi)}function bS(t,e){for(var r,i;;){if(t.lookahead<ko){if(jf(t),t.lookahead<ko&&e===Bf)return pi;if(t.lookahead===0)break}if(r=0,t.lookahead>=Ot&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ot-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-ko&&(t.match_length=c$(t,r)),t.match_length>=Ot)if(i=qs._tr_tally(t,t.strstart-t.match_start,t.match_length-Ot),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Ot){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ot-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=qs._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(Ki(t,!1),t.strm.avail_out===0))return pi}return t.insert=t.strstart<Ot-1?t.strstart:Ot-1,e===el?(Ki(t,!0),t.strm.avail_out===0?Mf:Cp):t.last_lit&&(Ki(t,!1),t.strm.avail_out===0)?pi:ky}function Op(t,e){for(var r,i,n;;){if(t.lookahead<ko){if(jf(t),t.lookahead<ko&&e===Bf)return pi;if(t.lookahead===0)break}if(r=0,t.lookahead>=Ot&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ot-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Ot-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ko&&(t.match_length=c$(t,r),t.match_length<=5&&(t.strategy===aIe||t.match_length===Ot&&t.strstart-t.match_start>4096)&&(t.match_length=Ot-1)),t.prev_length>=Ot&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-Ot,i=qs._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Ot),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ot-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=Ot-1,t.strstart++,i&&(Ki(t,!1),t.strm.avail_out===0))return pi}else if(t.match_available){if(i=qs._tr_tally(t,0,t.window[t.strstart-1]),i&&Ki(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return pi}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=qs._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Ot-1?t.strstart:Ot-1,e===el?(Ki(t,!0),t.strm.avail_out===0?Mf:Cp):t.last_lit&&(Ki(t,!1),t.strm.avail_out===0)?pi:ky}function xIe(t,e){for(var r,i,n,s,o=t.window;;){if(t.lookahead<=tl){if(jf(t),t.lookahead<=tl&&e===Bf)return pi;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Ot&&t.strstart>0&&(n=t.strstart-1,i=o[n],i===o[++n]&&i===o[++n]&&i===o[++n])){s=t.strstart+tl;do;while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<s);t.match_length=tl-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Ot?(r=qs._tr_tally(t,1,t.match_length-Ot),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=qs._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Ki(t,!1),t.strm.avail_out===0))return pi}return t.insert=0,e===el?(Ki(t,!0),t.strm.avail_out===0?Mf:Cp):t.last_lit&&(Ki(t,!1),t.strm.avail_out===0)?pi:ky}function RIe(t,e){for(var r;;){if(t.lookahead===0&&(jf(t),t.lookahead===0)){if(e===Bf)return pi;break}if(t.match_length=0,r=qs._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Ki(t,!1),t.strm.avail_out===0))return pi}return t.insert=0,e===el?(Ki(t,!0),t.strm.avail_out===0?Mf:Cp):t.last_lit&&(Ki(t,!1),t.strm.avail_out===0)?pi:ky}function Pa(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}var kp;kp=[new Pa(0,0,0,0,AIe),new Pa(4,4,8,4,bS),new Pa(4,5,16,8,bS),new Pa(4,6,32,32,bS),new Pa(4,4,16,16,Op),new Pa(8,16,32,32,Op),new Pa(8,16,128,128,Op),new Pa(8,32,128,256,Op),new Pa(32,128,258,1024,Op),new Pa(32,258,258,4096,Op)];function IIe(t){t.window_size=2*t.w_size,il(t.head),t.max_lazy_match=kp[t.level].max_lazy,t.good_match=kp[t.level].good_length,t.nice_match=kp[t.level].nice_length,t.max_chain_length=kp[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Ot-1,t.match_available=0,t.ins_h=0}function TIe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=W6,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new wn.Buf16(wIe*2),this.dyn_dtree=new wn.Buf16((2*mIe+1)*2),this.bl_tree=new wn.Buf16((2*bIe+1)*2),il(this.dyn_ltree),il(this.dyn_dtree),il(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new wn.Buf16(_Ie+1),this.heap=new wn.Buf16(2*gS+1),il(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new wn.Buf16(2*gS+1),il(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u$(t){var e;return!t||!t.state?rl(t,Us):(t.total_in=t.total_out=0,t.data_type=fIe,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Y6:Lf,t.adler=e.wrap===2?0:1,e.last_flush=Bf,qs._tr_init(e),Ta)}function l$(t){var e=u$(t);return e===Ta&&IIe(t.state),e}function PIe(t,e){return!t||!t.state||t.state.wrap!==2?Us:(t.state.gzhead=e,Ta)}function f$(t,e,r,i,n,s){if(!t)return Us;var o=1;if(e===oIe&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),n<1||n>hIe||r!==W6||i<8||i>15||e<0||e>9||s<0||s>uIe)return rl(t,Us);i===8&&(i=9);var a=new TIe;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=n+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Ot-1)/Ot),a.window=new wn.Buf8(a.w_size*2),a.head=new wn.Buf16(a.hash_size),a.prev=new wn.Buf16(a.w_size),a.lit_bufsize=1<<n+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new wn.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=e,a.strategy=s,a.method=r,l$(t)}function CIe(t,e){return f$(t,e,W6,dIe,pIe,lIe)}function OIe(t,e){var r,i,n,s;if(!t||!t.state||e>s$||e<0)return t?rl(t,Us):Us;if(i=t.state,!t.output||!t.input&&t.avail_in!==0||i.status===Oy&&e!==el)return rl(t,t.avail_out===0?yS:Us);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===Y6)if(i.wrap===2)t.adler=0,zt(i,31),zt(i,139),zt(i,8),i.gzhead?(zt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),zt(i,i.gzhead.time&255),zt(i,i.gzhead.time>>8&255),zt(i,i.gzhead.time>>16&255),zt(i,i.gzhead.time>>24&255),zt(i,i.level===9?2:i.strategy>=G6||i.level<2?4:0),zt(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(zt(i,i.gzhead.extra.length&255),zt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Ju(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=mS):(zt(i,0),zt(i,0),zt(i,0),zt(i,0),zt(i,0),zt(i,i.level===9?2:i.strategy>=G6||i.level<2?4:0),zt(i,EIe),i.status=Lf);else{var o=W6+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=G6||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=vIe),o+=31-o%31,i.status=Lf,Dy(i,o),i.strstart!==0&&(Dy(i,t.adler>>>16),Dy(i,t.adler&65535)),t.adler=1}if(i.status===mS)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Ju(t.adler,i.pending_buf,i.pending-n,n)),nl(t),n=i.pending,i.pending===i.pending_buf_size));)zt(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=Ju(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=X6)}else i.status=X6;if(i.status===X6)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Ju(t.adler,i.pending_buf,i.pending-n,n)),nl(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.name.length?s=i.gzhead.name.charCodeAt(i.gzindex++)&255:s=0,zt(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>n&&(t.adler=Ju(t.adler,i.pending_buf,i.pending-n,n)),s===0&&(i.gzindex=0,i.status=Q6)}else i.status=Q6;if(i.status===Q6)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Ju(t.adler,i.pending_buf,i.pending-n,n)),nl(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.comment.length?s=i.gzhead.comment.charCodeAt(i.gzindex++)&255:s=0,zt(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>n&&(t.adler=Ju(t.adler,i.pending_buf,i.pending-n,n)),s===0&&(i.status=Z6)}else i.status=Z6;if(i.status===Z6&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&nl(t),i.pending+2<=i.pending_buf_size&&(zt(i,t.adler&255),zt(i,t.adler>>8&255),t.adler=0,i.status=Lf)):i.status=Lf),i.pending!==0){if(nl(t),t.avail_out===0)return i.last_flush=-1,Ta}else if(t.avail_in===0&&a$(e)<=a$(r)&&e!==el)return rl(t,yS);if(i.status===Oy&&t.avail_in!==0)return rl(t,yS);if(t.avail_in!==0||i.lookahead!==0||e!==Bf&&i.status!==Oy){var c=i.strategy===G6?RIe(i,e):i.strategy===cIe?xIe(i,e):kp[i.level].func(i,e);if((c===Mf||c===Cp)&&(i.status=Oy),c===pi||c===Mf)return t.avail_out===0&&(i.last_flush=-1),Ta;if(c===ky&&(e===iIe?qs._tr_align(i):e!==s$&&(qs._tr_stored_block(i,0,0,!1),e===nIe&&(il(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),nl(t),t.avail_out===0))return i.last_flush=-1,Ta}return e!==el?Ta:i.wrap<=0?o$:(i.wrap===2?(zt(i,t.adler&255),zt(i,t.adler>>8&255),zt(i,t.adler>>16&255),zt(i,t.adler>>24&255),zt(i,t.total_in&255),zt(i,t.total_in>>8&255),zt(i,t.total_in>>16&255),zt(i,t.total_in>>24&255)):(Dy(i,t.adler>>>16),Dy(i,t.adler&65535)),nl(t),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Ta:o$)}function kIe(t){var e;return!t||!t.state?Us:(e=t.state.status,e!==Y6&&e!==mS&&e!==X6&&e!==Q6&&e!==Z6&&e!==Lf&&e!==Oy?rl(t,Us):(t.state=null,e===Lf?rl(t,sIe):Ta))}function DIe(t,e){var r=e.length,i,n,s,o,a,c,u,l;if(!t||!t.state||(i=t.state,o=i.wrap,o===2||o===1&&i.status!==Y6||i.lookahead))return Us;for(o===1&&(t.adler=n$(t.adler,e,r,0)),i.wrap=0,r>=i.w_size&&(o===0&&(il(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new wn.Buf8(i.w_size),wn.arraySet(l,e,r-i.w_size,i.w_size,0),e=l,r=i.w_size),a=t.avail_in,c=t.next_in,u=t.input,t.avail_in=r,t.next_in=0,t.input=e,jf(i);i.lookahead>=Ot;){n=i.strstart,s=i.lookahead-(Ot-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+Ot-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--s);i.strstart=n,i.lookahead=Ot-1,jf(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Ot-1,i.match_available=0,t.next_in=c,t.input=u,t.avail_in=a,i.wrap=o,Ta}Ca.deflateInit=CIe;Ca.deflateInit2=f$;Ca.deflateReset=l$;Ca.deflateResetKeep=u$;Ca.deflateSetHeader=PIe;Ca.deflate=OIe;Ca.deflateEnd=kIe;Ca.deflateSetDictionary=DIe;Ca.deflateInfo="pako deflate (from Nodeca project)"});var wS=g(Dp=>{f();"use strict";var J6=Dc(),d$=!0,p$=!0;try{String.fromCharCode.apply(null,[0])}catch(t){d$=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){p$=!1}var Ny=new J6.Buf8(256);for(Bc=0;Bc<256;Bc++)Ny[Bc]=Bc>=252?6:Bc>=248?5:Bc>=240?4:Bc>=224?3:Bc>=192?2:1;var Bc;Ny[254]=Ny[254]=1;Dp.string2buf=function(t){var e,r,i,n,s,o=t.length,a=0;for(n=0;n<o;n++)r=t.charCodeAt(n),(r&64512)==55296&&n+1<o&&(i=t.charCodeAt(n+1),(i&64512)==56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new J6.Buf8(a),s=0,n=0;s<a;n++)r=t.charCodeAt(n),(r&64512)==55296&&n+1<o&&(i=t.charCodeAt(n+1),(i&64512)==56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};function y$(t,e){if(e<65534&&(t.subarray&&p$||!t.subarray&&d$))return String.fromCharCode.apply(null,J6.shrinkBuf(t,e));for(var r="",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}Dp.buf2binstring=function(t){return y$(t,t.length)};Dp.binstring2buf=function(t){for(var e=new J6.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e};Dp.buf2string=function(t,e){var r,i,n,s,o=e||t.length,a=new Array(o*2);for(i=0,r=0;r<o;){if(n=t[r++],n<128){a[i++]=n;continue}if(s=Ny[n],s>4){a[i++]=65533,r+=s-1;continue}for(n&=s===2?31:s===3?15:7;s>1&&r<o;)n=n<<6|t[r++]&63,s--;if(s>1){a[i++]=65533;continue}n<65536?a[i++]=n:(n-=65536,a[i++]=55296|n>>10&1023,a[i++]=56320|n&1023)}return y$(a,i)};Dp.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)==128;)r--;return r<0||r===0?e:r+Ny[t[r]]>e?r:e}});var _S=g((Apt,g$)=>{f();"use strict";function NIe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}g$.exports=NIe});var _$=g(My=>{f();"use strict";var By=h$(),Ly=Dc(),vS=wS(),ES=$6(),BIe=_S(),m$=Object.prototype.toString,LIe=0,SS=4,Np=0,b$=1,w$=2,MIe=-1,jIe=0,qIe=8;function qf(t){if(!(this instanceof qf))return new qf(t);this.options=Ly.assign({level:MIe,method:qIe,chunkSize:16384,windowBits:15,memLevel:8,strategy:jIe,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BIe,this.strm.avail_out=0;var r=By.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Np)throw new Error(ES[r]);if(e.header&&By.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(typeof e.dictionary=="string"?i=vS.string2buf(e.dictionary):m$.call(e.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(e.dictionary):i=e.dictionary,r=By.deflateSetDictionary(this.strm,i),r!==Np)throw new Error(ES[r]);this._dict_set=!0}}qf.prototype.push=function(t,e){var r=this.strm,i=this.options.chunkSize,n,s;if(this.ended)return!1;s=e===~~e?e:e===!0?SS:LIe,typeof t=="string"?r.input=vS.string2buf(t):m$.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Ly.Buf8(i),r.next_out=0,r.avail_out=i),n=By.deflate(r,s),n!==b$&&n!==Np)return this.onEnd(n),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(s===SS||s===w$))&&(this.options.to==="string"?this.onData(vS.buf2binstring(Ly.shrinkBuf(r.output,r.next_out))):this.onData(Ly.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&n!==b$);return s===SS?(n=By.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Np):(s===w$&&(this.onEnd(Np),r.avail_out=0),!0)};qf.prototype.onData=function(t){this.chunks.push(t)};qf.prototype.onEnd=function(t){t===Np&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ly.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function AS(t,e){var r=new qf(e);if(r.push(t,!0),r.err)throw r.msg||ES[r.err];return r.result}function UIe(t,e){return e=e||{},e.raw=!0,AS(t,e)}function FIe(t,e){return e=e||{},e.gzip=!0,AS(t,e)}My.Deflate=qf;My.deflate=AS;My.deflateRaw=UIe;My.gzip=FIe});var E$=g((Rpt,v$)=>{f();"use strict";var eb=30,KIe=12;v$.exports=function(e,r){var i,n,s,o,a,c,u,l,h,d,p,y,m,w,b,v,x,B,O,R,N,F,U,ie,te;i=e.state,n=e.next_in,ie=e.input,s=n+(e.avail_in-5),o=e.next_out,te=e.output,a=o-(r-e.avail_out),c=o+(e.avail_out-257),u=i.dmax,l=i.wsize,h=i.whave,d=i.wnext,p=i.window,y=i.hold,m=i.bits,w=i.lencode,b=i.distcode,v=(1<<i.lenbits)-1,x=(1<<i.distbits)-1;e:do{m<15&&(y+=ie[n++]<<m,m+=8,y+=ie[n++]<<m,m+=8),B=w[y&v];t:for(;;){if(O=B>>>24,y>>>=O,m-=O,O=B>>>16&255,O===0)te[o++]=B&65535;else if(O&16){R=B&65535,O&=15,O&&(m<O&&(y+=ie[n++]<<m,m+=8),R+=y&(1<<O)-1,y>>>=O,m-=O),m<15&&(y+=ie[n++]<<m,m+=8,y+=ie[n++]<<m,m+=8),B=b[y&x];r:for(;;){if(O=B>>>24,y>>>=O,m-=O,O=B>>>16&255,O&16){if(N=B&65535,O&=15,m<O&&(y+=ie[n++]<<m,m+=8,m<O&&(y+=ie[n++]<<m,m+=8)),N+=y&(1<<O)-1,N>u){e.msg="invalid distance too far back",i.mode=eb;break e}if(y>>>=O,m-=O,O=o-a,N>O){if(O=N-O,O>h&&i.sane){e.msg="invalid distance too far back",i.mode=eb;break e}if(F=0,U=p,d===0){if(F+=l-O,O<R){R-=O;do te[o++]=p[F++];while(--O);F=o-N,U=te}}else if(d<O){if(F+=l+d-O,O-=d,O<R){R-=O;do te[o++]=p[F++];while(--O);if(F=0,d<R){O=d,R-=O;do te[o++]=p[F++];while(--O);F=o-N,U=te}}}else if(F+=d-O,O<R){R-=O;do te[o++]=p[F++];while(--O);F=o-N,U=te}for(;R>2;)te[o++]=U[F++],te[o++]=U[F++],te[o++]=U[F++],R-=3;R&&(te[o++]=U[F++],R>1&&(te[o++]=U[F++]))}else{F=o-N;do te[o++]=te[F++],te[o++]=te[F++],te[o++]=te[F++],R-=3;while(R>2);R&&(te[o++]=te[F++],R>1&&(te[o++]=te[F++]))}}else if((O&64)==0){B=b[(B&65535)+(y&(1<<O)-1)];continue r}else{e.msg="invalid distance code",i.mode=eb;break e}break}}else if((O&64)==0){B=w[(B&65535)+(y&(1<<O)-1)];continue t}else if(O&32){i.mode=KIe;break e}else{e.msg="invalid literal/length code",i.mode=eb;break e}break}}while(n<s&&o<c);R=m>>3,n-=R,m-=R<<3,y&=(1<<m)-1,e.next_in=n,e.next_out=o,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=o<c?257+(c-o):257-(o-c),i.hold=y,i.bits=m}});var P$=g((Ipt,T$)=>{f();"use strict";var S$=Dc(),Bp=15,A$=852,x$=592,R$=0,xS=1,I$=2,VIe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],zIe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],HIe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],$Ie=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];T$.exports=function(e,r,i,n,s,o,a,c){var u=c.bits,l=0,h=0,d=0,p=0,y=0,m=0,w=0,b=0,v=0,x=0,B,O,R,N,F,U=null,ie=0,te,ae=new S$.Buf16(Bp+1),ue=new S$.Buf16(Bp+1),De=null,ve=0,Ne,ee,Me;for(l=0;l<=Bp;l++)ae[l]=0;for(h=0;h<n;h++)ae[r[i+h]]++;for(y=u,p=Bp;p>=1&&ae[p]===0;p--);if(y>p&&(y=p),p===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,c.bits=1,0;for(d=1;d<p&&ae[d]===0;d++);for(y<d&&(y=d),b=1,l=1;l<=Bp;l++)if(b<<=1,b-=ae[l],b<0)return-1;if(b>0&&(e===R$||p!==1))return-1;for(ue[1]=0,l=1;l<Bp;l++)ue[l+1]=ue[l]+ae[l];for(h=0;h<n;h++)r[i+h]!==0&&(a[ue[r[i+h]]++]=h);if(e===R$?(U=De=a,te=19):e===xS?(U=VIe,ie-=257,De=zIe,ve-=257,te=256):(U=HIe,De=$Ie,te=-1),x=0,h=0,l=d,F=o,m=y,w=0,R=-1,v=1<<y,N=v-1,e===xS&&v>A$||e===I$&&v>x$)return 1;for(;;){Ne=l-w,a[h]<te?(ee=0,Me=a[h]):a[h]>te?(ee=De[ve+a[h]],Me=U[ie+a[h]]):(ee=32+64,Me=0),B=1<<l-w,O=1<<m,d=O;do O-=B,s[F+(x>>w)+O]=Ne<<24|ee<<16|Me|0;while(O!==0);for(B=1<<l-1;x&B;)B>>=1;if(B!==0?(x&=B-1,x+=B):x=0,h++,--ae[l]==0){if(l===p)break;l=r[i+a[h]]}if(l>y&&(x&N)!==R){for(w===0&&(w=y),F+=d,m=l-w,b=1<<m;m+w<p&&(b-=ae[m+w],!(b<=0));)m++,b<<=1;if(v+=1<<m,e===xS&&v>A$||e===I$&&v>x$)return 1;R=x&N,s[R]=y<<24|m<<16|F-o|0}}return x!==0&&(s[F+x]=l-w<<24|64<<16|0),c.bits=y,0}});var lG=g(Do=>{f();"use strict";var is=Dc(),RS=dS(),Oa=pS(),GIe=E$(),jy=P$(),WIe=0,C$=1,O$=2,k$=4,YIe=5,tb=6,Uf=0,XIe=1,QIe=2,Fs=-2,D$=-3,IS=-4,ZIe=-5,N$=8,B$=1,L$=2,M$=3,j$=4,q$=5,U$=6,F$=7,K$=8,V$=9,z$=10,rb=11,Lc=12,TS=13,H$=14,PS=15,$$=16,G$=17,W$=18,Y$=19,ib=20,nb=21,X$=22,Q$=23,Z$=24,J$=25,eG=26,CS=27,tG=28,rG=29,Pr=30,OS=31,JIe=32,eTe=852,tTe=592,rTe=15,iTe=rTe;function iG(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function nTe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new is.Buf16(320),this.work=new is.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function nG(t){var e;return!t||!t.state?Fs:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=B$,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new is.Buf32(eTe),e.distcode=e.distdyn=new is.Buf32(tTe),e.sane=1,e.back=-1,Uf)}function sG(t){var e;return!t||!t.state?Fs:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,nG(t))}function oG(t,e){var r,i;return!t||!t.state||(i=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Fs:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,sG(t))}function aG(t,e){var r,i;return t?(i=new nTe,t.state=i,i.window=null,r=oG(t,e),r!==Uf&&(t.state=null),r):Fs}function sTe(t){return aG(t,iTe)}var cG=!0,kS,DS;function oTe(t){if(cG){var e;for(kS=new is.Buf32(512),DS=new is.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(jy(C$,t.lens,0,288,kS,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;jy(O$,t.lens,0,32,DS,0,t.work,{bits:5}),cG=!1}t.lencode=kS,t.lenbits=9,t.distcode=DS,t.distbits=5}function uG(t,e,r,i){var n,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new is.Buf8(s.wsize)),i>=s.wsize?(is.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),is.arraySet(s.window,e,r-i,n,s.wnext),i-=n,i?(is.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function aTe(t,e){var r,i,n,s,o,a,c,u,l,h,d,p,y,m,w=0,b,v,x,B,O,R,N,F,U=new is.Buf8(4),ie,te,ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Fs;r=t.state,r.mode===Lc&&(r.mode=TS),o=t.next_out,n=t.output,c=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,u=r.hold,l=r.bits,h=a,d=c,F=Uf;e:for(;;)switch(r.mode){case B$:if(r.wrap===0){r.mode=TS;break}for(;l<16;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(r.wrap&2&&u===35615){r.check=0,U[0]=u&255,U[1]=u>>>8&255,r.check=Oa(r.check,U,2,0),u=0,l=0,r.mode=L$;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Pr;break}if((u&15)!==N$){t.msg="unknown compression method",r.mode=Pr;break}if(u>>>=4,l-=4,N=(u&15)+8,r.wbits===0)r.wbits=N;else if(N>r.wbits){t.msg="invalid window size",r.mode=Pr;break}r.dmax=1<<N,t.adler=r.check=1,r.mode=u&512?z$:Lc,u=0,l=0;break;case L$:for(;l<16;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(r.flags=u,(r.flags&255)!==N$){t.msg="unknown compression method",r.mode=Pr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Pr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Oa(r.check,U,2,0)),u=0,l=0,r.mode=M$;case M$:for(;l<32;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}r.head&&(r.head.time=u),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,U[2]=u>>>16&255,U[3]=u>>>24&255,r.check=Oa(r.check,U,4,0)),u=0,l=0,r.mode=j$;case j$:for(;l<16;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Oa(r.check,U,2,0)),u=0,l=0,r.mode=q$;case q$:if(r.flags&1024){for(;l<16;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Oa(r.check,U,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=U$;case U$:if(r.flags&1024&&(p=r.length,p>a&&(p=a),p&&(r.head&&(N=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),is.arraySet(r.head.extra,i,s,p,N)),r.flags&512&&(r.check=Oa(r.check,i,p,s)),a-=p,s+=p,r.length-=p),r.length))break e;r.length=0,r.mode=F$;case F$:if(r.flags&2048){if(a===0)break e;p=0;do N=i[s+p++],r.head&&N&&r.length<65536&&(r.head.name+=String.fromCharCode(N));while(N&&p<a);if(r.flags&512&&(r.check=Oa(r.check,i,p,s)),a-=p,s+=p,N)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=K$;case K$:if(r.flags&4096){if(a===0)break e;p=0;do N=i[s+p++],r.head&&N&&r.length<65536&&(r.head.comment+=String.fromCharCode(N));while(N&&p<a);if(r.flags&512&&(r.check=Oa(r.check,i,p,s)),a-=p,s+=p,N)break e}else r.head&&(r.head.comment=null);r.mode=V$;case V$:if(r.flags&512){for(;l<16;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Pr;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Lc;break;case z$:for(;l<32;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}t.adler=r.check=iG(u),u=0,l=0,r.mode=rb;case rb:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,QIe;t.adler=r.check=1,r.mode=Lc;case Lc:if(e===YIe||e===tb)break e;case TS:if(r.last){u>>>=l&7,l-=l&7,r.mode=CS;break}for(;l<3;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}switch(r.last=u&1,u>>>=1,l-=1,u&3){case 0:r.mode=H$;break;case 1:if(oTe(r),r.mode=ib,e===tb){u>>>=2,l-=2;break e}break;case 2:r.mode=G$;break;case 3:t.msg="invalid block type",r.mode=Pr}u>>>=2,l-=2;break;case H$:for(u>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if((u&65535)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Pr;break}if(r.length=u&65535,u=0,l=0,r.mode=PS,e===tb)break e;case PS:r.mode=$$;case $$:if(p=r.length,p){if(p>a&&(p=a),p>c&&(p=c),p===0)break e;is.arraySet(n,i,s,p,o),a-=p,s+=p,c-=p,o+=p,r.length-=p;break}r.mode=Lc;break;case G$:for(;l<14;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(r.nlen=(u&31)+257,u>>>=5,l-=5,r.ndist=(u&31)+1,u>>>=5,l-=5,r.ncode=(u&15)+4,u>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Pr;break}r.have=0,r.mode=W$;case W$:for(;r.have<r.ncode;){for(;l<3;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}r.lens[ae[r.have++]]=u&7,u>>>=3,l-=3}for(;r.have<19;)r.lens[ae[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ie={bits:r.lenbits},F=jy(WIe,r.lens,0,19,r.lencode,0,r.work,ie),r.lenbits=ie.bits,F){t.msg="invalid code lengths set",r.mode=Pr;break}r.have=0,r.mode=Y$;case Y$:for(;r.have<r.nlen+r.ndist;){for(;w=r.lencode[u&(1<<r.lenbits)-1],b=w>>>24,v=w>>>16&255,x=w&65535,!(b<=l);){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(x<16)u>>>=b,l-=b,r.lens[r.have++]=x;else{if(x===16){for(te=b+2;l<te;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(u>>>=b,l-=b,r.have===0){t.msg="invalid bit length repeat",r.mode=Pr;break}N=r.lens[r.have-1],p=3+(u&3),u>>>=2,l-=2}else if(x===17){for(te=b+3;l<te;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}u>>>=b,l-=b,N=0,p=3+(u&7),u>>>=3,l-=3}else{for(te=b+7;l<te;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}u>>>=b,l-=b,N=0,p=11+(u&127),u>>>=7,l-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Pr;break}for(;p--;)r.lens[r.have++]=N}}if(r.mode===Pr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Pr;break}if(r.lenbits=9,ie={bits:r.lenbits},F=jy(C$,r.lens,0,r.nlen,r.lencode,0,r.work,ie),r.lenbits=ie.bits,F){t.msg="invalid literal/lengths set",r.mode=Pr;break}if(r.distbits=6,r.distcode=r.distdyn,ie={bits:r.distbits},F=jy(O$,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ie),r.distbits=ie.bits,F){t.msg="invalid distances set",r.mode=Pr;break}if(r.mode=ib,e===tb)break e;case ib:r.mode=nb;case nb:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,GIe(t,d),o=t.next_out,n=t.output,c=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,u=r.hold,l=r.bits,r.mode===Lc&&(r.back=-1);break}for(r.back=0;w=r.lencode[u&(1<<r.lenbits)-1],b=w>>>24,v=w>>>16&255,x=w&65535,!(b<=l);){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(v&&(v&240)==0){for(B=b,O=v,R=x;w=r.lencode[R+((u&(1<<B+O)-1)>>B)],b=w>>>24,v=w>>>16&255,x=w&65535,!(B+b<=l);){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}u>>>=B,l-=B,r.back+=B}if(u>>>=b,l-=b,r.back+=b,r.length=x,v===0){r.mode=eG;break}if(v&32){r.back=-1,r.mode=Lc;break}if(v&64){t.msg="invalid literal/length code",r.mode=Pr;break}r.extra=v&15,r.mode=X$;case X$:if(r.extra){for(te=r.extra;l<te;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Q$;case Q$:for(;w=r.distcode[u&(1<<r.distbits)-1],b=w>>>24,v=w>>>16&255,x=w&65535,!(b<=l);){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if((v&240)==0){for(B=b,O=v,R=x;w=r.distcode[R+((u&(1<<B+O)-1)>>B)],b=w>>>24,v=w>>>16&255,x=w&65535,!(B+b<=l);){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}u>>>=B,l-=B,r.back+=B}if(u>>>=b,l-=b,r.back+=b,v&64){t.msg="invalid distance code",r.mode=Pr;break}r.offset=x,r.extra=v&15,r.mode=Z$;case Z$:if(r.extra){for(te=r.extra;l<te;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Pr;break}r.mode=J$;case J$:if(c===0)break e;if(p=d-c,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Pr;break}p>r.wnext?(p-=r.wnext,y=r.wsize-p):y=r.wnext-p,p>r.length&&(p=r.length),m=r.window}else m=n,y=o-r.offset,p=r.length;p>c&&(p=c),c-=p,r.length-=p;do n[o++]=m[y++];while(--p);r.length===0&&(r.mode=nb);break;case eG:if(c===0)break e;n[o++]=r.length,c--,r.mode=nb;break;case CS:if(r.wrap){for(;l<32;){if(a===0)break e;a--,u|=i[s++]<<l,l+=8}if(d-=c,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?Oa(r.check,n,d,o-d):RS(r.check,n,d,o-d)),d=c,(r.flags?u:iG(u))!==r.check){t.msg="incorrect data check",r.mode=Pr;break}u=0,l=0}r.mode=tG;case tG:if(r.wrap&&r.flags){for(;l<32;){if(a===0)break e;a--,u+=i[s++]<<l,l+=8}if(u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Pr;break}u=0,l=0}r.mode=rG;case rG:F=XIe;break e;case Pr:F=D$;break e;case OS:return IS;case JIe:default:return Fs}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,(r.wsize||d!==t.avail_out&&r.mode<Pr&&(r.mode<CS||e!==k$))&&uG(t,t.output,t.next_out,d-t.avail_out)?(r.mode=OS,IS):(h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?Oa(r.check,n,d,t.next_out-d):RS(r.check,n,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Lc?128:0)+(r.mode===ib||r.mode===PS?256:0),(h===0&&d===0||e===k$)&&F===Uf&&(F=ZIe),F)}function cTe(t){if(!t||!t.state)return Fs;var e=t.state;return e.window&&(e.window=null),t.state=null,Uf}function uTe(t,e){var r;return!t||!t.state||(r=t.state,(r.wrap&2)==0)?Fs:(r.head=e,e.done=!1,Uf)}function lTe(t,e){var r=e.length,i,n,s;return!t||!t.state||(i=t.state,i.wrap!==0&&i.mode!==rb)?Fs:i.mode===rb&&(n=1,n=RS(n,e,r,0),n!==i.check)?D$:(s=uG(t,e,r,r),s?(i.mode=OS,IS):(i.havedict=1,Uf))}Do.inflateReset=sG;Do.inflateReset2=oG;Do.inflateResetKeep=nG;Do.inflateInit=sTe;Do.inflateInit2=aG;Do.inflate=aTe;Do.inflateEnd=cTe;Do.inflateGetHeader=uTe;Do.inflateSetDictionary=lTe;Do.inflateInfo="pako inflate (from Nodeca project)"});var NS=g((Ppt,fG)=>{f();"use strict";fG.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var dG=g((Cpt,hG)=>{f();"use strict";function fTe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}hG.exports=fTe});var yG=g(Uy=>{f();"use strict";var Lp=lG(),qy=Dc(),sb=wS(),Qr=NS(),BS=$6(),hTe=_S(),dTe=dG(),pG=Object.prototype.toString;function Ff(t){if(!(this instanceof Ff))return new Ff(t);this.options=qy.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)==0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new hTe,this.strm.avail_out=0;var r=Lp.inflateInit2(this.strm,e.windowBits);if(r!==Qr.Z_OK)throw new Error(BS[r]);if(this.header=new dTe,Lp.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=sb.string2buf(e.dictionary):pG.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Lp.inflateSetDictionary(this.strm,e.dictionary),r!==Qr.Z_OK)))throw new Error(BS[r])}Ff.prototype.push=function(t,e){var r=this.strm,i=this.options.chunkSize,n=this.options.dictionary,s,o,a,c,u,l=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?Qr.Z_FINISH:Qr.Z_NO_FLUSH,typeof t=="string"?r.input=sb.binstring2buf(t):pG.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new qy.Buf8(i),r.next_out=0,r.avail_out=i),s=Lp.inflate(r,Qr.Z_NO_FLUSH),s===Qr.Z_NEED_DICT&&n&&(s=Lp.inflateSetDictionary(this.strm,n)),s===Qr.Z_BUF_ERROR&&l===!0&&(s=Qr.Z_OK,l=!1),s!==Qr.Z_STREAM_END&&s!==Qr.Z_OK)return this.onEnd(s),this.ended=!0,!1;r.next_out&&(r.avail_out===0||s===Qr.Z_STREAM_END||r.avail_in===0&&(o===Qr.Z_FINISH||o===Qr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=sb.utf8border(r.output,r.next_out),c=r.next_out-a,u=sb.buf2string(r.output,a),r.next_out=c,r.avail_out=i-c,c&&qy.arraySet(r.output,r.output,a,c,0),this.onData(u)):this.onData(qy.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(l=!0)}while((r.avail_in>0||r.avail_out===0)&&s!==Qr.Z_STREAM_END);return s===Qr.Z_STREAM_END&&(o=Qr.Z_FINISH),o===Qr.Z_FINISH?(s=Lp.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Qr.Z_OK):(o===Qr.Z_SYNC_FLUSH&&(this.onEnd(Qr.Z_OK),r.avail_out=0),!0)};Ff.prototype.onData=function(t){this.chunks.push(t)};Ff.prototype.onEnd=function(t){t===Qr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qy.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function LS(t,e){var r=new Ff(e);if(r.push(t,!0),r.err)throw r.msg||BS[r.err];return r.result}function pTe(t,e){return e=e||{},e.raw=!0,LS(t,e)}Uy.Inflate=Ff;Uy.inflate=LS;Uy.inflateRaw=pTe;Uy.ungzip=LS});var bG=g((kpt,mG)=>{f();"use strict";var yTe=Dc().assign,gTe=_$(),mTe=yG(),bTe=NS(),gG={};yTe(gG,gTe,mTe,bTe);mG.exports=gG});var _G=g((Dpt,wG)=>{f();"use strict";var{concat:wTe}=(Wi(),As);async function _Te(t){let e=new Uint8Array(0);for await(let r of t)e=wTe([e,r],e.length+r.length);return e}wG.exports=_Te});var VS=g((s0t,DG)=>{f();DG.exports=STe;function STe(t,e,r){var i,n;if(Array.isArray(e)&&(i=e.slice(0)),typeof e=="string"&&(i=e.split(".")),typeof e=="symbol"&&(i=[e]),!Array.isArray(i))throw new Error("props arg must be an array, a string or a symbol");if(n=i.pop(),!n)return!1;kG(n);for(var s;s=i.shift();)if(kG(s),typeof t[s]=="undefined"&&(t[s]={}),t=t[s],!t||typeof t!="object")return!1;return t[n]=r,!0}function kG(t){if(t==="__proto__"||t==="constructor"||t==="prototype")throw new Error("setting of prototype values not supported")}});var Vf=g((D0t,GG)=>{f();"use strict";var BTe=async t=>{for await(let e of t)return e};GG.exports=BTe});var hb=g((t1t,uW)=>{f();var{Multiaddr:MTe}=ct(),fb=(t,e)=>e,jTe=(t,e,r,i)=>{if(i&&i.assumeHttp===!1)return`tcp://${t}:${e}`;let n="tcp",s=`:${e}`;return r[r.length-1].protocol==="tcp"&&(n=e==="443"?"https":"http",s=e==="443"||e==="80"?"":s),`${n}://${t}${s}`},qTe={ip4:fb,ip6:(t,e,r,i)=>i.length===1&&i[0].protocol==="ip6"?e:`[${e}]`,tcp:(t,e,r,i,n)=>i.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${t}:${e}`:jTe(t,e,i,n),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:fb,dns4:fb,dns6:fb,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};uW.exports=(t,e)=>{let r=new MTe(t),i=t.toString().split("/").slice(1);return r.tuples().map(n=>({protocol:i.shift(),content:n[1]?i.shift():null})).reduce((n,s,o,a)=>{let c=qTe[s.protocol];if(!c)throw new Error(`Unsupported protocol ${s.protocol}`);return c(n,s.content,o,a,e)},"")}});var fW=g((r1t,lW)=>{f();"use strict";lW.exports=t=>{if(!Array.isArray(t))throw new TypeError(`Expected an array, got ${typeof t}`);t=[...t];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}});var rA=g((a1t,_W)=>{f();_W.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}});var vW=g(()=>{f()});var OW=g((l1t,CW)=>{f();var VTe=Wt().EventEmitter,{nanoid:zTe}=(F3(),r7),{WORKER_REQUEST_READ_LOCK:EW,WORKER_RELEASE_READ_LOCK:SW,MASTER_GRANT_READ_LOCK:AW,WORKER_REQUEST_WRITE_LOCK:xW,WORKER_RELEASE_WRITE_LOCK:RW,MASTER_GRANT_WRITE_LOCK:IW}=rA(),Ky,TW=(t,e,r,i,n)=>(s,o)=>{o&&o.type===r&&t.emit(e,o.name,()=>(s.send({type:n,name:o.name,identifier:o.identifier}),new Promise(a=>{let c=u=>{u&&u.type===i&&u.identifier===o.identifier&&(s.removeListener("message",c),a())};s.on("message",c)})))},PW=(t,e,r,i)=>()=>{let n=zTe();return process.send({type:e,identifier:n,name:t}),new Promise(s=>{let o=a=>{a&&a.type===r&&a.identifier===n&&(process.removeListener("message",o),s(()=>{process.send({type:i,identifier:n,name:t})}))};process.on("message",o)})};CW.exports=t=>{try{if(Ky=vW(),!Object.keys(Ky).length)return}catch(e){return}if(Ky.isMaster||t.singleProcess){let e=new VTe;return Ky.on("message",TW(e,"requestReadLock",EW,SW,AW)),Ky.on("message",TW(e,"requestWriteLock",xW,RW,IW)),e}return{isWorker:!0,readLock:e=>PW(e,EW,AW,SW),writeLock:e=>PW(e,xW,IW,RW)}}});var iA=g((f1t,kW)=>{f();var ol={},Kp=t=>{t.addEventListener("message",e=>{Kp.dispatchEvent("message",t,e)}),t.port&&t.port.addEventListener("message",e=>{Kp.dispatchEvent("message",t,e)})};Kp.addEventListener=(t,e)=>{ol[t]||(ol[t]=[]),ol[t].push(e)};Kp.removeEventListener=(t,e)=>{!ol[t]||(ol[t]=ol[t].filter(r=>r===e))};Kp.dispatchEvent=function(){let t=Array.prototype.slice.call(arguments),e=t.shift();!ol[e]||ol[e].forEach(r=>r.apply(null,t))};kW.exports=Kp});var VW=g((h1t,KW)=>{f();var HTe=Wt().EventEmitter,{nanoid:$Te}=(F3(),r7),{WORKER_REQUEST_READ_LOCK:DW,WORKER_RELEASE_READ_LOCK:NW,MASTER_GRANT_READ_LOCK:BW,WORKER_REQUEST_WRITE_LOCK:LW,WORKER_RELEASE_WRITE_LOCK:MW,MASTER_GRANT_WRITE_LOCK:jW}=rA(),qW=iA(),UW=(t,e,r,i,n)=>(s,o)=>{if(!o||!o.data||o.data.type!==r)return;let a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};t.emit(e,a.name,()=>(s.postMessage({type:n,name:a.name,identifier:a.identifier}),new Promise(c=>{let u=l=>{if(!l||!l.data)return;let h={type:l.data.type,name:l.data.name,identifier:l.data.identifier};h&&h.type===i&&h.identifier===a.identifier&&(s.removeEventListener("message",u),c())};s.addEventListener("message",u)})))},FW=(t,e,r,i)=>()=>{let n=$Te();return globalThis.postMessage({type:e,identifier:n,name:t}),new Promise(s=>{let o=a=>{if(!a||!a.data)return;let c={type:a.data.type,identifier:a.data.identifier};c&&c.type===r&&c.identifier===n&&(globalThis.removeEventListener("message",o),s(()=>{globalThis.postMessage({type:i,identifier:n,name:t})}))};globalThis.addEventListener("message",o)})},GTe={singleProcess:!1};KW.exports=t=>{if(t=Object.assign({},GTe,t),!!globalThis.document||t.singleProcess){let r=new HTe;return qW.addEventListener("message",UW(r,"requestReadLock",DW,NW,BW)),qW.addEventListener("message",UW(r,"requestWriteLock",LW,MW,jW)),r}return{isWorker:!0,readLock:r=>FW(r,DW,BW,NW),writeLock:r=>FW(r,LW,jW,MW)}}});var zW=g((p1t,nA)=>{f();"use strict";var yb,d1t=nA.exports.timeout=function(t,e){var r=new yb,i;return Promise.race([t,new Promise(function(n,s){i=setTimeout(function(){s(r)},e)})]).then(function(n){return clearTimeout(i),n},function(n){throw clearTimeout(i),n})};yb=nA.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"};yb.prototype=Object.create(Error.prototype);yb.prototype.name="TimeoutError"});var aA=g((y1t,oA)=>{f();var WTe=OW(),YTe=VW(),{default:HW}=So(),{timeout:XTe}=zW(),QTe=iA(),zf={},al;function sA(t,e){let r,i=new Promise(n=>{r=n});return t.add(()=>XTe((()=>new Promise(n=>{r(()=>{n()})}))(),e.timeout)),i}var ZTe=(t,e)=>{if(al.isWorker)return{readLock:al.readLock(t,e),writeLock:al.writeLock(t,e)};let r=new HW({concurrency:1}),i=null;return{readLock:()=>{if(i)return sA(i,e);i=new HW({concurrency:e.concurrency,autoStart:!1});let n=i,s=sA(i,e);return r.add(()=>(n.start(),n.onIdle().then(()=>{i===n&&(i=null)}))),s},writeLock:()=>(i=null,sA(r,e))}},JTe={concurrency:1/0,timeout:846e5,global:globalThis,singleProcess:!1};oA.exports=(t,e)=>(e||(e={}),typeof t=="object"&&(e=t,t="lock"),t||(t="lock"),e=Object.assign({},JTe,e),al||(al=WTe(e)||YTe(e),al.isWorker||(al.on("requestReadLock",(r,i)=>{!zf[r]||zf[r].readLock().then(n=>i().finally(()=>n()))}),al.on("requestWriteLock",async(r,i)=>{!zf[r]||zf[r].writeLock().then(n=>i().finally(()=>n()))}))),zf[t]||(zf[t]=ZTe(t,e)),zf[t]);oA.exports.Worker=function(t,e){e=e||globalThis.Worker;let r;try{r=new e(t)}catch(i){i.message.includes("not a constructor")&&(r=e(t))}if(!r)throw new Error("Could not create Worker from",e);return QTe(r),r}});var SA=g((u3t,yX)=>{f();yX.exports=YPe;function YPe(t,e,r){if(!t)return r;var i,n;if(Array.isArray(e)&&(i=e.slice(0)),typeof e=="string"&&(i=e.split(".")),typeof e=="symbol"&&(i=[e]),!Array.isArray(i))throw new Error("props arg must be an array, a string or a symbol");for(;i.length;)if(n=i.shift(),!t||(t=t[n],t===void 0))return r;return t}});var Wf=g((l3t,mX)=>{f();"use strict";function gX(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function XPe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return gX(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),gX(new n,r)}}mX.exports=XPe});var Yy=g((f3t,bX)=>{f();"use strict";var QPe=async t=>{let e=0;for await(let r of t)e++;return e};bX.exports=QPe});var IX=g((_3t,RX)=>{f();AA.BASE=2166136261;function AA(t){for(var e=AA.BASE,r=0,i=t.length;r<i;r++)e^=t.charCodeAt(r),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}RX.exports=AA});var PX={};kt(PX,{compare:()=>IA});function IA(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var TA=tt(()=>{f()});var WX=g((m4t,Cb)=>{f();"use strict";Cb.exports=mCe;Cb.exports.format=$X;Cb.exports.parse=GX;var pCe=/\B(?=(\d{3})+(?!\d))/g,yCe=/(?:\.0*|(\.[^0]+)0+)$/,dl={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},gCe=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function mCe(t,e){return typeof t=="string"?GX(t):typeof t=="number"?$X(t,e):null}function $X(t,e){if(!Number.isFinite(t))return null;var r=Math.abs(t),i=e&&e.thousandsSeparator||"",n=e&&e.unitSeparator||"",s=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,o=Boolean(e&&e.fixedDecimals),a=e&&e.unit||"";(!a||!dl[a.toLowerCase()])&&(r>=dl.pb?a="PB":r>=dl.tb?a="TB":r>=dl.gb?a="GB":r>=dl.mb?a="MB":r>=dl.kb?a="KB":a="B");var c=t/dl[a.toLowerCase()],u=c.toFixed(s);return o||(u=u.replace(yCe,"$1")),i&&(u=u.split(".").map(function(l,h){return h===0?l.replace(pCe,i):l}).join(".")),u+n+a}function GX(t){if(typeof t=="number"&&!isNaN(t))return t;if(typeof t!="string")return null;var e=gCe.exec(t),r,i="b";return e?(r=parseFloat(e[1]),i=e[4].toLowerCase()):(r=parseInt(t,10),i="b"),Math.floor(dl[i]*r)}});var nQ=g((k4t,iQ)=>{f();"use strict";iQ.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var oQ=g((D4t,sQ)=>{f();"use strict";var MA=nQ();sQ.exports=(t,e={})=>{if(!MA(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");let{deep:r}=e,i=[],n=[],s=a=>{let c=i.indexOf(a);if(c!==-1)return n[c];let u=[];return i.push(a),n.push(u),u.push(...a.map(l=>Array.isArray(l)?s(l):MA(l)?o(l):l)),u},o=a=>{let c=i.indexOf(a);if(c!==-1)return n[c];let u={},l=Object.keys(a).sort(e.compare);i.push(a),n.push(u);for(let h of l){let d=a[h],p;r&&Array.isArray(d)?p=s(d):p=r&&MA(d)?o(d):d,Object.defineProperty(u,h,{...Object.getOwnPropertyDescriptor(a,h),value:p})}return u};return Array.isArray(t)?r?s(t):t.slice():o(t)}});var qQ=g((N6t,jQ)=>{f();"use strict";var DCe=Rf(),NCe=async function*(t,e){yield*(await DCe(t)).sort(e)};jQ.exports=NCe});var $A=g((B6t,UQ)=>{f();"use strict";UQ.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==n||o.enumerable!==!0)return!1}return!0}});var ag=g((L6t,FQ)=>{f();"use strict";var BCe=$A();FQ.exports=function(){return BCe()&&!!Symbol.toStringTag}});var zQ=g((M6t,VQ)=>{f();"use strict";var KQ=typeof Symbol!="undefined"&&Symbol,LCe=$A();VQ.exports=function(){return typeof KQ!="function"||typeof Symbol!="function"||typeof KQ("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:LCe()}});var $Q=g((j6t,HQ)=>{f();"use strict";var MCe="Function.prototype.bind called on incompatible ",GA=Array.prototype.slice,jCe=Object.prototype.toString,qCe="[object Function]";HQ.exports=function(e){var r=this;if(typeof r!="function"||jCe.call(r)!==qCe)throw new TypeError(MCe+r);for(var i=GA.call(arguments,1),n,s=function(){if(this instanceof n){var l=r.apply(this,i.concat(GA.call(arguments)));return Object(l)===l?l:this}else return r.apply(e,i.concat(GA.call(arguments)))},o=Math.max(0,r.length-i.length),a=[],c=0;c<o;c++)a.push("$"+c);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n}});var Mb=g((q6t,GQ)=>{f();"use strict";var UCe=$Q();GQ.exports=Function.prototype.bind||UCe});var YQ=g((U6t,WQ)=>{f();"use strict";var FCe=Mb();WQ.exports=FCe.call(Function.call,Object.prototype.hasOwnProperty)});var Fb=g((F6t,JQ)=>{f();"use strict";var Lt,cg=SyntaxError,XQ=Function,e0=TypeError,WA=function(t){try{return XQ('"use strict"; return ('+t+").constructor;")()}catch(e){}},th=Object.getOwnPropertyDescriptor;if(th)try{th({},"")}catch(t){th=null}var YA=function(){throw new e0},KCe=th?function(){try{return arguments.callee,YA}catch(t){try{return th(arguments,"callee").get}catch(e){return YA}}}():YA,t0=zQ()(),yl=Object.getPrototypeOf||function(t){return t.__proto__},r0={},VCe=typeof Uint8Array=="undefined"?Lt:yl(Uint8Array),i0={"%AggregateError%":typeof AggregateError=="undefined"?Lt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?Lt:ArrayBuffer,"%ArrayIteratorPrototype%":t0?yl([][Symbol.iterator]()):Lt,"%AsyncFromSyncIteratorPrototype%":Lt,"%AsyncFunction%":r0,"%AsyncGenerator%":r0,"%AsyncGeneratorFunction%":r0,"%AsyncIteratorPrototype%":r0,"%Atomics%":typeof Atomics=="undefined"?Lt:Atomics,"%BigInt%":typeof BigInt=="undefined"?Lt:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?Lt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?Lt:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?Lt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?Lt:FinalizationRegistry,"%Function%":XQ,"%GeneratorFunction%":r0,"%Int8Array%":typeof Int8Array=="undefined"?Lt:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?Lt:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?Lt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":t0?yl(yl([][Symbol.iterator]())):Lt,"%JSON%":typeof JSON=="object"?JSON:Lt,"%Map%":typeof Map=="undefined"?Lt:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!t0?Lt:yl(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?Lt:Promise,"%Proxy%":typeof Proxy=="undefined"?Lt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?Lt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?Lt:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!t0?Lt:yl(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?Lt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":t0?yl(""[Symbol.iterator]()):Lt,"%Symbol%":t0?Symbol:Lt,"%SyntaxError%":cg,"%ThrowTypeError%":KCe,"%TypedArray%":VCe,"%TypeError%":e0,"%Uint8Array%":typeof Uint8Array=="undefined"?Lt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?Lt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?Lt:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?Lt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?Lt:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?Lt:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?Lt:WeakSet},zCe=function t(e){var r;if(e==="%AsyncFunction%")r=WA("async function () {}");else if(e==="%GeneratorFunction%")r=WA("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=WA("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&(r=yl(n.prototype))}return i0[e]=r,r},QQ={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jb=Mb(),qb=YQ(),HCe=jb.call(Function.call,Array.prototype.concat),$Ce=jb.call(Function.apply,Array.prototype.splice),ZQ=jb.call(Function.call,String.prototype.replace),Ub=jb.call(Function.call,String.prototype.slice),GCe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,WCe=/\\(\\)?/g,YCe=function(e){var r=Ub(e,0,1),i=Ub(e,-1);if(r==="%"&&i!=="%")throw new cg("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new cg("invalid intrinsic syntax, expected opening `%`");var n=[];return ZQ(e,GCe,function(s,o,a,c){n[n.length]=a?ZQ(c,WCe,"$1"):o||s}),n},XCe=function(e,r){var i=e,n;if(qb(QQ,i)&&(n=QQ[i],i="%"+n[0]+"%"),qb(i0,i)){var s=i0[i];if(s===r0&&(s=zCe(i)),typeof s=="undefined"&&!r)throw new e0("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new cg("intrinsic "+e+" does not exist!")};JQ.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new e0("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new e0('"allowMissing" argument must be a boolean');var i=YCe(e),n=i.length>0?i[0]:"",s=XCe("%"+n+"%",r),o=s.name,a=s.value,c=!1,u=s.alias;u&&(n=u[0],$Ce(i,HCe([0,1],u)));for(var l=1,h=!0;l<i.length;l+=1){var d=i[l],p=Ub(d,0,1),y=Ub(d,-1);if((p==='"'||p==="'"||p==="`"||y==='"'||y==="'"||y==="`")&&p!==y)throw new cg("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(c=!0),n+="."+d,o="%"+n+"%",qb(i0,o))a=i0[o];else if(a!=null){if(!(d in a)){if(!r)throw new e0("base intrinsic for "+e+" exists, but the property is not available.");return}if(th&&l+1>=i.length){var m=th(a,d);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else h=qb(a,d),a=a[d];h&&!c&&(i0[o]=a)}}return a}});var sZ=g((K6t,Kb)=>{f();"use strict";var XA=Mb(),n0=Fb(),eZ=n0("%Function.prototype.apply%"),tZ=n0("%Function.prototype.call%"),rZ=n0("%Reflect.apply%",!0)||XA.call(tZ,eZ),iZ=n0("%Object.getOwnPropertyDescriptor%",!0),rh=n0("%Object.defineProperty%",!0),QCe=n0("%Math.max%");if(rh)try{rh({},"a",{value:1})}catch(t){rh=null}Kb.exports=function(e){var r=rZ(XA,tZ,arguments);if(iZ&&rh){var i=iZ(r,"length");i.configurable&&rh(r,"length",{value:1+QCe(0,e.length-(arguments.length-1))})}return r};var nZ=function(){return rZ(XA,eZ,arguments)};rh?rh(Kb.exports,"apply",{value:nZ}):Kb.exports.apply=nZ});var Vb=g((V6t,cZ)=>{f();"use strict";var oZ=Fb(),aZ=sZ(),ZCe=aZ(oZ("String.prototype.indexOf"));cZ.exports=function(e,r){var i=oZ(e,!!r);return typeof i=="function"&&ZCe(e,".prototype.")>-1?aZ(i):i}});var fZ=g((z6t,lZ)=>{f();"use strict";var JCe=ag()(),eOe=Vb(),QA=eOe("Object.prototype.toString"),zb=function(e){return JCe&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:QA(e)==="[object Arguments]"},uZ=function(e){return zb(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&QA(e)!=="[object Array]"&&QA(e.callee)==="[object Function]"},tOe=function(){return zb(arguments)}();zb.isLegacyArguments=uZ;lZ.exports=tOe?zb:uZ});var pZ=g((H6t,dZ)=>{f();"use strict";var rOe=Object.prototype.toString,iOe=Function.prototype.toString,nOe=/^\s*(?:function)?\*/,hZ=ag()(),ZA=Object.getPrototypeOf,sOe=function(){if(!hZ)return!1;try{return Function("return function*() {}")()}catch(t){}},JA;dZ.exports=function(e){if(typeof e!="function")return!1;if(nOe.test(iOe.call(e)))return!0;if(!hZ){var r=rOe.call(e);return r==="[object GeneratorFunction]"}if(!ZA)return!1;if(typeof JA=="undefined"){var i=sOe();JA=i?ZA(i):!1}return ZA(e)===JA}});var ex=g(($6t,yZ)=>{f();var oOe=Object.prototype.hasOwnProperty,aOe=Object.prototype.toString;yZ.exports=function(e,r,i){if(aOe.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var n=e.length;if(n===+n)for(var s=0;s<n;s++)r.call(i,e[s],s,e);else for(var o in e)oOe.call(e,o)&&r.call(i,e[o],o,e)}});var rx=g((G6t,gZ)=>{f();"use strict";var tx=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],cOe=globalThis;gZ.exports=function(){for(var e=[],r=0;r<tx.length;r++)typeof cOe[tx[r]]=="function"&&(e[e.length]=tx[r]);return e}});var ix=g((W6t,mZ)=>{f();"use strict";var uOe=Fb(),Hb=uOe("%Object.getOwnPropertyDescriptor%",!0);if(Hb)try{Hb([],"length")}catch(t){Hb=null}mZ.exports=Hb});var ox=g((Y6t,EZ)=>{f();"use strict";var bZ=ex(),lOe=rx(),nx=Vb(),fOe=nx("Object.prototype.toString"),wZ=ag()(),hOe=globalThis,_Z=lOe(),dOe=nx("Array.prototype.indexOf",!0)||function(e,r){for(var i=0;i<e.length;i+=1)if(e[i]===r)return i;return-1},pOe=nx("String.prototype.slice"),vZ={},$b=ix(),sx=Object.getPrototypeOf;wZ&&$b&&sx&&bZ(_Z,function(t){var e=new hOe[t];if(Symbol.toStringTag in e){var r=sx(e),i=$b(r,Symbol.toStringTag);if(!i){var n=sx(r);i=$b(n,Symbol.toStringTag)}vZ[t]=i.get}});var yOe=function(e){var r=!1;return bZ(vZ,function(i,n){if(!r)try{r=i.call(e)===n}catch(s){}}),r};EZ.exports=function(e){if(!e||typeof e!="object")return!1;if(!wZ||!(Symbol.toStringTag in e)){var r=pOe(fOe(e),8,-1);return dOe(_Z,r)>-1}return $b?yOe(e):!1}});var PZ=g((X6t,TZ)=>{f();"use strict";var SZ=ex(),gOe=rx(),AZ=Vb(),mOe=AZ("Object.prototype.toString"),xZ=ag()(),RZ=globalThis,bOe=gOe(),wOe=AZ("String.prototype.slice"),IZ={},ax=ix(),cx=Object.getPrototypeOf;xZ&&ax&&cx&&SZ(bOe,function(t){if(typeof RZ[t]=="function"){var e=new RZ[t];if(Symbol.toStringTag in e){var r=cx(e),i=ax(r,Symbol.toStringTag);if(!i){var n=cx(r);i=ax(n,Symbol.toStringTag)}IZ[t]=i.get}}});var _Oe=function(e){var r=!1;return SZ(IZ,function(i,n){if(!r)try{var s=i.call(e);s===n&&(r=s)}catch(o){}}),r},vOe=ox();TZ.exports=function(e){return vOe(e)?!xZ||!(Symbol.toStringTag in e)?wOe(mOe(e),8,-1):_Oe(e):!1}});var VZ=g(St=>{f();"use strict";var EOe=fZ(),SOe=pZ(),Bo=PZ(),CZ=ox();function s0(t){return t.call.bind(t)}var OZ=typeof BigInt!="undefined",kZ=typeof Symbol!="undefined",Hs=s0(Object.prototype.toString),AOe=s0(Number.prototype.valueOf),xOe=s0(String.prototype.valueOf),ROe=s0(Boolean.prototype.valueOf);OZ&&(DZ=s0(BigInt.prototype.valueOf));var DZ;kZ&&(NZ=s0(Symbol.prototype.valueOf));var NZ;function ug(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch(r){return!1}}St.isArgumentsObject=EOe;St.isGeneratorFunction=SOe;St.isTypedArray=CZ;function IOe(t){return typeof Promise!="undefined"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}St.isPromise=IOe;function TOe(t){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(t):CZ(t)||LZ(t)}St.isArrayBufferView=TOe;function POe(t){return Bo(t)==="Uint8Array"}St.isUint8Array=POe;function COe(t){return Bo(t)==="Uint8ClampedArray"}St.isUint8ClampedArray=COe;function OOe(t){return Bo(t)==="Uint16Array"}St.isUint16Array=OOe;function kOe(t){return Bo(t)==="Uint32Array"}St.isUint32Array=kOe;function DOe(t){return Bo(t)==="Int8Array"}St.isInt8Array=DOe;function NOe(t){return Bo(t)==="Int16Array"}St.isInt16Array=NOe;function BOe(t){return Bo(t)==="Int32Array"}St.isInt32Array=BOe;function LOe(t){return Bo(t)==="Float32Array"}St.isFloat32Array=LOe;function MOe(t){return Bo(t)==="Float64Array"}St.isFloat64Array=MOe;function jOe(t){return Bo(t)==="BigInt64Array"}St.isBigInt64Array=jOe;function qOe(t){return Bo(t)==="BigUint64Array"}St.isBigUint64Array=qOe;function Gb(t){return Hs(t)==="[object Map]"}Gb.working=typeof Map!="undefined"&&Gb(new Map);function UOe(t){return typeof Map=="undefined"?!1:Gb.working?Gb(t):t instanceof Map}St.isMap=UOe;function Wb(t){return Hs(t)==="[object Set]"}Wb.working=typeof Set!="undefined"&&Wb(new Set);function FOe(t){return typeof Set=="undefined"?!1:Wb.working?Wb(t):t instanceof Set}St.isSet=FOe;function Yb(t){return Hs(t)==="[object WeakMap]"}Yb.working=typeof WeakMap!="undefined"&&Yb(new WeakMap);function KOe(t){return typeof WeakMap=="undefined"?!1:Yb.working?Yb(t):t instanceof WeakMap}St.isWeakMap=KOe;function ux(t){return Hs(t)==="[object WeakSet]"}ux.working=typeof WeakSet!="undefined"&&ux(new WeakSet);function VOe(t){return ux(t)}St.isWeakSet=VOe;function Xb(t){return Hs(t)==="[object ArrayBuffer]"}Xb.working=typeof ArrayBuffer!="undefined"&&Xb(new ArrayBuffer);function BZ(t){return typeof ArrayBuffer=="undefined"?!1:Xb.working?Xb(t):t instanceof ArrayBuffer}St.isArrayBuffer=BZ;function Qb(t){return Hs(t)==="[object DataView]"}Qb.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&Qb(new DataView(new ArrayBuffer(1),0,1));function LZ(t){return typeof DataView=="undefined"?!1:Qb.working?Qb(t):t instanceof DataView}St.isDataView=LZ;var lx=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function lg(t){return Hs(t)==="[object SharedArrayBuffer]"}function MZ(t){return typeof lx=="undefined"?!1:(typeof lg.working=="undefined"&&(lg.working=lg(new lx)),lg.working?lg(t):t instanceof lx)}St.isSharedArrayBuffer=MZ;function zOe(t){return Hs(t)==="[object AsyncFunction]"}St.isAsyncFunction=zOe;function HOe(t){return Hs(t)==="[object Map Iterator]"}St.isMapIterator=HOe;function $Oe(t){return Hs(t)==="[object Set Iterator]"}St.isSetIterator=$Oe;function GOe(t){return Hs(t)==="[object Generator]"}St.isGeneratorObject=GOe;function WOe(t){return Hs(t)==="[object WebAssembly.Module]"}St.isWebAssemblyCompiledModule=WOe;function jZ(t){return ug(t,AOe)}St.isNumberObject=jZ;function qZ(t){return ug(t,xOe)}St.isStringObject=qZ;function UZ(t){return ug(t,ROe)}St.isBooleanObject=UZ;function FZ(t){return OZ&&ug(t,DZ)}St.isBigIntObject=FZ;function KZ(t){return kZ&&ug(t,NZ)}St.isSymbolObject=KZ;function YOe(t){return jZ(t)||qZ(t)||UZ(t)||FZ(t)||KZ(t)}St.isBoxedPrimitive=YOe;function XOe(t){return typeof Uint8Array!="undefined"&&(BZ(t)||MZ(t))}St.isAnyArrayBuffer=XOe;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(St,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var HZ=g((Z6t,zZ)=>{f();zZ.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var os=g((J6t,fx)=>{f();typeof Object.create=="function"?fx.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:fx.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var QZ=g(At=>{f();var $Z=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(e,r[n]);return i},QOe=/%[sdj%]/g;At.format=function(t){if(!r5(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(gl(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,n=i.length,s=String(t).replace(QOe,function(a){if(a==="%%")return"%";if(r>=n)return a;switch(a){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(c){return"[Circular]"}default:return a}}),o=i[r];r<n;o=i[++r])t5(o)||!o0(o)?s+=" "+o:s+=" "+gl(o);return s};At.deprecate=function(t,e){if(typeof process!="undefined"&&process.noDeprecation===!0)return t;if(typeof process=="undefined")return function(){return At.deprecate(t,e).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return i};var Zb={},GZ=/^$/;process.env.NODE_DEBUG&&(Jb=process.env.NODE_DEBUG,Jb=Jb.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),GZ=new RegExp("^"+Jb+"$","i"));var Jb;At.debuglog=function(t){if(t=t.toUpperCase(),!Zb[t])if(GZ.test(t)){var e=process.pid;Zb[t]=function(){var r=At.format.apply(At,arguments);console.error("%s %d: %s",t,e,r)}}else Zb[t]=function(){};return Zb[t]};function gl(t,e){var r={seen:[],stylize:JOe};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),px(e)?r.showHidden=e:e&&At._extend(r,e),ih(r.showHidden)&&(r.showHidden=!1),ih(r.depth)&&(r.depth=2),ih(r.colors)&&(r.colors=!1),ih(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ZOe),e5(r,t,r.depth)}At.inspect=gl;gl.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};gl.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ZOe(t,e){var r=gl.styles[e];return r?"["+gl.colors[r][0]+"m"+t+"["+gl.colors[r][1]+"m":t}function JOe(t,e){return t}function eke(t){var e={};return t.forEach(function(r,i){e[r]=!0}),e}function e5(t,e,r){if(t.customInspect&&e&&n5(e.inspect)&&e.inspect!==At.inspect&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(r,t);return r5(i)||(i=e5(t,i,r)),i}var n=tke(t,e);if(n)return n;var s=Object.keys(e),o=eke(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),hg(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return hx(e);if(s.length===0){if(n5(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(fg(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(i5(e))return t.stylize(Date.prototype.toString.call(e),"date");if(hg(e))return hx(e)}var c="",u=!1,l=["{","}"];if(WZ(e)&&(u=!0,l=["[","]"]),n5(e)){var h=e.name?": "+e.name:"";c=" [Function"+h+"]"}if(fg(e)&&(c=" "+RegExp.prototype.toString.call(e)),i5(e)&&(c=" "+Date.prototype.toUTCString.call(e)),hg(e)&&(c=" "+hx(e)),s.length===0&&(!u||e.length==0))return l[0]+c+l[1];if(r<0)return fg(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var d;return u?d=rke(t,e,r,o,s):d=s.map(function(p){return dx(t,e,r,o,p,u)}),t.seen.pop(),ike(d,c,l)}function tke(t,e){if(ih(e))return t.stylize("undefined","undefined");if(r5(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(YZ(e))return t.stylize(""+e,"number");if(px(e))return t.stylize(""+e,"boolean");if(t5(e))return t.stylize("null","null")}function hx(t){return"["+Error.prototype.toString.call(t)+"]"}function rke(t,e,r,i,n){for(var s=[],o=0,a=e.length;o<a;++o)XZ(e,String(o))?s.push(dx(t,e,r,i,String(o),!0)):s.push("");return n.forEach(function(c){c.match(/^\d+$/)||s.push(dx(t,e,r,i,c,!0))}),s}function dx(t,e,r,i,n,s){var o,a,c;if(c=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},c.get?c.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),XZ(i,n)||(o="["+n+"]"),a||(t.seen.indexOf(c.value)<0?(t5(r)?a=e5(t,c.value,null):a=e5(t,c.value,r-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=t.stylize("[Circular]","special")),ih(o)){if(s&&n.match(/^\d+$/))return a;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function ike(t,e,r){var i=0,n=t.reduce(function(s,o){return i++,o.indexOf(`
`)>=0&&i++,s+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}At.types=VZ();function WZ(t){return Array.isArray(t)}At.isArray=WZ;function px(t){return typeof t=="boolean"}At.isBoolean=px;function t5(t){return t===null}At.isNull=t5;function nke(t){return t==null}At.isNullOrUndefined=nke;function YZ(t){return typeof t=="number"}At.isNumber=YZ;function r5(t){return typeof t=="string"}At.isString=r5;function ske(t){return typeof t=="symbol"}At.isSymbol=ske;function ih(t){return t===void 0}At.isUndefined=ih;function fg(t){return o0(t)&&yx(t)==="[object RegExp]"}At.isRegExp=fg;At.types.isRegExp=fg;function o0(t){return typeof t=="object"&&t!==null}At.isObject=o0;function i5(t){return o0(t)&&yx(t)==="[object Date]"}At.isDate=i5;At.types.isDate=i5;function hg(t){return o0(t)&&(yx(t)==="[object Error]"||t instanceof Error)}At.isError=hg;At.types.isNativeError=hg;function n5(t){return typeof t=="function"}At.isFunction=n5;function oke(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}At.isPrimitive=oke;At.isBuffer=HZ();function yx(t){return Object.prototype.toString.call(t)}function gx(t){return t<10?"0"+t.toString(10):t.toString(10)}var ake=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function cke(){var t=new Date,e=[gx(t.getHours()),gx(t.getMinutes()),gx(t.getSeconds())].join(":");return[t.getDate(),ake[t.getMonth()],e].join(" ")}At.log=function(){console.log("%s - %s",cke(),At.format.apply(At,arguments))};At.inherits=os();At._extend=function(t,e){if(!e||!o0(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t};function XZ(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var nh=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;At.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(nh&&e[nh]){var r=e[nh];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,nh,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,s=new Promise(function(c,u){i=c,n=u}),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push(function(c,u){c?n(c):i(u)});try{e.apply(this,o)}catch(c){n(c)}return s}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),nh&&Object.defineProperty(r,nh,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,$Z(e))};At.promisify.custom=nh;function uke(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function lke(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return n.apply(s,arguments)};t.apply(this,r).then(function(a){process.nextTick(o.bind(null,null,a))},function(a){process.nextTick(uke.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,$Z(t)),e}At.callbackify=lke});var mx=g((tbt,JZ)=>{f();"use strict";JZ.exports=function(...e){let r=e.reduce((i,n)=>Object.assign(i,n),{});return Object.assign(r,{bufferKeys:r.bufferKeys||!1,snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,idempotentOpen:r.idempotentOpen||!1,passiveOpen:r.passiveOpen||!1,serialize:r.serialize||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,openCallback:r.openCallback||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:ZZ(r.encodings),events:ZZ(r.events),additionalMethods:Object.assign({},r.additionalMethods)})};function ZZ(t){return t?Object.assign({},t):!1}});var bx=g((rbt,eJ)=>{f();eJ.exports=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}});var rJ=g((ibt,tJ)=>{f();tJ.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var s5=g(wx=>{f();"use strict";var iJ=rJ();wx.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(i,n){t=function(s,o){s?n(s):i(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};wx.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){iJ(()=>e(null,r))}).catch(function(r){iJ(()=>e(r))})}});var dg=g((sbt,sJ)=>{f();var nJ;sJ.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:globalThis):t=>(nJ||(nJ=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var o5=g((obt,aJ)=>{f();"use strict";var oJ=dg();aJ.exports=function(t,...e){e.length===0?oJ(t):oJ(()=>t(...e))}});var _x=g((abt,cJ)=>{f();"use strict";function jc(t){if(typeof t!="object"||t===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._ended=!1,this._nexting=!1}jc.prototype.next=function(t){let e=this;if(t===void 0)e=new Promise(function(r,i){t=function(n,s,o){n?i(n):s===void 0&&o===void 0?r():r([s,o])}});else if(typeof t!="function")throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(t,new Error("cannot call next() after end()")),e):this._nexting?(this._nextTick(t,new Error("cannot call next() before previous next() has completed")),e):(this._nexting=!0,this._next((r,...i)=>{this._nexting=!1,t(r,...i)}),e)};jc.prototype._next=function(t){this._nextTick(t)};jc.prototype.seek=function(t){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");t=this.db._serializeKey(t),this._seek(t)};jc.prototype._seek=function(t){};jc.prototype.end=function(t){let e;if(t===void 0)e=new Promise(function(r,i){t=function(n){n?i(n):r()}});else if(typeof t!="function")throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(t,new Error("end() already called on iterator")),e):(this._ended=!0,this._end(t),e)};jc.prototype._end=function(t){this._nextTick(t)};jc.prototype[Symbol.asyncIterator]=async function*(){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this._ended||await this.end()}};jc.prototype._nextTick=o5();cJ.exports=jc});var vx=g((cbt,lJ)=>{f();"use strict";var uJ=Object.freeze({});function Lo(t){if(typeof t!="object"||t===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._operations=[],this._written=!1}Lo.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")};Lo.prototype.put=function(t,e,r){this._checkWritten();let i=this.db._checkKey(t)||this.db._checkValue(e);if(i)throw i;return t=this.db._serializeKey(t),e=this.db._serializeValue(e),this._put(t,e,r??uJ),this};Lo.prototype._put=function(t,e,r){this._operations.push({...r,type:"put",key:t,value:e})};Lo.prototype.del=function(t,e){this._checkWritten();let r=this.db._checkKey(t);if(r)throw r;return t=this.db._serializeKey(t),this._del(t,e??uJ),this};Lo.prototype._del=function(t,e){this._operations.push({...e,type:"del",key:t})};Lo.prototype.clear=function(){return this._checkWritten(),this._clear(),this};Lo.prototype._clear=function(){this._operations=[]};Lo.prototype.write=function(t,e){if(this._checkWritten(),typeof t=="function"&&(e=t),typeof e!="function")throw new Error("write() requires a callback argument");(typeof t!="object"||t===null)&&(t={}),this._written=!0,this._write(t,e)};Lo.prototype._write=function(t,e){this.db._batch(this._operations,t,e)};Lo.prototype._nextTick=o5();lJ.exports=Lo});var Sx=g(Ex=>{f();"use strict";Ex.getCallback=function(t,e){return typeof t=="function"?t:e};Ex.getOptions=function(t){return typeof t=="object"&&t!==null?t:{}}});var dJ=g((lbt,hJ)=>{f();"use strict";var fke=mx(),hke=bx(),dke=s5(),pke=_x(),yke=vx(),gke=Sx().getCallback,mke=Sx().getOptions,bke=Object.prototype.hasOwnProperty,wke=["lt","lte","gt","gte"];function sr(t){this.status="new",this.supports=fke(t,{status:!0})}sr.prototype.open=function(t,e){let r=this.status;if(typeof t=="function"&&(e=t),typeof e!="function")throw new Error("open() requires a callback argument");(typeof t!="object"||t===null)&&(t={}),t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists,this.status="opening",this._open(t,i=>{if(i)return this.status=r,e(i);this.status="open",e()})};sr.prototype._open=function(t,e){this._nextTick(e)};sr.prototype.close=function(t){let e=this.status;if(typeof t!="function")throw new Error("close() requires a callback argument");this.status="closing",this._close(r=>{if(r)return this.status=e,t(r);this.status="closed",t()})};sr.prototype._close=function(t){this._nextTick(t)};sr.prototype.get=function(t,e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("get() requires a callback argument");let i=this._checkKey(t);if(i)return this._nextTick(r,i);t=this._serializeKey(t),(typeof e!="object"||e===null)&&(e={}),e.asBuffer=e.asBuffer!==!1,this._get(t,e,r)};sr.prototype._get=function(t,e,r){this._nextTick(function(){r(new Error("NotFound"))})};sr.prototype.getMany=function(t,e,r){if(r=gke(e,r),r=dke.fromCallback(r),e=mke(e),vke(this,r))return r.promise;if(!Array.isArray(t))return this._nextTick(r,new Error("getMany() requires an array argument")),r.promise;if(t.length===0)return this._nextTick(r,null,[]),r.promise;typeof e.asBuffer!="boolean"&&(e={...e,asBuffer:!0});let i=new Array(t.length);for(let n=0;n<t.length;n++){let s=t[n],o=this._checkKey(s);if(o)return this._nextTick(r,o),r.promise;i[n]=this._serializeKey(s)}return this._getMany(i,e,r),r.promise};sr.prototype._getMany=function(t,e,r){this._nextTick(r,null,new Array(t.length).fill(void 0))};sr.prototype.put=function(t,e,r,i){if(typeof r=="function"&&(i=r),typeof i!="function")throw new Error("put() requires a callback argument");let n=this._checkKey(t)||this._checkValue(e);if(n)return this._nextTick(i,n);t=this._serializeKey(t),e=this._serializeValue(e),(typeof r!="object"||r===null)&&(r={}),this._put(t,e,r,i)};sr.prototype._put=function(t,e,r,i){this._nextTick(i)};sr.prototype.del=function(t,e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("del() requires a callback argument");let i=this._checkKey(t);if(i)return this._nextTick(r,i);t=this._serializeKey(t),(typeof e!="object"||e===null)&&(e={}),this._del(t,e,r)};sr.prototype._del=function(t,e,r){this._nextTick(r)};sr.prototype.batch=function(t,e,r){if(!arguments.length)return this._chainedBatch();if(typeof e=="function"&&(r=e),typeof t=="function"&&(r=t),typeof r!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return this._nextTick(r,new Error("batch(array) requires an array argument"));if(t.length===0)return this._nextTick(r);(typeof e!="object"||e===null)&&(e={});let i=new Array(t.length);for(let n=0;n<t.length;n++){if(typeof t[n]!="object"||t[n]===null)return this._nextTick(r,new Error("batch(array) element must be an object and not `null`"));let s=Object.assign({},t[n]);if(s.type!=="put"&&s.type!=="del")return this._nextTick(r,new Error("`type` must be 'put' or 'del'"));let o=this._checkKey(s.key);if(o)return this._nextTick(r,o);if(s.key=this._serializeKey(s.key),s.type==="put"){let a=this._checkValue(s.value);if(a)return this._nextTick(r,a);s.value=this._serializeValue(s.value)}i[n]=s}this._batch(i,e,r)};sr.prototype._batch=function(t,e,r){this._nextTick(r)};sr.prototype.clear=function(t,e){if(typeof t=="function")e=t;else if(typeof e!="function")throw new Error("clear() requires a callback argument");t=fJ(this,t),t.reverse=!!t.reverse,t.limit="limit"in t?t.limit:-1,this._clear(t,e)};sr.prototype._clear=function(t,e){t.keys=!0,t.values=!1,t.keyAsBuffer=!0,t.valueAsBuffer=!0;let r=this._iterator(t),i={},n=s=>{if(s)return r.end(function(){e(s)});r.next((o,a)=>{if(o)return n(o);if(a===void 0)return r.end(e);this._del(a,i,n)})};n()};sr.prototype._setupIteratorOptions=function(t){return t=fJ(this,t),t.reverse=!!t.reverse,t.keys=t.keys!==!1,t.values=t.values!==!1,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=t.keyAsBuffer!==!1,t.valueAsBuffer=t.valueAsBuffer!==!1,t};function fJ(t,e){let r={};for(let i in e){if(!bke.call(e,i))continue;if(i==="start"||i==="end")throw new Error('Legacy range options ("start" and "end") have been removed');let n=e[i];_ke(i)&&(n=t._serializeKey(n)),r[i]=n}return r}function _ke(t){return wke.indexOf(t)!==-1}sr.prototype.iterator=function(t){return(typeof t!="object"||t===null)&&(t={}),t=this._setupIteratorOptions(t),this._iterator(t)};sr.prototype._iterator=function(t){return new pke(this)};sr.prototype._chainedBatch=function(){return new yke(this)};sr.prototype._serializeKey=function(t){return t};sr.prototype._serializeValue=function(t){return t};sr.prototype._checkKey=function(t){if(t==null)return new Error("key cannot be `null` or `undefined`");if(hke(t)&&t.length===0)return new Error("key cannot be an empty Buffer");if(t==="")return new Error("key cannot be an empty String");if(Array.isArray(t)&&t.length===0)return new Error("key cannot be an empty Array")};sr.prototype._checkValue=function(t){if(t==null)return new Error("value cannot be `null` or `undefined`")};sr.prototype.isOperational=function(){return this.status==="open"||this._isOperational()};sr.prototype._isOperational=function(){return!1};sr.prototype._nextTick=o5();hJ.exports=sr;function vke(t,e){return t.isOperational()?!1:(t._nextTick(e,new Error("Database is not open")),!0)}});var qc=g(a5=>{f();"use strict";a5.AbstractLevelDOWN=dJ();a5.AbstractIterator=_x();a5.AbstractChainedBatch=vx()});var Ax=g(pJ=>{f();"use strict";pJ.getCallback=function(t,e,r){let i=t[t.length-1];if(typeof i!="function"){let n=new Promise((s,o)=>{t.push(i=function(a,...c){a?o(a):s(r?r(...c):c[0])})});i[e]=n}return i}});var wJ=g((dbt,bJ)=>{f();"use strict";var{AbstractIterator:yJ}=qc(),Eke=os(),gJ=Ax().getCallback,mJ=Symbol("options"),a0=Symbol("iterator"),c0=Symbol("operations"),c5=Symbol("promise");function sh(t,e){yJ.call(this,t),this[mJ]=e,this[a0]=null,this[c0]=[]}Eke(sh,yJ);sh.prototype.setDb=function(t){this[a0]=t.iterator(this[mJ]);for(let e of this[c0].splice(0,this[c0].length))this[a0][e.method](...e.args)};sh.prototype.next=function(...t){if(this.db.status==="open")return this[a0].next(...t);let e=gJ(t,c5,function(i,n){if(!(i===void 0&&n===void 0))return[i,n]});return this.db.status==="opening"?this[c0].push({method:"next",args:t}):this._nextTick(e,new Error("Database is not open")),e[c5]||this};sh.prototype.seek=function(...t){if(this.db.status==="open")this[a0].seek(...t);else if(this.db.status==="opening")this[c0].push({method:"seek",args:t});else throw new Error("Database is not open")};sh.prototype.end=function(...t){if(this.db.status==="open")return this[a0].end(...t);let e=gJ(t,c5);return this.db.status==="opening"?this[c0].push({method:"end",args:t}):this._nextTick(e,new Error("Database is not open")),e[c5]||this};for(let t of["next","seek","end"])sh.prototype["_"+t]=function(){throw new Error("Did not expect private method to be called: "+t)};bJ.exports=sh});var vJ=g((ybt,_J)=>{f();"use strict";var{AbstractChainedBatch:Ske}=qc(),pg=Symbol("operations");_J.exports=class extends Ske{constructor(e){super(e);this[pg]=[]}_put(e,r,i){this[pg].push({...i,type:"put",key:e,value:r})}_del(e,r){this[pg].push({...r,type:"del",key:e})}_clear(){this[pg]=[]}_write(e,r){this.db.batch(this[pg],e,r)}}});var RJ=g((gbt,xx)=>{f();"use strict";var{AbstractLevelDOWN:EJ}=qc(),Ake=os(),SJ=wJ(),xke=vJ(),Rke=Ax().getCallback,AJ=["put","get","getMany","del","batch","clear"],Ike=["approximateSize","compactRange"],Mo=Symbol("innerDb"),u0=Symbol("operations"),xJ=Symbol("promise");function oh(t){EJ.call(this,t.supports||{});for(let e of Ike)typeof t[e]=="function"&&!this.supports.additionalMethods[e]&&(this.supports.additionalMethods[e]=!0);this[Mo]=t,this[u0]=[],Tke(this)}Ake(oh,EJ);oh.prototype.type="deferred-leveldown";Object.defineProperty(oh.prototype,"_db",{enumerable:!0,get(){return this[Mo]}});oh.prototype._open=function(t,e){let r=i=>{if(i||this[Mo].status!=="open")return e(i||new Error("Database is not open"));let n=this[u0];this[u0]=[];for(let s of n)s.iterator?s.iterator.setDb(this[Mo]):this[Mo][s.method](...s.args);if(this[u0].length>0)throw new Error("Did not expect further operations");e()};this[Mo].status==="new"||this[Mo].status==="closed"?this[Mo].open(t,r):this._nextTick(r)};oh.prototype._close=function(t){this[Mo].close(t)};oh.prototype._isOperational=function(){return this.status==="opening"};function Tke(t){let e=Object.keys(t.supports.additionalMethods);for(let r of AJ.concat(e))t[r]=function(...i){if(r==="batch"&&i.length===0)return new xke(this);if(this.status==="open")return this[Mo][r](...i);let n=Rke(i,xJ);return this.status==="opening"?this[u0].push({method:r,args:i}):this._nextTick(n,new Error("Database is not open")),n[xJ]};t.iterator=function(r){if(this.status==="open")return this[Mo].iterator(r);if(this.status==="opening"){let i=new SJ(this,r);return this[u0].push({iterator:i}),i}else throw new Error("Database is not open")};for(let r of AJ.concat(["iterator"]))t["_"+r]=function(){throw new Error("Did not expect private method to be called: "+r)}}xx.exports=oh;xx.exports.DeferredIterator=SJ});var Rx=g((mbt,IJ)=>{f();IJ.exports=Wt().EventEmitter});var Ix=g(()=>{f()});var OJ=g((_bt,CJ)=>{f();"use strict";function TJ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function Pke(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TJ(Object(r),!0).forEach(function(i){Cke(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TJ(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Cke(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PJ(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kke(t,e,r){return e&&PJ(t.prototype,e),r&&PJ(t,r),t}var Dke=Gt(),u5=Dke.Buffer,Nke=Ix(),Tx=Nke.inspect,Bke=Tx&&Tx.custom||"inspect";function Lke(t,e,r){u5.prototype.copy.call(t,e,r)}CJ.exports=function(){function t(){Oke(this,t),this.head=null,this.tail=null,this.length=0}return kke(t,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return u5.alloc(0);for(var i=u5.allocUnsafe(r>>>0),n=this.head,s=0;n;)Lke(n.data,i,s),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,s=i.data;for(r-=s.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++n}return this.length-=n,s}},{key:"_getBuffer",value:function(r){var i=u5.allocUnsafe(r),n=this.head,s=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,a),r-=a,r===0){a===o.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++s}return this.length-=s,i}},{key:Bke,value:function(r,i){return Tx(this,Pke({},i,{depth:0,customInspect:!1}))}}]),t}()});var Cx=g((vbt,DJ)=>{f();"use strict";function Mke(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Px,this,t)):process.nextTick(Px,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(l5,r):(r._writableState.errorEmitted=!0,process.nextTick(kJ,r,s)):process.nextTick(kJ,r,s):e?(process.nextTick(l5,r),e(s)):process.nextTick(l5,r)}),this)}function kJ(t,e){Px(t,e),l5(t)}function l5(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function jke(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Px(t,e){t.emit("error",e)}function qke(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}DJ.exports={destroy:Mke,undestroy:jke,errorOrDestroy:qke}});var ah=g((Ebt,LJ)=>{f();"use strict";function Uke(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var NJ={};function $s(t,e,r){r||(r=Error);function i(s,o,a){return typeof e=="string"?e:e(s,o,a)}var n=function(s){Uke(o,s);function o(a,c,u){return s.call(this,i(a,c,u))||this}return o}(r);n.prototype.name=r.name,n.prototype.code=t,NJ[t]=n}function BJ(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(i){return String(i)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Fke(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Kke(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Vke(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}$s("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);$s("ERR_INVALID_ARG_TYPE",function(t,e,r){var i;typeof e=="string"&&Fke(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";var n;if(Kke(t," argument"))n="The ".concat(t," ").concat(i," ").concat(BJ(e,"type"));else{var s=Vke(t,".")?"property":"argument";n='The "'.concat(t,'" ').concat(s," ").concat(i," ").concat(BJ(e,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);$s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");$s("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});$s("ERR_STREAM_PREMATURE_CLOSE","Premature close");$s("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});$s("ERR_MULTIPLE_CALLBACK","Callback called multiple times");$s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");$s("ERR_STREAM_WRITE_AFTER_END","write after end");$s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);$s("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);$s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");LJ.exports.codes=NJ});var Ox=g((Sbt,MJ)=>{f();"use strict";var zke=ah().codes.ERR_INVALID_OPT_VALUE;function Hke(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function $ke(t,e,r,i){var n=Hke(e,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=i?r:"highWaterMark";throw new zke(s,n)}return Math.floor(n)}return t.objectMode?16:16*1024}MJ.exports={getHighWaterMark:$ke}});var qJ=g((Abt,jJ)=>{f();jJ.exports=Gke;function Gke(t,e){if(kx("noDeprecation"))return t;var r=!1;function i(){if(!r){if(kx("throwDeprecation"))throw new Error(e);kx("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return i}function kx(t){try{if(!globalThis.localStorage)return!1}catch(r){return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var Bx=g((xbt,HJ)=>{f();"use strict";HJ.exports=qr;function UJ(t){var e=this;this.next=null,this.entry=null,this.finish=function(){_De(e,t)}}var l0;qr.WritableState=yg;var Wke={deprecate:qJ()},FJ=Rx(),f5=Gt().Buffer,Yke=globalThis.Uint8Array||function(){};function Xke(t){return f5.from(t)}function Qke(t){return f5.isBuffer(t)||t instanceof Yke}var Dx=Cx(),Zke=Ox(),Jke=Zke.getHighWaterMark,ml=ah().codes,eDe=ml.ERR_INVALID_ARG_TYPE,tDe=ml.ERR_METHOD_NOT_IMPLEMENTED,rDe=ml.ERR_MULTIPLE_CALLBACK,iDe=ml.ERR_STREAM_CANNOT_PIPE,nDe=ml.ERR_STREAM_DESTROYED,sDe=ml.ERR_STREAM_NULL_VALUES,oDe=ml.ERR_STREAM_WRITE_AFTER_END,aDe=ml.ERR_UNKNOWN_ENCODING,f0=Dx.errorOrDestroy;os()(qr,FJ);function cDe(){}function yg(t,e,r){l0=l0||ch(),t=t||{},typeof r!="boolean"&&(r=e instanceof l0),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Jke(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){yDe(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new UJ(this)}yg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(yg.prototype,"buffer",{get:Wke.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}})();var h5;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(h5=Function.prototype[Symbol.hasInstance],Object.defineProperty(qr,Symbol.hasInstance,{value:function(e){return h5.call(this,e)?!0:this!==qr?!1:e&&e._writableState instanceof yg}})):h5=function(e){return e instanceof this};function qr(t){l0=l0||ch();var e=this instanceof l0;if(!e&&!h5.call(qr,this))return new qr(t);this._writableState=new yg(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),FJ.call(this)}qr.prototype.pipe=function(){f0(this,new iDe)};function uDe(t,e){var r=new oDe;f0(t,r),process.nextTick(e,r)}function lDe(t,e,r,i){var n;return r===null?n=new sDe:typeof r!="string"&&!e.objectMode&&(n=new eDe("chunk",["string","Buffer"],r)),n?(f0(t,n),process.nextTick(i,n),!1):!0}qr.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&Qke(t);return s&&!f5.isBuffer(t)&&(t=Xke(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=cDe),i.ending?uDe(this,r):(s||lDe(this,i,t,r))&&(i.pendingcb++,n=hDe(this,i,s,t,e,r)),n};qr.prototype.cork=function(){this._writableState.corked++};qr.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&VJ(this,t))};qr.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new aDe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(qr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function fDe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=f5.from(e,r)),e}Object.defineProperty(qr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function hDe(t,e,r,i,n,s){if(!r){var o=fDe(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Nx(t,e,!1,a,i,n,s);return c}function Nx(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new nDe("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function dDe(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(gg,t,e),t._writableState.errorEmitted=!0,f0(t,i)):(n(i),t._writableState.errorEmitted=!0,f0(t,i),gg(t,e))}function pDe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function yDe(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new rDe;if(pDe(r),e)dDe(t,r,i,e,n);else{var s=zJ(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&VJ(t,r),i?process.nextTick(KJ,t,r,s,n):KJ(t,r,s,n)}}function KJ(t,e,r,i){r||gDe(t,e),e.pendingcb--,i(),gg(t,e)}function gDe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function VJ(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,Nx(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new UJ(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback,h=e.objectMode?1:c.length;if(Nx(t,e,!1,h,c,u,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}qr.prototype._write=function(t,e,r){r(new tDe("_write()"))};qr.prototype._writev=null;qr.prototype.end=function(t,e,r){var i=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||wDe(this,i,r),this};Object.defineProperty(qr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function zJ(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function mDe(t,e){t._final(function(r){e.pendingcb--,r&&f0(t,r),e.prefinished=!0,t.emit("prefinish"),gg(t,e)})}function bDe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(mDe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function gg(t,e){var r=zJ(e);if(r&&(bDe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}function wDe(t,e,r){e.ending=!0,gg(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function _De(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(qr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});qr.prototype.destroy=Dx.destroy;qr.prototype._undestroy=Dx.undestroy;qr.prototype._destroy=function(t,e){e(t)}});var ch=g((Rbt,GJ)=>{f();"use strict";var vDe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};GJ.exports=ja;var $J=jx(),Lx=Bx();os()(ja,$J);for(Mx=vDe(Lx.prototype),d5=0;d5<Mx.length;d5++)p5=Mx[d5],ja.prototype[p5]||(ja.prototype[p5]=Lx.prototype[p5]);var Mx,p5,d5;function ja(t){if(!(this instanceof ja))return new ja(t);$J.call(this,t),Lx.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",EDe)))}Object.defineProperty(ja.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ja.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ja.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function EDe(){this._writableState.ended||process.nextTick(SDe,this)}function SDe(t){t.end()}Object.defineProperty(ja.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Ux=g((qx,YJ)=>{f();var y5=Gt(),qa=y5.Buffer;function WJ(t,e){for(var r in t)e[r]=t[r]}qa.from&&qa.alloc&&qa.allocUnsafe&&qa.allocUnsafeSlow?YJ.exports=y5:(WJ(y5,qx),qx.Buffer=uh);function uh(t,e,r){return qa(t,e,r)}uh.prototype=Object.create(qa.prototype);WJ(qa,uh);uh.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return qa(t,e,r)};uh.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=qa(t);return e!==void 0?typeof r=="string"?i.fill(e,r):i.fill(e):i.fill(0),i};uh.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return qa(t)};uh.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return y5.SlowBuffer(t)}});var Vx=g(QJ=>{f();"use strict";var Fx=Ux().Buffer,XJ=Fx.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ADe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function xDe(t){var e=ADe(t);if(typeof e!="string"&&(Fx.isEncoding===XJ||!XJ(t)))throw new Error("Unknown encoding: "+t);return e||t}QJ.StringDecoder=mg;function mg(t){this.encoding=xDe(t);var e;switch(this.encoding){case"utf16le":this.text=ODe,this.end=kDe,e=4;break;case"utf8":this.fillLast=TDe,e=4;break;case"base64":this.text=DDe,this.end=NDe,e=3;break;default:this.write=BDe,this.end=LDe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Fx.allocUnsafe(e)}mg.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};mg.prototype.end=CDe;mg.prototype.text=PDe;mg.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Kx(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function RDe(t,e,r){var i=e.length-1;if(i<r)return 0;var n=Kx(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=Kx(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=Kx(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function IDe(t,e,r){if((e[0]&192)!=128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!=128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!=128)return t.lastNeed=2,"\uFFFD"}}function TDe(t){var e=this.lastTotal-this.lastNeed,r=IDe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function PDe(t,e){var r=RDe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function CDe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function ODe(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function kDe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function DDe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function NDe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function BDe(t){return t.toString(this.encoding)}function LDe(t){return t&&t.length?this.write(t):""}});var g5=g((Tbt,eee)=>{f();"use strict";var ZJ=ah().codes.ERR_STREAM_PREMATURE_CLOSE;function MDe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}function jDe(){}function qDe(t){return t.setHeader&&typeof t.abort=="function"}function JJ(t,e,r){if(typeof e=="function")return JJ(t,null,e);e||(e={}),r=MDe(r||jDe);var i=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){n=!1,o=!0,i||r.call(t)},c=t._readableState&&t._readableState.endEmitted,u=function(){i=!1,c=!0,n||r.call(t)},l=function(y){r.call(t,y)},h=function(){var y;if(i&&!c)return(!t._readableState||!t._readableState.ended)&&(y=new ZJ),r.call(t,y);if(n&&!o)return(!t._writableState||!t._writableState.ended)&&(y=new ZJ),r.call(t,y)},d=function(){t.req.on("finish",a)};return qDe(t)?(t.on("complete",a),t.on("abort",h),t.req?d():t.on("request",d)):n&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",h),function(){t.removeListener("complete",a),t.removeListener("abort",h),t.removeListener("request",d),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",l),t.removeListener("close",h)}}eee.exports=JJ});var ree=g((Pbt,tee)=>{f();"use strict";var m5;function bl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var UDe=g5(),wl=Symbol("lastResolve"),lh=Symbol("lastReject"),bg=Symbol("error"),b5=Symbol("ended"),fh=Symbol("lastPromise"),zx=Symbol("handlePromise"),hh=Symbol("stream");function _l(t,e){return{value:t,done:e}}function FDe(t){var e=t[wl];if(e!==null){var r=t[hh].read();r!==null&&(t[fh]=null,t[wl]=null,t[lh]=null,e(_l(r,!1)))}}function KDe(t){process.nextTick(FDe,t)}function VDe(t,e){return function(r,i){t.then(function(){if(e[b5]){r(_l(void 0,!0));return}e[zx](r,i)},i)}}var zDe=Object.getPrototypeOf(function(){}),HDe=Object.setPrototypeOf((m5={get stream(){return this[hh]},next:function(){var e=this,r=this[bg];if(r!==null)return Promise.reject(r);if(this[b5])return Promise.resolve(_l(void 0,!0));if(this[hh].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[bg]?a(e[bg]):o(_l(void 0,!0))})});var i=this[fh],n;if(i)n=new Promise(VDe(i,this));else{var s=this[hh].read();if(s!==null)return Promise.resolve(_l(s,!1));n=new Promise(this[zx])}return this[fh]=n,n}},bl(m5,Symbol.asyncIterator,function(){return this}),bl(m5,"return",function(){var e=this;return new Promise(function(r,i){e[hh].destroy(null,function(n){if(n){i(n);return}r(_l(void 0,!0))})})}),m5),zDe),$De=function(e){var r,i=Object.create(HDe,(r={},bl(r,hh,{value:e,writable:!0}),bl(r,wl,{value:null,writable:!0}),bl(r,lh,{value:null,writable:!0}),bl(r,bg,{value:null,writable:!0}),bl(r,b5,{value:e._readableState.endEmitted,writable:!0}),bl(r,zx,{value:function(s,o){var a=i[hh].read();a?(i[fh]=null,i[wl]=null,i[lh]=null,s(_l(a,!1))):(i[wl]=s,i[lh]=o)},writable:!0}),r));return i[fh]=null,UDe(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=i[lh];s!==null&&(i[fh]=null,i[wl]=null,i[lh]=null,s(n)),i[bg]=n;return}var o=i[wl];o!==null&&(i[fh]=null,i[wl]=null,i[lh]=null,o(_l(void 0,!0))),i[b5]=!0}),e.on("readable",KDe.bind(null,i)),i};tee.exports=$De});var nee=g((Cbt,iee)=>{f();iee.exports=function(){throw new Error("Readable.from is not available in the browser")}});var jx=g((kbt,pee)=>{f();"use strict";pee.exports=Ut;var h0;Ut.ReadableState=oee;var Obt=Wt().EventEmitter,see=function(e,r){return e.listeners(r).length},wg=Rx(),w5=Gt().Buffer,GDe=globalThis.Uint8Array||function(){};function WDe(t){return w5.from(t)}function YDe(t){return w5.isBuffer(t)||t instanceof GDe}var Hx=Ix(),bt;Hx&&Hx.debuglog?bt=Hx.debuglog("stream"):bt=function(){};var XDe=OJ(),$x=Cx(),QDe=Ox(),ZDe=QDe.getHighWaterMark,_5=ah().codes,JDe=_5.ERR_INVALID_ARG_TYPE,eNe=_5.ERR_STREAM_PUSH_AFTER_EOF,tNe=_5.ERR_METHOD_NOT_IMPLEMENTED,rNe=_5.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,d0,Gx,Wx;os()(Ut,wg);var _g=$x.errorOrDestroy,Yx=["error","close","destroy","pause","resume"];function iNe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function oee(t,e,r){h0=h0||ch(),t=t||{},typeof r!="boolean"&&(r=e instanceof h0),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=ZDe(this,t,"readableHighWaterMark",r),this.buffer=new XDe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d0||(d0=Vx().StringDecoder),this.decoder=new d0(t.encoding),this.encoding=t.encoding)}function Ut(t){if(h0=h0||ch(),!(this instanceof Ut))return new Ut(t);var e=this instanceof h0;this._readableState=new oee(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),wg.call(this)}Object.defineProperty(Ut.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});Ut.prototype.destroy=$x.destroy;Ut.prototype._undestroy=$x.undestroy;Ut.prototype._destroy=function(t,e){e(t)};Ut.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=w5.from(t,e),e=""),i=!0),aee(this,t,e,!1,i)};Ut.prototype.unshift=function(t){return aee(this,t,null,!0,!1)};function aee(t,e,r,i,n){bt("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,oNe(t,s);else{var o;if(n||(o=nNe(s,e)),o)_g(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==w5.prototype&&(e=WDe(e)),i)s.endEmitted?_g(t,new rNe):Xx(t,s,e,!0);else if(s.ended)_g(t,new eNe);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Xx(t,s,e,!1):Qx(t,s)):Xx(t,s,e,!1)}else i||(s.reading=!1,Qx(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Xx(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&v5(t)),Qx(t,e)}function nNe(t,e){var r;return!YDe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new JDe("chunk",["string","Buffer","Uint8Array"],e)),r}Ut.prototype.isPaused=function(){return this._readableState.flowing===!1};Ut.prototype.setEncoding=function(t){d0||(d0=Vx().StringDecoder);var e=new d0(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var cee=1073741824;function sNe(t){return t>=cee?t=cee:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function uee(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=sNe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ut.prototype.read=function(t){bt("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return bt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Jx(this):v5(this),null;if(t=uee(t,e),t===0&&e.ended)return e.length===0&&Jx(this),null;var i=e.needReadable;bt("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,bt("length less than watermark",i)),e.ended||e.reading?(i=!1,bt("reading or ended",i)):i&&(bt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=uee(r,e)));var n;return t>0?n=hee(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Jx(this)),n!==null&&this.emit("data",n),n};function oNe(t,e){if(bt("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?v5(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,lee(t)))}}function v5(t){var e=t._readableState;bt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(bt("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(lee,t))}function lee(t){var e=t._readableState;bt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Zx(t)}function Qx(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(aNe,t,e))}function aNe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(bt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ut.prototype._read=function(t){_g(this,new tNe("_read()"))};Ut.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,bt("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:m;i.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(w,b){bt("onunpipe"),w===r&&b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,l())}function a(){bt("onend"),t.end()}var c=cNe(r);t.on("drain",c);var u=!1;function l(){bt("cleanup"),t.removeListener("close",p),t.removeListener("finish",y),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",h),u=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",h);function h(w){bt("ondata");var b=t.write(w);bt("dest.write",b),b===!1&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&dee(i.pipes,t)!==-1)&&!u&&(bt("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(w){bt("onerror",w),m(),t.removeListener("error",d),see(t,"error")===0&&_g(t,w)}iNe(t,"error",d);function p(){t.removeListener("finish",y),m()}t.once("close",p);function y(){bt("onfinish"),t.removeListener("close",p),m()}t.once("finish",y);function m(){bt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(bt("pipe resume"),r.resume()),t};function cNe(t){return function(){var r=t._readableState;bt("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&see(t,"data")&&(r.flowing=!0,Zx(t))}}Ut.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=dee(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Ut.prototype.on=function(t,e){var r=wg.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,bt("on readable",i.length,i.reading),i.length?v5(this):i.reading||process.nextTick(uNe,this)),r};Ut.prototype.addListener=Ut.prototype.on;Ut.prototype.removeListener=function(t,e){var r=wg.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(fee,this),r};Ut.prototype.removeAllListeners=function(t){var e=wg.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(fee,this),e};function fee(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function uNe(t){bt("readable nexttick read 0"),t.read(0)}Ut.prototype.resume=function(){var t=this._readableState;return t.flowing||(bt("resume"),t.flowing=!t.readableListening,lNe(this,t)),t.paused=!1,this};function lNe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(fNe,t,e))}function fNe(t,e){bt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Zx(t),e.flowing&&!e.reading&&t.read(0)}Ut.prototype.pause=function(){return bt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(bt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Zx(t){var e=t._readableState;for(bt("flow",e.flowing);e.flowing&&t.read()!==null;);}Ut.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(bt("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(bt("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(a){return function(){return t[a].apply(t,arguments)}}(n));for(var s=0;s<Yx.length;s++)t.on(Yx[s],this.emit.bind(this,Yx[s]));return this._read=function(o){bt("wrapped _read",o),i&&(i=!1,t.resume())},this};typeof Symbol=="function"&&(Ut.prototype[Symbol.asyncIterator]=function(){return Gx===void 0&&(Gx=ree()),Gx(this)});Object.defineProperty(Ut.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Ut.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ut.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Ut._fromList=hee;Object.defineProperty(Ut.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function hee(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Jx(t){var e=t._readableState;bt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(hNe,e,t))}function hNe(t,e){if(bt("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Ut.from=function(t,e){return Wx===void 0&&(Wx=nee()),Wx(Ut,t,e)});function dee(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var eR=g((Dbt,gee)=>{f();"use strict";gee.exports=Uc;var E5=ah().codes,dNe=E5.ERR_METHOD_NOT_IMPLEMENTED,pNe=E5.ERR_MULTIPLE_CALLBACK,yNe=E5.ERR_TRANSFORM_ALREADY_TRANSFORMING,gNe=E5.ERR_TRANSFORM_WITH_LENGTH_0,S5=ch();os()(Uc,S5);function mNe(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new pNe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Uc(t){if(!(this instanceof Uc))return new Uc(t);S5.call(this,t),this._transformState={afterTransform:mNe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",bNe)}function bNe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){yee(t,e,r)}):yee(this,null,null)}Uc.prototype.push=function(t,e){return this._transformState.needTransform=!1,S5.prototype.push.call(this,t,e)};Uc.prototype._transform=function(t,e,r){r(new dNe("_transform()"))};Uc.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Uc.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Uc.prototype._destroy=function(t,e){S5.prototype._destroy.call(this,t,function(r){e(r)})};function yee(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new gNe;if(t._transformState.transforming)throw new yNe;return t.push(null)}});var wee=g((Nbt,bee)=>{f();"use strict";bee.exports=vg;var mee=eR();os()(vg,mee);function vg(t){if(!(this instanceof vg))return new vg(t);mee.call(this,t)}vg.prototype._transform=function(t,e,r){r(null,t)}});var Aee=g((Bbt,See)=>{f();"use strict";var tR;function wNe(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var _ee=ah().codes,_Ne=_ee.ERR_MISSING_ARGS,vNe=_ee.ERR_STREAM_DESTROYED;function vee(t){if(t)throw t}function ENe(t){return t.setHeader&&typeof t.abort=="function"}function SNe(t,e,r,i){i=wNe(i);var n=!1;t.on("close",function(){n=!0}),tR===void 0&&(tR=g5()),tR(t,{readable:e,writable:r},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,ENe(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();i(o||new vNe("pipe"))}}}function Eee(t){t()}function ANe(t,e){return t.pipe(e)}function xNe(t){return!t.length||typeof t[t.length-1]!="function"?vee:t.pop()}function RNe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=xNe(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new _Ne("streams");var n,s=e.map(function(o,a){var c=a<e.length-1,u=a>0;return SNe(o,c,u,function(l){n||(n=l),l&&s.forEach(Eee),!c&&(s.forEach(Eee),i(n))})});return e.reduce(ANe)}See.exports=RNe});var rR=g((Gs,xee)=>{f();Gs=xee.exports=jx();Gs.Stream=Gs;Gs.Readable=Gs;Gs.Writable=Bx();Gs.Duplex=ch();Gs.Transform=eR();Gs.PassThrough=wee();Gs.finished=g5();Gs.pipeline=Aee()});var Tee=g((Lbt,Iee)=>{f();"use strict";var INe=os(),{Readable:Ree}=rR();Iee.exports=p0;INe(p0,Ree);function p0(t,e){if(!(this instanceof p0))return new p0(t,e);e=e||{},Ree.call(this,Object.assign({},e,{objectMode:!0})),this._iterator=t,this._options=e,this.on("end",this.destroy.bind(this,null,null))}p0.prototype._read=function(){this.destroyed||this._iterator.next((t,e,r)=>{if(!this.destroyed){if(t)return this.destroy(t);e===void 0&&r===void 0?this.push(null):this._options.keys!==!1&&this._options.values===!1?this.push(e):this._options.keys===!1&&this._options.values!==!1?this.push(r):this.push({key:e,value:r})}})};p0.prototype._destroy=function(t,e){this._iterator.end(function(r){e(t||r)})}});var x5=g((Mbt,A5)=>{f();"use strict";function dh(t,e){let r=function(i,n){if(typeof i=="object"&&i!==null&&(n=n||i,i=i.message||i.name),i=i||"",n=n||void 0,typeof n=="object"&&n.type===t&&n.message===i)return n;Object.defineProperty(this,"type",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:i,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)};return r.prototype=new e,r}var ph=dh("LevelUPError",Error);A5.exports={LevelUPError:ph,InitializationError:dh("InitializationError",ph),OpenError:dh("OpenError",ph),ReadError:dh("ReadError",ph),WriteError:dh("WriteError",ph),NotFoundError:dh("NotFoundError",ph),EncodingError:dh("EncodingError",ph)};A5.exports.NotFoundError.prototype.notFound=!0;A5.exports.NotFoundError.prototype.status=404});var Eg=g(iR=>{f();"use strict";iR.getCallback=function(t,e){return typeof t=="function"?t:e};iR.getOptions=function(t){return typeof t=="object"&&t!==null?t:{}}});var Cee=g((qbt,Pee)=>{f();"use strict";var Sg=x5().WriteError,TNe=s5(),PNe=Eg().getCallback,CNe=Eg().getOptions;function Ag(t){this.db=t,this.batch=t.db.batch(),this.ops=[],this.length=0}Ag.prototype.put=function(t,e,r){try{this.batch.put(t,e,r)}catch(i){throw new Sg(i)}return this.ops.push({...r,type:"put",key:t,value:e}),this.length++,this};Ag.prototype.del=function(t,e){try{this.batch.del(t,e)}catch(r){throw new Sg(r)}return this.ops.push({...e,type:"del",key:t}),this.length++,this};Ag.prototype.clear=function(){try{this.batch.clear()}catch(t){throw new Sg(t)}return this.ops=[],this.length=0,this};Ag.prototype.write=function(t,e){let r=this.db,i=this.ops;e=PNe(t,e),e=TNe.fromCallback(e),t=CNe(t);try{this.batch.write(t,function(n){if(n)return e(new Sg(n));r.emit("batch",i),e()})}catch(n){throw new Sg(n)}return e.promise};Pee.exports=Ag});var Dee=g((Ubt,kee)=>{f();"use strict";var Oee=dg();kee.exports=function(t,...e){e.length===0?Oee(t):Oee(()=>t(...e))}});var Lee=g((Fbt,Bee)=>{f();"use strict";var R5=Wt().EventEmitter,ONe=QZ().inherits,kNe=RJ(),DNe=Tee(),NNe=Cee(),y0=x5(),BNe=mx(),yh=s5(),xg=Eg().getCallback,g0=Eg().getOptions,Rg=Dee(),I5=y0.WriteError,Nee=y0.ReadError,LNe=y0.NotFoundError,MNe=y0.OpenError,jNe=y0.InitializationError;function Qt(t,e,r){if(!(this instanceof Qt))return new Qt(t,e,r);let i;if(R5.call(this),this.setMaxListeners(1/0),typeof e=="function"&&(r=e,e={}),e=e||{},!t||typeof t!="object"){if(i=new jNe("First argument must be an abstract-leveldown compliant store"),typeof r=="function")return Rg(r,i);throw i}if(typeof t.status!="string")throw new Error(".status required, old abstract-leveldown");this.options=g0(e),this._db=t,this.db=null,this.open(r||(n=>{n&&this.emit("error",n)})),this.supports=BNe(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(let n of Object.keys(this.supports.additionalMethods))this[n]==null&&(this[n]=function(...s){return this.db[n](...s)})}Qt.prototype.emit=R5.prototype.emit;Qt.prototype.once=R5.prototype.once;ONe(Qt,R5);Object.defineProperty(Qt.prototype,"status",{enumerable:!0,get(){return this.db.status}});Qt.prototype.isOperational=function(){return this.db.status==="open"||this.db.status==="opening"};Qt.prototype.open=function(t,e){return typeof t=="function"&&(e=t,t=null),e=yh.fromCallback(e),t||(t=this.options),this.db&&this.isOpen()?(Rg(e,null,this),e.promise):this.db&&this._isOpening()?(this.once("open",()=>{e(null,this)}),e.promise):(this.db=new kNe(this._db),this.emit("opening"),this.db.open(t,r=>{if(r)return e(new MNe(r));this.db=this._db,e(null,this),this.emit("open"),this.emit("ready")}),e.promise)};Qt.prototype.close=function(t){return t=yh.fromCallback(t),this.isOpen()?(this.db.close((e,...r)=>{this.emit("closed"),t(e,...r)}),this.emit("closing")):this.isClosed()?Rg(t):this.db.status==="closing"?this.once("closed",t):this._isOpening()&&this.once("open",()=>{this.close(t)}),t.promise};Qt.prototype.isOpen=function(){return this.db.status==="open"};Qt.prototype._isOpening=function(){return this.db.status==="opening"};Qt.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)};Qt.prototype.get=function(t,e,r){return r=xg(e,r),r=yh.fromCallback(r),Ig(this,r)||(e=g0(e),this.db.get(t,e,function(i,n){if(i)return/notfound/i.test(i)||i.notFound?i=new LNe("Key not found in database ["+t+"]",i):i=new Nee(i),r(i);r(null,n)})),r.promise};Qt.prototype.getMany=function(t,e,r){return this.db.getMany(t,e,r)};Qt.prototype.put=function(t,e,r,i){return i=xg(r,i),i=yh.fromCallback(i),Ig(this,i)||(r=g0(r),this.db.put(t,e,r,n=>{if(n)return i(new I5(n));this.emit("put",t,e),i()})),i.promise};Qt.prototype.del=function(t,e,r){return r=xg(e,r),r=yh.fromCallback(r),Ig(this,r)||(e=g0(e),this.db.del(t,e,i=>{if(i)return r(new I5(i));this.emit("del",t),r()})),r.promise};Qt.prototype.batch=function(t,e,r){return arguments.length?(typeof t=="function"?r=t:r=xg(e,r),r=yh.fromCallback(r),Ig(this,r)||(e=g0(e),this.db.batch(t,e,i=>{if(i)return r(new I5(i));this.emit("batch",t),r()})),r.promise):new NNe(this)};Qt.prototype.iterator=function(t){return this.db.iterator(t)};Qt.prototype.clear=function(t,e){return e=xg(t,e),t=g0(t),e=yh.fromCallback(e),Ig(this,e)||this.db.clear(t,r=>{if(r)return e(new I5(r));this.emit("clear",t),e()}),e.promise};Qt.prototype.readStream=Qt.prototype.createReadStream=function(t){return t=Object.assign({keys:!0,values:!0},t),typeof t.limit!="number"&&(t.limit=-1),new DNe(this.db.iterator(t),t)};Qt.prototype.keyStream=Qt.prototype.createKeyStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!0,values:!1}))};Qt.prototype.valueStream=Qt.prototype.createValueStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!1,values:!0}))};Qt.prototype.toString=function(){return"LevelUP"};Qt.prototype.type="levelup";Qt.prototype._nextTick=Rg;function Ig(t,e){return t.isOperational()?!1:(Rg(e,new Nee("Database is not open")),!0)}Qt.errors=y0;Bee.exports=Qt});var Mee=g(Fc=>{f();"use strict";var{Buffer:nR}=Gt();Fc.utf8=Fc["utf-8"]={encode:function(t){return sR(t)?t:String(t)},decode:T5,buffer:!1,type:"utf8"};Fc.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Fc.binary={encode:function(t){return sR(t)?t:nR.from(t)},decode:T5,buffer:!0,type:"binary"};Fc.none={encode:T5,decode:T5,buffer:!1,type:"id"};Fc.id=Fc.none;var qNe=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];for(let t of qNe)Fc[t]={encode:function(e){return sR(e)?e:nR.from(e,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t};function T5(t){return t}function sR(t){return t==null||nR.isBuffer(t)}});var qee=g((Vbt,jee)=>{f();"use strict";var oR=Mee(),UNe=new Set(["lt","gt","lte","gte"]);jee.exports=_n;function _n(t){if(!(this instanceof _n))return new _n(t);this.opts=t||{},this.encodings=oR}_n.prototype._encoding=function(t){return typeof t=="string"&&(t=oR[t]),t||(t=oR.id),t};_n.prototype._keyEncoding=function(t,e){return this._encoding(e&&e.keyEncoding||t&&t.keyEncoding||this.opts.keyEncoding)};_n.prototype._valueEncoding=function(t,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||t&&(t.valueEncoding||t.encoding)||this.opts.valueEncoding||this.opts.encoding)};_n.prototype.encodeKey=function(t,e,r){return this._keyEncoding(e,r).encode(t)};_n.prototype.encodeValue=function(t,e,r){return this._valueEncoding(e,r).encode(t)};_n.prototype.decodeKey=function(t,e){return this._keyEncoding(e).decode(t)};_n.prototype.decodeValue=function(t,e){return this._valueEncoding(e).decode(t)};_n.prototype.encodeBatch=function(t,e){return t.map(r=>{let i={type:r.type,key:this.encodeKey(r.key,e,r)};return this.keyAsBuffer(e,r)&&(i.keyEncoding="binary"),r.prefix&&(i.prefix=r.prefix),"value"in r&&(i.value=this.encodeValue(r.value,e,r),this.valueAsBuffer(e,r)&&(i.valueEncoding="binary")),i})};_n.prototype.encodeLtgt=function(t){let e={};for(let r of Object.keys(t)){if(r==="start"||r==="end")throw new Error('Legacy range options ("start" and "end") have been removed');e[r]=UNe.has(r)?this.encodeKey(t[r],t):t[r]}return e};_n.prototype.createStreamDecoder=function(t){return t.keys&&t.values?(e,r)=>({key:this.decodeKey(e,t),value:this.decodeValue(r,t)}):t.keys?e=>this.decodeKey(e,t):t.values?(e,r)=>this.decodeValue(r,t):function(){}};_n.prototype.keyAsBuffer=function(t){return this._keyEncoding(t).buffer};_n.prototype.valueAsBuffer=function(t){return this._valueEncoding(t).buffer}});var zee=g((zbt,Vee)=>{f();"use strict";var Uee=qc().AbstractLevelDOWN,Fee=qc().AbstractChainedBatch,Kee=qc().AbstractIterator,aR=os(),FNe=qee(),cR=x5().EncodingError,KNe=["approximateSize","compactRange"];Vee.exports=Vi;function Vi(t,e){if(!(this instanceof Vi))return new Vi(t,e);let r=t.supports||{},i=r.additionalMethods||{};Uee.call(this,r),this.supports.encodings=!0,this.supports.additionalMethods={},KNe.forEach(function(n){let s=typeof t[n]=="function";(i[n]||s)&&(this.supports.additionalMethods[n]=!0,this[n]=function(o,a,c,u){return o=this.codec.encodeKey(o,c),a=this.codec.encodeKey(a,c),this.db[n](o,a,c,u)})},this),e=e||{},typeof e.keyEncoding=="undefined"&&(e.keyEncoding="utf8"),typeof e.valueEncoding=="undefined"&&(e.valueEncoding="utf8"),this.db=t,this.codec=new FNe(e)}aR(Vi,Uee);Vi.prototype.type="encoding-down";Vi.prototype._serializeKey=Vi.prototype._serializeValue=function(t){return t};Vi.prototype._open=function(t,e){this.db.open(t,e)};Vi.prototype._close=function(t){this.db.close(t)};Vi.prototype._put=function(t,e,r,i){t=this.codec.encodeKey(t,r),e=this.codec.encodeValue(e,r),this.db.put(t,e,r,i)};Vi.prototype._get=function(t,e,r){t=this.codec.encodeKey(t,e),e.asBuffer=this.codec.valueAsBuffer(e),this.db.get(t,e,(i,n)=>{if(i)return r(i);try{n=this.codec.decodeValue(n,e)}catch(s){return r(new cR(s))}r(null,n)})};Vi.prototype._getMany=function(t,e,r){t=t.map(i=>this.codec.encodeKey(i,e)),e.asBuffer=this.codec.valueAsBuffer(e),this.db.getMany(t,e,(i,n)=>{if(i)return r(i);let s=new Array(n.length);for(let o=0;o<n.length;o++){if(n[o]===void 0){s[o]=void 0;continue}try{s[o]=this.codec.decodeValue(n[o],e)}catch(a){return r(new cR(a))}}r(null,s)})};Vi.prototype._del=function(t,e,r){t=this.codec.encodeKey(t,e),this.db.del(t,e,r)};Vi.prototype._chainedBatch=function(){return new m0(this)};Vi.prototype._batch=function(t,e,r){t=this.codec.encodeBatch(t,e),this.db.batch(t,e,r)};Vi.prototype._iterator=function(t){return t.keyAsBuffer=this.codec.keyAsBuffer(t),t.valueAsBuffer=this.codec.valueAsBuffer(t),new Tg(this,t)};Vi.prototype._clear=function(t,e){t=this.codec.encodeLtgt(t),this.db.clear(t,e)};function Tg(t,e){Kee.call(this,t),this.codec=t.codec,this.keys=e.keys,this.values=e.values,this.opts=this.codec.encodeLtgt(e),this.it=t.db.iterator(this.opts)}aR(Tg,Kee);Tg.prototype._next=function(t){this.it.next((e,r,i)=>{if(e)return t(e);try{this.keys&&typeof r!="undefined"?r=this.codec.decodeKey(r,this.opts):r=void 0,this.values&&typeof i!="undefined"?i=this.codec.decodeValue(i,this.opts):i=void 0}catch(n){return t(new cR(n))}t(null,r,i)})};Tg.prototype._seek=function(t){t=this.codec.encodeKey(t,this.opts),this.it.seek(t)};Tg.prototype._end=function(t){this.it.end(t)};function m0(t,e){Fee.call(this,t),this.codec=t.codec,this.batch=t.db.batch()}aR(m0,Fee);m0.prototype._put=function(t,e,r){t=this.codec.encodeKey(t,r),e=this.codec.encodeValue(e,r),this.batch.put(t,e)};m0.prototype._del=function(t,e){t=this.codec.encodeKey(t,e),this.batch.del(t)};m0.prototype._clear=function(){this.batch.clear()};m0.prototype._write=function(t,e){this.batch.write(t,e)}});var Gee=g((Hbt,$ee)=>{f();"use strict";var Hee=Lee(),VNe=zee();function zNe(t){function e(i,n,s){return typeof i=="function"?s=i:typeof n=="function"&&(s=n),r(n)||(n=r(i)?i:{}),Hee(VNe(t(i,n),n),n,s)}function r(i){return typeof i=="object"&&i!==null}for(let i of["destroy","repair"])typeof t[i]=="function"&&(e[i]=function(...n){t[i](...n)});return e.errors=Hee.errors,e}$ee.exports=zNe});var Yee=g(($bt,Wee)=>{f();Wee.exports=$Ne;var HNe=dg();function $Ne(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let i,n,s,o,a,c=!0,u;Array.isArray(t)?(i=[],s=n=t.length):(o=Object.keys(t),i={},s=n=o.length);function l(d){function p(){r&&r(d,i),r=null}c?HNe(p):p()}function h(d,p,y){if(i[d]=y,p&&(a=!0),--s==0||p)l(p);else if(!a&&u<n){let m;o?(m=o[u],u+=1,t[m](function(w,b){h(m,w,b)})):(m=u,u+=1,t[m](function(w,b){h(m,w,b)}))}}u=e,s?o?o.some(function(d,p){return t[d](function(y,m){h(d,y,m)}),p===e-1}):t.some(function(d,p){return d(function(y,m){h(p,y,m)}),p===e-1}):l(null),c=!1}});var Qee=g(Zr=>{f();Zr.compare=function(t,e){if(Buffer.isBuffer(t)){for(var r=Math.min(t.length,e.length),i=0;i<r;i++){var n=t[i]-e[i];if(n)return n}return t.length-e.length}return t<e?-1:t>e?1:0};function Xee(t){return t!==void 0&&t!==""}function b0(t,e){return Object.hasOwnProperty.call(t,e)}function Ua(t,e){return Object.hasOwnProperty.call(t,e)&&e}var GNe=Zr.lowerBoundKey=function(t){return Ua(t,"gt")||Ua(t,"gte")||Ua(t,"min")||(t.reverse?Ua(t,"end"):Ua(t,"start"))||void 0},uR=Zr.lowerBound=function(t,e){var r=GNe(t);return r?t[r]:e},lR=Zr.lowerBoundInclusive=function(t){return!b0(t,"gt")},fR=Zr.upperBoundInclusive=function(t){return!b0(t,"lt")},WNe=Zr.lowerBoundExclusive=function(t){return!lR(t)},YNe=Zr.upperBoundExclusive=function(t){return!fR(t)},XNe=Zr.upperBoundKey=function(t){return Ua(t,"lt")||Ua(t,"lte")||Ua(t,"max")||(t.reverse?Ua(t,"start"):Ua(t,"end"))||void 0},hR=Zr.upperBound=function(t,e){var r=XNe(t);return r?t[r]:e};Zr.start=function(t,e){return t.reverse?hR(t,e):uR(t,e)};Zr.end=function(t,e){return t.reverse?uR(t,e):hR(t,e)};Zr.startInclusive=function(t){return t.reverse?fR(t):lR(t)};Zr.endInclusive=function(t){return t.reverse?lR(t):fR(t)};function QNe(t){return t}Zr.toLtgt=function(t,e,r,i,n){e=e||{},r=r||QNe;var s=arguments.length>3,o=Zr.lowerBoundKey(t),a=Zr.upperBoundKey(t);return o?o==="gt"?e.gt=r(t.gt,!1):e.gte=r(t[o],!1):s&&(e.gte=r(i,!1)),a?a==="lt"?e.lt=r(t.lt,!0):e.lte=r(t[a],!0):s&&(e.lte=r(n,!0)),t.reverse!=null&&(e.reverse=!!t.reverse),b0(e,"max")&&delete e.max,b0(e,"min")&&delete e.min,b0(e,"start")&&delete e.start,b0(e,"end")&&delete e.end,e};Zr.contains=function(t,e,r){r=r||Zr.compare;var i=uR(t);if(Xee(i)){var n=r(e,i);if(n<0||n===0&&WNe(t))return!1}var s=hR(t);if(Xee(s)){var n=r(e,s);if(n>0||n===0&&YNe(t))return!1}return!0};Zr.filter=function(t,e){return function(r){return Zr.contains(t,r,e)}}});var dR=g((Wbt,Zee)=>{f();"use strict";var P5=Qee(),vl=Symbol("none");Zee.exports=function(e){let r=P5.lowerBound(e,vl),i=P5.upperBound(e,vl),n=P5.lowerBoundExclusive(e,vl),s=P5.upperBoundExclusive(e,vl);return r!==vl&&i!==vl?IDBKeyRange.bound(r,i,n,s):r!==vl?IDBKeyRange.lowerBound(r,n):i!==vl?IDBKeyRange.upperBound(i,s):null}});var pR=g((Ybt,ete)=>{f();"use strict";var C5=Gt().Buffer,ZNe=function(){if(globalThis.TextDecoder){let t=new TextDecoder("utf-8");return t.decode.bind(t)}else return function(e){return Jee(e).toString()}}(),JNe=function(){if(globalThis.TextDecoder){let t=new TextDecoder("utf-8");return t.decode.bind(t)}else return function(e){return C5.from(e).toString()}}();function Jee(t){let e=C5.from(t.buffer);return t.byteLength===t.buffer.byteLength?e:e.slice(t.byteOffset,t.byteOffset+t.byteLength)}ete.exports=function(t,e){return t instanceof Uint8Array?e?Jee(t):ZNe(t):t instanceof ArrayBuffer?e?C5.from(t):JNe(t):e?C5.from(String(t)):String(t)}});var nte=g((Xbt,ite)=>{f();"use strict";var eBe=os(),tte=qc().AbstractIterator,tBe=dR(),rte=pR(),rBe=function(){};ite.exports=jo;function jo(t,e,r){if(tte.call(this,t),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=r.keys,this._values=r.values,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,this._limit===0){this._completed=!0;return}let i;try{i=tBe(r)}catch(n){this._completed=!0;return}this.createIterator(e,i,r.reverse)}eBe(jo,tte);jo.prototype.createIterator=function(t,e,r){let i=this.db.db.transaction([t],"readonly"),s=i.objectStore(t).openCursor(e,r?"prev":"next");s.onsuccess=o=>{let a=o.target.result;a&&this.onItem(a)},this._transaction=i,i.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},i.oncomplete=()=>{this.onComplete()}};jo.prototype.onItem=function(t){this._cache.push(t.key,t.value),(this._limit<=0||++this._count<this._limit)&&t.continue(),this.maybeNext()};jo.prototype.onAbort=function(t){this._aborted=!0,this._error=t,this.maybeNext()};jo.prototype.onComplete=function(){this._completed=!0,this.maybeNext()};jo.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)};jo.prototype._next=function(t){if(this._aborted){let e=this._error;this._error=null,this._nextTick(t,e)}else if(this._cache.length>0){let e=this._cache.shift(),r=this._cache.shift();this._keys&&e!==void 0?e=this._deserializeKey(e,this._keyAsBuffer):e=void 0,this._values&&r!==void 0?r=this._deserializeValue(r,this._valueAsBuffer):r=void 0,this._nextTick(t,null,e,r)}else this._completed?this._nextTick(t):this._callback=t};jo.prototype._deserializeKey=rte;jo.prototype._deserializeValue=rte;jo.prototype._end=function(t){if(this._aborted||this._completed)return this._nextTick(t,this._error);this.onItem=rBe,this.onAbort=t,this.onComplete=t}});var ate=g((Qbt,ote)=>{f();"use strict";var ste=Gt().Buffer,iBe=function(){if(globalThis.TextEncoder){let t=new TextEncoder("utf-8");return t.encode.bind(t)}else return ste.from}();ote.exports=function(t,e){return e?ste.isBuffer(t)?t:iBe(String(t)):String(t)}});var cte=g(O5=>{f();"use strict";var nBe=Gt().Buffer;O5.test=function(t){return function(r){try{return r.cmp(t,0),!0}catch(i){return!1}}};O5.bufferKeys=O5.test(nBe.alloc(0))});var lte=g((Jbt,ute)=>{f();"use strict";ute.exports=function(e,r,i,n,s){if(n.limit===0)return e._nextTick(s);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),c=0;o.oncomplete=function(){s()},o.onabort=function(){s(o.error||new Error("aborted by user"))};let u=a.openKeyCursor?"openKeyCursor":"openCursor",l=n.reverse?"prev":"next";a[u](i,l).onsuccess=function(h){let d=h.target.result;d&&(a.delete(d.key).onsuccess=function(){(n.limit<=0||++c<n.limit)&&d.continue()})}}});var yte=g((e5t,pte)=>{f();"use strict";pte.exports=si;var fte=qc().AbstractLevelDOWN,sBe=os(),oBe=Yee(),aBe=nte(),hte=ate(),k5=pR(),cBe=cte(),uBe=lte(),lBe=dR(),dte="level-js-";function si(t,e){if(!(this instanceof si))return new si(t,e);if(fte.call(this,{bufferKeys:cBe.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),e=e||{},typeof t!="string")throw new Error("constructor requires a location string argument");this.location=t,this.prefix=e.prefix==null?dte:e.prefix,this.version=parseInt(e.version||1,10)}sBe(si,fte);si.prototype.type="level-js";si.prototype._open=function(t,e){let r=indexedDB.open(this.prefix+this.location,this.version);r.onerror=function(){e(r.error||new Error("unknown error"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{let n=i.target.result;n.objectStoreNames.contains(this.location)||n.createObjectStore(this.location)}};si.prototype.store=function(t){return this.db.transaction([this.location],t).objectStore(this.location)};si.prototype.await=function(t,e){let r=t.transaction;r.onabort=function(){e(r.error||new Error("aborted by user"))},r.oncomplete=function(){e(null,t.result)}};si.prototype._get=function(t,e,r){let i=this.store("readonly"),n;try{n=i.get(t)}catch(s){return this._nextTick(r,s)}this.await(n,function(s,o){if(s)return r(s);if(o===void 0)return r(new Error("NotFound"));r(null,k5(o,e.asBuffer))})};si.prototype._getMany=function(t,e,r){let i=e.asBuffer,n=this.store("readonly"),s=t.map(o=>a=>{let c;try{c=n.get(o)}catch(u){return a(u)}c.onsuccess=()=>{let u=c.result;a(null,u===void 0?u:k5(u,i))},c.onerror=u=>{u.stopPropagation(),a(c.error)}});oBe(s,16,r)};si.prototype._del=function(t,e,r){let i=this.store("readwrite"),n;try{n=i.delete(t)}catch(s){return this._nextTick(r,s)}this.await(n,r)};si.prototype._put=function(t,e,r,i){let n=this.store("readwrite"),s;try{s=n.put(e,t)}catch(o){return this._nextTick(i,o)}this.await(s,i)};si.prototype._serializeKey=function(t){return hte(t,this.supports.bufferKeys)};si.prototype._serializeValue=function(t){return hte(t,!0)};si.prototype._iterator=function(t){return new aBe(this,this.location,t)};si.prototype._batch=function(t,e,r){if(t.length===0)return this._nextTick(r);let i=this.store("readwrite"),n=i.transaction,s=0,o;n.onabort=function(){r(o||n.error||new Error("aborted by user"))},n.oncomplete=function(){r()};function a(){let c=t[s++],u=c.key,l;try{l=c.type==="del"?i.delete(u):i.put(c.value,u)}catch(h){o=h,n.abort();return}s<t.length&&(l.onsuccess=a)}a()};si.prototype._clear=function(t,e){let r,i;try{r=lBe(t)}catch(n){return this._nextTick(e)}if(t.limit>=0)return uBe(this,this.location,r,t,e);try{let n=this.store("readwrite");i=r?n.delete(r):n.clear()}catch(n){return this._nextTick(e,n)}this.await(i,e)};si.prototype._close=function(t){this.db.close(),this._nextTick(t)};si.prototype.upgrade=function(t){if(this.status!=="open")return this._nextTick(t,new Error("cannot upgrade() before open()"));let e=this.iterator(),r={},i=this;e._deserializeKey=e._deserializeValue=a,n();function n(c){if(c)return o(c);e.next(s)}function s(c,u,l){if(c||u===void 0)return o(c);let h=i._serializeKey(k5(u,!0)),d=i._serializeValue(k5(l,!0));i._batch([{type:"del",key:u},{type:"put",key:h,value:d}],r,n)}function o(c){e.end(function(u){t(c||u)})}function a(c){return c}};si.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=dte);let i=indexedDB.deleteDatabase(e+t);i.onsuccess=function(){r()},i.onerror=function(n){r(n)}}});var mte=g((t5t,gte)=>{f();gte.exports=Gee()(yte())});var Ete=g((s5t,vte)=>{f();"use strict";function _te(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function hBe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return _te(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),_te(new n,r)}}vte.exports=hBe});var SR=g((_5t,Tte)=>{f();"use strict";function Ite(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function yBe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Ite(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Ite(new n,r)}}Tte.exports=yBe});var AR=g((v5t,kte)=>{f();"use strict";var Pte=()=>{},Cte=Symbol.for("@libp2p/js-interfaces/topology"),Ote=class{constructor({min:e=0,max:r=1/0,handlers:i={}}){this.min=e,this.max=r,this._onConnect=i.onConnect||Pte,this._onDisconnect=i.onDisconnect||Pte,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[Cte](){return!0}static isTopology(e){return Boolean(e&&e[Cte])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};kte.exports=Ote});var D5=g((E5t,Bte)=>{f();"use strict";var gBe=AR(),Dte=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),Nte=class extends gBe{constructor({min:e,max:r,multicodecs:i,handlers:n}){super({min:e,max:r,handlers:n});if(!i)throw new Error("one or more multicodec should be provided");if(!n)throw new Error("the handlers should be provided");if(typeof n.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof n.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(i)?i:[i],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[Dte](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[Dte])}set registrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),this._updatePeers(this._registrar.peerStore.peers.values())}_updatePeers(e){for(let{id:r,protocols:i}of e)if(this.multicodecs.filter(n=>i.includes(n)).length){this.peers.add(r.toB58String());let n=this._registrar.getConnection(r);n&&this._onConnect(r,n)}else this.peers.delete(r.toB58String())}_onProtocolChange({peerId:e,protocols:r}){let i=this.peers.has(e.toB58String()),n=r.filter(s=>this.multicodecs.includes(s));i&&n.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let o=this._registrar.peerStore.get(e);this._updatePeers([o]);return}}_onPeerConnect(e){let r=e.remotePeer,i=this._registrar.peerStore.protoBook.get(r);!i||this.multicodecs.find(n=>i.includes(n))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}};Bte.exports=Nte});var N5=g(Lte=>{f();"use strict";Lte.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var RR=g((A5t,Mte)=>{f();"use strict";var Sl=Si(),_0=Sl.Reader,xR=Sl.Writer,xt=Sl.util,yi=Sl.roots["libp2p-pubsub-rpc"]||(Sl.roots["libp2p-pubsub-rpc"]={});yi.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.subscriptions=xt.emptyArray,t.prototype.msgs=xt.emptyArray,t.encode=function(r,i){if(i||(i=xR.create()),r.subscriptions!=null&&r.subscriptions.length)for(var n=0;n<r.subscriptions.length;++n)yi.RPC.SubOpts.encode(r.subscriptions[n],i.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var n=0;n<r.msgs.length;++n)yi.RPC.Message.encode(r.msgs[n],i.uint32(18).fork()).ldelim();return i},t.decode=function(r,i){r instanceof _0||(r=_0.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new yi.RPC;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(yi.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(yi.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof yi.RPC)return r;var i=new yi.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");i.subscriptions=[];for(var n=0;n<r.subscriptions.length;++n){if(typeof r.subscriptions[n]!="object")throw TypeError(".RPC.subscriptions: object expected");i.subscriptions[n]=yi.RPC.SubOpts.fromObject(r.subscriptions[n])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");i.msgs=[];for(var n=0;n<r.msgs.length;++n){if(typeof r.msgs[n]!="object")throw TypeError(".RPC.msgs: object expected");i.msgs[n]=yi.RPC.Message.fromObject(r.msgs[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.subscriptions=[],n.msgs=[]),r.subscriptions&&r.subscriptions.length){n.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)n.subscriptions[s]=yi.RPC.SubOpts.toObject(r.subscriptions[s],i)}if(r.msgs&&r.msgs.length){n.msgs=[];for(var s=0;s<r.msgs.length;++s)n.msgs[s]=yi.RPC.Message.toObject(r.msgs[s],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Sl.util.toJSONOptions)},t.SubOpts=function(){function e(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:xt.oneOfGetter(r=["subscribe"]),set:xt.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:xt.oneOfGetter(r=["topicID"]),set:xt.oneOfSetter(r)}),e.encode=function(n,s){return s||(s=xR.create()),n.subscribe!=null&&Object.hasOwnProperty.call(n,"subscribe")&&s.uint32(8).bool(n.subscribe),n.topicID!=null&&Object.hasOwnProperty.call(n,"topicID")&&s.uint32(18).string(n.topicID),s},e.decode=function(n,s){n instanceof _0||(n=_0.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new yi.RPC.SubOpts;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.subscribe=n.bool();break;case 2:a.topicID=n.string();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof yi.RPC.SubOpts)return n;var s=new yi.RPC.SubOpts;return n.subscribe!=null&&(s.subscribe=Boolean(n.subscribe)),n.topicID!=null&&(s.topicID=String(n.topicID)),s},e.toObject=function(n,s){s||(s={});var o={};return n.subscribe!=null&&n.hasOwnProperty("subscribe")&&(o.subscribe=n.subscribe,s.oneofs&&(o._subscribe="subscribe")),n.topicID!=null&&n.hasOwnProperty("topicID")&&(o.topicID=n.topicID,s.oneofs&&(o._topicID="topicID")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Sl.util.toJSONOptions)},e}(),t.Message=function(){function e(i){if(this.topicIDs=[],i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=xt.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:xt.oneOfGetter(r=["from"]),set:xt.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:xt.oneOfGetter(r=["data"]),set:xt.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:xt.oneOfGetter(r=["seqno"]),set:xt.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:xt.oneOfGetter(r=["signature"]),set:xt.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:xt.oneOfGetter(r=["key"]),set:xt.oneOfSetter(r)}),e.encode=function(n,s){if(s||(s=xR.create()),n.from!=null&&Object.hasOwnProperty.call(n,"from")&&s.uint32(10).bytes(n.from),n.data!=null&&Object.hasOwnProperty.call(n,"data")&&s.uint32(18).bytes(n.data),n.seqno!=null&&Object.hasOwnProperty.call(n,"seqno")&&s.uint32(26).bytes(n.seqno),n.topicIDs!=null&&n.topicIDs.length)for(var o=0;o<n.topicIDs.length;++o)s.uint32(34).string(n.topicIDs[o]);return n.signature!=null&&Object.hasOwnProperty.call(n,"signature")&&s.uint32(42).bytes(n.signature),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&s.uint32(50).bytes(n.key),s},e.decode=function(n,s){n instanceof _0||(n=_0.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new yi.RPC.Message;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.from=n.bytes();break;case 2:a.data=n.bytes();break;case 3:a.seqno=n.bytes();break;case 4:a.topicIDs&&a.topicIDs.length||(a.topicIDs=[]),a.topicIDs.push(n.string());break;case 5:a.signature=n.bytes();break;case 6:a.key=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof yi.RPC.Message)return n;var s=new yi.RPC.Message;if(n.from!=null&&(typeof n.from=="string"?xt.base64.decode(n.from,s.from=xt.newBuffer(xt.base64.length(n.from)),0):n.from.length&&(s.from=n.from)),n.data!=null&&(typeof n.data=="string"?xt.base64.decode(n.data,s.data=xt.newBuffer(xt.base64.length(n.data)),0):n.data.length&&(s.data=n.data)),n.seqno!=null&&(typeof n.seqno=="string"?xt.base64.decode(n.seqno,s.seqno=xt.newBuffer(xt.base64.length(n.seqno)),0):n.seqno.length&&(s.seqno=n.seqno)),n.topicIDs){if(!Array.isArray(n.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var o=0;o<n.topicIDs.length;++o)s.topicIDs[o]=String(n.topicIDs[o])}return n.signature!=null&&(typeof n.signature=="string"?xt.base64.decode(n.signature,s.signature=xt.newBuffer(xt.base64.length(n.signature)),0):n.signature.length&&(s.signature=n.signature)),n.key!=null&&(typeof n.key=="string"?xt.base64.decode(n.key,s.key=xt.newBuffer(xt.base64.length(n.key)),0):n.key.length&&(s.key=n.key)),s},e.toObject=function(n,s){s||(s={});var o={};if((s.arrays||s.defaults)&&(o.topicIDs=[]),n.from!=null&&n.hasOwnProperty("from")&&(o.from=s.bytes===String?xt.base64.encode(n.from,0,n.from.length):s.bytes===Array?Array.prototype.slice.call(n.from):n.from,s.oneofs&&(o._from="from")),n.data!=null&&n.hasOwnProperty("data")&&(o.data=s.bytes===String?xt.base64.encode(n.data,0,n.data.length):s.bytes===Array?Array.prototype.slice.call(n.data):n.data,s.oneofs&&(o._data="data")),n.seqno!=null&&n.hasOwnProperty("seqno")&&(o.seqno=s.bytes===String?xt.base64.encode(n.seqno,0,n.seqno.length):s.bytes===Array?Array.prototype.slice.call(n.seqno):n.seqno,s.oneofs&&(o._seqno="seqno")),n.topicIDs&&n.topicIDs.length){o.topicIDs=[];for(var a=0;a<n.topicIDs.length;++a)o.topicIDs[a]=n.topicIDs[a]}return n.signature!=null&&n.hasOwnProperty("signature")&&(o.signature=s.bytes===String?xt.base64.encode(n.signature,0,n.signature.length):s.bytes===Array?Array.prototype.slice.call(n.signature):n.signature,s.oneofs&&(o._signature="signature")),n.key!=null&&n.hasOwnProperty("key")&&(o.key=s.bytes===String?xt.base64.encode(n.key,0,n.key.length):s.bytes===Array?Array.prototype.slice.call(n.key):n.key,s.oneofs&&(o._key="key")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Sl.util.toJSONOptions)},e}(),t}();Mte.exports=yi});var IR=g((x5t,Ute)=>{f();"use strict";var jte=Cn(),{Buffer:mBe}=Gt(),qte=(t,e,r)=>{let i=jte.encode(t,e,r);return qte.bytes=jte.encode.bytes,e||mBe.from(i)};Ute.exports=qte});var $te=g((R5t,B5)=>{f();"use strict";var{Buffer:Fte}=Gt(),Kte=tn(),Vte=IR(),TR=8,zte=10*1024;function Hte(t){t=t||{};let e=Math.max(t.poolSize||zte,t.minPoolSize||TR),r=t.lengthEncoder||Vte;return async function*(n){let s=Fte.alloc(e),o=0;for await(let a of n){r(a.length,s,o);let c=s.slice(o,o+r.bytes);o+=r.bytes,s.length-o<TR&&(s=Fte.alloc(e),o=0),yield new Kte().append(c).append(a)}}}Hte.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||Vte;return new Kte([r(t.length),t.slice()])};B5.exports=Hte;B5.exports.MIN_POOL_SIZE=TR;B5.exports.DEFAULT_POOL_SIZE=zte});var PR=g((I5t,Yte)=>{f();"use strict";var Gte=Cn(),{Buffer:bBe}=Gt(),wBe=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),Wte=t=>{let e=Gte.decode(bBe.isBuffer(t)?t:wBe(t));return Wte.bytes=Gte.decode.bytes,e};Yte.exports=Wte});var Jte=g((T5t,L5)=>{f();"use strict";var{Buffer:_Be}=Gt(),CR=tn(),vBe=PR(),Xte=8,Qte=1024*1024*4,Zte=_Be.alloc(0),Al={LENGTH:"readLength",DATA:"readData"},EBe={[Al.LENGTH]:(t,e,r,i)=>{e=e.append(t);let n;try{n=i.lengthDecoder(e)}catch(s){if(e.length>i.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:Al.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(n>i.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(i.lengthDecoder.bytes),e=new CR,i.onLength&&i.onLength(n),n<=0?(i.onData&&i.onData(Zte),{mode:Al.LENGTH,chunk:t,buffer:e,data:Zte}):{mode:Al.DATA,chunk:t,buffer:e,state:{dataLength:n},data:void 0}},[Al.DATA]:(t,e,r,i)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:Al.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:n}=r,s=e.shallowSlice(0,n),o=e.length>n?e.shallowSlice(n):void 0;return e=new CR,i.onData&&i.onData(s),{mode:Al.LENGTH,chunk:o,buffer:e,state:void 0,data:s}}};function OR(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||vBe,maxLengthLength:t.maxLengthLength||Xte,maxDataLength:t.maxDataLength||Qte,onLength:t.onLength,onData:t.onData};return async function*(i){let n=new CR,s=Al.LENGTH,o;for await(let a of i){let c=a;for(;c;){let u=EBe[s](c,n,o,e);s=u.mode,c=u.chunk,n=u.buffer,o=u.state,u.data&&(yield u.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}OR.fromReader=(t,e)=>{let r=1,i={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return OR({...e||{},onLength:s=>{r=s}})(i)};L5.exports=OR;L5.exports.MAX_LENGTH_LENGTH=Xte;L5.exports.MAX_DATA_LENGTH=Qte});var rre=g((P5t,tre)=>{f();"use strict";var{Buffer:SBe}=Gt(),ere=(t,e,r)=>(e=e||SBe.allocUnsafe(4),e.writeInt32BE(t,r),e);ere.bytes=4;tre.exports=ere});var sre=g((C5t,nre)=>{f();"use strict";var ire=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};ire.bytes=4;nre.exports=ire});var qo=g(bh=>{f();"use strict";bh.encode=$te();bh.decode=Jte();bh.varintEncode=IR();bh.varintDecode=PR();bh.int32BEEncode=rre();bh.int32BEDecode=sre()});var M5=g((k5t,ore)=>{f();ore.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var cre=g((N5t,are)=>{f();are.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var Fa=g((B5t,wh)=>{f();var ABe=M5(),kR=cre(),ure=(t,e,r)=>DR(t,Array.isArray(e)?e:[{signal:e,options:r}]),DR=(t,e)=>{t=ABe(t),e=e.map(({signal:i,options:n})=>({signal:i,options:n||{}}));async function*r(){let i,n=()=>{i&&i()};for(let{signal:s}of e)s.addEventListener("abort",n);for(;;){let s;try{for(let{signal:a,options:c}of e)if(a.aborted){let{abortMessage:u,abortCode:l}=c;throw new kR(u,l)}let o=new Promise((a,c)=>{i=()=>{let{options:u}=e.find(({signal:d})=>d.aborted),{abortMessage:l,abortCode:h}=u;c(new kR(l,h))}});s=await Promise.race([o,t.next()]),i=null}catch(o){for(let{signal:u}of e)u.removeEventListener("abort",n);let a=e.find(({signal:u})=>u.aborted),c=o.type==="aborted"&&a;if(c&&a.options.onAbort&&await a.options.onAbort(t),typeof t.return=="function"&&await t.return(),c&&a.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",n)}return r()},lre=(t,e,r)=>fre(t,Array.isArray(e)?e:[{signal:e,options:r}]),fre=(t,e)=>r=>t(DR(r,e)),xBe=(t,e,r)=>RBe(t,Array.isArray(e)?e:[{signal:e,options:r}]),RBe=(t,e)=>({sink:fre(t.sink,e),source:DR(t.source,e)});wh.exports=ure;wh.exports.AbortError=kR;wh.exports.source=ure;wh.exports.sink=lre;wh.exports.transform=lre;wh.exports.duplex=xBe});var mre=g((L5t,gre)=>{f();"use strict";var hre=ce(),IBe=Object.assign(hre("libp2p-pubsub:peer-streams"),{error:hre("libp2p-pubsub:peer-streams:err")}),{EventEmitter:TBe}=Wt(),dre=qo(),PBe=Ea(),{pipe:pre}=vr(),{source:CBe}=Fa(),OBe=z3().default,yre=class extends TBe{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new OBe,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=CBe(pre(this._rawInboundStream,dre.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=PBe({onEnd:i=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,i&&this.emit("close")}}),pre(this.outboundStream,dre.encode(),this._rawOutboundStream).catch(i=>{IBe.error(i)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};gre.exports=yre});var wre=g(bre=>{f();"use strict";var kBe={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};bre.SignaturePolicy=kBe});var NR=g((j5t,Ere)=>{f();"use strict";var DBe=k2(),{toString:NBe}=(Qe(),rr),{fromString:_re}=(ht(),ri),vre=Je(),{sha256:BBe}=(ti(),vs),LBe=()=>DBe(8),MBe=(t,e)=>{let r;t instanceof Uint8Array?r=vre.createFromBytes(t).id:r=vre.parse(t).id;let i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i},jBe=t=>BBe.encode(t),qBe=(t,e)=>{let r;Array.isArray(e)?r=i=>e.indexOf(i)>-1:r=i=>e.has(i);for(let i of t)if(r(i))return!0;return!1},UBe=t=>Array.isArray(t)?t:[t],FBe=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=NBe(t.from,"base58btc")),e&&(r.receivedFrom=e),r},KBe=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=_re(t.from,"base58btc")),typeof t.data=="string"&&(e.data=_re(t.data)),e};Ere.exports={randomSeqno:LBe,msgId:MBe,noSignMsgId:jBe,anyMatch:qBe,ensureArray:UBe,normalizeInRpcMessage:FBe,normalizeOutRpcMessage:KBe}});var Ire=g((q5t,Rre)=>{f();"use strict";var BR=Je(),{RPC:Sre}=RR(),{concat:Are}=(Wi(),As),{fromString:VBe}=(ht(),ri),LR=VBe("libp2p-pubsub:"),{normalizeOutRpcMessage:zBe}=NR();async function HBe(t,e){let r=Are([LR,Sre.Message.encode(zBe(e)).finish()]),i=await t.privKey.sign(r);return{...e,signature:i,key:t.pubKey.bytes}}async function $Be(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=Are([LR,Sre.Message.encode({...t,from:BR.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await xre(t)).verify(e,t.signature)}async function xre(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=BR.createFromB58String(t.from);if(t.key){let r=await BR.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}Rre.exports={messagePublicKey:xre,signMessage:HBe,SignPrefix:LR,verifySignature:$Be}});var Ore=g((U5t,Cre)=>{f();"use strict";var Tre=ce(),{EventEmitter:GBe}=Wt(),Un=SR(),{pipe:WBe}=vr(),{default:YBe}=So(),XBe=D5(),{codes:Uo}=N5(),{RPC:Pre}=RR(),QBe=mre(),{SignaturePolicy:Vc}=wre(),xl=NR(),{signMessage:ZBe,verifySignature:JBe}=Ire(),j5=class extends GBe{constructor({debugName:e,multicodecs:r,libp2p:i,globalSignaturePolicy:n=Vc.StrictSign,canRelayMessage:s=!1,emitSelf:o=!1,messageProcessingConcurrency:a=10}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");super();if(this.log=Object.assign(Tre(e),{err:Tre(`${e}:error`)}),this.multicodecs=xl.ensureArray(r),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!Vc[n])throw Un(new Error("Invalid global signature policy"),Uo.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=n,this.canRelayMessage=s,this.emitSelf=o,this.topicValidators=new Map,this.queue=new YBe({concurrency:a}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new XBe({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=this.registrar.register(e),this.log("started"),this.started=!0}stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:i}){let n=i.remotePeer,s=n.toB58String(),o=this._addPeer(n,e),a=o.attachInboundStream(r);this._processMessages(s,a,o)}async _onPeerConnected(e,r){let i=e.toB58String();this.log("connected",i);try{let{stream:n,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(n)}catch(n){this.log.err(n)}this._sendSubscriptions(i,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let i=e.toB58String();this.log("connection ended",i,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let i=e.toB58String(),n=this.peers.get(i);if(n)return n;this.log("new peer",i);let s=new QBe({id:e,protocol:r});return this.peers.set(i,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),i=this.peers.get(r);if(!!i){i.removeAllListeners(),i.close(),this.log("delete peer",r),this.peers.delete(r);for(let n of this.topics.values())n.delete(r);return i}}async _processMessages(e,r,i){try{await WBe(r,async n=>{for await(let s of n){let o=s instanceof Uint8Array?s:s.slice(),a=this._decodeRpc(o);(async()=>{try{await this._processRpc(e,i,a)}catch(c){this.log.err(c)}})()}})}catch(n){this._onPeerDisconnected(i.id,n)}}async _processRpc(e,r,i){this.log("rpc from",e);let n=i.subscriptions,s=i.msgs;return n.length&&(n.forEach(o=>{this._processRpcSubOpt(e,o)}),this.emit("pubsub:subscription-change",r.id,n)),this._acceptFrom(e)?(s.length&&this.queue.addAll(s.map(o=>async()=>{if(!(this.canRelayMessage||o.topicIDs&&o.topicIDs.some(a=>this.subscriptions.has(a)))){this.log("received message we didn't subscribe to. Dropping.");return}try{let a=xl.normalizeInRpcMessage(o,e);await this._processRpcMessage(a)}catch(a){this.log.err(a)}})),!0):(this.log("received message from unacceptable peer %s",e),!1)}_processRpcSubOpt(e,r){let i=r.topicID;if(!i)return;let n=this.topics.get(i);n||(n=new Set,this.topics.set(i,n)),r.subscribe?n.add(e):n.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(xl.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case Vc.StrictSign:return xl.msgId(e.from,e.seqno);case Vc.StrictNoSign:return xl.noSignMsgId(e.data);default:throw Un(new Error("Cannot get message id: unhandled signature policy: "+r),Uo.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return Pre.decode(e)}_encodeRpc(e){return Pre.encode(e).finish()}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable){let n=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(n);return}i.write(this._encodeRpc(r))}_sendSubscriptions(e,r,i){return this._sendRpc(e,{subscriptions:r.map(n=>({topicID:n,subscribe:i}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case Vc.StrictNoSign:if(e.from)throw Un(new Error("StrictNoSigning: from should not be present"),Uo.ERR_UNEXPECTED_FROM);if(e.signature)throw Un(new Error("StrictNoSigning: signature should not be present"),Uo.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw Un(new Error("StrictNoSigning: key should not be present"),Uo.ERR_UNEXPECTED_KEY);if(e.seqno)throw Un(new Error("StrictNoSigning: seqno should not be present"),Uo.ERR_UNEXPECTED_SEQNO);break;case Vc.StrictSign:if(!e.signature)throw Un(new Error("StrictSigning: Signing required and no signature was present"),Uo.ERR_MISSING_SIGNATURE);if(!e.seqno)throw Un(new Error("StrictSigning: Signing required and no seqno was present"),Uo.ERR_MISSING_SEQNO);if(!await JBe(e))throw Un(new Error("StrictSigning: Invalid message signature"),Uo.ERR_INVALID_SIGNATURE);break;default:throw Un(new Error("Cannot validate message: unhandled signature policy: "+r),Uo.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let i of e.topicIDs){let n=this.topicValidators.get(i);n&&await n(i,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case Vc.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=xl.randomSeqno(),ZBe(this.peerId,e);case Vc.StrictNoSign:return Promise.resolve(e);default:throw Un(new Error("Cannot build message: unhandled signature policy: "+r),Uo.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw Un(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw Un(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let n={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(n),o=xl.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(o),await this._publish(o)}_publish(e){throw Un(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};j5.utils=xl;j5.SignaturePolicy=Vc;Cre.exports=j5});var kre=g(q5=>{f();"use strict";Object.defineProperty(q5,"__esModule",{value:!0});q5.createGossipRpc=void 0;function eLe(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}q5.createGossipRpc=eLe});var Dre=g(U5=>{f();"use strict";Object.defineProperty(U5,"__esModule",{value:!0});U5.shuffle=void 0;function tLe(t){if(t.length<=1)return t;let e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){let i=e(),n=t[r];t[r]=t[i],t[i]=n}return t}U5.shuffle=tLe});var _h=g(_e=>{f();"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.ERR_TOPIC_VALIDATOR_IGNORE=_e.ERR_TOPIC_VALIDATOR_REJECT=_e.TimeCacheDuration=_e.GossipsubSeenTTL=_e.GossipsubIWantFollowupTime=_e.GossipsubMaxIHaveMessages=_e.GossipsubMaxIHaveLength=_e.GossipsubGraftFloodThreshold=_e.GossipsubOpportunisticGraftPeers=_e.GossipsubOpportunisticGraftTicks=_e.GossipsubDirectConnectInitialDelay=_e.GossipsubDirectConnectTicks=_e.GossipsubConnectionTimeout=_e.GossipsubMaxPendingConnections=_e.GossipsubConnectors=_e.GossipsubPruneBackoffTicks=_e.GossipsubPruneBackoff=_e.GossipsubPrunePeers=_e.GossipsubFanoutTTL=_e.GossipsubHeartbeatInterval=_e.GossipsubHeartbeatInitialDelay=_e.GossipsubGossipRetransmission=_e.GossipsubGossipFactor=_e.GossipsubDlazy=_e.GossipsubHistoryGossip=_e.GossipsubHistoryLength=_e.GossipsubDout=_e.GossipsubDscore=_e.GossipsubDhi=_e.GossipsubDlo=_e.GossipsubD=_e.GossipsubIDv11=_e.GossipsubIDv10=_e.FloodsubID=_e.minute=_e.second=void 0;_e.second=1e3;_e.minute=60*_e.second;_e.FloodsubID="/floodsub/1.0.0";_e.GossipsubIDv10="/meshsub/1.0.0";_e.GossipsubIDv11="/meshsub/1.1.0";_e.GossipsubD=6;_e.GossipsubDlo=4;_e.GossipsubDhi=12;_e.GossipsubDscore=4;_e.GossipsubDout=2;_e.GossipsubHistoryLength=5;_e.GossipsubHistoryGossip=3;_e.GossipsubDlazy=6;_e.GossipsubGossipFactor=.25;_e.GossipsubGossipRetransmission=3;_e.GossipsubHeartbeatInitialDelay=100;_e.GossipsubHeartbeatInterval=_e.second;_e.GossipsubFanoutTTL=_e.minute;_e.GossipsubPrunePeers=16;_e.GossipsubPruneBackoff=_e.minute;_e.GossipsubPruneBackoffTicks=15;_e.GossipsubConnectors=8;_e.GossipsubMaxPendingConnections=128;_e.GossipsubConnectionTimeout=30*_e.second;_e.GossipsubDirectConnectTicks=300;_e.GossipsubDirectConnectInitialDelay=_e.second;_e.GossipsubOpportunisticGraftTicks=60;_e.GossipsubOpportunisticGraftPeers=2;_e.GossipsubGraftFloodThreshold=10*_e.second;_e.GossipsubMaxIHaveLength=5e3;_e.GossipsubMaxIHaveMessages=10;_e.GossipsubIWantFollowupTime=3*_e.second;_e.GossipsubSeenTTL=30*_e.second;_e.TimeCacheDuration=120*1e3;_e.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT";_e.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE"});var Bre=g(F5=>{f();"use strict";Object.defineProperty(F5,"__esModule",{value:!0});F5.hasGossipProtocol=void 0;var Nre=_h();function rLe(t){return t===Nre.GossipsubIDv10||t===Nre.GossipsubIDv11}F5.hasGossipProtocol=rLe});var Lre=g(K5=>{f();"use strict";Object.defineProperty(K5,"__esModule",{value:!0});K5.messageIdToString=void 0;var iLe=(Qe(),rr);function nLe(t){return iLe.toString(t,"base64")}K5.messageIdToString=nLe});var vh=g(Ka=>{f();"use strict";var sLe=Ka&&Ka.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),V5=Ka&&Ka.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&sLe(e,t,r)};Object.defineProperty(Ka,"__esModule",{value:!0});V5(kre(),Ka);V5(Dre(),Ka);V5(Bre(),Ka);V5(Lre(),Ka)});var jre=g(v0=>{f();"use strict";var oLe=v0&&v0.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(i.next(l))}catch(h){o(h)}}function c(l){try{u(i.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):n(l.value).then(a,c)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(v0,"__esModule",{value:!0});v0.MessageCache=void 0;var z5=vh(),Mre=class{constructor(e,r,i){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let n=0;n<r;n++)this.history[n]=[];this.gossip=e,this.msgIdFn=i}put(e){return oLe(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=z5.messageIdToString(r);this.msgs.set(i,e),this.history[0].push({msgID:r,topics:e.topicIDs})})}getMsgId(e){return this.msgIdFn(e)}get(e){return this.msgs.get(z5.messageIdToString(e))}getForPeer(e,r){let i=z5.messageIdToString(e),n=this.msgs.get(i);if(!n)return[void 0,0];let s=this.peertx.get(i);s||(s=new Map,this.peertx.set(i,s));let o=(s.get(r)||0)+1;return s.set(r,o),[n,o]}getGossipIDs(e){let r=[];for(let i=0;i<this.gossip;i++)this.history[i].forEach(n=>{for(let s of n.topics)if(s===e){r.push(n.msgID);break}});return r}shift(){this.history[this.history.length-1].forEach(r=>{let i=z5.messageIdToString(r.msgID);this.msgs.delete(i),this.peertx.delete(i)}),this.history.pop(),this.history.unshift([])}};v0.MessageCache=Mre});var Ure=g((qre,Cg)=>{f();(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof ps=="function"&&typeof Cg=="object"&&Cg&&Cg.exports&&(Cg.exports=e(Si()))})(qre,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots.default||(t.roots.default={});return n.RPC=function(){function s(a){if(this.subscriptions=[],this.msgs=[],a)for(var c=Object.keys(a),u=0;u<c.length;++u)a[c[u]]!=null&&(this[c[u]]=a[c[u]])}s.prototype.subscriptions=i.emptyArray,s.prototype.msgs=i.emptyArray,s.prototype.control=null;var o;return Object.defineProperty(s.prototype,"_control",{get:i.oneOfGetter(o=["control"]),set:i.oneOfSetter(o)}),s.encode=function(c,u){if(u||(u=r.create()),c.subscriptions!=null&&c.subscriptions.length)for(var l=0;l<c.subscriptions.length;++l)n.RPC.SubOpts.encode(c.subscriptions[l],u.uint32(10).fork()).ldelim();if(c.msgs!=null&&c.msgs.length)for(var l=0;l<c.msgs.length;++l)n.RPC.Message.encode(c.msgs[l],u.uint32(18).fork()).ldelim();return c.control!=null&&Object.hasOwnProperty.call(c,"control")&&n.RPC.ControlMessage.encode(c.control,u.uint32(26).fork()).ldelim(),u},s.decode=function(c,u){c instanceof e||(c=e.create(c));for(var l=u===void 0?c.len:c.pos+u,h=new n.RPC;c.pos<l;){var d=c.uint32();switch(d>>>3){case 1:h.subscriptions&&h.subscriptions.length||(h.subscriptions=[]),h.subscriptions.push(n.RPC.SubOpts.decode(c,c.uint32()));break;case 2:h.msgs&&h.msgs.length||(h.msgs=[]),h.msgs.push(n.RPC.Message.decode(c,c.uint32()));break;case 3:h.control=n.RPC.ControlMessage.decode(c,c.uint32());break;default:c.skipType(d&7);break}}return h},s.fromObject=function(c){if(c instanceof n.RPC)return c;var u=new n.RPC;if(c.subscriptions){if(!Array.isArray(c.subscriptions))throw TypeError(".RPC.subscriptions: array expected");u.subscriptions=[];for(var l=0;l<c.subscriptions.length;++l){if(typeof c.subscriptions[l]!="object")throw TypeError(".RPC.subscriptions: object expected");u.subscriptions[l]=n.RPC.SubOpts.fromObject(c.subscriptions[l])}}if(c.msgs){if(!Array.isArray(c.msgs))throw TypeError(".RPC.msgs: array expected");u.msgs=[];for(var l=0;l<c.msgs.length;++l){if(typeof c.msgs[l]!="object")throw TypeError(".RPC.msgs: object expected");u.msgs[l]=n.RPC.Message.fromObject(c.msgs[l])}}if(c.control!=null){if(typeof c.control!="object")throw TypeError(".RPC.control: object expected");u.control=n.RPC.ControlMessage.fromObject(c.control)}return u},s.toObject=function(c,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.subscriptions=[],l.msgs=[]),c.subscriptions&&c.subscriptions.length){l.subscriptions=[];for(var h=0;h<c.subscriptions.length;++h)l.subscriptions[h]=n.RPC.SubOpts.toObject(c.subscriptions[h],u)}if(c.msgs&&c.msgs.length){l.msgs=[];for(var h=0;h<c.msgs.length;++h)l.msgs[h]=n.RPC.Message.toObject(c.msgs[h],u)}return c.control!=null&&c.hasOwnProperty("control")&&(l.control=n.RPC.ControlMessage.toObject(c.control,u),u.oneofs&&(l._control="control")),l},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s.SubOpts=function(){function a(u){if(u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}a.prototype.subscribe=null,a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_subscribe",{get:i.oneOfGetter(c=["subscribe"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(l,h){return h||(h=r.create()),l.subscribe!=null&&Object.hasOwnProperty.call(l,"subscribe")&&h.uint32(8).bool(l.subscribe),l.topicID!=null&&Object.hasOwnProperty.call(l,"topicID")&&h.uint32(18).string(l.topicID),h},a.decode=function(l,h){l instanceof e||(l=e.create(l));for(var d=h===void 0?l.len:l.pos+h,p=new n.RPC.SubOpts;l.pos<d;){var y=l.uint32();switch(y>>>3){case 1:p.subscribe=l.bool();break;case 2:p.topicID=l.string();break;default:l.skipType(y&7);break}}return p},a.fromObject=function(l){if(l instanceof n.RPC.SubOpts)return l;var h=new n.RPC.SubOpts;return l.subscribe!=null&&(h.subscribe=Boolean(l.subscribe)),l.topicID!=null&&(h.topicID=String(l.topicID)),h},a.toObject=function(l,h){h||(h={});var d={};return l.subscribe!=null&&l.hasOwnProperty("subscribe")&&(d.subscribe=l.subscribe,h.oneofs&&(d._subscribe="subscribe")),l.topicID!=null&&l.hasOwnProperty("topicID")&&(d.topicID=l.topicID,h.oneofs&&(d._topicID="topicID")),d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.Message=function(){function a(u){if(this.topicIDs=[],u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}a.prototype.from=null,a.prototype.data=null,a.prototype.seqno=null,a.prototype.topicIDs=i.emptyArray,a.prototype.signature=null,a.prototype.key=null;var c;return Object.defineProperty(a.prototype,"_from",{get:i.oneOfGetter(c=["from"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_data",{get:i.oneOfGetter(c=["data"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_seqno",{get:i.oneOfGetter(c=["seqno"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signature",{get:i.oneOfGetter(c=["signature"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_key",{get:i.oneOfGetter(c=["key"]),set:i.oneOfSetter(c)}),a.encode=function(l,h){if(h||(h=r.create()),l.from!=null&&Object.hasOwnProperty.call(l,"from")&&h.uint32(10).bytes(l.from),l.data!=null&&Object.hasOwnProperty.call(l,"data")&&h.uint32(18).bytes(l.data),l.seqno!=null&&Object.hasOwnProperty.call(l,"seqno")&&h.uint32(26).bytes(l.seqno),l.topicIDs!=null&&l.topicIDs.length)for(var d=0;d<l.topicIDs.length;++d)h.uint32(34).string(l.topicIDs[d]);return l.signature!=null&&Object.hasOwnProperty.call(l,"signature")&&h.uint32(42).bytes(l.signature),l.key!=null&&Object.hasOwnProperty.call(l,"key")&&h.uint32(50).bytes(l.key),h},a.decode=function(l,h){l instanceof e||(l=e.create(l));for(var d=h===void 0?l.len:l.pos+h,p=new n.RPC.Message;l.pos<d;){var y=l.uint32();switch(y>>>3){case 1:p.from=l.bytes();break;case 2:p.data=l.bytes();break;case 3:p.seqno=l.bytes();break;case 4:p.topicIDs&&p.topicIDs.length||(p.topicIDs=[]),p.topicIDs.push(l.string());break;case 5:p.signature=l.bytes();break;case 6:p.key=l.bytes();break;default:l.skipType(y&7);break}}return p},a.fromObject=function(l){if(l instanceof n.RPC.Message)return l;var h=new n.RPC.Message;if(l.from!=null&&(typeof l.from=="string"?i.base64.decode(l.from,h.from=i.newBuffer(i.base64.length(l.from)),0):l.from.length&&(h.from=l.from)),l.data!=null&&(typeof l.data=="string"?i.base64.decode(l.data,h.data=i.newBuffer(i.base64.length(l.data)),0):l.data.length&&(h.data=l.data)),l.seqno!=null&&(typeof l.seqno=="string"?i.base64.decode(l.seqno,h.seqno=i.newBuffer(i.base64.length(l.seqno)),0):l.seqno.length&&(h.seqno=l.seqno)),l.topicIDs){if(!Array.isArray(l.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");h.topicIDs=[];for(var d=0;d<l.topicIDs.length;++d)h.topicIDs[d]=String(l.topicIDs[d])}return l.signature!=null&&(typeof l.signature=="string"?i.base64.decode(l.signature,h.signature=i.newBuffer(i.base64.length(l.signature)),0):l.signature.length&&(h.signature=l.signature)),l.key!=null&&(typeof l.key=="string"?i.base64.decode(l.key,h.key=i.newBuffer(i.base64.length(l.key)),0):l.key.length&&(h.key=l.key)),h},a.toObject=function(l,h){h||(h={});var d={};if((h.arrays||h.defaults)&&(d.topicIDs=[]),l.from!=null&&l.hasOwnProperty("from")&&(d.from=h.bytes===String?i.base64.encode(l.from,0,l.from.length):h.bytes===Array?Array.prototype.slice.call(l.from):l.from,h.oneofs&&(d._from="from")),l.data!=null&&l.hasOwnProperty("data")&&(d.data=h.bytes===String?i.base64.encode(l.data,0,l.data.length):h.bytes===Array?Array.prototype.slice.call(l.data):l.data,h.oneofs&&(d._data="data")),l.seqno!=null&&l.hasOwnProperty("seqno")&&(d.seqno=h.bytes===String?i.base64.encode(l.seqno,0,l.seqno.length):h.bytes===Array?Array.prototype.slice.call(l.seqno):l.seqno,h.oneofs&&(d._seqno="seqno")),l.topicIDs&&l.topicIDs.length){d.topicIDs=[];for(var p=0;p<l.topicIDs.length;++p)d.topicIDs[p]=l.topicIDs[p]}return l.signature!=null&&l.hasOwnProperty("signature")&&(d.signature=h.bytes===String?i.base64.encode(l.signature,0,l.signature.length):h.bytes===Array?Array.prototype.slice.call(l.signature):l.signature,h.oneofs&&(d._signature="signature")),l.key!=null&&l.hasOwnProperty("key")&&(d.key=h.bytes===String?i.base64.encode(l.key,0,l.key.length):h.bytes===Array?Array.prototype.slice.call(l.key):l.key,h.oneofs&&(d._key="key")),d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlMessage=function(){function a(c){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],c)for(var u=Object.keys(c),l=0;l<u.length;++l)c[u[l]]!=null&&(this[u[l]]=c[u[l]])}return a.prototype.ihave=i.emptyArray,a.prototype.iwant=i.emptyArray,a.prototype.graft=i.emptyArray,a.prototype.prune=i.emptyArray,a.encode=function(u,l){if(l||(l=r.create()),u.ihave!=null&&u.ihave.length)for(var h=0;h<u.ihave.length;++h)n.RPC.ControlIHave.encode(u.ihave[h],l.uint32(10).fork()).ldelim();if(u.iwant!=null&&u.iwant.length)for(var h=0;h<u.iwant.length;++h)n.RPC.ControlIWant.encode(u.iwant[h],l.uint32(18).fork()).ldelim();if(u.graft!=null&&u.graft.length)for(var h=0;h<u.graft.length;++h)n.RPC.ControlGraft.encode(u.graft[h],l.uint32(26).fork()).ldelim();if(u.prune!=null&&u.prune.length)for(var h=0;h<u.prune.length;++h)n.RPC.ControlPrune.encode(u.prune[h],l.uint32(34).fork()).ldelim();return l},a.decode=function(u,l){u instanceof e||(u=e.create(u));for(var h=l===void 0?u.len:u.pos+l,d=new n.RPC.ControlMessage;u.pos<h;){var p=u.uint32();switch(p>>>3){case 1:d.ihave&&d.ihave.length||(d.ihave=[]),d.ihave.push(n.RPC.ControlIHave.decode(u,u.uint32()));break;case 2:d.iwant&&d.iwant.length||(d.iwant=[]),d.iwant.push(n.RPC.ControlIWant.decode(u,u.uint32()));break;case 3:d.graft&&d.graft.length||(d.graft=[]),d.graft.push(n.RPC.ControlGraft.decode(u,u.uint32()));break;case 4:d.prune&&d.prune.length||(d.prune=[]),d.prune.push(n.RPC.ControlPrune.decode(u,u.uint32()));break;default:u.skipType(p&7);break}}return d},a.fromObject=function(u){if(u instanceof n.RPC.ControlMessage)return u;var l=new n.RPC.ControlMessage;if(u.ihave){if(!Array.isArray(u.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");l.ihave=[];for(var h=0;h<u.ihave.length;++h){if(typeof u.ihave[h]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");l.ihave[h]=n.RPC.ControlIHave.fromObject(u.ihave[h])}}if(u.iwant){if(!Array.isArray(u.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");l.iwant=[];for(var h=0;h<u.iwant.length;++h){if(typeof u.iwant[h]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");l.iwant[h]=n.RPC.ControlIWant.fromObject(u.iwant[h])}}if(u.graft){if(!Array.isArray(u.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");l.graft=[];for(var h=0;h<u.graft.length;++h){if(typeof u.graft[h]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");l.graft[h]=n.RPC.ControlGraft.fromObject(u.graft[h])}}if(u.prune){if(!Array.isArray(u.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");l.prune=[];for(var h=0;h<u.prune.length;++h){if(typeof u.prune[h]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");l.prune[h]=n.RPC.ControlPrune.fromObject(u.prune[h])}}return l},a.toObject=function(u,l){l||(l={});var h={};if((l.arrays||l.defaults)&&(h.ihave=[],h.iwant=[],h.graft=[],h.prune=[]),u.ihave&&u.ihave.length){h.ihave=[];for(var d=0;d<u.ihave.length;++d)h.ihave[d]=n.RPC.ControlIHave.toObject(u.ihave[d],l)}if(u.iwant&&u.iwant.length){h.iwant=[];for(var d=0;d<u.iwant.length;++d)h.iwant[d]=n.RPC.ControlIWant.toObject(u.iwant[d],l)}if(u.graft&&u.graft.length){h.graft=[];for(var d=0;d<u.graft.length;++d)h.graft[d]=n.RPC.ControlGraft.toObject(u.graft[d],l)}if(u.prune&&u.prune.length){h.prune=[];for(var d=0;d<u.prune.length;++d)h.prune[d]=n.RPC.ControlPrune.toObject(u.prune[d],l)}return h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlIHave=function(){function a(u){if(this.messageIDs=[],u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}a.prototype.topicID=null,a.prototype.messageIDs=i.emptyArray;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(l,h){if(h||(h=r.create()),l.topicID!=null&&Object.hasOwnProperty.call(l,"topicID")&&h.uint32(10).string(l.topicID),l.messageIDs!=null&&l.messageIDs.length)for(var d=0;d<l.messageIDs.length;++d)h.uint32(18).bytes(l.messageIDs[d]);return h},a.decode=function(l,h){l instanceof e||(l=e.create(l));for(var d=h===void 0?l.len:l.pos+h,p=new n.RPC.ControlIHave;l.pos<d;){var y=l.uint32();switch(y>>>3){case 1:p.topicID=l.string();break;case 2:p.messageIDs&&p.messageIDs.length||(p.messageIDs=[]),p.messageIDs.push(l.bytes());break;default:l.skipType(y&7);break}}return p},a.fromObject=function(l){if(l instanceof n.RPC.ControlIHave)return l;var h=new n.RPC.ControlIHave;if(l.topicID!=null&&(h.topicID=String(l.topicID)),l.messageIDs){if(!Array.isArray(l.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");h.messageIDs=[];for(var d=0;d<l.messageIDs.length;++d)typeof l.messageIDs[d]=="string"?i.base64.decode(l.messageIDs[d],h.messageIDs[d]=i.newBuffer(i.base64.length(l.messageIDs[d])),0):l.messageIDs[d].length&&(h.messageIDs[d]=l.messageIDs[d])}return h},a.toObject=function(l,h){h||(h={});var d={};if((h.arrays||h.defaults)&&(d.messageIDs=[]),l.topicID!=null&&l.hasOwnProperty("topicID")&&(d.topicID=l.topicID,h.oneofs&&(d._topicID="topicID")),l.messageIDs&&l.messageIDs.length){d.messageIDs=[];for(var p=0;p<l.messageIDs.length;++p)d.messageIDs[p]=h.bytes===String?i.base64.encode(l.messageIDs[p],0,l.messageIDs[p].length):h.bytes===Array?Array.prototype.slice.call(l.messageIDs[p]):l.messageIDs[p]}return d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlIWant=function(){function a(c){if(this.messageIDs=[],c)for(var u=Object.keys(c),l=0;l<u.length;++l)c[u[l]]!=null&&(this[u[l]]=c[u[l]])}return a.prototype.messageIDs=i.emptyArray,a.encode=function(u,l){if(l||(l=r.create()),u.messageIDs!=null&&u.messageIDs.length)for(var h=0;h<u.messageIDs.length;++h)l.uint32(10).bytes(u.messageIDs[h]);return l},a.decode=function(u,l){u instanceof e||(u=e.create(u));for(var h=l===void 0?u.len:u.pos+l,d=new n.RPC.ControlIWant;u.pos<h;){var p=u.uint32();switch(p>>>3){case 1:d.messageIDs&&d.messageIDs.length||(d.messageIDs=[]),d.messageIDs.push(u.bytes());break;default:u.skipType(p&7);break}}return d},a.fromObject=function(u){if(u instanceof n.RPC.ControlIWant)return u;var l=new n.RPC.ControlIWant;if(u.messageIDs){if(!Array.isArray(u.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");l.messageIDs=[];for(var h=0;h<u.messageIDs.length;++h)typeof u.messageIDs[h]=="string"?i.base64.decode(u.messageIDs[h],l.messageIDs[h]=i.newBuffer(i.base64.length(u.messageIDs[h])),0):u.messageIDs[h].length&&(l.messageIDs[h]=u.messageIDs[h])}return l},a.toObject=function(u,l){l||(l={});var h={};if((l.arrays||l.defaults)&&(h.messageIDs=[]),u.messageIDs&&u.messageIDs.length){h.messageIDs=[];for(var d=0;d<u.messageIDs.length;++d)h.messageIDs[d]=l.bytes===String?i.base64.encode(u.messageIDs[d],0,u.messageIDs[d].length):l.bytes===Array?Array.prototype.slice.call(u.messageIDs[d]):u.messageIDs[d]}return h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlGraft=function(){function a(u){if(u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(l,h){return h||(h=r.create()),l.topicID!=null&&Object.hasOwnProperty.call(l,"topicID")&&h.uint32(10).string(l.topicID),h},a.decode=function(l,h){l instanceof e||(l=e.create(l));for(var d=h===void 0?l.len:l.pos+h,p=new n.RPC.ControlGraft;l.pos<d;){var y=l.uint32();switch(y>>>3){case 1:p.topicID=l.string();break;default:l.skipType(y&7);break}}return p},a.fromObject=function(l){if(l instanceof n.RPC.ControlGraft)return l;var h=new n.RPC.ControlGraft;return l.topicID!=null&&(h.topicID=String(l.topicID)),h},a.toObject=function(l,h){h||(h={});var d={};return l.topicID!=null&&l.hasOwnProperty("topicID")&&(d.topicID=l.topicID,h.oneofs&&(d._topicID="topicID")),d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlPrune=function(){function a(u){if(this.peers=[],u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}a.prototype.topicID=null,a.prototype.peers=i.emptyArray,a.prototype.backoff=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_backoff",{get:i.oneOfGetter(c=["backoff"]),set:i.oneOfSetter(c)}),a.encode=function(l,h){if(h||(h=r.create()),l.topicID!=null&&Object.hasOwnProperty.call(l,"topicID")&&h.uint32(10).string(l.topicID),l.peers!=null&&l.peers.length)for(var d=0;d<l.peers.length;++d)n.RPC.PeerInfo.encode(l.peers[d],h.uint32(18).fork()).ldelim();return l.backoff!=null&&Object.hasOwnProperty.call(l,"backoff")&&h.uint32(24).uint64(l.backoff),h},a.decode=function(l,h){l instanceof e||(l=e.create(l));for(var d=h===void 0?l.len:l.pos+h,p=new n.RPC.ControlPrune;l.pos<d;){var y=l.uint32();switch(y>>>3){case 1:p.topicID=l.string();break;case 2:p.peers&&p.peers.length||(p.peers=[]),p.peers.push(n.RPC.PeerInfo.decode(l,l.uint32()));break;case 3:p.backoff=l.uint64();break;default:l.skipType(y&7);break}}return p},a.fromObject=function(l){if(l instanceof n.RPC.ControlPrune)return l;var h=new n.RPC.ControlPrune;if(l.topicID!=null&&(h.topicID=String(l.topicID)),l.peers){if(!Array.isArray(l.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");h.peers=[];for(var d=0;d<l.peers.length;++d){if(typeof l.peers[d]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");h.peers[d]=n.RPC.PeerInfo.fromObject(l.peers[d])}}return l.backoff!=null&&(i.Long?(h.backoff=i.Long.fromValue(l.backoff)).unsigned=!0:typeof l.backoff=="string"?h.backoff=parseInt(l.backoff,10):typeof l.backoff=="number"?h.backoff=l.backoff:typeof l.backoff=="object"&&(h.backoff=new i.LongBits(l.backoff.low>>>0,l.backoff.high>>>0).toNumber(!0))),h},a.toObject=function(l,h){h||(h={});var d={};if((h.arrays||h.defaults)&&(d.peers=[]),l.topicID!=null&&l.hasOwnProperty("topicID")&&(d.topicID=l.topicID,h.oneofs&&(d._topicID="topicID")),l.peers&&l.peers.length){d.peers=[];for(var p=0;p<l.peers.length;++p)d.peers[p]=n.RPC.PeerInfo.toObject(l.peers[p],h)}return l.backoff!=null&&l.hasOwnProperty("backoff")&&(typeof l.backoff=="number"?d.backoff=h.longs===String?String(l.backoff):l.backoff:d.backoff=h.longs===String?i.Long.prototype.toString.call(l.backoff):h.longs===Number?new i.LongBits(l.backoff.low>>>0,l.backoff.high>>>0).toNumber(!0):l.backoff,h.oneofs&&(d._backoff="backoff")),d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.PeerInfo=function(){function a(u){if(u)for(var l=Object.keys(u),h=0;h<l.length;++h)u[l[h]]!=null&&(this[l[h]]=u[l[h]])}a.prototype.peerID=null,a.prototype.signedPeerRecord=null;var c;return Object.defineProperty(a.prototype,"_peerID",{get:i.oneOfGetter(c=["peerID"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signedPeerRecord",{get:i.oneOfGetter(c=["signedPeerRecord"]),set:i.oneOfSetter(c)}),a.encode=function(l,h){return h||(h=r.create()),l.peerID!=null&&Object.hasOwnProperty.call(l,"peerID")&&h.uint32(10).bytes(l.peerID),l.signedPeerRecord!=null&&Object.hasOwnProperty.call(l,"signedPeerRecord")&&h.uint32(18).bytes(l.signedPeerRecord),h},a.decode=function(l,h){l instanceof e||(l=e.create(l));for(var d=h===void 0?l.len:l.pos+h,p=new n.RPC.PeerInfo;l.pos<d;){var y=l.uint32();switch(y>>>3){case 1:p.peerID=l.bytes();break;case 2:p.signedPeerRecord=l.bytes();break;default:l.skipType(y&7);break}}return p},a.fromObject=function(l){if(l instanceof n.RPC.PeerInfo)return l;var h=new n.RPC.PeerInfo;return l.peerID!=null&&(typeof l.peerID=="string"?i.base64.decode(l.peerID,h.peerID=i.newBuffer(i.base64.length(l.peerID)),0):l.peerID.length&&(h.peerID=l.peerID)),l.signedPeerRecord!=null&&(typeof l.signedPeerRecord=="string"?i.base64.decode(l.signedPeerRecord,h.signedPeerRecord=i.newBuffer(i.base64.length(l.signedPeerRecord)),0):l.signedPeerRecord.length&&(h.signedPeerRecord=l.signedPeerRecord)),h},a.toObject=function(l,h){h||(h={});var d={};return l.peerID!=null&&l.hasOwnProperty("peerID")&&(d.peerID=h.bytes===String?i.base64.encode(l.peerID,0,l.peerID.length):h.bytes===Array?Array.prototype.slice.call(l.peerID):l.peerID,h.oneofs&&(d._peerID="peerID")),l.signedPeerRecord!=null&&l.hasOwnProperty("signedPeerRecord")&&(d.signedPeerRecord=h.bytes===String?i.base64.encode(l.signedPeerRecord,0,l.signedPeerRecord.length):h.bytes===Array?Array.prototype.slice.call(l.signedPeerRecord):l.signedPeerRecord,h.oneofs&&(d._signedPeerRecord="signedPeerRecord")),d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s}(),n})});var MR=g(H5=>{f();"use strict";Object.defineProperty(H5,"__esModule",{value:!0});H5.getGossipPeers=void 0;var Fre=vh();function aLe(t,e,r,i=()=>!0){let n=t.topics.get(e);if(!n)return new Set;let s=[];return n.forEach(o=>{let a=t.peers.get(o);!a||Fre.hasGossipProtocol(a.protocol)&&i(o)&&s.push(o)}),s=Fre.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}H5.getGossipPeers=aLe});var Vre=g(Va=>{f();"use strict";var cLe=Va&&Va.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),uLe=Va&&Va.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lLe=Va&&Va.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cLe(e,t,r);return uLe(e,t),e};Object.defineProperty(Va,"__esModule",{value:!0});Va.Heartbeat=void 0;var jR=lLe(_h()),$5=MR(),fLe=vh(),Kre=class{constructor(e){this.gossipsub=e}start(){if(this._heartbeatTimer)return;let e=this._heartbeat.bind(this),r=setTimeout(()=>{e(),this._heartbeatTimer.runPeriodically(e,this.gossipsub._options.heartbeatInterval)},jR.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(i,n)=>{this._heartbeatTimer._intervalId=setInterval(i,n)},cancel:()=>{clearTimeout(r),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){!this._heartbeatTimer||(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){let{D:e,Dlo:r,Dhi:i,Dscore:n,Dout:s,fanoutTTL:o}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;let a=new Map,c=p=>{let y=a.get(p);return y===void 0&&(y=this.gossipsub.score.score(p),a.set(p,y)),y},u=new Map,l=new Map,h=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((p,y)=>{let m=b=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",b,y),this.gossipsub.score.prune(b,y),this.gossipsub._addBackoff(b,y),p.delete(b);let v=l.get(b);v?v.push(y):l.set(b,[y])},w=b=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",b,y),this.gossipsub.score.graft(b,y),p.add(b);let v=u.get(b);v?v.push(y):u.set(b,[y])};if(p.forEach(b=>{let v=c(b);v<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",b,v,y),m(b),h.set(b,!0))}),p.size<r){let b=this.gossipsub.backoff.get(y),v=e-p.size;$5.getGossipPeers(this.gossipsub,y,v,B=>!p.has(B)&&!this.gossipsub.direct.has(B)&&(!b||!b.has(B))&&c(B)>=0).forEach(w)}if(p.size>i){let b=Array.from(p);b.sort((x,B)=>c(B)-c(x)),b=b.slice(0,n).concat(fLe.shuffle(b.slice(n)));let v=0;if(b.slice(0,e).forEach(x=>{this.gossipsub.outbound.get(x)&&v++}),v<s){let x=O=>{let R=b[O];for(let N=O;N>0;N--)b[N]=b[N-1];b[0]=R};if(v>0){let O=v;for(let R=1;R<e&&O>0;R++)this.gossipsub.outbound.get(b[R])&&(x(R),O--)}let B=e-v;for(let O=e;O<b.length&&B>0;O++)this.gossipsub.outbound.get(b[O])&&(x(O),B--)}b.slice(e).forEach(m)}if(p.size>=r){let b=0;if(p.forEach(v=>{this.gossipsub.outbound.get(v)&&b++}),b<s){let v=s-b,x=this.gossipsub.backoff.get(y);$5.getGossipPeers(this.gossipsub,y,v,B=>!p.has(B)&&!this.gossipsub.direct.has(B)&&(!x||!x.has(B))&&c(B)>=0).forEach(w)}}if(this.gossipsub.heartbeatTicks%jR.GossipsubOpportunisticGraftTicks==0&&p.size>1){let b=Array.from(p).sort((B,O)=>c(B)-c(O)),v=Math.floor(p.size/2),x=c(b[v]);if(x<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){let B=this.gossipsub.backoff.get(y);$5.getGossipPeers(this.gossipsub,y,jR.GossipsubOpportunisticGraftPeers,R=>p.has(R)&&!this.gossipsub.direct.has(R)&&(!B||!B.has(R))&&c(R)>x).forEach(R=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",R,y),w(R)})}}this.gossipsub._emitGossip(y,p)});let d=this.gossipsub._now();this.gossipsub.lastpub.forEach((p,y)=>{p+o<d&&(this.gossipsub.fanout.delete(y),this.gossipsub.lastpub.delete(y))}),this.gossipsub.fanout.forEach((p,y)=>{let m=this.gossipsub.topics.get(y);if(p.forEach(w=>{(!m.has(w)||c(w)<this.gossipsub._options.scoreThresholds.publishThreshold)&&p.delete(w)}),p.size<e){let w=e-p.size;$5.getGossipPeers(this.gossipsub,y,w,v=>!p.has(v)&&!this.gossipsub.direct.has(v)&&c(v)>=this.gossipsub._options.scoreThresholds.publishThreshold).forEach(v=>{p.add(v)})}this.gossipsub._emitGossip(y,p)}),this.gossipsub._sendGraftPrune(u,l,h),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}};Va.Heartbeat=Kre});var qR=g(E0=>{f();"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.ERR_INVALID_PEER_SCORE_THRESHOLDS=E0.ERR_INVALID_PEER_SCORE_PARAMS=void 0;E0.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS";E0.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"});var UR=g((Q5t,Hre)=>{f();"use strict";function zre(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function hLe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return zre(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),zre(new n,r)}}Hre.exports=hLe});var FR=g(rn=>{f();"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.validateTopicScoreParams=rn.validatePeerScoreParams=rn.createTopicScoreParams=rn.createPeerScoreParams=rn.defaultTopicScoreParams=rn.defaultPeerScoreParams=void 0;var ar=qR(),cr=UR();rn.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3};rn.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function dLe(t={}){return Object.assign(Object.assign(Object.assign({},rn.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=$re(i),e),{}):{}})}rn.createPeerScoreParams=dLe;function $re(t={}){return Object.assign(Object.assign({},rn.defaultTopicScoreParams),t)}rn.createTopicScoreParams=$re;function pLe(t){for(let[e,r]of Object.entries(t.topics))try{Gre(r)}catch(i){throw cr(new Error(`invalid score parameters for topic ${e}: ${i.message}`),ar.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw cr(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw cr(new Error("missing application specific score function"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw cr(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw cr(new Error("invalid IPColocationFactorThreshold; must be at least 1"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw cr(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw cr(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw cr(new Error("invalid DecayInterval; must be at least 1s"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw cr(new Error("invalid DecayToZero; must be between 0 and 1"),ar.ERR_INVALID_PEER_SCORE_PARAMS)}rn.validatePeerScoreParams=pLe;function Gre(t){if(t.topicWeight<0)throw cr(new Error("invalid topic weight; must be >= 0"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshQuantum===0)throw cr(new Error("invalid TimeInMeshQuantum; must be non zero"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw cr(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw cr(new Error("invalid TimeInMeshQuantum; must be positive"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw cr(new Error("invalid TimeInMeshCap; must be positive"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw cr(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw cr(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw cr(new Error("invalid FirstMessageDeliveriesCap; must be positive"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw cr(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw cr(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw cr(new Error("invalid MeshMessageDeliveriesCap; must be positive"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw cr(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw cr(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw cr(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw cr(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw cr(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw cr(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),ar.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw cr(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),ar.ERR_INVALID_PEER_SCORE_PARAMS)}rn.validateTopicScoreParams=Gre});var Wre=g(zc=>{f();"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.validatePeerScoreThresholds=zc.createPeerScoreThresholds=zc.defaultPeerScoreThresholds=void 0;var Og=qR(),kg=UR();zc.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function yLe(t={}){return Object.assign(Object.assign({},zc.defaultPeerScoreThresholds),t)}zc.createPeerScoreThresholds=yLe;function gLe(t){if(t.gossipThreshold>0)throw kg(new Error("invalid gossip threshold; it must be <= 0"),Og.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw kg(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),Og.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw kg(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),Og.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw kg(new Error("invalid accept PX threshold; it must be >= 0"),Og.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw kg(new Error("invalid opportunistic grafting threshold; it must be >= 0"),Og.ERR_INVALID_PEER_SCORE_THRESHOLDS)}zc.validatePeerScoreThresholds=gLe});var Yre=g(Rl=>{f();"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.ensureTopicStats=Rl.createTopicStats=Rl.createPeerStats=void 0;function mLe(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=KR(i),e),{}):{}})}Rl.createPeerStats=mLe;function KR(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}Rl.createTopicStats=KR;function bLe(t,e,r){let i=e.topics[t];if(i)return i;if(!!r.topics[t])return e.topics[t]=i=KR(),i}Rl.ensureTopicStats=bLe});var Xre=g(G5=>{f();"use strict";Object.defineProperty(G5,"__esModule",{value:!0});G5.computeScore=void 0;function wLe(t,e,r,i){let n=0;return Object.entries(e.topics).forEach(([a,c])=>{let u=r.topics[a];if(!u)return;let l=0;if(c.inMesh){let y=c.meshTime/u.timeInMeshQuantum;y>u.timeInMeshCap&&(y=u.timeInMeshCap),l+=y*u.timeInMeshWeight}if(l+=c.firstMessageDeliveries*u.firstMessageDeliveriesWeight,c.meshMessageDeliveriesActive&&c.meshMessageDeliveries<u.meshMessageDeliveriesThreshold){let y=u.meshMessageDeliveriesThreshold-c.meshMessageDeliveries;l+=y*y*u.meshMessageDeliveriesWeight}l+=c.meshFailurePenalty*u.meshFailurePenaltyWeight,l+=c.invalidMessageDeliveries*c.invalidMessageDeliveries*u.invalidMessageDeliveriesWeight,n+=l*u.topicWeight}),r.topicScoreCap>0&&n>r.topicScoreCap&&(n=r.topicScoreCap),n+=r.appSpecificScore(t)*r.appSpecificWeight,e.ips.forEach(a=>{if(r.IPColocationFactorWhitelist.has(a))return;let c=i.get(a),u=c?c.size:0;if(u>r.IPColocationFactorThreshold){let l=u-r.IPColocationFactorThreshold;n+=l*l*r.IPColocationFactorWeight}}),n+=e.behaviourPenalty*e.behaviourPenalty*r.behaviourPenaltyWeight,n}G5.computeScore=wLe});var Zre=g((r8t,Qre)=>{f();"use strict";function Ur(t,e){var e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}Ur.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};Ur.prototype.get=function(e){return this.peekAt(e)};Ur.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Ur.prototype.peekFront=function(){return this.peek()};Ur.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Ur.prototype,"length",{get:function(){return this.size()}});Ur.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Ur.prototype.unshift=function(e){if(e===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Ur.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Ur.prototype.push=function(e){if(e===void 0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Ur.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),i}};Ur.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(e<i/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(o=i-1-e;o>0;o--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};Ur.prototype.remove=function(e,r){var i=e,n,s=r;if(i===(i|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(i>=o||i<-o||r<1)){if(i<0&&(i+=o),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=o)return n=this.toArray(),this.clear(),n;i+r>o&&(r=o-i);var c;for(n=new Array(r),c=0;c<r;c++)n[c]=this._list[this._head+i+c&this._capacityMask];if(i=this._head+i&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,c=r;c>0;c--)this._list[i=i+1+a&this._capacityMask]=void 0;return n}if(e===0){for(this._head=this._head+r+a&this._capacityMask,c=r-1;c>0;c--)this._list[i=i+1+a&this._capacityMask]=void 0;return n}if(i<o/2){for(this._head=this._head+e+r+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[i=i-1+a&this._capacityMask]);for(i=this._head-1+a&this._capacityMask;s>0;)this._list[i=i-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+a&this._capacityMask,c=o-(r+e);c>0;c--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}};Ur.prototype.splice=function(e,r){var i=e;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,o,a,c=arguments.length,u=this._list.length,l=2;if(!n||i<n/2){for(o=new Array(i),s=0;s<i;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(a=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);c>l;)this.unshift(arguments[--c]);for(s=i;s>0;s--)this.unshift(o[s-1])}else{o=new Array(n-(i+r));var h=o.length;for(s=0;s<h;s++)o[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(a=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(a=this.remove(i,r),this._tail=this._tail-h+u&this._capacityMask);l<c;)this.push(arguments[l++]);for(s=0;s<h;s++)this.push(o[s])}return a}else return this.remove(i,r)}};Ur.prototype.clear=function(){this._head=0,this._tail=0};Ur.prototype.isEmpty=function(){return this._head===this._tail};Ur.prototype.toArray=function(){return this._copyArray(!1)};Ur.prototype._fromArray=function(e){for(var r=0;r<e.length;r++)this.push(e[r])};Ur.prototype._copyArray=function(e){var r=[],i=this._list,n=i.length,s;if(e||this._head>this._tail){for(s=this._head;s<n;s++)r.push(i[s]);for(s=0;s<this._tail;s++)r.push(i[s])}else for(s=this._head;s<this._tail;s++)r.push(i[s]);return r};Ur.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};Ur.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};Qre.exports=Ur});var tie=g(Hc=>{f();"use strict";var _Le=Hc&&Hc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.MessageDeliveries=Hc.DeliveryRecordStatus=void 0;var vLe=_h(),ELe=_Le(Zre()),SLe=vh(),Jre;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(Jre=Hc.DeliveryRecordStatus||(Hc.DeliveryRecordStatus={}));var eie=class{constructor(){this.records=new Map,this.queue=new ELe.default}ensureRecord(e){let r=SLe.messageIdToString(e),i=this.records.get(r);if(i)return i;i={status:Jre.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(r,i);let n={msgId:r,expire:Date.now()+vLe.TimeCacheDuration};return this.queue.push(n),i}gc(){let e=Date.now(),r=this.queue.peekFront();for(;r&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};Hc.MessageDeliveries=eie});var iie=g(Il=>{f();"use strict";var W5=Il&&Il.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(i.next(l))}catch(h){o(h)}}function c(l){try{u(i.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):n(l.value).then(a,c)}u((i=i.apply(t,e||[])).next())})},ALe=Il&&Il.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Il,"__esModule",{value:!0});Il.PeerScore=void 0;var xLe=FR(),S0=Yre(),RLe=Xre(),Fo=tie(),ILe=_h(),TLe=ALe(Je()),PLe=ce(),CLe=N5(),{ERR_INVALID_SIGNATURE:OLe,ERR_MISSING_SIGNATURE:kLe}=CLe.codes,A0=PLe("libp2p:gossipsub:score"),rie=class{constructor(e,r,i){xLe.validatePeerScoreParams(e),this.params=e,this._connectionManager=r,this.peerStats=new Map,this.peerIPs=new Map,this.deliveryRecords=new Fo.MessageDeliveries,this.msgId=i}start(){if(this._backgroundInterval){A0("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),A0("started")}stop(){if(!this._backgroundInterval){A0("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),A0("stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){let e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((i,n)=>{if(!i.connected){e>i.expire&&(this._removeIPs(n,i.ips),this.peerStats.delete(n));return}Object.entries(i.topics).forEach(([s,o])=>{let a=this.params.topics[s];!a||(o.firstMessageDeliveries*=a.firstMessageDeliveriesDecay,o.firstMessageDeliveries<r&&(o.firstMessageDeliveries=0),o.meshMessageDeliveries*=a.meshMessageDeliveriesDecay,o.meshMessageDeliveries<r&&(o.meshMessageDeliveries=0),o.meshFailurePenalty*=a.meshFailurePenaltyDecay,o.meshFailurePenalty<r&&(o.meshFailurePenalty=0),o.invalidMessageDeliveries*=a.invalidMessageDeliveriesDecay,o.invalidMessageDeliveries<r&&(o.invalidMessageDeliveries=0),o.inMesh&&(o.meshTime=e-o.graftTime,o.meshTime>a.meshMessageDeliveriesActivation&&(o.meshMessageDeliveriesActive=!0)))}),i.behaviourPenalty*=this.params.behaviourPenaltyDecay,i.behaviourPenalty<r&&(i.behaviourPenalty=0)})}score(e){let r=this.peerStats.get(e);return r?RLe.computeScore(e,r,this.params,this.peerIPs):0}addPenalty(e,r){let i=this.peerStats.get(e);!i||(i.behaviourPenalty+=r)}addPeer(e){let r=S0.createPeerStats({connected:!0});this.peerStats.set(e,r);let i=this._getIPs(e);this._setIPs(e,i,r.ips),r.ips=i}removePeer(e){let r=this.peerStats.get(e);if(!!r){if(this.score(e)>0){this._removeIPs(e,r.ips),this.peerStats.delete(e);return}Object.entries(r.topics).forEach(([i,n])=>{n.firstMessageDeliveries=0;let s=this.params.topics[i].meshMessageDeliveriesThreshold;if(n.inMesh&&n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let o=s-n.meshMessageDeliveries;n.meshFailurePenalty+=o*o}n.inMesh=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){let i=this.peerStats.get(e);if(!i)return;let n=S0.ensureTopicStats(r,i,this.params);!n||(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}prune(e,r){let i=this.peerStats.get(e);if(!i)return;let n=S0.ensureTopicStats(r,i,this.params);if(!n)return;let s=this.params.topics[r].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let o=s-n.meshMessageDeliveries;n.meshFailurePenalty+=o*o}n.inMesh=!1}validateMessage(e){return W5(this,void 0,void 0,function*(){this.deliveryRecords.ensureRecord(yield this.msgId(e))})}deliverMessage(e){return W5(this,void 0,void 0,function*(){let r=e.receivedFrom;this._markFirstMessageDelivery(r,e);let i=this.deliveryRecords.ensureRecord(yield this.msgId(e)),n=Date.now();if(i.status!==Fo.DeliveryRecordStatus.unknown){A0("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",r,n-i.firstSeen,Fo.DeliveryRecordStatus[i.status]);return}i.status=Fo.DeliveryRecordStatus.valid,i.validated=n,i.peers.forEach(s=>{s!==r&&this._markDuplicateMessageDelivery(s,e)})})}rejectMessage(e,r){return W5(this,void 0,void 0,function*(){let i=e.receivedFrom;switch(r){case kLe:case OLe:this._markInvalidMessageDelivery(i,e);return}let n=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(n.status!==Fo.DeliveryRecordStatus.unknown){A0("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",i,Date.now()-n.firstSeen,Fo.DeliveryRecordStatus[n.status]);return}switch(r){case ILe.ERR_TOPIC_VALIDATOR_IGNORE:n.status=Fo.DeliveryRecordStatus.ignored;return}n.status=Fo.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(i,e),n.peers.forEach(s=>{this._markInvalidMessageDelivery(s,e)})})}duplicateMessage(e){return W5(this,void 0,void 0,function*(){let r=e.receivedFrom,i=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(!i.peers.has(r))switch(i.status){case Fo.DeliveryRecordStatus.unknown:i.peers.add(r);break;case Fo.DeliveryRecordStatus.valid:i.peers.add(r),this._markDuplicateMessageDelivery(r,e,i.validated);break;case Fo.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(r,e);break}})}_markInvalidMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=S0.ensureTopicStats(n,i,this.params);!s||(s.invalidMessageDeliveries+=1)})}_markFirstMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=S0.ensureTopicStats(n,i,this.params);if(!s)return;let o=this.params.topics[n].firstMessageDeliveriesCap;s.firstMessageDeliveries+=1,s.firstMessageDeliveries>o&&(s.firstMessageDeliveries=o),!!s.inMesh&&(o=this.params.topics[n].meshMessageDeliveriesCap,s.meshMessageDeliveries+=1,s.meshMessageDeliveries>o&&(s.meshMessageDeliveries=o))})}_markDuplicateMessageDelivery(e,r,i=0){let n=this.peerStats.get(e);if(!n)return;let s=i?Date.now():0;r.topicIDs.forEach(o=>{let a=S0.ensureTopicStats(o,n,this.params);if(!a||!a.inMesh)return;let c=this.params.topics[o];if(i&&s>i+c.meshMessageDeliveriesWindow)return;let u=c.meshMessageDeliveriesCap;a.meshMessageDeliveries+=1,a.meshMessageDeliveries>u&&(a.meshMessageDeliveries=u)})}_getIPs(e){return this._connectionManager.getAll(TLe.default.createFromB58String(e)).map(r=>r.remoteAddr.toOptions().host)}_setIPs(e,r,i){e:for(let n of r){for(let o of i)if(n===o)continue e;let s=this.peerIPs.get(n);s||(s=new Set,this.peerIPs.set(n,s)),s.add(e)}e:for(let n of i){for(let o of r)if(n===o)continue e;let s=this.peerIPs.get(n);!s||(s.delete(e),s.size||this.peerIPs.delete(n))}}_removeIPs(e,r){r.forEach(i=>{let n=this.peerIPs.get(i);!n||(n.delete(e),n.size||this.peerIPs.delete(i))})}_updateIPs(){this.peerStats.forEach((e,r)=>{let i=this._getIPs(r);this._setIPs(r,i,e.ips),e.ips=i})}};Il.PeerScore=rie});var nie=g($c=>{f();"use strict";var DLe=$c&&$c.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),VR=$c&&$c.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&DLe(e,t,r)};Object.defineProperty($c,"__esModule",{value:!0});VR(FR(),$c);VR(Wre(),$c);VR(iie(),$c)});var aie=g(x0=>{f();"use strict";var sie=x0&&x0.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(i.next(l))}catch(h){o(h)}}function c(l){try{u(i.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):n(l.value).then(a,c)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(x0,"__esModule",{value:!0});x0.IWantTracer=void 0;var NLe=_h(),zR=vh(),BLe=N5(),{ERR_INVALID_SIGNATURE:LLe,ERR_MISSING_SIGNATURE:MLe}=BLe.codes,oie=class{constructor(e){this.getMsgId=e,this.promises=new Map}addPromise(e,r){let i=Math.floor(Math.random()*r.length),n=r[i],s=zR.messageIdToString(n),o=this.promises.get(s);o||(o=new Map,this.promises.set(s,o)),o.has(e)||o.set(e,Date.now()+NLe.GossipsubIWantFollowupTime)}getBrokenPromises(){let e=Date.now(),r=new Map;return this.promises.forEach((i,n)=>{i.forEach((s,o)=>{s<e&&(r.set(o,(r.get(o)||0)+1),i.delete(o))}),i.size||this.promises.delete(n)}),r}deliverMessage(e){return sie(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=zR.messageIdToString(r);this.promises.delete(i)})}rejectMessage(e,r){return sie(this,void 0,void 0,function*(){switch(r){case LLe:case MLe:return}let i=yield this.getMsgId(e),n=zR.messageIdToString(i);this.promises.delete(n)})}clear(){this.promises.clear()}};x0.IWantTracer=oie});var hie=g((a8t,fie)=>{f();var cie="Expected a function",uie=0/0,jLe="[object Symbol]",qLe=/^\s+|\s+$/g,ULe=/^[-+]0x[0-9a-f]+$/i,FLe=/^0b[01]+$/i,KLe=/^0o[0-7]+$/i,VLe=parseInt,zLe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,HLe=typeof self=="object"&&self&&self.Object===Object&&self,$Le=zLe||HLe||Function("return this")(),GLe=Object.prototype,WLe=GLe.toString,YLe=Math.max,XLe=Math.min,HR=function(){return $Le.Date.now()};function QLe(t,e,r){var i,n,s,o,a,c,u=0,l=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(cie);e=lie(e)||0,Y5(r)&&(l=!!r.leading,h="maxWait"in r,s=h?YLe(lie(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d);function p(R){var N=i,F=n;return i=n=void 0,u=R,o=t.apply(F,N),o}function y(R){return u=R,a=setTimeout(b,e),l?p(R):o}function m(R){var N=R-c,F=R-u,U=e-N;return h?XLe(U,s-F):U}function w(R){var N=R-c,F=R-u;return c===void 0||N>=e||N<0||h&&F>=s}function b(){var R=HR();if(w(R))return v(R);a=setTimeout(b,m(R))}function v(R){return a=void 0,d&&i?p(R):(i=n=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,i=c=n=a=void 0}function B(){return a===void 0?o:v(HR())}function O(){var R=HR(),N=w(R);if(i=arguments,n=this,c=R,N){if(a===void 0)return y(c);if(h)return a=setTimeout(b,e),p(c)}return a===void 0&&(a=setTimeout(b,e)),o}return O.cancel=x,O.flush=B,O}function ZLe(t,e,r){var i=!0,n=!0;if(typeof t!="function")throw new TypeError(cie);return Y5(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),QLe(t,e,{leading:i,maxWait:e,trailing:n})}function Y5(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function JLe(t){return!!t&&typeof t=="object"}function eMe(t){return typeof t=="symbol"||JLe(t)&&WLe.call(t)==jLe}function lie(t){if(typeof t=="number")return t;if(eMe(t))return uie;if(Y5(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Y5(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(qLe,"");var r=FLe.test(t);return r||KLe.test(t)?VLe(t.slice(2),r?2:8):ULe.test(t)?uie:+t}fie.exports=ZLe});var yie=g((die,pie)=>{f();"use strict";var tMe=hie();die=pie.exports=$R;function $R(t){if(!(this instanceof $R))return new $R(t);t=t||{};let e=t.validity||30,r=new Map,i=tMe(()=>{r.forEach((n,s)=>{let o=n.validity||e;rMe(n.timestamp)>o&&r.delete(s)})},200);this.put=(n,s,o)=>{this.has(n)||r.set(n,{value:s,timestamp:new Date,validity:o}),i()},this.get=n=>{if(r.has(n))return r.get(n).value;throw new Error("key does not exist")},this.has=n=>r.has(n)}function rMe(t){let r=new Date().getTime()-t.getTime();return Math.floor(r/1e3)}});var ur=g((c8t,mie)=>{f();"use strict";function gie(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function iMe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return gie(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),gie(new n,r)}}mie.exports=iMe});var lr=g(GR=>{f();"use strict";GR.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"};GR.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}});var _ie=g((l8t,wie)=>{f();"use strict";var R0=Si(),bie=R0.Reader,nMe=R0.Writer,Cr=R0.util,Dg=R0.roots["libp2p-envelope"]||(R0.roots["libp2p-envelope"]={});Dg.Envelope=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.publicKey=Cr.newBuffer([]),t.prototype.payloadType=Cr.newBuffer([]),t.prototype.payload=Cr.newBuffer([]),t.prototype.signature=Cr.newBuffer([]),t.encode=function(r,i){return i||(i=nMe.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&i.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&i.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(42).bytes(r.signature),i},t.decode=function(r,i){r instanceof bie||(r=bie.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Dg.Envelope;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Dg.Envelope)return r;var i=new Dg.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?Cr.base64.decode(r.publicKey,i.publicKey=Cr.newBuffer(Cr.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?Cr.base64.decode(r.payloadType,i.payloadType=Cr.newBuffer(Cr.base64.length(r.payloadType)),0):r.payloadType.length&&(i.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?Cr.base64.decode(r.payload,i.payload=Cr.newBuffer(Cr.base64.length(r.payload)),0):r.payload.length&&(i.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?Cr.base64.decode(r.signature,i.signature=Cr.newBuffer(Cr.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=Cr.newBuffer(n.publicKey))),i.bytes===String?n.payloadType="":(n.payloadType=[],i.bytes!==Array&&(n.payloadType=Cr.newBuffer(n.payloadType))),i.bytes===String?n.payload="":(n.payload=[],i.bytes!==Array&&(n.payload=Cr.newBuffer(n.payload))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=Cr.newBuffer(n.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?Cr.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(n.payloadType=i.bytes===String?Cr.base64.encode(r.payloadType,0,r.payloadType.length):i.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(n.payload=i.bytes===String?Cr.base64.encode(r.payload,0,r.payload.length):i.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?Cr.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,R0.util.toJSONOptions)},t}();wie.exports=Dg});var Ng=g((f8t,Sie)=>{f();"use strict";var sMe=ur(),{concat:oMe}=(Wi(),As),{fromString:aMe}=(ht(),ri),cMe=L4(),uMe=Je(),WR=Cn(),{equals:X5}=(qi(),Zn),{codes:lMe}=lr(),{Envelope:vie}=_ie(),Tl=class{constructor({peerId:e,payloadType:r,payload:i,signature:n}){this.peerId=e,this.payloadType=r,this.payload=i,this.signature=n,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;let e=cMe.marshalPublicKey(this.peerId.pubKey);return this._marshal=vie.encode({publicKey:e,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(e){return X5(this.peerId.pubKey.bytes,e.peerId.pubKey.bytes)&&X5(this.payloadType,e.payloadType)&&X5(this.payload,e.payload)&&X5(this.signature,e.signature)}validate(e){let r=Eie(e,this.payloadType,this.payload);return this.peerId.pubKey.verify(r,this.signature)}},Eie=(t,e,r)=>{let i=aMe(t),n=WR.encode(i.byteLength),s=WR.encode(e.length),o=WR.encode(r.length);return oMe([new Uint8Array(n),i,new Uint8Array(s),e,new Uint8Array(o),r])};Tl.createFromProtobuf=async t=>{let e=vie.decode(t),r=await uMe.createFromPubKey(e.publicKey);return new Tl({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})};Tl.seal=async(t,e)=>{let r=t.domain,i=t.codec,n=t.marshal(),s=Eie(r,i,n),o=await e.privKey.sign(s);return new Tl({peerId:e,payloadType:i,payload:n,signature:o})};Tl.openAndCertify=async(t,e)=>{let r=await Tl.createFromProtobuf(t);if(!await r.validate(e))throw sMe(new Error("envelope signature is not valid for the given domain"),lMe.ERR_SIGNATURE_NOT_VALID);return r};Sie.exports=Tl});var eI=g((Gc,xie)=>{f();"use strict";var fMe=Gc&&Gc.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),hMe=Gc&&Gc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Aie=Gc&&Gc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fMe(e,t,r);return hMe(e,t),e},I0=Gc&&Gc.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{u(i.next(l))}catch(h){o(h)}}function c(l){try{u(i.throw(l))}catch(h){o(h)}}function u(l){l.done?s(l.value):n(l.value).then(a,c)}u((i=i.apply(t,e||[])).next())})},YR=Aie(Ore()),dMe=jre(),XR=Ure(),Tt=Aie(_h()),pMe=Vre(),Q5=MR(),Oi=vh(),QR=nie(),yMe=aie(),gMe=yie(),ZR=Je(),mMe=Ng(),JR=class extends YR.default{constructor(e,r={}){let i=[Tt.GossipsubIDv11,Tt.GossipsubIDv10],n=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:Tt.GossipsubD,Dlo:Tt.GossipsubDlo,Dhi:Tt.GossipsubDhi,Dscore:Tt.GossipsubDscore,Dout:Tt.GossipsubDout,Dlazy:Tt.GossipsubDlazy,heartbeatInterval:Tt.GossipsubHeartbeatInterval,fanoutTTL:Tt.GossipsubFanoutTTL,mcacheLength:Tt.GossipsubHistoryLength,mcacheGossip:Tt.GossipsubHistoryGossip,seenTTL:Tt.GossipsubSeenTTL},r),{scoreParams:QR.createPeerScoreParams(r.scoreParams),scoreThresholds:QR.createPeerScoreThresholds(r.scoreThresholds)});n.fallbackToFloodsub&&i.push(Tt.FloodsubID);super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:i,libp2p:e},n));this._options=n,this.direct=new Set(n.directPeers.map(s=>s.id.toB58String())),n.directPeers.forEach(s=>{e.peerStore.addressBook.add(s.id,s.addrs)}),this.seenCache=new gMe({validity:n.seenTTL/1e3}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=r.messageCache||new dMe.MessageCache(n.mcacheGossip,n.mcacheLength,this.getMsgId.bind(this)),this.heartbeat=new pMe.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new yMe.IWantTracer(this.getMsgId.bind(this)),this._libp2p=e,this.score=new QR.PeerScore(this._options.scoreParams,e.connectionManager,this.getMsgId.bind(this))}_decodeRpc(e){return XR.RPC.decode(e)}_encodeRpc(e){return XR.RPC.encode(e).finish()}_addPeer(e,r){let i=super._addPeer(e,r);this.score.addPeer(e.toB58String());let n=!1;for(let s of this._libp2p.connectionManager.getAll(e))if(s.stat.direction==="outbound"&&Array.from(s.registry.values()).some(o=>r===o.protocol)){n=!0;break}return this.outbound.set(i.id.toB58String(),n),i}_removePeer(e){let r=super._removePeer(e),i=e.toB58String();for(let n of this.mesh.values())n.delete(i);for(let n of this.fanout.values())n.delete(i);return this.gossip.delete(i),this.control.delete(i),this.outbound.delete(i),this.score.removePeer(i),r}_processRpc(e,r,i){let n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return I0(this,void 0,void 0,function*(){return(yield n._processRpc.call(this,e,r,i))?(i.control&&this._processRpcControlMessage(e,i.control),!0):!1})}_processRpcControlMessage(e,r){if(!r)return;let i=r.ihave?this._handleIHave(e,r.ihave):[],n=r.iwant?this._handleIWant(e,r.iwant):[],s=r.graft?this._handleGraft(e,r.graft):[];if(r.prune&&this._handlePrune(e,r.prune),!i.length&&!n.length&&!s.length)return;let o=Oi.createGossipRpc(n,{iwant:i,prune:s});this._sendRpc(e,o)}_processRpcMessage(e){let r=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return I0(this,void 0,void 0,function*(){let i=yield this.getMsgId(e),n=Oi.messageIdToString(i);if(this.seenCache.has(n)){this.score.duplicateMessage(e);return}this.seenCache.put(n),yield this.score.validateMessage(e),yield r._processRpcMessage.call(this,e)})}_acceptFrom(e){return this.direct.has(e)||this.score.score(e)>=this._options.scoreThresholds.graylistThreshold}validate(e){let r=Object.create(null,{validate:{get:()=>super.validate}});return I0(this,void 0,void 0,function*(){try{yield r.validate.call(this,e)}catch(i){throw this.score.rejectMessage(e,i.code),this.gossipTracer.rejectMessage(e,i.code),i}})}_handleIHave(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),[];let n=(this.peerhave.get(e)||0)+1;if(this.peerhave.set(e,n),n>Tt.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),[];let s=this.iasked.get(e)||0;if(s>=Tt.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),[];let o=new Map;if(r.forEach(({topicID:u,messageIDs:l})=>{!u||!l||!this.mesh.has(u)||l.forEach(h=>{let d=Oi.messageIdToString(h);this.seenCache.has(d)||o.set(d,h)})}),!o.size)return[];let a=o.size;a+s>Tt.GossipsubMaxIHaveLength&&(a=Tt.GossipsubMaxIHaveLength-s),this.log("IHAVE: Asking for %d out of %d messages from %s",a,o.size,e);let c=Array.from(o.values());return Oi.shuffle(c),c=c.slice(0,a),this.iasked.set(e,s+a),this.gossipTracer.addPromise(e,c),[{messageIDs:c}]}_handleIWant(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,i),[];let n=new Map;return r.forEach(({messageIDs:s})=>{s&&s.forEach(o=>{let[a,c]=this.messageCache.getForPeer(o,e);if(!!a){if(c>Tt.GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,o);return}n.set(Oi.messageIdToString(o),a)}})}),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values()).map(YR.utils.normalizeOutRpcMessage)):[]}_handleGraft(e,r){let i=[],n=this.score.score(e),s=this._now(),o=this._options.doPX;return r.forEach(({topicID:a})=>{var c;if(!a)return;let u=this.mesh.get(a);if(!u){o=!1;return}if(u.has(e))return;if(this.direct.has(e)){this.log("GRAFT: ignoring request from direct peer %s",e),i.push(a),o=!1;return}let l=(c=this.backoff.get(a))===null||c===void 0?void 0:c.get(e);if(typeof l=="number"&&s<l){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1),o=!1;let h=l+Tt.GossipsubGraftFloodThreshold-Tt.GossipsubPruneBackoff;s<h&&this.score.addPenalty(e,1),this._addBackoff(e,a),i.push(a);return}if(n<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,a),i.push(a),o=!1,this._addBackoff(e,a);return}if(u.size>=this._options.Dhi&&!this.outbound.get(e)){i.push(a),this._addBackoff(e,a);return}this.log("GRAFT: Add mesh link from %s in %s",e,a),this.score.graft(e,a),u.add(e)}),i.length?i.map(a=>this._makePrune(e,a,o)):[]}_handlePrune(e,r){let i=this.score.score(e);r.forEach(({topicID:n,backoff:s,peers:o})=>{if(!n)return;let a=this.mesh.get(n);if(!!a&&(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),a.delete(e),typeof s=="number"&&s>0?this._doAddBackoff(e,n,s*1e3):this._addBackoff(e,n),o&&o.length)){if(i<this._options.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,i,n);return}this._pxConnect(o)}})}_addBackoff(e,r){this._doAddBackoff(e,r,Tt.GossipsubPruneBackoff)}_doAddBackoff(e,r,i){let n=this.backoff.get(r);n||(n=new Map,this.backoff.set(r,n));let s=this._now()+i;(n.get(e)||0)<s&&n.set(e,s)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e)})}_clearBackoff(){if(this.heartbeatTicks%Tt.GossipsubPruneBackoffTicks!=0)return;let e=this._now();this.backoff.forEach((r,i)=>{r.forEach((n,s)=>{n<e&&r.delete(s)}),r.size===0&&this.backoff.delete(i)})}_directConnect(){if(this.heartbeatTicks%Tt.GossipsubDirectConnectTicks!=0)return;let e=[];this.direct.forEach(r=>{let i=this.peers.get(r);(!i||!i.isWritable)&&e.push(r)}),e.length&&e.forEach(r=>{this._connect(r)})}_pxConnect(e){return I0(this,void 0,void 0,function*(){e.length>Tt.GossipsubPrunePeers&&(Oi.shuffle(e),e=e.slice(0,Tt.GossipsubPrunePeers));let r=[];yield Promise.all(e.map(i=>I0(this,void 0,void 0,function*(){if(!i.peerID)return;let s=ZR.createFromBytes(i.peerID).toB58String();if(!this.peers.has(s)){if(!i.signedPeerRecord){r.push(s);return}try{let o=yield mMe.openAndCertify(i.signedPeerRecord,"libp2p-peer-record"),a=o.peerId.toB58String();if(s!==a){this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",a,s);return}if(!this._libp2p.peerStore.addressBook.consumePeerRecord(o)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch(o){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}}))),!!r.length&&r.forEach(i=>this._connect(i))})}start(){super.start(),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout(()=>{this.direct.forEach(e=>{this._connect(e)})},Tt.GossipsubDirectConnectInitialDelay)}stop(){super.stop(),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),clearTimeout(this._directPeerInitial)}_connect(e){this.log("Initiating connection with %s",e),this._libp2p.dialProtocol(ZR.createFromB58String(e),this.multicodecs)}subscribe(e){super.subscribe(e),this.join(e)}unsubscribe(e){super.unsubscribe(e),this.leave(e)}join(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",e);let r=this.fanout.get(e);if(r)r.forEach(i=>{this.score.score(i)<0&&r.delete(i)}),r.size<this._options.D&&Q5.getGossipPeers(this,e,this._options.D-r.size,i=>!r.has(i)&&!this.direct.has(i)&&this.score.score(i)>=0).forEach(i=>r.add(i)),this.mesh.set(e,r),this.fanout.delete(e),this.lastpub.delete(e);else{let i=Q5.getGossipPeers(this,e,this._options.D,n=>!this.direct.has(n)&&this.score.score(n)>=0);this.mesh.set(e,i)}this.mesh.get(e).forEach(i=>{this.log("JOIN: Add mesh link to %s in %s",i,e),this._sendGraft(i,e)})}leave(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e);let r=this.mesh.get(e);r&&(r.forEach(i=>{this.log("LEAVE: Remove mesh link to %s in %s",i,e),this._sendPrune(i,e)}),this.mesh.delete(e))}_publish(e){return I0(this,void 0,void 0,function*(){e.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(e),this.gossipTracer.deliverMessage(e));let r=yield this.getMsgId(e),i=Oi.messageIdToString(r);this.seenCache.put(i),this.messageCache.put(e);let n=new Set;e.topicIDs.forEach(o=>{let a=this.topics.get(o);if(!!a)if(this._options.floodPublish&&e.from===this.peerId.toB58String())a.forEach(c=>{(this.direct.has(c)||this.score.score(c)>=this._options.scoreThresholds.publishThreshold)&&n.add(c)});else{this.direct.forEach(u=>{n.add(u)}),a.forEach(u=>{let l=this.score.score(u),h=this.peers.get(u);!h||h.protocol===Tt.FloodsubID&&l>=this._options.scoreThresholds.publishThreshold&&n.add(u)});let c=this.mesh.get(o);if(!c||!c.size){if(c=this.fanout.get(o),!c){let u=Q5.getGossipPeers(this,o,this._options.D,l=>this.score.score(l)>=this._options.scoreThresholds.publishThreshold);u.size>0?(c=u,this.fanout.set(o,u)):c=new Set}this.lastpub.set(o,this._now())}c.forEach(u=>{n.add(u)})}});let s=Oi.createGossipRpc([YR.utils.normalizeOutRpcMessage(e)]);n.forEach(o=>{o!==e.from&&this._sendRpc(o,s)})})}_sendGraft(e,r){let i=[{topicID:r}],n=Oi.createGossipRpc([],{graft:i});this._sendRpc(e,n)}_sendPrune(e,r){let i=[this._makePrune(e,r,this._options.doPX)],n=Oi.createGossipRpc([],{prune:i});this._sendRpc(e,n)}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable)return;let n=this.control.get(e);n&&(this._piggybackControl(e,r,n),this.control.delete(e));let s=this.gossip.get(e);s&&(this._piggybackGossip(e,r,s),this.gossip.delete(e)),i.write(XR.RPC.encode(r).finish())}_piggybackControl(e,r,i){let n=(i.graft||[]).filter(({topicID:o})=>(o&&this.mesh.get(o)||new Set).has(e)),s=(i.prune||[]).filter(({topicID:o})=>!(o&&this.mesh.get(o)||new Set).has(e));!n.length&&!s.length||(r.control?(r.control.graft=r.control.graft&&r.control.graft.concat(n),r.control.prune=r.control.prune&&r.control.prune.concat(s)):r.control={ihave:[],iwant:[],graft:n,prune:s})}_piggybackGossip(e,r,i){r.control||(r.control={ihave:[],iwant:[],graft:[],prune:[]}),r.control.ihave=i}_sendGraftPrune(e,r,i){let n=this._options.doPX;for(let[s,o]of e){let a=o.map(h=>({topicID:h})),c=[],u=r.get(s);u&&(c=u.map(h=>this._makePrune(s,h,n&&!i.get(s))),r.delete(s));let l=Oi.createGossipRpc([],{graft:a,prune:c});this._sendRpc(s,l)}for(let[s,o]of r){let a=o.map(u=>this._makePrune(s,u,n&&!i.get(s))),c=Oi.createGossipRpc([],{prune:a});this._sendRpc(s,c)}}_emitGossip(e,r){let i=this.messageCache.getGossipIDs(e);if(!i.length)return;Oi.shuffle(i),i.length>Tt.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",i.length);let n=[],s=this.topics.get(e);if(!s)return;s.forEach(c=>{let u=this.peers.get(c);!u||!r.has(c)&&!this.direct.has(c)&&Oi.hasGossipProtocol(u.protocol)&&this.score.score(c)>=this._options.scoreThresholds.gossipThreshold&&n.push(c)});let o=this._options.Dlazy,a=Tt.GossipsubGossipFactor*n.length;a>o&&(o=a),o>n.length?o=n.length:Oi.shuffle(n),n.slice(0,o).forEach(c=>{let u=i;i.length>Tt.GossipsubMaxIHaveLength&&(u=Oi.shuffle(u.slice()).slice(0,Tt.GossipsubMaxIHaveLength)),this._pushGossip(c,{topicID:e,messageIDs:u})})}_flush(){for(let[e,r]of this.gossip.entries()){this.gossip.delete(e);let i=Oi.createGossipRpc([],{ihave:r});this._sendRpc(e,i)}for(let[e,r]of this.control.entries()){this.control.delete(e);let i=Oi.createGossipRpc([],{graft:r.graft,prune:r.prune});this._sendRpc(e,i)}}_pushGossip(e,r){this.log("Add gossip to %s",e);let i=this.gossip.get(e)||[];this.gossip.set(e,i.concat(r))}_now(){return Date.now()}_makePrune(e,r,i){if(this.peers.get(e).protocol===Tt.GossipsubIDv10)return{topicID:r,peers:[]};let n=Tt.GossipsubPruneBackoff/1e3,s=[];return i&&Q5.getGossipPeers(this,r,Tt.GossipsubPrunePeers,a=>a!==e&&this.score.score(a)>=0).forEach(a=>{let c=ZR.createFromB58String(a);s.push({peerID:c.toBytes(),signedPeerRecord:this._libp2p.peerStore.addressBook.getRawEnvelope(c)})}),{topicID:r,peers:s,backoff:n}}};JR.multicodec=Tt.GossipsubIDv11;xie.exports=JR});var Die=g((d8t,kie)=>{f();"use strict";var Iie=Je(),{base58btc:bMe}=(Yr(),mo),{default:wMe}=So(),Tie=xa(),Pie=ce(),Pl=Pie("libp2p-delegated-peer-routing");Pl.error=Pie("libp2p-delegated-peer-routing:error");var Cie=3e4,_Me=4,Oie=class{constructor(e){if(e==null)throw new Error("missing ipfs http client");this._client=e,this._httpQueue=new wMe({concurrency:_Me});let{protocol:r,host:i,port:n}=e.getEndpointConfig();Pl(`enabled DelegatedPeerRouting via ${r}://${i}:${n}`)}async findPeer(e,r={}){let i=e;Iie.isPeerId(i)&&(i=e.toB58String()),Pl("findPeer starts: "+e),r.timeout=r.timeout||Cie;try{return await this._httpQueue.add(async()=>{let{addrs:n}=await this._client.dht.findPeer(i,{timeout:r.timeout});return{id:e,multiaddrs:n}})}catch(n){if(n.message.includes("not found"))return;throw n}finally{Pl("findPeer finished: "+e)}}async*getClosestPeers(e,r={}){let i=bMe.encode(e).substring(1);Pl("getClosestPeers starts:",i),r.timeout=r.timeout||Cie;let n=Tie(),s=Tie();this._httpQueue.add(()=>(n.resolve(),s.promise));try{await n.promise;for await(let o of this._client.dht.query(i,{timeout:r.timeout}))switch(o.type){case 1:for(let a of o.responses)yield{id:Iie.parse(a.id),multiaddrs:a.addrs};break;default:Pl("getClosestPeers unhandled response",o)}}catch(o){throw Pl.error("getClosestPeers errored:",o),o}finally{s.resolve(),Pl("getClosestPeers finished:",i)}}};kie.exports=Oie});var qie=g((p8t,jie)=>{f();"use strict";var Nie=ce(),vMe=Je(),EMe=Ln(),{default:Bie}=So(),Lie=xa(),Eh=Nie("libp2p-delegated-content-routing");Eh.error=Nie("libp2p-delegated-content-routing:error");var SMe=3e4,AMe=4,Mie=class{constructor(e,r){if(e==null)throw new Error("missing self peerId");if(r==null)throw new Error("missing ipfs http client");this._client=r,this.peerId=e;let i={concurrency:AMe};this._httpQueue=new Bie(i),this._httpQueueRefs=new Bie(Object.assign({},i,{concurrency:2}));let{protocol:n,host:s,port:o}=r.getEndpointConfig();Eh(`enabled DelegatedContentRouting via ${n}://${s}:${o}`)}async*findProviders(e,r={}){Eh(`findProviders starts: ${e}`),r.timeout=r.timeout||SMe;let i=0,n=Lie(),s=Lie();this._httpQueue.add(()=>(n.resolve(),s.promise));try{await n.promise;for await(let{id:o,addrs:a}of this._client.dht.findProvs(e,{numProviders:r.numProviders,timeout:r.timeout}))yield{id:vMe.parse(o),multiaddrs:a},i++}catch(o){throw Eh.error("findProviders errored:",o),o}finally{s.resolve(),Eh(`findProviders finished: ${e} found ${i} providers`)}}async provide(e){Eh(`provide starts: ${e}`),await this._httpQueueRefs.add(async()=>{await this._client.block.stat(e),await EMe(this._client.dht.provide(e))}),Eh(`provide finished: ${e}`)}};jie.exports=Mie});var xh=g((P8t,Gie)=>{f();"use strict";function $ie(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function LMe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return $ie(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),$ie(new n,r)}}Gie.exports=LMe});var Ug=g((C7t,gse)=>{f();gse.exports=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){let e=t.getReader();try{for(;;){let{done:r,value:i}=await e.read();if(r)return;yield i}}finally{e.releaseLock()}}();throw new Error("unknown stream")}});var aI=g(()=>{f()});var cI=g((gIt,gae)=>{f();"use strict";var QMe=Vd(),ZMe=(t,e)=>({path:decodeURIComponent(new URL(t).pathname.split("/").pop()||""),content:JMe(t,e)});async function*JMe(t,e){yield*(await new QMe().get(t,e)).iterator()}gae.exports=ZMe});var bae=g(()=>{f()});var _ae=g((oTt,wae)=>{f();wae.exports=typeof WebSocket=="undefined"?bae():WebSocket});var Eae=g(h8=>{f();"use strict";Object.defineProperty(h8,"__esModule",{value:!0});var vae=class{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;let r={value:e,done:!1};if(this.pullQueue.length){let i=this.pullQueue.shift();i&&i.resolve(r)}else this.pushQueue.push(Promise.resolve(r)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(let e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(let r of this.pullQueue)r.reject(e);this.pullQueue.length=0}else{let r=Promise.reject(e);r.catch(()=>{}),this.pushQueue.push(r)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{let r=this.pushQueue.shift();return r?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),r):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((i,n)=>{this.pullQueue.push({resolve:i,reject:n})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}},uI=class{constructor(e,{highWaterMark:r=100,lowWaterMark:i=1}={}){let n=new vae;n.highWaterMark=r,n.lowWaterMark=i,n.removeCallback=e({push:s=>n.push(s),stop:()=>n.stop(),fail:s=>n.fail(s),on:(s,o)=>{n.eventHandlers[s]=o}})||(()=>{}),this[Symbol.asyncIterator]=()=>n[Symbol.asyncIterator](),Object.freeze(this)}};h8.EventIterator=uI;h8.default=uI});var Sae=g(Fg=>{f();"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});var lI=Eae();Fg.EventIterator=lI.EventIterator;function ije(t,e,r){return new lI.EventIterator(({push:i})=>(this.addEventListener(t,i,e),()=>this.removeEventListener(t,i,e)),r)}Fg.subscribe=ije;Fg.default=lI.EventIterator});var xae=g((uTt,Aae)=>{f();var{Buffer:nje}=Gt(),{EventIterator:sje}=Sae();function oje(t){return t instanceof ArrayBuffer||t!=null&&t.constructor!=null&&t.constructor.name==="ArrayBuffer"&&typeof t.byteLength=="number"}Aae.exports=t=>{let e=t.removeEventListener||t.removeListener,r=async function*(){let s=new sje(({push:o,stop:a,fail:c})=>(t.addEventListener("message",o),t.addEventListener("error",c),t.addEventListener("close",a),()=>{e.call(t,"message",o),e.call(t,"error",c),e.call(t,"close",a)}),{highWaterMark:1/0});for await(let{data:o}of s)yield oje(o)?nje.from(o):o}(),i=t.readyState===1,n;return t.addEventListener("open",()=>{i=!0,n=null}),t.addEventListener("close",()=>{i=!1,n=null}),t.addEventListener("error",s=>{i||(n=s)}),r.connected=()=>new Promise((s,o)=>{if(i)return s();if(n)return o(n);let a=l=>{e.call(t,"open",c),e.call(t,"error",u),l()},c=()=>a(s),u=l=>a(()=>o(l));t.addEventListener("open",c),t.addEventListener("error",u)}),r}});var Iae=g((lTt,Rae)=>{f();Rae.exports=async t=>{if(t.readyState>=2)throw new Error("socket closed");if(t.readyState!==1)return new Promise((e,r)=>{let i=t&&(t.removeEventListener||t.removeListener);function n(){typeof i=="function"&&(i.call(t,"open",s),i.call(t,"error",o))}function s(){n(),e()}function o(a){n(),r(a)}t.addEventListener("open",s),t.addEventListener("error",o)})}});var Pae=g((fTt,Tae)=>{f();var aje=Iae();Tae.exports=(t,e)=>(e=e||{},e.closeOnEnd=e.closeOnEnd!==!1,async r=>{for await(let i of r){try{await aje(t)}catch(n){if(n.message==="socket closed")break;throw n}t.send(i)}if(e.closeOnEnd&&t.readyState<=1)return new Promise((i,n)=>{t.addEventListener("close",s=>{if(s.wasClean||s.code===1006)i();else{let o=Object.assign(new Error("ws error"),{event:s});n(o)}}),setTimeout(()=>t.close())})})});var Oae=g((hTt,Cae)=>{f();var cje=xae(),uje=Pae();Cae.exports=(t,e)=>{e=e||{},e.binaryType?t.binaryType=e.binaryType:e.binary&&(t.binaryType="arraybuffer");let r={sink:uje(t,e),source:cje(t,e),connected:()=>r.source.connected()};return r}});var Dae=g((dTt,kae)=>{f();var{relative:lje}=q3(),fje={http:"ws",https:"wss"},hje="ws";kae.exports=(t,e)=>lje(t,e,fje,hje)});var Nae=g((pTt,d8)=>{f();"use strict";var dje=_ae(),pje=Oae(),yje=Dae();d8.exports=function(t,e={}){let r=typeof window=="undefined"?{}:window.location,i=yje(t,r),n=new dje(i,e.websocket),s=pje(n,e);return s.remoteAddress=i,s.close=()=>new Promise((o,a)=>{n.addEventListener("close",o),n.close()}),s.destroy=()=>{n.terminate?n.terminate():n.close()},s.socket=n,s};d8.exports.connect=d8.exports});var Lae=g((yTt,Bae)=>{f();"use strict";Bae.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}});var fI=g(Rh=>{f();"use strict";Rh.CODE_P2P=421;Rh.CODE_CIRCUIT=290;Rh.CODE_TCP=6;Rh.CODE_WS=477;Rh.CODE_WSS=478;Rh.CLOSE_TIMEOUT=2e3});var qae=g((mTt,jae)=>{f();"use strict";function Mae(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function gje(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Mae(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Mae(new n,r)}}jae.exports=gje});var hI=g(C0=>{f();"use strict";Object.defineProperty(C0,"__esModule",{value:!0});C0.isCorrect=C0.isInSubnet=void 0;function mje(t){return this.subnetMask<t.subnetMask?!1:this.mask(t.subnetMask)===t.mask()}C0.isInSubnet=mje;function bje(t){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===t&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}C0.isCorrect=bje});var dI=g(Ha=>{f();"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.RE_SUBNET_STRING=Ha.RE_ADDRESS=Ha.GROUPS=Ha.BITS=void 0;Ha.BITS=32;Ha.GROUPS=4;Ha.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;Ha.RE_SUBNET_STRING=/\/\d{1,2}$/});var p8=g(O0=>{f();"use strict";var wje=O0&&O0.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(O0,"__esModule",{value:!0});O0.AddressError=void 0;var _je=function(t){wje(e,t);function e(r,i){var n=t.call(this,r)||this;return n.name="AddressError",i!==null&&(n.parseMessage=i),n}return e}(Error);O0.AddressError=_je});var pI=g((y8,Uae)=>{f();(function(){var t,e=244837814094590,r=(e&16777215)==15715070;function i(_,E,C){_!=null&&(typeof _=="number"?this.fromNumber(_,E,C):E==null&&typeof _!="string"?this.fromString(_,256):this.fromString(_,E))}function n(){return new i(null)}function s(_,E,C,W,oe,de){for(;--de>=0;){var Pe=E*this[_++]+C[W]+oe;oe=Math.floor(Pe/67108864),C[W++]=Pe&67108863}return oe}function o(_,E,C,W,oe,de){for(var Pe=E&32767,Le=E>>15;--de>=0;){var wr=this[_]&32767,_i=this[_++]>>15,ds=Le*wr+_i*Pe;wr=Pe*wr+((ds&32767)<<15)+C[W]+(oe&1073741823),oe=(wr>>>30)+(ds>>>15)+Le*_i+(oe>>>30),C[W++]=wr&1073741823}return oe}function a(_,E,C,W,oe,de){for(var Pe=E&16383,Le=E>>14;--de>=0;){var wr=this[_]&16383,_i=this[_++]>>14,ds=Le*wr+_i*Pe;wr=Pe*wr+((ds&16383)<<14)+C[W]+oe,oe=(wr>>28)+(ds>>14)+Le*_i,C[W++]=wr&268435455}return oe}var c=typeof navigator!="undefined";c&&r&&navigator.appName=="Microsoft Internet Explorer"?(i.prototype.am=o,t=30):c&&r&&navigator.appName!="Netscape"?(i.prototype.am=s,t=26):(i.prototype.am=a,t=28),i.prototype.DB=t,i.prototype.DM=(1<<t)-1,i.prototype.DV=1<<t;var u=52;i.prototype.FV=Math.pow(2,u),i.prototype.F1=u-t,i.prototype.F2=2*t-u;var l="0123456789abcdefghijklmnopqrstuvwxyz",h=new Array,d,p;for(d="0".charCodeAt(0),p=0;p<=9;++p)h[d++]=p;for(d="a".charCodeAt(0),p=10;p<36;++p)h[d++]=p;for(d="A".charCodeAt(0),p=10;p<36;++p)h[d++]=p;function y(_){return l.charAt(_)}function m(_,E){var C=h[_.charCodeAt(E)];return C??-1}function w(_){for(var E=this.t-1;E>=0;--E)_[E]=this[E];_.t=this.t,_.s=this.s}function b(_){this.t=1,this.s=_<0?-1:0,_>0?this[0]=_:_<-1?this[0]=_+this.DV:this.t=0}function v(_){var E=n();return E.fromInt(_),E}function x(_,E){var C;if(E==16)C=4;else if(E==8)C=3;else if(E==256)C=8;else if(E==2)C=1;else if(E==32)C=5;else if(E==4)C=2;else{this.fromRadix(_,E);return}this.t=0,this.s=0;for(var W=_.length,oe=!1,de=0;--W>=0;){var Pe=C==8?_[W]&255:m(_,W);if(Pe<0){_.charAt(W)=="-"&&(oe=!0);continue}oe=!1,de==0?this[this.t++]=Pe:de+C>this.DB?(this[this.t-1]|=(Pe&(1<<this.DB-de)-1)<<de,this[this.t++]=Pe>>this.DB-de):this[this.t-1]|=Pe<<de,de+=C,de>=this.DB&&(de-=this.DB)}C==8&&(_[0]&128)!=0&&(this.s=-1,de>0&&(this[this.t-1]|=(1<<this.DB-de)-1<<de)),this.clamp(),oe&&i.ZERO.subTo(this,this)}function B(){for(var _=this.s&this.DM;this.t>0&&this[this.t-1]==_;)--this.t}function O(_){if(this.s<0)return"-"+this.negate().toString(_);var E;if(_==16)E=4;else if(_==8)E=3;else if(_==2)E=1;else if(_==32)E=5;else if(_==4)E=2;else return this.toRadix(_);var C=(1<<E)-1,W,oe=!1,de="",Pe=this.t,Le=this.DB-Pe*this.DB%E;if(Pe-- >0)for(Le<this.DB&&(W=this[Pe]>>Le)>0&&(oe=!0,de=y(W));Pe>=0;)Le<E?(W=(this[Pe]&(1<<Le)-1)<<E-Le,W|=this[--Pe]>>(Le+=this.DB-E)):(W=this[Pe]>>(Le-=E)&C,Le<=0&&(Le+=this.DB,--Pe)),W>0&&(oe=!0),oe&&(de+=y(W));return oe?de:"0"}function R(){var _=n();return i.ZERO.subTo(this,_),_}function N(){return this.s<0?this.negate():this}function F(_){var E=this.s-_.s;if(E!=0)return E;var C=this.t;if(E=C-_.t,E!=0)return this.s<0?-E:E;for(;--C>=0;)if((E=this[C]-_[C])!=0)return E;return 0}function U(_){var E=1,C;return(C=_>>>16)!=0&&(_=C,E+=16),(C=_>>8)!=0&&(_=C,E+=8),(C=_>>4)!=0&&(_=C,E+=4),(C=_>>2)!=0&&(_=C,E+=2),(C=_>>1)!=0&&(_=C,E+=1),E}function ie(){return this.t<=0?0:this.DB*(this.t-1)+U(this[this.t-1]^this.s&this.DM)}function te(_,E){var C;for(C=this.t-1;C>=0;--C)E[C+_]=this[C];for(C=_-1;C>=0;--C)E[C]=0;E.t=this.t+_,E.s=this.s}function ae(_,E){for(var C=_;C<this.t;++C)E[C-_]=this[C];E.t=Math.max(this.t-_,0),E.s=this.s}function ue(_,E){var C=_%this.DB,W=this.DB-C,oe=(1<<W)-1,de=Math.floor(_/this.DB),Pe=this.s<<C&this.DM,Le;for(Le=this.t-1;Le>=0;--Le)E[Le+de+1]=this[Le]>>W|Pe,Pe=(this[Le]&oe)<<C;for(Le=de-1;Le>=0;--Le)E[Le]=0;E[de]=Pe,E.t=this.t+de+1,E.s=this.s,E.clamp()}function De(_,E){E.s=this.s;var C=Math.floor(_/this.DB);if(C>=this.t){E.t=0;return}var W=_%this.DB,oe=this.DB-W,de=(1<<W)-1;E[0]=this[C]>>W;for(var Pe=C+1;Pe<this.t;++Pe)E[Pe-C-1]|=(this[Pe]&de)<<oe,E[Pe-C]=this[Pe]>>W;W>0&&(E[this.t-C-1]|=(this.s&de)<<oe),E.t=this.t-C,E.clamp()}function ve(_,E){for(var C=0,W=0,oe=Math.min(_.t,this.t);C<oe;)W+=this[C]-_[C],E[C++]=W&this.DM,W>>=this.DB;if(_.t<this.t){for(W-=_.s;C<this.t;)W+=this[C],E[C++]=W&this.DM,W>>=this.DB;W+=this.s}else{for(W+=this.s;C<_.t;)W-=_[C],E[C++]=W&this.DM,W>>=this.DB;W-=_.s}E.s=W<0?-1:0,W<-1?E[C++]=this.DV+W:W>0&&(E[C++]=W),E.t=C,E.clamp()}function Ne(_,E){var C=this.abs(),W=_.abs(),oe=C.t;for(E.t=oe+W.t;--oe>=0;)E[oe]=0;for(oe=0;oe<W.t;++oe)E[oe+C.t]=C.am(0,W[oe],E,oe,0,C.t);E.s=0,E.clamp(),this.s!=_.s&&i.ZERO.subTo(E,E)}function ee(_){for(var E=this.abs(),C=_.t=2*E.t;--C>=0;)_[C]=0;for(C=0;C<E.t-1;++C){var W=E.am(C,E[C],_,2*C,0,1);(_[C+E.t]+=E.am(C+1,2*E[C],_,2*C+1,W,E.t-C-1))>=E.DV&&(_[C+E.t]-=E.DV,_[C+E.t+1]=1)}_.t>0&&(_[_.t-1]+=E.am(C,E[C],_,2*C,0,1)),_.s=0,_.clamp()}function Me(_,E,C){var W=_.abs();if(!(W.t<=0)){var oe=this.abs();if(oe.t<W.t){E!=null&&E.fromInt(0),C!=null&&this.copyTo(C);return}C==null&&(C=n());var de=n(),Pe=this.s,Le=_.s,wr=this.DB-U(W[W.t-1]);wr>0?(W.lShiftTo(wr,de),oe.lShiftTo(wr,C)):(W.copyTo(de),oe.copyTo(C));var _i=de.t,ds=de[_i-1];if(ds!=0){var Hn=ds*(1<<this.F1)+(_i>1?de[_i-2]>>this.F2:0),oc=this.FV/Hn,Hm=(1<<this.F1)/Hn,ho=1<<this.F2,po=C.t,$m=po-_i,fu=E??n();for(de.dlShiftTo($m,fu),C.compareTo(fu)>=0&&(C[C.t++]=1,C.subTo(fu,C)),i.ONE.dlShiftTo(_i,fu),fu.subTo(de,de);de.t<_i;)de[de.t++]=0;for(;--$m>=0;){var w_=C[--po]==ds?this.DM:Math.floor(C[po]*oc+(C[po-1]+ho)*Hm);if((C[po]+=de.am(0,w_,C,$m,0,_i))<w_)for(de.dlShiftTo($m,fu),C.subTo(fu,C);C[po]<--w_;)C.subTo(fu,C)}E!=null&&(C.drShiftTo(_i,E),Pe!=Le&&i.ZERO.subTo(E,E)),C.t=_i,C.clamp(),wr>0&&C.rShiftTo(wr,C),Pe<0&&i.ZERO.subTo(C,C)}}}function dt(_){var E=n();return this.abs().divRemTo(_,null,E),this.s<0&&E.compareTo(i.ZERO)>0&&_.subTo(E,E),E}function ze(_){this.m=_}function $e(_){return _.s<0||_.compareTo(this.m)>=0?_.mod(this.m):_}function le(_){return _}function Z(_){_.divRemTo(this.m,null,_)}function we(_,E,C){_.multiplyTo(E,C),this.reduce(C)}function je(_,E){_.squareTo(E),this.reduce(E)}ze.prototype.convert=$e,ze.prototype.revert=le,ze.prototype.reduce=Z,ze.prototype.mulTo=we,ze.prototype.sqrTo=je;function Ue(){if(this.t<1)return 0;var _=this[0];if((_&1)==0)return 0;var E=_&3;return E=E*(2-(_&15)*E)&15,E=E*(2-(_&255)*E)&255,E=E*(2-((_&65535)*E&65535))&65535,E=E*(2-_*E%this.DV)%this.DV,E>0?this.DV-E:-E}function Re(_){this.m=_,this.mp=_.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<_.DB-15)-1,this.mt2=2*_.t}function rt(_){var E=n();return _.abs().dlShiftTo(this.m.t,E),E.divRemTo(this.m,null,E),_.s<0&&E.compareTo(i.ZERO)>0&&this.m.subTo(E,E),E}function P(_){var E=n();return _.copyTo(E),this.reduce(E),E}function k(_){for(;_.t<=this.mt2;)_[_.t++]=0;for(var E=0;E<this.m.t;++E){var C=_[E]&32767,W=C*this.mpl+((C*this.mph+(_[E]>>15)*this.mpl&this.um)<<15)&_.DM;for(C=E+this.m.t,_[C]+=this.m.am(0,W,_,E,0,this.m.t);_[C]>=_.DV;)_[C]-=_.DV,_[++C]++}_.clamp(),_.drShiftTo(this.m.t,_),_.compareTo(this.m)>=0&&_.subTo(this.m,_)}function L(_,E){_.squareTo(E),this.reduce(E)}function I(_,E,C){_.multiplyTo(E,C),this.reduce(C)}Re.prototype.convert=rt,Re.prototype.revert=P,Re.prototype.reduce=k,Re.prototype.mulTo=I,Re.prototype.sqrTo=L;function T(){return(this.t>0?this[0]&1:this.s)==0}function D(_,E){if(_>4294967295||_<1)return i.ONE;var C=n(),W=n(),oe=E.convert(this),de=U(_)-1;for(oe.copyTo(C);--de>=0;)if(E.sqrTo(C,W),(_&1<<de)>0)E.mulTo(W,oe,C);else{var Pe=C;C=W,W=Pe}return E.revert(C)}function M(_,E){var C;return _<256||E.isEven()?C=new ze(E):C=new Re(E),this.exp(_,C)}i.prototype.copyTo=w,i.prototype.fromInt=b,i.prototype.fromString=x,i.prototype.clamp=B,i.prototype.dlShiftTo=te,i.prototype.drShiftTo=ae,i.prototype.lShiftTo=ue,i.prototype.rShiftTo=De,i.prototype.subTo=ve,i.prototype.multiplyTo=Ne,i.prototype.squareTo=ee,i.prototype.divRemTo=Me,i.prototype.invDigit=Ue,i.prototype.isEven=T,i.prototype.exp=D,i.prototype.toString=O,i.prototype.negate=R,i.prototype.abs=N,i.prototype.compareTo=F,i.prototype.bitLength=ie,i.prototype.mod=dt,i.prototype.modPowInt=M,i.ZERO=v(0),i.ONE=v(1);function j(){var _=n();return this.copyTo(_),_}function V(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function G(){return this.t==0?this.s:this[0]<<24>>24}function X(){return this.t==0?this.s:this[0]<<16>>16}function re(_){return Math.floor(Math.LN2*this.DB/Math.log(_))}function me(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Ee(_){if(_==null&&(_=10),this.signum()==0||_<2||_>36)return"0";var E=this.chunkSize(_),C=Math.pow(_,E),W=v(C),oe=n(),de=n(),Pe="";for(this.divRemTo(W,oe,de);oe.signum()>0;)Pe=(C+de.intValue()).toString(_).substr(1)+Pe,oe.divRemTo(W,oe,de);return de.intValue().toString(_)+Pe}function ke(_,E){this.fromInt(0),E==null&&(E=10);for(var C=this.chunkSize(E),W=Math.pow(E,C),oe=!1,de=0,Pe=0,Le=0;Le<_.length;++Le){var wr=m(_,Le);if(wr<0){_.charAt(Le)=="-"&&this.signum()==0&&(oe=!0);continue}Pe=E*Pe+wr,++de>=C&&(this.dMultiply(W),this.dAddOffset(Pe,0),de=0,Pe=0)}de>0&&(this.dMultiply(Math.pow(E,de)),this.dAddOffset(Pe,0)),oe&&i.ZERO.subTo(this,this)}function it(_,E,C){if(typeof E=="number")if(_<2)this.fromInt(1);else for(this.fromNumber(_,C),this.testBit(_-1)||this.bitwiseTo(i.ONE.shiftLeft(_-1),xn,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(E);)this.dAddOffset(2,0),this.bitLength()>_&&this.subTo(i.ONE.shiftLeft(_-1),this);else{var W=new Array,oe=_&7;W.length=(_>>3)+1,E.nextBytes(W),oe>0?W[0]&=(1<<oe)-1:W[0]=0,this.fromString(W,256)}}function $t(){var _=this.t,E=new Array;E[0]=this.s;var C=this.DB-_*this.DB%8,W,oe=0;if(_-- >0)for(C<this.DB&&(W=this[_]>>C)!=(this.s&this.DM)>>C&&(E[oe++]=W|this.s<<this.DB-C);_>=0;)C<8?(W=(this[_]&(1<<C)-1)<<8-C,W|=this[--_]>>(C+=this.DB-8)):(W=this[_]>>(C-=8)&255,C<=0&&(C+=this.DB,--_)),(W&128)!=0&&(W|=-256),oe==0&&(this.s&128)!=(W&128)&&++oe,(oe>0||W!=this.s)&&(E[oe++]=W);return E}function ot(_){return this.compareTo(_)==0}function Ge(_){return this.compareTo(_)<0?this:_}function et(_){return this.compareTo(_)>0?this:_}function lu(_,E,C){var W,oe,de=Math.min(_.t,this.t);for(W=0;W<de;++W)C[W]=E(this[W],_[W]);if(_.t<this.t){for(oe=_.s&this.DM,W=de;W<this.t;++W)C[W]=E(this[W],oe);C.t=this.t}else{for(oe=this.s&this.DM,W=de;W<_.t;++W)C[W]=E(oe,_[W]);C.t=_.t}C.s=E(this.s,_.s),C.clamp()}function M1(_,E){return _&E}function j1(_){var E=n();return this.bitwiseTo(_,M1,E),E}function xn(_,E){return _|E}function Yl(_){var E=n();return this.bitwiseTo(_,xn,E),E}function an(_,E){return _^E}function Bi(_){var E=n();return this.bitwiseTo(_,an,E),E}function br(_,E){return _&~E}function A4e(_){var E=n();return this.bitwiseTo(_,br,E),E}function x4e(){for(var _=n(),E=0;E<this.t;++E)_[E]=this.DM&~this[E];return _.t=this.t,_.s=~this.s,_}function R4e(_){var E=n();return _<0?this.rShiftTo(-_,E):this.lShiftTo(_,E),E}function I4e(_){var E=n();return _<0?this.lShiftTo(-_,E):this.rShiftTo(_,E),E}function T4e(_){if(_==0)return-1;var E=0;return(_&65535)==0&&(_>>=16,E+=16),(_&255)==0&&(_>>=8,E+=8),(_&15)==0&&(_>>=4,E+=4),(_&3)==0&&(_>>=2,E+=2),(_&1)==0&&++E,E}function P4e(){for(var _=0;_<this.t;++_)if(this[_]!=0)return _*this.DB+T4e(this[_]);return this.s<0?this.t*this.DB:-1}function C4e(_){for(var E=0;_!=0;)_&=_-1,++E;return E}function O4e(){for(var _=0,E=this.s&this.DM,C=0;C<this.t;++C)_+=C4e(this[C]^E);return _}function k4e(_){var E=Math.floor(_/this.DB);return E>=this.t?this.s!=0:(this[E]&1<<_%this.DB)!=0}function D4e(_,E){var C=i.ONE.shiftLeft(_);return this.bitwiseTo(C,E,C),C}function N4e(_){return this.changeBit(_,xn)}function B4e(_){return this.changeBit(_,br)}function L4e(_){return this.changeBit(_,an)}function M4e(_,E){for(var C=0,W=0,oe=Math.min(_.t,this.t);C<oe;)W+=this[C]+_[C],E[C++]=W&this.DM,W>>=this.DB;if(_.t<this.t){for(W+=_.s;C<this.t;)W+=this[C],E[C++]=W&this.DM,W>>=this.DB;W+=this.s}else{for(W+=this.s;C<_.t;)W+=_[C],E[C++]=W&this.DM,W>>=this.DB;W+=_.s}E.s=W<0?-1:0,W>0?E[C++]=W:W<-1&&(E[C++]=this.DV+W),E.t=C,E.clamp()}function j4e(_){var E=n();return this.addTo(_,E),E}function q4e(_){var E=n();return this.subTo(_,E),E}function U4e(_){var E=n();return this.multiplyTo(_,E),E}function F4e(){var _=n();return this.squareTo(_),_}function K4e(_){var E=n();return this.divRemTo(_,E,null),E}function V4e(_){var E=n();return this.divRemTo(_,null,E),E}function z4e(_){var E=n(),C=n();return this.divRemTo(_,E,C),new Array(E,C)}function H4e(_){this[this.t]=this.am(0,_-1,this,0,0,this.t),++this.t,this.clamp()}function $4e(_,E){if(_!=0){for(;this.t<=E;)this[this.t++]=0;for(this[E]+=_;this[E]>=this.DV;)this[E]-=this.DV,++E>=this.t&&(this[this.t++]=0),++this[E]}}function q1(){}function UC(_){return _}function G4e(_,E,C){_.multiplyTo(E,C)}function W4e(_,E){_.squareTo(E)}q1.prototype.convert=UC,q1.prototype.revert=UC,q1.prototype.mulTo=G4e,q1.prototype.sqrTo=W4e;function Y4e(_){return this.exp(_,new q1)}function X4e(_,E,C){var W=Math.min(this.t+_.t,E);for(C.s=0,C.t=W;W>0;)C[--W]=0;var oe;for(oe=C.t-this.t;W<oe;++W)C[W+this.t]=this.am(0,_[W],C,W,0,this.t);for(oe=Math.min(_.t,E);W<oe;++W)this.am(0,_[W],C,W,0,E-W);C.clamp()}function Q4e(_,E,C){--E;var W=C.t=this.t+_.t-E;for(C.s=0;--W>=0;)C[W]=0;for(W=Math.max(E-this.t,0);W<_.t;++W)C[this.t+W-E]=this.am(E-W,_[W],C,0,0,this.t+W-E);C.clamp(),C.drShiftTo(1,C)}function Xl(_){this.r2=n(),this.q3=n(),i.ONE.dlShiftTo(2*_.t,this.r2),this.mu=this.r2.divide(_),this.m=_}function Z4e(_){if(_.s<0||_.t>2*this.m.t)return _.mod(this.m);if(_.compareTo(this.m)<0)return _;var E=n();return _.copyTo(E),this.reduce(E),E}function J4e(_){return _}function e6e(_){for(_.drShiftTo(this.m.t-1,this.r2),_.t>this.m.t+1&&(_.t=this.m.t+1,_.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);_.compareTo(this.r2)<0;)_.dAddOffset(1,this.m.t+1);for(_.subTo(this.r2,_);_.compareTo(this.m)>=0;)_.subTo(this.m,_)}function t6e(_,E){_.squareTo(E),this.reduce(E)}function r6e(_,E,C){_.multiplyTo(E,C),this.reduce(C)}Xl.prototype.convert=Z4e,Xl.prototype.revert=J4e,Xl.prototype.reduce=e6e,Xl.prototype.mulTo=r6e,Xl.prototype.sqrTo=t6e;function i6e(_,E){var C=_.bitLength(),W,oe=v(1),de;if(C<=0)return oe;C<18?W=1:C<48?W=3:C<144?W=4:C<768?W=5:W=6,C<8?de=new ze(E):E.isEven()?de=new Xl(E):de=new Re(E);var Pe=new Array,Le=3,wr=W-1,_i=(1<<W)-1;if(Pe[1]=de.convert(this),W>1){var ds=n();for(de.sqrTo(Pe[1],ds);Le<=_i;)Pe[Le]=n(),de.mulTo(ds,Pe[Le-2],Pe[Le]),Le+=2}var Hn=_.t-1,oc,Hm=!0,ho=n(),po;for(C=U(_[Hn])-1;Hn>=0;){for(C>=wr?oc=_[Hn]>>C-wr&_i:(oc=(_[Hn]&(1<<C+1)-1)<<wr-C,Hn>0&&(oc|=_[Hn-1]>>this.DB+C-wr)),Le=W;(oc&1)==0;)oc>>=1,--Le;if((C-=Le)<0&&(C+=this.DB,--Hn),Hm)Pe[oc].copyTo(oe),Hm=!1;else{for(;Le>1;)de.sqrTo(oe,ho),de.sqrTo(ho,oe),Le-=2;Le>0?de.sqrTo(oe,ho):(po=oe,oe=ho,ho=po),de.mulTo(ho,Pe[oc],oe)}for(;Hn>=0&&(_[Hn]&1<<C)==0;)de.sqrTo(oe,ho),po=oe,oe=ho,ho=po,--C<0&&(C=this.DB-1,--Hn)}return de.revert(oe)}function n6e(_){var E=this.s<0?this.negate():this.clone(),C=_.s<0?_.negate():_.clone();if(E.compareTo(C)<0){var W=E;E=C,C=W}var oe=E.getLowestSetBit(),de=C.getLowestSetBit();if(de<0)return E;for(oe<de&&(de=oe),de>0&&(E.rShiftTo(de,E),C.rShiftTo(de,C));E.signum()>0;)(oe=E.getLowestSetBit())>0&&E.rShiftTo(oe,E),(oe=C.getLowestSetBit())>0&&C.rShiftTo(oe,C),E.compareTo(C)>=0?(E.subTo(C,E),E.rShiftTo(1,E)):(C.subTo(E,C),C.rShiftTo(1,C));return de>0&&C.lShiftTo(de,C),C}function s6e(_){if(_<=0)return 0;var E=this.DV%_,C=this.s<0?_-1:0;if(this.t>0)if(E==0)C=this[0]%_;else for(var W=this.t-1;W>=0;--W)C=(E*C+this[W])%_;return C}function o6e(_){var E=_.isEven();if(this.isEven()&&E||_.signum()==0)return i.ZERO;for(var C=_.clone(),W=this.clone(),oe=v(1),de=v(0),Pe=v(0),Le=v(1);C.signum()!=0;){for(;C.isEven();)C.rShiftTo(1,C),E?((!oe.isEven()||!de.isEven())&&(oe.addTo(this,oe),de.subTo(_,de)),oe.rShiftTo(1,oe)):de.isEven()||de.subTo(_,de),de.rShiftTo(1,de);for(;W.isEven();)W.rShiftTo(1,W),E?((!Pe.isEven()||!Le.isEven())&&(Pe.addTo(this,Pe),Le.subTo(_,Le)),Pe.rShiftTo(1,Pe)):Le.isEven()||Le.subTo(_,Le),Le.rShiftTo(1,Le);C.compareTo(W)>=0?(C.subTo(W,C),E&&oe.subTo(Pe,oe),de.subTo(Le,de)):(W.subTo(C,W),E&&Pe.subTo(oe,Pe),Le.subTo(de,Le))}if(W.compareTo(i.ONE)!=0)return i.ZERO;if(Le.compareTo(_)>=0)return Le.subtract(_);if(Le.signum()<0)Le.addTo(_,Le);else return Le;return Le.signum()<0?Le.add(_):Le}var cn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],a6e=(1<<26)/cn[cn.length-1];function c6e(_){var E,C=this.abs();if(C.t==1&&C[0]<=cn[cn.length-1]){for(E=0;E<cn.length;++E)if(C[0]==cn[E])return!0;return!1}if(C.isEven())return!1;for(E=1;E<cn.length;){for(var W=cn[E],oe=E+1;oe<cn.length&&W<a6e;)W*=cn[oe++];for(W=C.modInt(W);E<oe;)if(W%cn[E++]==0)return!1}return C.millerRabin(_)}function u6e(_){var E=this.subtract(i.ONE),C=E.getLowestSetBit();if(C<=0)return!1;var W=E.shiftRight(C);_=_+1>>1,_>cn.length&&(_=cn.length);for(var oe=n(),de=0;de<_;++de){oe.fromInt(cn[Math.floor(Math.random()*cn.length)]);var Pe=oe.modPow(W,this);if(Pe.compareTo(i.ONE)!=0&&Pe.compareTo(E)!=0){for(var Le=1;Le++<C&&Pe.compareTo(E)!=0;)if(Pe=Pe.modPowInt(2,this),Pe.compareTo(i.ONE)==0)return!1;if(Pe.compareTo(E)!=0)return!1}}return!0}i.prototype.chunkSize=re,i.prototype.toRadix=Ee,i.prototype.fromRadix=ke,i.prototype.fromNumber=it,i.prototype.bitwiseTo=lu,i.prototype.changeBit=D4e,i.prototype.addTo=M4e,i.prototype.dMultiply=H4e,i.prototype.dAddOffset=$4e,i.prototype.multiplyLowerTo=X4e,i.prototype.multiplyUpperTo=Q4e,i.prototype.modInt=s6e,i.prototype.millerRabin=u6e,i.prototype.clone=j,i.prototype.intValue=V,i.prototype.byteValue=G,i.prototype.shortValue=X,i.prototype.signum=me,i.prototype.toByteArray=$t,i.prototype.equals=ot,i.prototype.min=Ge,i.prototype.max=et,i.prototype.and=j1,i.prototype.or=Yl,i.prototype.xor=Bi,i.prototype.andNot=A4e,i.prototype.not=x4e,i.prototype.shiftLeft=R4e,i.prototype.shiftRight=I4e,i.prototype.getLowestSetBit=P4e,i.prototype.bitCount=O4e,i.prototype.testBit=k4e,i.prototype.setBit=N4e,i.prototype.clearBit=B4e,i.prototype.flipBit=L4e,i.prototype.add=j4e,i.prototype.subtract=q4e,i.prototype.multiply=U4e,i.prototype.divide=K4e,i.prototype.remainder=V4e,i.prototype.divideAndRemainder=z4e,i.prototype.modPow=i6e,i.prototype.modInverse=o6e,i.prototype.pow=Y4e,i.prototype.gcd=n6e,i.prototype.isProbablePrime=c6e,i.prototype.square=F4e,i.prototype.Barrett=Xl;var zm,zn,wi;function l6e(_){zn[wi++]^=_&255,zn[wi++]^=_>>8&255,zn[wi++]^=_>>16&255,zn[wi++]^=_>>24&255,wi>=b_&&(wi-=b_)}function FC(){l6e(new Date().getTime())}if(zn==null){zn=new Array,wi=0;var fo;if(typeof window!="undefined"&&window.crypto){if(window.crypto.getRandomValues){var KC=new Uint8Array(32);for(window.crypto.getRandomValues(KC),fo=0;fo<32;++fo)zn[wi++]=KC[fo]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var VC=window.crypto.random(32);for(fo=0;fo<VC.length;++fo)zn[wi++]=VC.charCodeAt(fo)&255}}for(;wi<b_;)fo=Math.floor(65536*Math.random()),zn[wi++]=fo>>>8,zn[wi++]=fo&255;wi=0,FC()}function f6e(){if(zm==null){for(FC(),zm=y6e(),zm.init(zn),wi=0;wi<zn.length;++wi)zn[wi]=0;wi=0}return zm.next()}function h6e(_){var E;for(E=0;E<_.length;++E)_[E]=f6e()}function g_(){}g_.prototype.nextBytes=h6e;function m_(){this.i=0,this.j=0,this.S=new Array}function d6e(_){var E,C,W;for(E=0;E<256;++E)this.S[E]=E;for(C=0,E=0;E<256;++E)C=C+this.S[E]+_[E%_.length]&255,W=this.S[E],this.S[E]=this.S[C],this.S[C]=W;this.i=0,this.j=0}function p6e(){var _;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,_=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=_,this.S[_+this.S[this.i]&255]}m_.prototype.init=d6e,m_.prototype.next=p6e;function y6e(){return new m_}var b_=256;typeof y8!="undefined"?y8=Uae.exports={default:i,BigInteger:i,SecureRandom:g_}:this.jsbn={BigInteger:i,SecureRandom:g_}}).call(y8)});var Kg=g(g8=>{f();(function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(o){return i(s(o),arguments)}function r(o,a){return e.apply(null,[o].concat(a||[]))}function i(o,a){var c=1,u=o.length,l,h="",d,p,y,m,w,b,v,x;for(d=0;d<u;d++)if(typeof o[d]=="string")h+=o[d];else if(typeof o[d]=="object"){if(y=o[d],y.keys)for(l=a[c],p=0;p<y.keys.length;p++){if(l==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[p],y.keys[p-1]));l=l[y.keys[p]]}else y.param_no?l=a[y.param_no]:l=a[c++];if(t.not_type.test(y.type)&&t.not_primitive.test(y.type)&&l instanceof Function&&(l=l()),t.numeric_arg.test(y.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(e("[sprintf] expecting number but found %T",l));switch(t.number.test(y.type)&&(v=l>=0),y.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,y.width?parseInt(y.width):0);break;case"e":l=y.precision?parseFloat(l).toExponential(y.precision):parseFloat(l).toExponential();break;case"f":l=y.precision?parseFloat(l).toFixed(y.precision):parseFloat(l);break;case"g":l=y.precision?String(Number(l.toPrecision(y.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=y.precision?l.substring(0,y.precision):l;break;case"t":l=String(!!l),l=y.precision?l.substring(0,y.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=y.precision?l.substring(0,y.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=y.precision?l.substring(0,y.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}t.json.test(y.type)?h+=l:(t.number.test(y.type)&&(!v||y.sign)?(x=v?"+":"-",l=l.toString().replace(t.sign,"")):x="",w=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",b=y.width-(x+l).length,m=y.width&&b>0?w.repeat(b):"",h+=y.align?x+l+m:w==="0"?x+m+l:m+x+l)}return h}var n=Object.create(null);function s(o){if(n[o])return n[o];for(var a=o,c,u=[],l=0;a;){if((c=t.text.exec(a))!==null)u.push(c[0]);else if((c=t.modulo.exec(a))!==null)u.push("%");else if((c=t.placeholder.exec(a))!==null){if(c[2]){l|=1;var h=[],d=c[2],p=[];if((p=t.key.exec(d))!==null)for(h.push(p[1]);(d=d.substring(p[0].length))!=="";)if((p=t.key_access.exec(d))!==null)h.push(p[1]);else if((p=t.index_access.exec(d))!==null)h.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=h}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(c[0].length)}return n[o]=u}typeof g8!="undefined"&&(g8.sprintf=e,g8.vsprintf=r),typeof window!="undefined"&&(window.sprintf=e,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))})()});var yI=g($a=>{f();"use strict";var vje=$a&&$a.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Eje=$a&&$a.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fae=$a&&$a.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vje(e,t,r);return Eje(e,t),e};Object.defineProperty($a,"__esModule",{value:!0});$a.Address4=void 0;var Kae=Fae(hI()),Ko=Fae(dI()),Vae=p8(),Vg=pI(),k0=Kg(),Sje=function(){function t(e){this.groups=Ko.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=Kae.isCorrect(Ko.BITS),this.isInSubnet=Kae.isInSubnet,this.address=e;var r=Ko.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>Ko.BITS)throw new Vae.AddressError("Invalid subnet mask.");e=e.replace(Ko.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.prototype.parse=function(e){var r=e.split(".");if(!e.match(Ko.RE_ADDRESS))throw new Vae.AddressError("Invalid IPv4 address.");return r},t.prototype.correctForm=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)}).join(".")},t.fromHex=function(e){var r=e.replace(/:/g,"").padStart(8,"0"),i=[],n;for(n=0;n<8;n+=2){var s=r.slice(n,n+2);i.push(parseInt(s,16))}return new t(i.join("."))},t.fromInteger=function(e){return t.fromHex(e.toString(16))},t.fromArpa=function(e){var r=e.replace(/(\.in-addr\.arpa)?\.$/,""),i=r.split(".").reverse().join(".");return new t(i)},t.prototype.toHex=function(){return this.parsedAddress.map(function(e){return k0.sprintf("%02x",parseInt(e,10))}).join(":")},t.prototype.toArray=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)})},t.prototype.toGroup6=function(){var e=[],r;for(r=0;r<Ko.GROUPS;r+=2){var i=k0.sprintf("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));e.push(k0.sprintf("%x",parseInt(i,16)))}return e.join(":")},t.prototype.bigInteger=function(){return new Vg.BigInteger(this.parsedAddress.map(function(e){return k0.sprintf("%02x",parseInt(e,10))}).join(""),16)},t.prototype._startAddress=function(){return new Vg.BigInteger(this.mask()+"0".repeat(Ko.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new Vg.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new Vg.BigInteger(this.mask()+"1".repeat(Ko.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new Vg.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.fromBigInteger=function(e){return t.fromInteger(parseInt(e.toString(),10))},t.prototype.mask=function(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)},t.prototype.getBitsBase2=function(e,r){return this.binaryZeroPad().slice(e,r)},t.prototype.reverseForm=function(e){e||(e={});var r=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?r:k0.sprintf("%s.in-addr.arpa.",r)},t.prototype.isMulticast=function(){return this.isInSubnet(new t("224.0.0.0/4"))},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(Ko.BITS,"0")},t.prototype.groupForV6=function(){var e=this.parsedAddress;return this.address.replace(Ko.RE_ADDRESS,k0.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))},t}();$a.Address4=Sje});var gI=g(Fr=>{f();"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.RE_URL_WITH_PORT=Fr.RE_URL=Fr.RE_ZONE_STRING=Fr.RE_SUBNET_STRING=Fr.RE_BAD_ADDRESS=Fr.RE_BAD_CHARACTERS=Fr.TYPES=Fr.SCOPES=Fr.GROUPS=Fr.BITS=void 0;Fr.BITS=128;Fr.GROUPS=8;Fr.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};Fr.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};Fr.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;Fr.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;Fr.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;Fr.RE_ZONE_STRING=/%.*$/;Fr.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);Fr.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)});var mI=g(Ga=>{f();"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.simpleGroup=Ga.spanLeadingZeroes=Ga.spanAll=Ga.spanAllZeroes=void 0;var zae=Kg();function Hae(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}Ga.spanAllZeroes=Hae;function Aje(t,e){e===void 0&&(e=0);var r=t.split("");return r.map(function(i,n){return zae.sprintf('<span class="digit value-%s position-%d">%s</span>',i,n+e,Hae(i))}).join("")}Ga.spanAll=Aje;function $ae(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function xje(t){var e=t.split(":");return e.map(function(r){return $ae(r)}).join(":")}Ga.spanLeadingZeroes=xje;function Rje(t,e){e===void 0&&(e=0);var r=t.split(":");return r.map(function(i,n){return/group-v4/.test(i)?i:zae.sprintf('<span class="hover-group group-%d">%s</span>',n+e,$ae(i))})}Ga.simpleGroup=Rje});var Gae=g(ki=>{f();"use strict";var Ije=ki&&ki.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Tje=ki&&ki.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Pje=ki&&ki.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Ije(e,t,r);return Tje(e,t),e};Object.defineProperty(ki,"__esModule",{value:!0});ki.possibleElisions=ki.simpleRegularExpression=ki.ADDRESS_BOUNDARY=ki.padGroup=ki.groupPossibilities=void 0;var Cje=Pje(gI()),D0=Kg();function m8(t){return D0.sprintf("(%s)",t.join("|"))}ki.groupPossibilities=m8;function b8(t){return t.length<4?D0.sprintf("0{0,%d}%s",4-t.length,t):t}ki.padGroup=b8;ki.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function Oje(t){var e=[];t.forEach(function(i,n){var s=parseInt(i,16);s===0&&e.push(n)});var r=e.map(function(i){return t.map(function(n,s){if(s===i){var o=s===0||s===Cje.GROUPS-1?":":"";return m8([b8(n),o])}return b8(n)}).join(":")});return r.push(t.map(b8).join(":")),m8(r)}ki.simpleRegularExpression=Oje;function kje(t,e,r){var i=e?"":":",n=r?"":":",s=[];!e&&!r&&s.push("::"),e&&r&&s.push(""),(r&&!e||!r&&e)&&s.push(":"),s.push(D0.sprintf("%s(:0{1,4}){1,%d}",i,t-1)),s.push(D0.sprintf("(0{1,4}:){1,%d}%s",t-1,n)),s.push(D0.sprintf("(0{1,4}:){%d}0{1,4}",t-1));for(var o=1;o<t-1;o++)for(var a=1;a<t-o;a++)s.push(D0.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",a,t-a-o-1));return m8(s)}ki.possibleElisions=kje});var Zae=g(Ys=>{f();"use strict";var Dje=Ys&&Ys.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Nje=Ys&&Ys.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),w8=Ys&&Ys.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Dje(e,t,r);return Nje(e,t),e},Wae=Ys&&Ys.__spreadArray||function(t,e){for(var r=0,i=e.length,n=t.length;r<i;r++,n++)t[n]=e[r];return t};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Address6=void 0;var Yae=w8(hI()),bI=w8(dI()),gr=w8(gI()),wI=w8(mI()),Ih=yI(),Th=Gae(),Wc=p8(),vn=pI(),En=Kg();function _8(t){if(!t)throw new Error("Assertion failed.")}function Bje(t){for(var e=/(\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t}function Lje(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function Mje(t,e){var r=[],i=[],n;for(n=0;n<t.length;n++)n<e[0]?r.push(t[n]):n>e[1]&&i.push(t[n]);return r.concat(["compact"]).concat(i)}function Xae(t){return En.sprintf("%04x",parseInt(t,16))}function Qae(t){return t&255}var jje=function(){function t(e,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=Yae.isInSubnet,this.isCorrect=Yae.isCorrect(gr.BITS),r===void 0?this.groups=gr.GROUPS:this.groups=r,this.address=e;var i=gr.RE_SUBNET_STRING.exec(e);if(i){if(this.parsedSubnet=i[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>gr.BITS)throw new Wc.AddressError("Invalid subnet mask.");e=e.replace(gr.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new Wc.AddressError("Invalid subnet mask.");var n=gr.RE_ZONE_STRING.exec(e);n&&(this.zone=n[0],e=e.replace(gr.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.fromBigInteger=function(e){var r=e.toString(16).padStart(32,"0"),i=[],n;for(n=0;n<gr.GROUPS;n++)i.push(r.slice(n*4,(n+1)*4));return new t(i.join(":"))},t.fromURL=function(e){var r,i=null,n;if(e.indexOf("[")!==-1&&e.indexOf("]:")!==-1){if(n=gr.RE_URL_WITH_PORT.exec(e),n===null)return{error:"failed to parse address with port",address:null,port:null};r=n[1],i=n[2]}else if(e.indexOf("/")!==-1){if(e=e.replace(/^[a-z0-9]+:\/\//,""),n=gr.RE_URL.exec(e),n===null)return{error:"failed to parse address from URL",address:null,port:null};r=n[1]}else r=e;return i?(i=parseInt(i,10),(i<0||i>65536)&&(i=null)):i=null,{address:new t(r),port:i}},t.fromAddress4=function(e){var r=new Ih.Address4(e),i=gr.BITS-(bI.BITS-r.subnetMask);return new t("::ffff:"+r.correctForm()+"/"+i)},t.fromArpa=function(e){var r=e.replace(/(\.ip6\.arpa)?\.$/,""),i=7;if(r.length!==63)throw new Wc.AddressError("Invalid 'ip6.arpa' form.");for(var n=r.split(".").reverse(),s=i;s>0;s--){var o=s*4;n.splice(o,0,":")}return r=n.join(""),new t(r)},t.prototype.microsoftTranscription=function(){return En.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},t.prototype.mask=function(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)},t.prototype.possibleSubnets=function(e){e===void 0&&(e=128);var r=gr.BITS-this.subnetMask,i=Math.abs(e-gr.BITS),n=r-i;return n<0?"0":Bje(new vn.BigInteger("2",10).pow(n).toString(10))},t.prototype._startAddress=function(){return new vn.BigInteger(this.mask()+"0".repeat(gr.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new vn.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new vn.BigInteger(this.mask()+"1".repeat(gr.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new vn.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.prototype.getScope=function(){var e=gr.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&e!=="Link local"&&(e="Global"),e||"Unknown"},t.prototype.getType=function(){for(var e=0,r=Object.keys(gr.TYPES);e<r.length;e++){var i=r[e];if(this.isInSubnet(new t(i)))return gr.TYPES[i]}return"Global unicast"},t.prototype.getBits=function(e,r){return new vn.BigInteger(this.getBitsBase2(e,r),2)},t.prototype.getBitsBase2=function(e,r){return this.binaryZeroPad().slice(e,r)},t.prototype.getBitsBase16=function(e,r){var i=r-e;if(i%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,r).toString(16).padStart(i/4,"0")},t.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,gr.BITS)},t.prototype.reverseForm=function(e){e||(e={});var r=Math.floor(this.subnetMask/4),i=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?e.omitSuffix?i:En.sprintf("%s.ip6.arpa.",i):e.omitSuffix?"":"ip6.arpa."},t.prototype.correctForm=function(){var e,r=[],i=0,n=[];for(e=0;e<this.parsedAddress.length;e++){var s=parseInt(this.parsedAddress[e],16);s===0&&i++,s!==0&&i>0&&(i>1&&n.push([e-i,e-1]),i=0)}i>1&&n.push([this.parsedAddress.length-i,this.parsedAddress.length-1]);var o=n.map(function(u){return u[1]-u[0]+1});if(n.length>0){var a=o.indexOf(Math.max.apply(Math,o));r=Mje(this.parsedAddress,n[a])}else r=this.parsedAddress;for(e=0;e<r.length;e++)r[e]!=="compact"&&(r[e]=parseInt(r[e],16).toString(16));var c=r.join(":");return c=c.replace(/^compact$/,"::"),c=c.replace(/^compact|compact$/,":"),c=c.replace(/compact/,""),c},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(gr.BITS,"0")},t.prototype.parse4in6=function(e){var r=e.split(":"),i=r.slice(-1)[0],n=i.match(bI.RE_ADDRESS);if(n){this.parsedAddress4=n[0],this.address4=new Ih.Address4(this.parsedAddress4);for(var s=0;s<this.address4.groups;s++)if(/^0[0-9]+/.test(this.address4.parsedAddress[s]))throw new Wc.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(bI.RE_ADDRESS,this.address4.parsedAddress.map(Lje).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),e=r.join(":")}return e},t.prototype.parse=function(e){e=this.parse4in6(e);var r=e.match(gr.RE_BAD_CHARACTERS);if(r)throw new Wc.AddressError(En.sprintf("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),e.replace(gr.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));var i=e.match(gr.RE_BAD_ADDRESS);if(i)throw new Wc.AddressError(En.sprintf("Address failed regex: %s",i.join("")),e.replace(gr.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));var n=[],s=e.split("::");if(s.length===2){var o=s[0].split(":"),a=s[1].split(":");o.length===1&&o[0]===""&&(o=[]),a.length===1&&a[0]===""&&(a=[]);var c=this.groups-(o.length+a.length);if(!c)throw new Wc.AddressError("Error parsing groups");this.elidedGroups=c,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,n=n.concat(o);for(var u=0;u<c;u++)n.push("0");n=n.concat(a)}else if(s.length===1)n=e.split(":"),this.elidedGroups=0;else throw new Wc.AddressError("Too many :: groups found");if(n=n.map(function(l){return En.sprintf("%x",parseInt(l,16))}),n.length!==this.groups)throw new Wc.AddressError("Incorrect number of groups found");return n},t.prototype.canonicalForm=function(){return this.parsedAddress.map(Xae).join(":")},t.prototype.decimal=function(){return this.parsedAddress.map(function(e){return En.sprintf("%05d",parseInt(e,16))}).join(":")},t.prototype.bigInteger=function(){return new vn.BigInteger(this.parsedAddress.map(Xae).join(""),16)},t.prototype.to4=function(){var e=this.binaryZeroPad().split("");return Ih.Address4.fromHex(new vn.BigInteger(e.slice(96,128).join(""),2).toString(16))},t.prototype.to4in6=function(){var e=this.to4(),r=new t(this.parsedAddress.slice(0,6).join(":"),6),i=r.correctForm(),n="";return/:$/.test(i)||(n=":"),i+n+e.address},t.prototype.inspectTeredo=function(){var e=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new vn.BigInteger("ffff",16)).toString(),i=Ih.Address4.fromHex(this.getBitsBase16(32,64)),n=Ih.Address4.fromHex(this.getBits(96,128).xor(new vn.BigInteger("ffffffff",16)).toString(16)),s=this.getBits(64,80),o=this.getBitsBase2(64,80),a=s.testBit(15),c=s.testBit(14),u=s.testBit(8),l=s.testBit(9),h=new vn.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:En.sprintf("%s:%s",e.slice(0,4),e.slice(4,8)),server4:i.address,client4:n.address,flags:o,coneNat:a,microsoft:{reserved:c,universalLocal:l,groupIndividual:u,nonce:h},udpPort:r}},t.prototype.inspect6to4=function(){var e=this.getBitsBase16(0,16),r=Ih.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:En.sprintf("%s",e.slice(0,4)),gateway:r.address}},t.prototype.to6to4=function(){if(!this.is4())return null;var e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new t(e)},t.prototype.toByteArray=function(){var e=this.bigInteger().toByteArray();return e.length===17&&e[0]===0?e.slice(1):e},t.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(Qae)},t.fromByteArray=function(e){return this.fromUnsignedByteArray(e.map(Qae))},t.fromUnsignedByteArray=function(e){for(var r=new vn.BigInteger("256",10),i=new vn.BigInteger("0",10),n=new vn.BigInteger("1",10),s=e.length-1;s>=0;s--)i=i.add(n.multiply(new vn.BigInteger(e[s].toString(10),10))),n=n.multiply(r);return t.fromBigInteger(i)},t.prototype.isCanonical=function(){return this.addressMinusSuffix===this.canonicalForm()},t.prototype.isLinkLocal=function(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"},t.prototype.isMulticast=function(){return this.getType()==="Multicast"},t.prototype.is4=function(){return this.v4},t.prototype.isTeredo=function(){return this.isInSubnet(new t("2001::/32"))},t.prototype.is6to4=function(){return this.isInSubnet(new t("2002::/16"))},t.prototype.isLoopback=function(){return this.getType()==="Loopback"},t.prototype.href=function(e){return e===void 0?e="":e=En.sprintf(":%s",e),En.sprintf("http://[%s]%s/",this.correctForm(),e)},t.prototype.link=function(e){e||(e={}),e.className===void 0&&(e.className=""),e.prefix===void 0&&(e.prefix="/#address="),e.v4===void 0&&(e.v4=!1);var r=this.correctForm;return e.v4&&(r=this.to4in6),e.className?En.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,r.call(this),e.className):En.sprintf('<a href="%1$s%2$s">%2$s</a>',e.prefix,r.call(this))},t.prototype.group=function(){if(this.elidedGroups===0)return wI.simpleGroup(this.address).join(":");_8(typeof this.elidedGroups=="number"),_8(typeof this.elisionBegin=="number");var e=[],r=this.address.split("::"),i=r[0],n=r[1];i.length?e.push.apply(e,wI.simpleGroup(i)):e.push("");for(var s=["hover-group"],o=this.elisionBegin;o<this.elisionBegin+this.elidedGroups;o++)s.push(En.sprintf("group-%d",o));return e.push(En.sprintf('<span class="%s"></span>',s.join(" "))),n.length?e.push.apply(e,wI.simpleGroup(n,this.elisionEnd)):e.push(""),this.is4()&&(_8(this.address4 instanceof Ih.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")},t.prototype.regularExpressionString=function(e){e===void 0&&(e=!1);var r=[],i=new t(this.correctForm());if(i.elidedGroups===0)r.push(Th.simpleRegularExpression(i.parsedAddress));else if(i.elidedGroups===gr.GROUPS)r.push(Th.possibleElisions(gr.GROUPS));else{var n=i.address.split("::");n[0].length&&r.push(Th.simpleRegularExpression(n[0].split(":"))),_8(typeof i.elidedGroups=="number"),r.push(Th.possibleElisions(i.elidedGroups,n[0].length!==0,n[1].length!==0)),n[1].length&&r.push(Th.simpleRegularExpression(n[1].split(":"))),r=[r.join(":")]}return e||(r=Wae(Wae(["(?=^|",Th.ADDRESS_BOUNDARY,"|[^\\w\\:])("],r),[")(?=[^\\w\\:]|",Th.ADDRESS_BOUNDARY,"|$)"])),r.join("")},t.prototype.regularExpression=function(e){return e===void 0&&(e=!1),new RegExp(this.regularExpressionString(e),"i")},t}();Ys.Address6=jje});var Jae=g(nn=>{f();"use strict";var qje=nn&&nn.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Uje=nn&&nn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fje=nn&&nn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qje(e,t,r);return Uje(e,t),e};Object.defineProperty(nn,"__esModule",{value:!0});nn.v6=nn.AddressError=nn.Address6=nn.Address4=void 0;var Kje=yI();Object.defineProperty(nn,"Address4",{enumerable:!0,get:function(){return Kje.Address4}});var Vje=Zae();Object.defineProperty(nn,"Address6",{enumerable:!0,get:function(){return Vje.Address6}});var zje=p8();Object.defineProperty(nn,"AddressError",{enumerable:!0,get:function(){return zje.AddressError}});var Hje=Fje(mI());nn.v6={helpers:Hje}});var SI=g((TTt,EI)=>{f();"use strict";var ece=ce(),$je=Object.assign(ece("libp2p:ip-port-to-multiaddr"),{error:ece("libp2p:ip-port-to-multiaddr:err")}),{Multiaddr:_I}=ct(),vI=qae(),{Address4:Gje,Address6:Wje}=Jae(),v8={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function Yje(t,e){if(typeof t!="string")throw vI(new Error(`invalid ip provided: ${t}`),v8.ERR_INVALID_IP_PARAMETER);if(typeof e=="string"&&(e=parseInt(e)),isNaN(e))throw vI(new Error(`invalid port provided: ${e}`),v8.ERR_INVALID_PORT_PARAMETER);try{return new Gje(t),new _I(`/ip4/${t}/tcp/${e}`)}catch{}try{let r=new Wje(t);return r.is4()?new _I(`/ip4/${r.to4().correctForm()}/tcp/${e}`):new _I(`/ip6/${t}/tcp/${e}`)}catch(r){let i=`invalid ip:port for creating a multiaddr: ${t}:${e}`;throw $je.error(i),vI(new Error(i),v8.ERR_INVALID_IP)}}EI.exports=Yje;EI.exports.Errors=v8});var rce=g((PTt,E8)=>{f();"use strict";var AI=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},tce=(t,e,r,i)=>{let n,s=new Promise((o,a)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){o(t);return}i={customTimers:{setTimeout,clearTimeout},...i},n=i.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(l){a(l)}return}let c=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new AI(c);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{o(await t)}catch(c){a(c)}finally{i.customTimers.clearTimeout.call(void 0,n)}})()});return s.clear=()=>{clearTimeout(n),n=void 0},s};E8.exports=tce;E8.exports.default=tce;E8.exports.TimeoutError=AI});var ace=g((CTt,oce)=>{f();"use strict";var ice=Fa(),{CLOSE_TIMEOUT:Xje}=fI(),nce=SI(),Qje=rce(),sce=ce(),xI=sce("libp2p:websockets:socket");xI.error=sce("libp2p:websockets:socket:error");oce.exports=(t,e={})=>{let r={async sink(i){e.signal&&(i=ice(i,e.signal));try{await t.sink(async function*(){for await(let n of i)yield n instanceof Uint8Array?n:n.slice()}())}catch(n){n.type!=="aborted"&&xI.error(n)}},source:e.signal?ice(t.source,e.signal):t.source,conn:t,localAddr:e.localAddr||(t.localAddress&&t.localPort?nce(t.localAddress,t.localPort):void 0),remoteAddr:e.remoteAddr||nce(t.remoteAddress,t.remotePort),timeline:{open:Date.now()},async close(){let i=Date.now();try{await Qje(t.close(),Xje)}catch(n){let{host:s,port:o}=r.remoteAddr.toOptions();xI("timeout closing stream to %s:%s after %dms, destroying it manually",s,o,Date.now()-i),t.destroy()}finally{r.timeline.close=Date.now()}}};return t.socket.once&&t.socket.once("close",()=>{r.timeline.close||(r.timeline.close=Date.now())}),r}});var lce=g((OTt,uce)=>{f();"use strict";var Cl=af(),{CODE_CIRCUIT:RI,CODE_P2P:II,CODE_TCP:TI,CODE_WS:Zje,CODE_WSS:cce}=fI();uce.exports={all:t=>t.filter(e=>{if(e.protoCodes().includes(RI))return!1;let r=e.decapsulateCode(II);return Cl.WebSockets.matches(r)||Cl.WebSocketsSecure.matches(r)}),dnsWss:t=>t.filter(e=>{if(e.protoCodes().includes(RI))return!1;let r=e.decapsulateCode(II);return Cl.WebSocketsSecure.matches(r)&&Cl.DNS.matches(r.decapsulateCode(TI).decapsulateCode(cce))}),dnsWsOrWss:t=>t.filter(e=>{if(e.protoCodes().includes(RI))return!1;let r=e.decapsulateCode(II);return Cl.WebSockets.matches(r)?Cl.DNS.matches(r.decapsulateCode(TI).decapsulateCode(Zje)):Cl.WebSocketsSecure.matches(r)&&Cl.DNS.matches(r.decapsulateCode(TI).decapsulateCode(cce))})}});var mce=g((kTt,gce)=>{f();"use strict";var Jje=Nae(),eqe=M4(),tqe=hb(),{AbortError:fce}=Fa(),rqe=xa(),hce=ce(),Ol=hce("libp2p:websockets");Ol.error=hce("libp2p:websockets:error");var dce=K1(),iqe=Lae(),nqe=ace(),pce=lce(),yce=class{constructor({upgrader:e,filter:r}){if(!e)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e,this._filter=r}async dial(e,r={}){Ol("dialing %s",e);let i=await this._connect(e,r),n=nqe(i,{remoteAddr:e,signal:r.signal});Ol("new outbound connection %s",n.remoteAddr);let s=await this._upgrader.upgradeOutbound(n);return Ol("outbound connection %s upgraded",n.remoteAddr),s}async _connect(e,r={}){if(r.signal&&r.signal.aborted)throw new fce;let i=e.toOptions();Ol("dialing %s:%s",i.host,i.port);let n=rqe(),s=u=>{let l=`connection error: ${u.message}`;Ol.error(l),n.reject(u)},o=Jje(tqe(e),Object.assign({binary:!0},r));if(o.socket.on?o.socket.on("error",s):o.socket.onerror=s,!r.signal)return await Promise.race([o.connected(),n.promise]),Ol("connected %s",e),o;let a,c=new Promise((u,l)=>{if(a=()=>{l(new fce),setTimeout(()=>{o.close()})},r.signal.aborted)return a();r.signal.addEventListener("abort",a)});try{await Promise.race([c,n.promise,o.connected()])}finally{r.signal.removeEventListener("abort",a)}return Ol("connected %s",e),o}createListener(e={},r){return typeof e=="function"&&(r=e,e={}),iqe({handler:r,upgrader:this._upgrader},e)}filter(e){return e=Array.isArray(e)?e:[e],this._filter?this._filter(e):dce.isBrowser||dce.isWebWorker?pce.dnsWss(e):pce.all(e)}};gce.exports=eqe(yce,{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})});var PI=g((DTt,wce)=>{f();"use strict";function bce(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function sqe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return bce(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),bce(new n,r)}}wce.exports=sqe});var vce=g((NTt,_ce)=>{f();_ce.exports=function(){if(typeof globalThis=="undefined")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}});var kI=g((BTt,OI)=>{f();"use strict";var CI=65536,oqe=4294967295;function aqe(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var cqe=Ux().Buffer,S8=globalThis.crypto||globalThis.msCrypto;S8&&S8.getRandomValues?OI.exports=uqe:OI.exports=aqe;function uqe(t,e){if(t>oqe)throw new RangeError("requested too many random bytes");var r=cqe.allocUnsafe(t);if(t>0)if(t>CI)for(var i=0;i<t;i+=CI)S8.getRandomValues(r.slice(i,i+CI));else S8.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}});var Ace=g((LTt,Sce)=>{f();"use strict";function Ece(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function lqe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=void 0),e!=null&&(r.code=e);try{return Ece(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Ece(new n,r)}}Sce.exports=lqe});var BI=g((MTt,Tce)=>{f();var fqe=ce()("simple-peer"),xce=vce(),Rce=kI(),hqe=rR(),DI=dg(),mr=Ace(),NI=64*1024,dqe=5*1e3,pqe=5*1e3;function Ice(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function yqe(t){console.warn(t)}var kl=class extends hqe.Duplex{constructor(e){e=Object.assign({allowHalfOpen:!1},e);super(e);if(this._id=Rce(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Rce(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||kl.channelConfig,this.negotiated=this.channelConfig.negotiated,this.config=Object.assign({},kl.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(r=>r),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||dqe,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:xce(),!this._wrtc)throw mr(typeof window=="undefined"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=this.negotiated?!1:!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){DI(()=>this.destroy(mr(r,"ERR_PC_CONSTRUCTOR")));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},this.initiator||this.negotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw mr(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if(typeof e=="string")try{e=JSON.parse(e)}catch(r){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(mr(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(mr(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(e){var r=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(r).catch(i=>{!r.address||r.address.endsWith(".local")?yqe("Ignoring unsupported ICE candidate."):this.destroy(mr(i,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,r){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,r),this._needsNegotiation()}catch(i){this.destroy(mr(i,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:r}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(r=>{this.addTrack(r,e)})}addTrack(e,r){this._debug("addTrack()");var i=this._senderMap.get(e)||new Map,n=i.get(r);if(!n)n=this._pc.addTrack(e,r),i.set(r,n),this._senderMap.set(e,i),this._needsNegotiation();else throw n.removed?mr(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):mr(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,r,i){this._debug("replaceTrack()");var n=this._senderMap.get(e),s=n?n.get(i):null;if(!s)throw mr(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,n),s.replaceTrack!=null?s.replaceTrack(r):this.destroy(mr(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,r){this._debug("removeSender()");var i=this._senderMap.get(e),n=i?i.get(r):null;if(!n)throw mr(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(s){s.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(n):this.destroy(mr(s,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(r=>{this.removeTrack(r,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,DI(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}_destroy(e,r){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(i){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(i){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,r(e)}_setupData(e){if(!e.channel)return this.destroy(mr(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=NI),this.channelName=this._channel.label,this._channel.onmessage=i=>{this._onChannelMessage(i)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=i=>{this.destroy(mr(i,"ERR_DATA_CHANNEL"))};var r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},pqe)}_read(){}_write(e,r,i){if(this.destroyed)return i(mr(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(n){return this.destroy(mr(n,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>NI?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=e,this._cb=i}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Ice(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(!this.destroyed){var s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp})}},i=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},n=s=>{this.destroy(mr(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(i).catch(n)}).catch(e=>{this.destroy(mr(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=Ice(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(!this.destroyed){var s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp}),this.initiator||this._requestMissingTransceivers()}},i=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},n=s=>{this.destroy(mr(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(i).catch(n)}).catch(e=>{this.destroy(mr(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(mr(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,r),this.emit("iceStateChange",e,r),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(mr(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(mr(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){let r=i=>(Object.prototype.toString.call(i.values)==="[object Array]"&&i.values.forEach(n=>{Object.assign(i,n)}),i);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{var n=[];i.forEach(s=>{n.push(r(s))}),e(null,n)},i=>e(i)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(!this.destroyed){var n=[];i.result().forEach(s=>{var o={};s.names().forEach(a=>{o[a]=s.stat(a)}),o.id=s.id,o.type=s.type,o.timestamp=s.timestamp,n.push(r(o))}),e(null,n)}},i=>e(i)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((r,i)=>{if(this.destroyed)return;r&&(i=[]);var n={},s={},o={},a=!1;i.forEach(l=>{(l.type==="remotecandidate"||l.type==="remote-candidate")&&(n[l.id]=l),(l.type==="localcandidate"||l.type==="local-candidate")&&(s[l.id]=l),(l.type==="candidatepair"||l.type==="candidate-pair")&&(o[l.id]=l)});let c=l=>{a=!0;var h=s[l.localCandidateId];h&&(h.ip||h.address)?(this.localAddress=h.ip||h.address,this.localPort=Number(h.port)):h&&h.ipAddress?(this.localAddress=h.ipAddress,this.localPort=Number(h.portNumber)):typeof l.googLocalAddress=="string"&&(h=l.googLocalAddress.split(":"),this.localAddress=h[0],this.localPort=Number(h[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var d=n[l.remoteCandidateId];d&&(d.ip||d.address)?(this.remoteAddress=d.ip||d.address,this.remotePort=Number(d.port)):d&&d.ipAddress?(this.remoteAddress=d.ipAddress,this.remotePort=Number(d.portNumber)):typeof l.googRemoteAddress=="string"&&(d=l.googRemoteAddress.split(":"),this.remoteAddress=d[0],this.remotePort=Number(d[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(l=>{l.type==="transport"&&l.selectedCandidatePairId&&c(o[l.selectedCandidatePairId]),(l.type==="googCandidatePair"&&l.googActiveConnection==="true"||(l.type==="candidatepair"||l.type==="candidate-pair")&&l.selected)&&c(l)}),!a&&(!Object.keys(o).length||Object.keys(s).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(l){return this.destroy(mr(l,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var u=this._cb;this._cb=null,u(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>NI||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&!this._firstStable&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),this.push(r)}}_onChannelBufferedAmountLow(){if(!(this.destroyed||!this._cb)){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(r=>{this._debug("on track"),this.emit("track",e.track,r),this._remoteTracks.push({track:e.track,stream:r}),!this._remoteStreams.some(i=>i.id===r.id)&&(this._remoteStreams.push(r),DI(()=>{this.emit("stream",r)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],fqe.apply(null,e)}};kl.WEBRTC_SUPPORT=!!xce();kl.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};kl.channelConfig={};Tce.exports=kl});var Cce=g((jTt,Pce)=>{f();"use strict";Pce.exports={supportsFileReader:typeof self!="undefined"&&"FileReader"in self,supportsWebRTC:"RTCPeerConnection"in globalThis&&typeof navigator!="undefined"&&typeof navigator.mediaDevices!="undefined"&&"getUserMedia"in navigator.mediaDevices,supportsWebRTCDataChannels:"RTCPeerConnection"in globalThis}});var x8=g(A8=>{f();"use strict";A8.CODE_P2P=421;A8.CODE_CIRCUIT=290;A8.CLOSE_TIMEOUT=2e3});var LI=g((UTt,Oce)=>{f();var gqe=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mqe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];Oce.exports=function(e){var r=e,i=e.indexOf("["),n=e.indexOf("]");i!=-1&&n!=-1&&(e=e.substring(0,i)+e.substring(i,n).replace(/:/g,";")+e.substring(n,e.length));for(var s=gqe.exec(e||""),o={},a=14;a--;)o[mqe[a]]=s[a]||"";return i!=-1&&n!=-1&&(o.source=r,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=bqe(o,o.path),o.queryKey=wqe(o,o.query),o};function bqe(t,e){var r=/\/{2,9}/g,i=e.replace(r,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&i.splice(0,1),e.substr(e.length-1,1)=="/"&&i.splice(i.length-1,1),i}function wqe(t,e){var r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,s){n&&(r[n]=s)}),r}});var Nce=g(N0=>{f();"use strict";var kce=N0&&N0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(N0,"__esModule",{value:!0});N0.url=void 0;var _qe=kce(LI()),vqe=kce(ce()),Dce=vqe.default("socket.io-client:url");function Eqe(t,e="",r){let i=t;r=r||typeof location!="undefined"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(Dce("protocol-less url %s",t),typeof r!="undefined"?t=r.protocol+"//"+t:t="https://"+t),Dce("parse %s",t),i=_qe.default(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let s=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+e,i.href=i.protocol+"://"+s+(r&&r.port===i.port?"":":"+i.port),i}N0.url=Eqe});var Bce=g((KTt,MI)=>{f();try{MI.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){MI.exports=!1}});var zg=g(jI=>{f();"use strict";Object.defineProperty(jI,"__esModule",{value:!0});jI.default=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())()});var Mce=g(Hg=>{f();"use strict";var Lce=Hg&&Hg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hg,"__esModule",{value:!0});var Sqe=Lce(Bce()),Aqe=Lce(zg());function xqe(t){let e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Sqe.default))return new XMLHttpRequest}catch(r){}if(!e)try{return new Aqe.default[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(r){}}Hg.default=xqe});var B0=g(Dl=>{f();"use strict";var Rqe=Dl&&Dl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.installTimerFunctions=Dl.pick=void 0;var R8=Rqe(zg());function Iqe(t,...e){return e.reduce((r,i)=>(t.hasOwnProperty(i)&&(r[i]=t[i]),r),{})}Dl.pick=Iqe;var Tqe=setTimeout,Pqe=clearTimeout;function Cqe(t,e){e.useNativeTimers?(t.setTimeoutFn=Tqe.bind(R8.default),t.clearTimeoutFn=Pqe.bind(R8.default)):(t.setTimeoutFn=setTimeout.bind(R8.default),t.clearTimeoutFn=clearTimeout.bind(R8.default))}Dl.installTimerFunctions=Cqe});var Ph=g(jce=>{f();jce.Emitter=Sn;function Sn(t){if(t)return Oqe(t)}function Oqe(t){for(var e in Sn.prototype)t[e]=Sn.prototype[e];return t}Sn.prototype.on=Sn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Sn.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};Sn.prototype.off=Sn.prototype.removeListener=Sn.prototype.removeAllListeners=Sn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===e||i.fn===e){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Sn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,e)}return this};Sn.prototype.emitReserved=Sn.prototype.emit;Sn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Sn.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var qI=g(Nl=>{f();"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.ERROR_PACKET=Nl.PACKET_TYPES_REVERSE=Nl.PACKET_TYPES=void 0;var Wa=Object.create(null);Nl.PACKET_TYPES=Wa;Wa.open="0";Wa.close="1";Wa.ping="2";Wa.pong="3";Wa.message="4";Wa.upgrade="5";Wa.noop="6";var qce=Object.create(null);Nl.PACKET_TYPES_REVERSE=qce;Object.keys(Wa).forEach(t=>{qce[Wa[t]]=t});var kqe={type:"error",data:"parser error"};Nl.ERROR_PACKET=kqe});var Fce=g(UI=>{f();"use strict";Object.defineProperty(UI,"__esModule",{value:!0});var Dqe=qI(),Nqe=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bqe=typeof ArrayBuffer=="function",Lqe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Mqe=({type:t,data:e},r,i)=>Nqe&&e instanceof Blob?r?i(e):Uce(e,i):Bqe&&(e instanceof ArrayBuffer||Lqe(e))?r?i(e):Uce(new Blob([e]),i):i(Dqe.PACKET_TYPES[t]+(e||"")),Uce=(t,e)=>{let r=new FileReader;return r.onload=function(){let i=r.result.split(",")[1];e("b"+i)},r.readAsDataURL(t)};UI.default=Mqe});var Vce=g((I8,Kce)=>{f();(function(t,e){typeof I8=="object"&&typeof Kce!="undefined"?e(I8):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t["base64-arraybuffer"]={}))})(I8,function(t){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<e.length;i++)r[e.charCodeAt(i)]=i;var n=function(o){var a=new Uint8Array(o),c,u=a.length,l="";for(c=0;c<u;c+=3)l+=e[a[c]>>2],l+=e[(a[c]&3)<<4|a[c+1]>>4],l+=e[(a[c+1]&15)<<2|a[c+2]>>6],l+=e[a[c+2]&63];return u%3==2?l=l.substring(0,l.length-1)+"=":u%3==1&&(l=l.substring(0,l.length-2)+"=="),l},s=function(o){var a=o.length*.75,c=o.length,u,l=0,h,d,p,y;o[o.length-1]==="="&&(a--,o[o.length-2]==="="&&a--);var m=new ArrayBuffer(a),w=new Uint8Array(m);for(u=0;u<c;u+=4)h=r[o.charCodeAt(u)],d=r[o.charCodeAt(u+1)],p=r[o.charCodeAt(u+2)],y=r[o.charCodeAt(u+3)],w[l++]=h<<2|d>>4,w[l++]=(d&15)<<4|p>>2,w[l++]=(p&3)<<6|y&63;return m};t.decode=s,t.encode=n,Object.defineProperty(t,"__esModule",{value:!0})})});var Hce=g(FI=>{f();"use strict";Object.defineProperty(FI,"__esModule",{value:!0});var T8=qI(),jqe=Vce(),qqe=typeof ArrayBuffer=="function",Uqe=(t,e)=>{if(typeof t!="string")return{type:"message",data:zce(t,e)};let r=t.charAt(0);return r==="b"?{type:"message",data:Fqe(t.substring(1),e)}:T8.PACKET_TYPES_REVERSE[r]?t.length>1?{type:T8.PACKET_TYPES_REVERSE[r],data:t.substring(1)}:{type:T8.PACKET_TYPES_REVERSE[r]}:T8.ERROR_PACKET},Fqe=(t,e)=>{if(qqe){let r=(0,jqe.decode)(t);return zce(r,e)}else return{base64:!0,data:t}},zce=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};FI.default=Uqe});var $g=g(Xs=>{f();"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.decodePayload=Xs.decodePacket=Xs.encodePayload=Xs.encodePacket=Xs.protocol=void 0;var $ce=Fce();Xs.encodePacket=$ce.default;var Gce=Hce();Xs.decodePacket=Gce.default;var Wce=String.fromCharCode(30),Kqe=(t,e)=>{let r=t.length,i=new Array(r),n=0;t.forEach((s,o)=>{(0,$ce.default)(s,!1,a=>{i[o]=a,++n===r&&e(i.join(Wce))})})};Xs.encodePayload=Kqe;var Vqe=(t,e)=>{let r=t.split(Wce),i=[];for(let n=0;n<r.length;n++){let s=(0,Gce.default)(r[n],e);if(i.push(s),s.type==="error")break}return i};Xs.decodePayload=Vqe;Xs.protocol=4});var P8=g(L0=>{f();"use strict";var zqe=L0&&L0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(L0,"__esModule",{value:!0});L0.Transport=void 0;var Hqe=$g(),$qe=Ph(),Gqe=B0(),Wqe=zqe(ce()),Yqe=(0,Wqe.default)("engine.io-client:transport"),Yce=class extends $qe.Emitter{constructor(e){super();this.writable=!1,(0,Gqe.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r){let i=new Error(e);return i.type="TransportError",i.description=r,super.emit("error",i),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):Yqe("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(e){let r=(0,Hqe.decodePacket)(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emit("packet",e)}onClose(){this.readyState="closed",super.emit("close")}};L0.Transport=Yce});var zI=g((ZTt,eue)=>{f();"use strict";var Xce="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),C8=64,Qce={},Zce=0,Bl=0,Jce;function KI(t){var e="";do e=Xce[t%C8]+e,t=Math.floor(t/C8);while(t>0);return e}function Xqe(t){var e=0;for(Bl=0;Bl<t.length;Bl++)e=e*C8+Qce[t.charAt(Bl)];return e}function VI(){var t=KI(+new Date);return t!==Jce?(Zce=0,Jce=t):t+"."+KI(Zce++)}for(;Bl<C8;Bl++)Qce[Xce[Bl]]=Bl;VI.encode=KI;VI.decode=Xqe;eue.exports=VI});var O8=g(HI=>{f();HI.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e};HI.decode=function(t){for(var e={},r=t.split("&"),i=0,n=r.length;i<n;i++){var s=r[i].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}});var iue=g(M0=>{f();"use strict";var $I=M0&&M0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(M0,"__esModule",{value:!0});M0.Polling=void 0;var Qqe=P8(),Zqe=$I(ce()),Jqe=$I(zI()),eUe=$I(O8()),tue=$g(),Vo=(0,Zqe.default)("engine.io-client:polling"),rue=class extends Qqe.Transport{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let r=()=>{Vo("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(Vo("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){Vo("pre-pause polling complete"),--i||r()})),this.writable||(Vo("we are currently writing - waiting to pause"),i++,this.once("drain",function(){Vo("pre-pause writing complete"),--i||r()}))}else r()}poll(){Vo("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){Vo("polling got data %s",e);let r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose(),!1;this.onPacket(i)};(0,tue.decodePayload)(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():Vo('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{Vo("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Vo("transport open - closing"),e()):(Vo("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,tue.encodePayload)(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{},r=this.opts.secure?"https":"http",i="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=(0,Jqe.default)()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port);let n=eUe.default.encode(e),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}};M0.Polling=rue});var cue=g(Ll=>{f();"use strict";var GI=Ll&&Ll.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.Request=Ll.XHR=void 0;var nue=GI(Mce()),tUe=GI(ce()),rUe=GI(zg()),sue=B0(),iUe=Ph(),nUe=iue(),WI=(0,tUe.default)("engine.io-client:polling-xhr");function sUe(){}var oUe=function(){return new nue.default({xdomain:!1}).responseType!=null}(),oue=class extends nUe.Polling{constructor(e){super(e);if(typeof location!="undefined"){let i=location.protocol==="https:",n=location.port;n||(n=i?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==i}let r=e&&e.forceBase64;this.supportsBinary=oUe&&!r}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Qs(this.uri(),e)}doWrite(e,r){let i=this.request({method:"POST",data:e});i.on("success",r),i.on("error",n=>{this.onError("xhr post error",n)})}doPoll(){WI("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",r=>{this.onError("xhr poll error",r)}),this.pollXhr=e}};Ll.XHR=oue;var Qs=class extends iUe.Emitter{constructor(e,r){super();(0,sue.installTimerFunctions)(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){let e=(0,sue.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;let r=this.xhr=new nue.default(e);try{WI("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch(i){}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{r.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},WI("xhr data %s",this.data),r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document!="undefined"&&(this.index=Qs.requestsCount++,Qs.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=sUe,e)try{this.xhr.abort()}catch(r){}typeof document!="undefined"&&delete Qs.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&&this.onData(e)}abort(){this.cleanup()}};Ll.Request=Qs;Qs.requestsCount=0;Qs.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",aue);else if(typeof addEventListener=="function"){let t="onpagehide"in rUe.default?"pagehide":"unload";addEventListener(t,aue,!1)}}function aue(){for(let t in Qs.requests)Qs.requests.hasOwnProperty(t)&&Qs.requests[t].abort()}});var lue=g(Zs=>{f();"use strict";var aUe=Zs&&Zs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.defaultBinaryType=Zs.usingBrowserWebSocket=Zs.WebSocket=Zs.nextTick=void 0;var uue=aUe(zg());Zs.nextTick=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0))();Zs.WebSocket=uue.default.WebSocket||uue.default.MozWebSocket;Zs.usingBrowserWebSocket=!0;Zs.defaultBinaryType="arraybuffer"});var hue=g(j0=>{f();"use strict";var YI=j0&&j0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(j0,"__esModule",{value:!0});j0.WS=void 0;var cUe=P8(),uUe=YI(O8()),lUe=YI(zI()),fUe=B0(),Ya=lue(),hUe=YI(ce()),dUe=$g(),pUe=(0,hUe.default)("engine.io-client:websocket"),fue=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",k8=class extends cUe.Transport{constructor(e){super(e);this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),r=this.opts.protocols,i=fue?{}:(0,fUe.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Ya.usingBrowserWebSocket&&!fue?r?new Ya.WebSocket(e,r):new Ya.WebSocket(e):new Ya.WebSocket(e,r,i)}catch(n){return this.emit("error",n)}this.ws.binaryType=this.socket.binaryType||Ya.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let i=e[r],n=r===e.length-1;(0,dUe.encodePacket)(i,this.supportsBinary,s=>{let o={};Ya.usingBrowserWebSocket||(i.options&&(o.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?Buffer.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(o.compress=!1));try{Ya.usingBrowserWebSocket?this.ws.send(s):this.ws.send(s,o)}catch(a){pUe("websocket closed before onclose event")}n&&(0,Ya.nextTick)(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{},r=this.opts.secure?"wss":"ws",i="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,lUe.default)()),this.supportsBinary||(e.b64=1);let n=uUe.default.encode(e),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}check(){return!!Ya.WebSocket&&!("__initialize"in Ya.WebSocket&&this.name===k8.prototype.name)}};j0.WS=k8});var XI=g(D8=>{f();"use strict";Object.defineProperty(D8,"__esModule",{value:!0});D8.transports=void 0;var yUe=cue(),gUe=hue();D8.transports={websocket:gUe.WS,polling:yUe.XHR}});var yue=g(q0=>{f();"use strict";var QI=q0&&q0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(q0,"__esModule",{value:!0});q0.Socket=void 0;var mUe=XI(),bUe=B0(),wUe=QI(O8()),due=QI(LI()),_Ue=QI(ce()),vUe=Ph(),pue=$g(),Jr=(0,_Ue.default)("engine.io-client:socket"),Yc=class extends vUe.Emitter{constructor(e,r={}){super();e&&typeof e=="object"&&(r=e,e=null),e?(e=(0,due.default)(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=(0,due.default)(r.host).host),(0,bUe.installTimerFunctions)(this,r),this.secure=r.secure!=null?r.secure:typeof location!="undefined"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=r.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=wUe.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){Jr('creating transport "%s"',e);let r=EUe(this.opts.query);r.EIO=pue.protocol,r.transport=e,this.id&&(r.sid=this.id);let i=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return Jr("options: %j",i),new mUe.transports[e](i)}open(){let e;if(this.opts.rememberUpgrade&&Yc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(r){Jr("error while creating transport: %s",r),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){Jr("setting transport %s",e.name),this.transport&&(Jr("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){Jr('probing transport "%s"',e);let r=this.createTransport(e),i=!1;Yc.priorWebsocketSuccess=!1;let n=()=>{i||(Jr('probe transport "%s" opened',e),r.send([{type:"ping",data:"probe"}]),r.once("packet",h=>{if(!i)if(h.type==="pong"&&h.data==="probe"){if(Jr('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Yc.priorWebsocketSuccess=r.name==="websocket",Jr('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(Jr("changing transport and sending upgrade packet"),l(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{Jr('probe transport "%s" failed',e);let d=new Error("probe error");d.transport=r.name,this.emitReserved("upgradeError",d)}}))};function s(){i||(i=!0,l(),r.close(),r=null)}let o=h=>{let d=new Error("probe error: "+h);d.transport=r.name,s(),Jr('probe transport "%s" failed because of error: %s',e,h),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function c(){o("socket closed")}function u(h){r&&h.name!==r.name&&(Jr('"%s" works - aborting "%s"',h.name,r.name),s())}let l=()=>{r.removeListener("open",n),r.removeListener("error",o),r.removeListener("close",a),this.off("close",c),this.off("upgrading",u)};r.once("open",n),r.once("error",o),r.once("close",a),this.once("close",c),this.once("upgrading",u),r.open()}onOpen(){if(Jr("socket open"),this.readyState="open",Yc.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){Jr("starting upgrade probes");let e=0,r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Jr('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else Jr('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Jr("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(e,r,i){return this.sendPacket("message",e,r,i),this}send(e,r,i){return this.sendPacket("message",e,r,i),this}sendPacket(e,r,i,n){if(typeof r=="function"&&(n=r,r=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let s={type:e,data:r,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){let e=()=>{this.onClose("forced close"),Jr("socket closing - telling transport to close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){Jr("socket error %j",e),Yc.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(Jr('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let r=[],i=0,n=e.length;for(;i<n;i++)~this.transports.indexOf(e[i])&&r.push(e[i]);return r}};q0.Socket=Yc;Yc.protocol=pue.protocol;function EUe(t){let e={};for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}});var mue=g(Js=>{f();"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.installTimerFunctions=Js.transports=Js.Transport=Js.protocol=Js.Socket=void 0;var gue=yue();Object.defineProperty(Js,"Socket",{enumerable:!0,get:function(){return gue.Socket}});Js.protocol=gue.Socket.protocol;var SUe=P8();Object.defineProperty(Js,"Transport",{enumerable:!0,get:function(){return SUe.Transport}});var AUe=XI();Object.defineProperty(Js,"transports",{enumerable:!0,get:function(){return AUe.transports}});var xUe=B0();Object.defineProperty(Js,"installTimerFunctions",{enumerable:!0,get:function(){return xUe.installTimerFunctions}})});var ZI=g(U0=>{f();"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.hasBinary=U0.isBinary=void 0;var RUe=typeof ArrayBuffer=="function",IUe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,bue=Object.prototype.toString,TUe=typeof Blob=="function"||typeof Blob!="undefined"&&bue.call(Blob)==="[object BlobConstructor]",PUe=typeof File=="function"||typeof File!="undefined"&&bue.call(File)==="[object FileConstructor]";function wue(t){return RUe&&(t instanceof ArrayBuffer||IUe(t))||TUe&&t instanceof Blob||PUe&&t instanceof File}U0.isBinary=wue;function N8(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(N8(t[r]))return!0;return!1}if(wue(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return N8(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&N8(t[r]))return!0;return!1}U0.hasBinary=N8});var _ue=g(F0=>{f();"use strict";Object.defineProperty(F0,"__esModule",{value:!0});F0.reconstructPacket=F0.deconstructPacket=void 0;var CUe=ZI();function OUe(t){let e=[],r=t.data,i=t;return i.data=JI(r,e),i.attachments=e.length,{packet:i,buffers:e}}F0.deconstructPacket=OUe;function JI(t,e){if(!t)return t;if(CUe.isBinary(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=JI(t[i],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let i in t)t.hasOwnProperty(i)&&(r[i]=JI(t[i],e));return r}return t}function kUe(t,e){return t.data=eT(t.data,e),t.attachments=void 0,t}F0.reconstructPacket=kUe;function eT(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=eT(t[r],e);else if(typeof t=="object")for(let r in t)t.hasOwnProperty(r)&&(t[r]=eT(t[r],e));return t}});var L8=g(zo=>{f();"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.Decoder=zo.Encoder=zo.PacketType=zo.protocol=void 0;var DUe=Ph(),vue=_ue(),Eue=ZI(),NUe=ce(),tT=NUe.default("socket.io-parser");zo.protocol=5;var ci;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ci=zo.PacketType||(zo.PacketType={}));var Sue=class{encode(e){return tT("encoding packet %j",e),(e.type===ci.EVENT||e.type===ci.ACK)&&Eue.hasBinary(e)?(e.type=e.type===ci.EVENT?ci.BINARY_EVENT:ci.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===ci.BINARY_EVENT||e.type===ci.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data)),tT("encoded %j as %s",e,r),r}encodeAsBinary(e){let r=vue.deconstructPacket(e),i=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(i),n}};zo.Encoder=Sue;var B8=class extends DUe.Emitter{constructor(){super()}add(e){let r;if(typeof e=="string")r=this.decodeString(e),r.type===ci.BINARY_EVENT||r.type===ci.BINARY_ACK?(this.reconstructor=new Aue(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r);else if(Eue.isBinary(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,i={type:Number(e.charAt(0))};if(ci[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===ci.BINARY_EVENT||i.type===ci.BINARY_ACK){let s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let o=e.substring(s,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(r+1)==="/"){let s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););i.nsp=e.substring(s,r)}else i.nsp="/";let n=e.charAt(r+1);if(n!==""&&Number(n)==n){let s=r+1;for(;++r;){let o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}i.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){let s=BUe(e.substr(r));if(B8.isPayloadValid(i.type,s))i.data=s;else throw new Error("invalid payload")}return tT("decoded %s as %j",e,i),i}static isPayloadValid(e,r){switch(e){case ci.CONNECT:return typeof r=="object";case ci.DISCONNECT:return r===void 0;case ci.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case ci.EVENT:case ci.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case ci.ACK:case ci.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}};zo.Decoder=B8;function BUe(t){try{return JSON.parse(t)}catch(e){return!1}}var Aue=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=vue.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}});var rT=g(M8=>{f();"use strict";Object.defineProperty(M8,"__esModule",{value:!0});M8.on=void 0;function LUe(t,e,r){return t.on(e,r),function(){t.off(e,r)}}M8.on=LUe});var iT=g(K0=>{f();"use strict";var MUe=K0&&K0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(K0,"__esModule",{value:!0});K0.Socket=void 0;var eo=L8(),j8=rT(),jUe=Ph(),qUe=MUe(ce()),Fn=qUe.default("socket.io-client:socket"),UUe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),xue=class extends jUe.Emitter{constructor(e,r,i){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;let e=this.io;this.subs=[j8.on(e,"open",this.onopen.bind(this)),j8.on(e,"packet",this.onpacket.bind(this)),j8.on(e,"error",this.onerror.bind(this)),j8.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(UUe.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');r.unshift(e);let i={type:eo.PacketType.EVENT,data:r};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){let o=this.ids++;Fn("emitting packet with ack id %d",o);let a=r.pop();this._registerAckCallback(o,a),i.id=o}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)?Fn("discard packet as the transport is not currently writable"):this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,r){let i=this.flags.timeout;if(i===void 0){this.acks[e]=r;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===e&&(Fn("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(s,1));Fn("event with ack id %d has timed out after %d ms",e,i),r.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...s)=>{this.io.clearTimeoutFn(n),r.apply(this,[null,...s])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Fn("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this.packet({type:eo.PacketType.CONNECT,data:e})}):this.packet({type:eo.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){Fn("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case eo.PacketType.CONNECT:if(e.data&&e.data.sid){let n=e.data.sid;this.onconnect(n)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case eo.PacketType.EVENT:this.onevent(e);break;case eo.PacketType.BINARY_EVENT:this.onevent(e);break;case eo.PacketType.ACK:this.onack(e);break;case eo.PacketType.BINARY_ACK:this.onack(e);break;case eo.PacketType.DISCONNECT:this.ondisconnect();break;case eo.PacketType.CONNECT_ERROR:this.destroy();let i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){let r=e.data||[];Fn("emitting event %j",r),e.id!=null&&(Fn("attaching ack callback to event"),r.push(this.ack(e.id))),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let r=this._anyListeners.slice();for(let i of r)i.apply(this,e)}super.emit.apply(this,e)}ack(e){let r=this,i=!1;return function(...n){i||(i=!0,Fn("sending ack %j",n),r.packet({type:eo.PacketType.ACK,id:e,data:n}))}}onack(e){let r=this.acks[e.id];typeof r=="function"?(Fn("calling ack %s with %j",e.id,e.data),r.apply(this,e.data),delete this.acks[e.id]):Fn("bad ack %s",e.id)}onconnect(e){Fn("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){Fn("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Fn("performing disconnect (%s)",this.nsp),this.packet({type:eo.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let i=0;i<r.length;i++)if(e===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}};K0.Socket=xue});var Iue=g((hPt,Rue)=>{f();Rue.exports=V0;function V0(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}V0.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};V0.prototype.reset=function(){this.attempts=0};V0.prototype.setMin=function(t){this.ms=t};V0.prototype.setMax=function(t){this.max=t};V0.prototype.setJitter=function(t){this.jitter=t}});var Oue=g(to=>{f();"use strict";var FUe=to&&to.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),KUe=to&&to.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VUe=to&&to.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FUe(e,t,r);return KUe(e,t),e},Tue=to&&to.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(to,"__esModule",{value:!0});to.Manager=void 0;var Pue=mue(),zUe=iT(),HUe=VUe(L8()),Ch=rT(),$Ue=Tue(Iue()),GUe=Ph(),WUe=Tue(ce()),zi=WUe.default("socket.io-client:manager"),Cue=class extends GUe.Emitter{constructor(e,r){var i;super();this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Pue.installTimerFunctions(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new $Ue.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;let n=r.parser||HUe;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(zi("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;zi("opening %s",this.uri),this.engine=new Pue.Socket(this.uri,this.opts);let r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let n=Ch.on(r,"open",function(){i.onopen(),e&&e()}),s=Ch.on(r,"error",o=>{zi("error"),i.cleanup(),i._readyState="closed",this.emitReserved("error",o),e?e(o):i.maybeReconnectOnOpen()});if(this._timeout!==!1){let o=this._timeout;zi("connect attempt will timeout after %d",o),o===0&&n();let a=this.setTimeoutFn(()=>{zi("connect attempt timed out after %d",o),n(),r.close(),r.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(n),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){zi("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(Ch.on(e,"ping",this.onping.bind(this)),Ch.on(e,"data",this.ondata.bind(this)),Ch.on(e,"error",this.onerror.bind(this)),Ch.on(e,"close",this.onclose.bind(this)),Ch.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){zi("error",e),this.emitReserved("error",e)}socket(e,r){let i=this.nsps[e];return i||(i=new zUe.Socket(this,e,r),this.nsps[e]=i),i}_destroy(e){let r=Object.keys(this.nsps);for(let i of r)if(this.nsps[i].active){zi("socket %s is still active, skipping close",i);return}this._close()}_packet(e){zi("writing packet %j",e);let r=this.encoder.encode(e);for(let i=0;i<r.length;i++)this.engine.write(r[i],e.options)}cleanup(){zi("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){zi("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){zi("closed due to %s",e),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)zi("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let r=this.backoff.duration();zi("will wait %dms before reconnect attempt",r),this._reconnecting=!0;let i=this.setTimeoutFn(()=>{e.skipReconnect||(zi("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(zi("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):(zi("reconnect success"),e.onreconnect())}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};to.Manager=Cue});var Bue=g((sn,Nue)=>{f();"use strict";var YUe=sn&&sn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sn,"__esModule",{value:!0});sn.default=sn.connect=sn.io=sn.Socket=sn.Manager=sn.protocol=void 0;var XUe=Nce(),q8=Oue();Object.defineProperty(sn,"Manager",{enumerable:!0,get:function(){return q8.Manager}});var kue=iT();Object.defineProperty(sn,"Socket",{enumerable:!0,get:function(){return kue.Socket}});var QUe=YUe(ce()),Due=QUe.default("socket.io-client"),Gg={};function Oh(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let r=XUe.url(t,e.path||"/socket.io"),i=r.source,n=r.id,s=r.path,o=Gg[n]&&s in Gg[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o,c;return a?(Due("ignoring socket cache for %s",i),c=new q8.Manager(i,e)):(Gg[n]||(Due("new io instance for %s",i),Gg[n]=new q8.Manager(i,e)),c=Gg[n]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}sn.io=Oh;sn.connect=Oh;sn.default=Oh;Object.assign(Oh,{Manager:q8.Manager,Socket:kue.Socket,io:Oh,connect:Oh});var ZUe=L8();Object.defineProperty(sn,"protocol",{enumerable:!0,get:function(){return ZUe.protocol}});Nue.exports=Oh});var nT=g((pPt,Lue)=>{f();var JUe=M5();Lue.exports=t=>async e=>{e=JUe(e);let r=b=>{typeof b.return=="function"&&b.return()},i=null,n=null,s=b=>{i=b,n&&n(b),r(e)},o=null,a=!1,c=()=>{a=!0,o&&o()},u=null,l=!1,h=()=>{l=!0,u&&u()},d=null,p=()=>{d&&d()},y=()=>new Promise((b,v)=>{o=d=b,n=v,t.once("drain",p)}),m=()=>(r(e),new Promise((b,v)=>{if(a||l||i)return b();u=o=b,n=v})),w=()=>{t.removeListener("error",s),t.removeListener("close",c),t.removeListener("finish",h),t.removeListener("drain",p)};t.once("error",s),t.once("close",c),t.once("finish",h);try{for await(let b of e){if(!t.writable||t.destroyed||i)break;t.write(b)===!1&&await y()}}catch(b){i||t.destroy(),i=b}try{if(t.writable&&t.end(),await m(),i)throw i}finally{w()}}});var sT=g((yPt,Mue)=>{f();var eFe=nT(),tFe=Ug();Mue.exports=t=>({sink:eFe(t),source:tFe(t)})});var que=g((gPt,jue)=>{f();var rFe=sT();jue.exports=t=>async function*(e){let r=rFe(t),i;if(r.sink(e).catch(n=>{i=n}),yield*r.source,i)throw i}});var Uue=g((mPt,z0)=>{f();z0.exports=Ug();z0.exports.source=Ug();z0.exports.sink=nT();z0.exports.transform=que();z0.exports.duplex=sT()});var oT=g((bPt,Hue)=>{f();"use strict";var Fue=Fa(),iFe=Uue(),{CLOSE_TIMEOUT:nFe}=x8(),Kue=SI(),Vue=ce(),U8=Vue("libp2p:webrtc-star:socket");U8.error=Vue("libp2p:webrtc-star:socket:error");var zue=(t,e)=>{if(!(!t||!e))try{return Kue(t,e)}catch(r){return U8.error(r),Kue("0.0.0.0",e)}};Hue.exports=(t,e={})=>{let{sink:r,source:i}=iFe.duplex(t),n=e.remoteAddr||zue(t.remoteAddress,t.remotePort),s=zue(t.localAddress,t.localPort),o={async sink(a){e.signal&&(a=Fue(a,e.signal));try{await r(async function*(){for await(let c of a)yield c instanceof Uint8Array?c:c.slice()}())}catch(c){c.type!=="aborted"&&U8.error(c)}},source:e.signal?Fue(i,e.signal):i,conn:t,localAddr:s,remoteAddr:n,timeline:{open:Date.now()},close(){if(!t.destroyed)return new Promise((a,c)=>{let u=Date.now(),l=setTimeout(()=>{if(o.remoteAddr){let{host:h,port:d}=o.remoteAddr.toOptions();U8("timeout closing socket to %s:%s after %dms, destroying it manually",h,d,Date.now()-u)}t.destroyed||t.destroy()},nFe);t.once("close",()=>{a()}),t.end(h=>{if(clearTimeout(l),o.timeline.close=Date.now(),h)return c(h)})})}};return t.once("close",()=>{o.timeline.close||(o.timeline.close=Date.now())}),o}});var aT=g((wPt,Gue)=>{f();"use strict";var{Multiaddr:$ue}=ct();function sFe(t){let e=t.toString().split("/"),r=t.protos()[1].name,i=t.protos()[2].name,n=t.stringTuples()[1][1];if(r!=="tcp"||i!=="ws"&&i!=="wss")throw new Error("invalid multiaddr: "+t.toString());if(!$ue.isName(t))return"http://"+e[2]+":"+e[4];if(i==="ws")return"http://"+e[2]+(n==="80"?"":":"+n);if(i==="wss")return"https://"+e[2]+(n==="443"?"":":"+n)}function oFe(t){let e="/libp2p-webrtc-star";if(t.indexOf(e)!==-1){t=t.substring(e.length,t.length);let r=new $ue(t),i=r.stringTuples().filter(n=>n[0]===421)[0];r=r.decapsulate("p2p"),r=r.encapsulate("/p2p-webrtc-star"),r=r.encapsulate(`/p2p/${i[1]}`),t=r.toString()}return t}Gue.exports={cleanUrlSIO:sFe,cleanMultiaddr:oFe}});var Que=g((_Pt,Xue)=>{f();"use strict";var aFe=Wt(),Wue=ce(),kh=Wue("libp2p:webrtc-star:listener");kh.error=Wue("libp2p:webrtc-star:listener:error");var cFe=PI(),uFe=Bue(),lFe=BI(),fFe=xa(),hFe=oT(),{cleanUrlSIO:dFe}=aT(),{CODE_P2P:Yue}=x8(),pFe={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"};Xue.exports=({handler:t,upgrader:e},r,i={})=>{let n=new aFe,s,o;return n.__connections=[],n.__spChannels=new Map,n.__pendingIntents=new Map,n.listen=a=>{if(s)throw cFe(new Error("listener already in use"),"ERR_ALREADY_LISTENING");let c=fFe();s=a;let u;!a.protoCodes().includes(Yue)&&e.localPeer?u=a.encapsulate(`/p2p/${e.localPeer.toB58String()}`):u=a,n.on("error",()=>c.reject()),o=dFe(a),kh("Dialing to Signalling Server on: "+o),n.io=uFe.connect(o,pFe);let l=h=>{if(h.answer||h.err||!h.intentId)return;let d=h.intentId,p=n.__pendingIntents.get(d);p||(p=[],n.__pendingIntents.set(d,p));let y=n.__spChannels.get(d);if(y){y.signal(h.signal);return}else if(h.signal.type!=="offer"){p.push(h);return}let m={trickle:!1,...i};r.wrtc&&(m.wrtc=r.wrtc),y=new lFe(m);let w=b=>{kh.error("incoming connection errored",b)};y.on("error",w),y.once("close",(...b)=>{y.removeListener("error",w)}),y.on("signal",b=>{h.signal=b,h.answer=!0,n.io.emit("ss-handshake",h)}),y.signal(h.signal);for(let b of p)y.signal(b.signal);n.__pendingIntents.set(d,[]),y.once("connect",async()=>{let b=hFe(y);kh("new inbound connection %s",b.remoteAddr);let v;try{v=await e.upgradeInbound(b)}catch(x){return kh.error("inbound connection failed to upgrade",x),b.close()}if(!v.remoteAddr)try{v.remoteAddr=a.decapsulateCode(Yue).encapsulate(`/p2p/${v.remotePeer.toB58String()}`)}catch(x){kh.error("could not determine remote address",x)}kh("inbound connection %s upgraded",b.remoteAddr),yFe(n,b,d),n.emit("connection",v),t(v)}),n.__spChannels.set(d,y)};return n.io.once("connect_error",h=>c.reject(h)),n.io.once("error",h=>{n.emit("error",h),n.emit("close")}),n.io.on("ws-handshake",l),n.io.on("ws-peer",r._peerDiscovered),n.io.on("connect",()=>{n.io.emit("ss-join",u.toString())}),n.io.once("connect",()=>{n.emit("listening"),c.resolve()}),r.sigReferences.set(o,{listener:n,signallingAddr:u}),c.promise},n.close=async()=>{let a=r.sigReferences.get(o);a&&a.listener.io&&(a.listener.io.emit("ss-leave"),a.listener.io.close()),await Promise.all(n.__connections.map(c=>c.close())),n.emit("close"),n.removeAllListeners(),s=void 0,r.sigReferences.delete(o)},n.getAddrs=()=>[s],n};function yFe(t,e,r){t.__connections.push(e);let i=()=>{t.__connections=t.__connections.filter(n=>n!==e),t.__spChannels.delete(r),t.__pendingIntents.delete(r)};e.conn.once("close",i)}});var rle=g((vPt,tle)=>{f();"use strict";var Zue=ce(),Xc=Zue("libp2p:webrtc-star");Xc.error=Zue("libp2p:webrtc-star:error");var{EventEmitter:gFe}=Wt(),F8=PI(),mFe=M4(),{AbortError:Jue}=Fa(),bFe=BI(),{supportsWebRTCDataChannels:wFe}=Cce(),{Multiaddr:_Fe}=ct(),vFe=af(),EFe=Je(),{CODE_CIRCUIT:SFe}=x8(),AFe=Que(),xFe=oT(),{cleanMultiaddr:RFe,cleanUrlSIO:IFe}=aT();function TFe(){}var ele=class{constructor(e={}){if(!e.upgrader)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e.upgrader,this.sioOptions={transports:["websocket"],"force new connection":!0},e.wrtc&&(this.wrtc=e.wrtc),this.sigReferences=new Map,this.discovery=new gFe,this.discovery.tag="webRTCStar",this.discovery._isStarted=!1,this.discovery.start=()=>{this.discovery._isStarted=!0},this.discovery.stop=()=>{this.discovery._isStarted=!1},this._peerDiscovered=this._peerDiscovered.bind(this)}async dial(e,r={}){let i=await this._connect(e,r),n=xFe(i,{remoteAddr:e,signal:r.signal});Xc("new outbound connection %s",n.remoteAddr);let s=await this._upgrader.upgradeOutbound(n);return Xc("outbound connection %s upgraded",n.remoteAddr),s}_connect(e,r={}){if(r.signal&&r.signal.aborted)throw new Jue;let i={initiator:!0,trickle:!1,...r.spOptions||{}};this.wrtc&&(i.wrtc=this.wrtc);let n=e.toOptions(),s=(~~(Math.random()*1e9)).toString(36)+Date.now();return new Promise((o,a)=>{let c=this.sigReferences.get(IFe(e));if(!c||!c.listener)return a(F8(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let u=c.listener.io,l=Date.now(),h;Xc("dialing %s:%s",n.host,n.port);let d=new bFe(i),p=v=>{if(!h){let x=`connection error ${n.host}:${n.port}: ${v.message}`;Xc.error(x),b(v)}},y=()=>{Xc("connnection timeout %s:%s",n.host,n.port);let v=F8(new Error(`connection timeout after ${Date.now()-l}ms`),"ERR_CONNECT_TIMEOUT");d.emit("error",v)},m=()=>{h=!0,Xc("connection opened %s:%s",n.host,n.port),b(null)},w=()=>{Xc.error("connection aborted %s:%s",n.host,n.port),d.destroy(),b(new Jue)},b=v=>{d.removeListener("timeout",y),d.removeListener("connect",m),r.signal&&r.signal.removeEventListener("abort",w),v?a(v):o(d)};d.on("error",p),d.once("timeout",y),d.once("connect",m),d.on("close",()=>{d.removeListener("error",p)}),r.signal&&r.signal.addEventListener("abort",w),d.on("signal",v=>{u.emit("ss-handshake",{intentId:s,srcMultiaddr:c.signallingAddr.toString(),dstMultiaddr:e.toString(),signal:v})}),u.on("ws-handshake",v=>{v.intentId===s&&v.err&&(d.destroy(),a(F8(v.err instanceof Error?v.err:new Error(v.err),"ERR_SIGNALLING_FAILED"))),!(v.intentId!==s||!v.answer||d.destroyed)&&d.signal(v.signal)})})}createListener(e={},r){if(!wFe&&!this.wrtc)throw F8(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return typeof e=="function"&&(r=e,e={}),r=r||TFe,AFe({handler:r,upgrader:this._upgrader},this,e)}filter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>r.protoCodes().includes(SFe)?!1:vFe.WebRTCStar.matches(r))}_peerDiscovered(e){if(!this.discovery._isStarted)return;Xc("Peer Discovered:",e),e=RFe(e);let r=new _Fe(e),i=EFe.createFromB58String(r.getPeerId());this.discovery.emit("peer",{id:i,multiaddrs:[r]})}};tle.exports=mFe(ele,{className:"WebRTCStar",symbolName:"@libp2p/js-libp2p-webrtc-star/webrtcstar"})});var ale=g((EPt,ole)=>{f();"use strict";var K8=Cn(),ile=tn(),cT=10*1024,nle=class{constructor(){this._pool=new Uint8Array(cT),this._poolOffset=0}write(e){let r=this._pool,i=this._poolOffset;K8.encode(e.id<<3|e.type,r,i),i+=K8.encode.bytes,K8.encode(e.data?e.data.length:0,r,i),i+=K8.encode.bytes;let n=r.subarray(this._poolOffset,i);return cT-i<100?(this._pool=new Uint8Array(cT),this._poolOffset=0):this._poolOffset=i,e.data?[n,e.data]:n}},sle=new nle;ole.exports=t=>async function*(){for await(let r of t)Array.isArray(r)?yield new ile(r.map(i=>sle.write(i))):yield new ile(sle.write(r))}()});var lle=g((SPt,ule)=>{f();"use strict";var V8=Cn(),PFe=tn();ule.exports=t=>async function*(){let r=new cle;for await(let i of t){let n=r.write(i);n.length&&(yield n)}}();var cle=class{constructor(){this._buffer=new PFe,this._bufferProxy=new Proxy({},{get:(e,r)=>r[0]==="l"?this._buffer[r]:this._buffer.get(parseInt(r))}),this._headerInfo=null}write(e){if(!e||!e.length)return[];this._buffer.append(e);let r=[];for(;this._buffer.length;){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch(c){break}let{id:i,type:n,length:s,offset:o}=this._headerInfo;if(this._buffer.length-o<s)break;r.push({id:i,type:n,data:this._buffer.shallowSlice(o,o+s)}),this._buffer.consume(o+s),this._headerInfo=null}return r}_decodeHeader(e){let r=V8.decode(e),i=V8.decode.bytes,n=V8.decode(e,i);return i+=V8.decode.bytes,{id:r>>3,type:r&7,offset:i,length:n}}}});var fle=g(uT=>{f();"use strict";uT.encode=ale();uT.decode=lle()});var fT=g((xPt,lT)=>{f();"use strict";var hle=1<<20;lT.exports=t=>{t=t||hle;let e=r=>{if(r.data&&r.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return r=>async function*(){for await(let n of r)Array.isArray(n)?n.forEach(e):e(n),yield n}()};lT.exports.MAX_MSG_SIZE=hle});var hT=g(Wg=>{f();"use strict";var Qc=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});Wg.MessageTypes=Qc;Wg.InitiatorMessageTypes=Object.freeze({NEW_STREAM:Qc.NEW_STREAM,MESSAGE:Qc.MESSAGE_INITIATOR,CLOSE:Qc.CLOSE_INITIATOR,RESET:Qc.RESET_INITIATOR});Wg.ReceiverMessageTypes=Object.freeze({MESSAGE:Qc.MESSAGE_RECEIVER,CLOSE:Qc.CLOSE_RECEIVER,RESET:Qc.RESET_RECEIVER});Wg.MessageTypeNames=Object.freeze(Object.entries(Qc).reduce((t,e)=>(t[e[1]]=e[0],t),{}))});var yle=g((IPt,ple)=>{f();"use strict";function dle(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function CFe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return dle(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),dle(new n,r)}}ple.exports=CFe});var wle=g((TPt,ble)=>{f();"use strict";var OFe=Fa(),gle=z3(),Yg=ce()("libp2p:mplex:stream"),kFe=Ea(),mle=tn(),DFe=yle(),{MAX_MSG_SIZE:NFe}=fT(),{InitiatorMessageTypes:BFe,ReceiverMessageTypes:LFe}=hT(),dT="ERR_MPLEX_STREAM_RESET",MFe="ERR_MPLEX_STREAM_ABORT";ble.exports=({id:t,name:e,send:r,onEnd:i=()=>{},type:n="initiator",maxMsgSize:s=NFe})=>{let o=new gle,a=new gle,c=n==="initiator"?BFe:LFe,u=n==="initiator"?`i${t}`:`r${t}`;e=String(e??t);let l=!1,h=!1,d,p=w=>{l||(l=!0,Yg("%s stream %s source end",n,e,w),w&&!d&&(d=w),h&&(m.timeline.close=Date.now(),i(d)))},y=w=>{h||(h=!0,Yg("%s stream %s sink end",n,e,w),w&&!d&&(d=w),l&&(m.timeline.close=Date.now(),i(d)))},m={close:()=>m.source.end(),abort:w=>{Yg("%s stream %s abort",n,e,w),m.source.end(w),o.abort(),y(w)},reset:()=>{let w=DFe(new Error("stream reset"),dT);a.abort(),m.source.end(w),y(w)},sink:async w=>{w=OFe(w,[{signal:o.signal,options:{abortMessage:"stream aborted",abortCode:MFe}},{signal:a.signal,options:{abortMessage:"stream reset",abortCode:dT}}]),n==="initiator"&&r({id:t,type:c.NEW_STREAM,data:e});try{for await(let b of w)for(;b.length;){if(b.length<=s){r({id:t,type:c.MESSAGE,data:b});break}b=mle.isBufferList(b)?b:new mle(b),r({id:t,type:c.MESSAGE,data:b.shallowSlice(0,s)}),b.consume(s)}}catch(b){return b.code===dT?Yg("%s stream %s reset",n,e):(Yg("%s stream %s error",n,e,b),r({id:t,type:c.RESET})),m.source.end(b),y(b)}r({id:t,type:c.CLOSE}),y()},source:kFe(p),timeline:{open:Date.now(),close:null},id:u};return m}});var Sle=g((PPt,Ele)=>{f();"use strict";var jFe=vr(),qFe=Ea(),Zc=ce()("libp2p:mplex"),UFe=Fa(),_le=fle(),FFe=fT(),{MessageTypes:Dh,MessageTypeNames:vle}=hT(),KFe=wle(),pT=class{constructor(e){e=e||{},e=typeof e=="function"?{onStream:e}:e,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=e,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=e.onStream,this.onStreamEnd=e.onStreamEnd}get streams(){let e=[];return this._streams.initiators.forEach(r=>{e.push(r)}),this._streams.receivers.forEach(r=>{e.push(r)}),e}newStream(e){let r=this._streamId++;e=e==null?r.toString():String(e);let i=this._streams.initiators;return this._newStream({id:r,name:e,type:"initiator",registry:i})}_newReceiverStream({id:e,name:r}){let i=this._streams.receivers;return this._newStream({id:e,name:r,type:"receiver",registry:i})}_newStream({id:e,name:r,type:i,registry:n}){if(n.has(e))throw new Error(`${i} stream ${e} already exists!`);Zc("new %s stream %s %s",i,e,r);let a=KFe({id:e,name:r,send:c=>(Zc.enabled&&Zc("%s stream %s %s send",i,e,r,{...c,type:vle[c.type],data:c.data&&c.data.slice()}),this.source.push(c)),type:i,onEnd:()=>{Zc("%s stream %s %s ended",i,e,r),n.delete(e),this.onStreamEnd&&this.onStreamEnd(a)},maxMsgSize:this._options.maxMsgSize});return n.set(e,a),a}_createSink(){return async e=>{this._options.signal&&(e=UFe(e,this._options.signal));try{await jFe(e,_le.decode,FFe(this._options.maxMsgSize),async r=>{for await(let i of r)for(let n of i)this._handleIncoming(n)})}catch(r){return Zc("error in sink",r),this.source.end(r)}this.source.end()}}_createSource(){let r=qFe({onEnd:i=>{let{initiators:n,receivers:s}=this._streams;for(let o of n.values())o.abort(i);for(let o of s.values())o.abort(i)},writev:!0});return Object.assign(_le.encode(r),{push:r.push,end:r.end,return:r.return})}_handleIncoming({id:e,type:r,data:i}){if(Zc.enabled&&Zc("incoming message",{id:e,type:vle[r],data:i.slice()}),r===Dh.NEW_STREAM&&this.onStream){let o=this._newReceiverStream({id:e,name:i.toString()});return this.onStream(o)}let s=(r&1?this._streams.initiators:this._streams.receivers).get(e);if(!s)return Zc("missing stream %s",e);switch(r){case Dh.MESSAGE_INITIATOR:case Dh.MESSAGE_RECEIVER:s.source.push(i);break;case Dh.CLOSE_INITIATOR:case Dh.CLOSE_RECEIVER:s.close();break;case Dh.RESET_INITIATOR:case Dh.RESET_RECEIVER:s.reset();break;default:Zc("unknown message type %s",r)}}};pT.multicodec="/mplex/6.7.0";Ele.exports=pT});var xle=g((CPt,Ale)=>{f();"use strict";Ale.exports=Sle()});var Ile=g(yT=>{f();"use strict";Object.defineProperty(yT,"__esModule",{value:!0});var Rle=65536,VFe=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(e),i=0;i<r.length;i+=Rle)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,Rle)));return r},t}();yT.BrowserRandomSource=VFe});var Xa=g(gT=>{f();"use strict";Object.defineProperty(gT,"__esModule",{value:!0});function zFe(t){for(var e=0;e<t.length;e++)t[e]=0;return t}gT.wipe=zFe});var Tle=g(mT=>{f();"use strict";Object.defineProperty(mT,"__esModule",{value:!0});var HFe=Xa(),$Fe=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof ps!="undefined"){var e=ff();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var i=new Uint8Array(e),n=0;n<i.length;n++)i[n]=r[n];return HFe.wipe(r),i},t}();mT.NodeRandomSource=$Fe});var Ple=g(bT=>{f();"use strict";Object.defineProperty(bT,"__esModule",{value:!0});var GFe=Ile(),WFe=Tle(),YFe=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new GFe.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new WFe.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();bT.SystemRandomSource=YFe});var Cle=g(as=>{f();"use strict";Object.defineProperty(as,"__esModule",{value:!0});function XFe(t,e){var r=t>>>16&65535,i=t&65535,n=e>>>16&65535,s=e&65535;return i*s+(r*s+i*n<<16>>>0)|0}as.mul=Math.imul||XFe;function QFe(t,e){return t+e|0}as.add=QFe;function ZFe(t,e){return t-e|0}as.sub=ZFe;function JFe(t,e){return t<<e|t>>>32-e}as.rotl=JFe;function eKe(t,e){return t<<32-e|t>>>e}as.rotr=eKe;function tKe(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}as.isInteger=Number.isInteger||tKe;as.MAX_SAFE_INTEGER=9007199254740991;as.isSafeInteger=function(t){return as.isInteger(t)&&t>=-as.MAX_SAFE_INTEGER&&t<=as.MAX_SAFE_INTEGER}});var Xg=g(wt=>{f();"use strict";Object.defineProperty(wt,"__esModule",{value:!0});var Ole=Cle();function rKe(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}wt.readInt16BE=rKe;function iKe(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}wt.readUint16BE=iKe;function nKe(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}wt.readInt16LE=nKe;function sKe(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}wt.readUint16LE=sKe;function kle(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}wt.writeUint16BE=kle;wt.writeInt16BE=kle;function Dle(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}wt.writeUint16LE=Dle;wt.writeInt16LE=Dle;function wT(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}wt.readInt32BE=wT;function _T(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}wt.readUint32BE=_T;function vT(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}wt.readInt32LE=vT;function ET(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}wt.readUint32LE=ET;function z8(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}wt.writeUint32BE=z8;wt.writeInt32BE=z8;function H8(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}wt.writeUint32LE=H8;wt.writeInt32LE=H8;function oKe(t,e){e===void 0&&(e=0);var r=wT(t,e),i=wT(t,e+4);return r*4294967296+i-(i>>31)*4294967296}wt.readInt64BE=oKe;function aKe(t,e){e===void 0&&(e=0);var r=_T(t,e),i=_T(t,e+4);return r*4294967296+i}wt.readUint64BE=aKe;function cKe(t,e){e===void 0&&(e=0);var r=vT(t,e),i=vT(t,e+4);return i*4294967296+r-(r>>31)*4294967296}wt.readInt64LE=cKe;function uKe(t,e){e===void 0&&(e=0);var r=ET(t,e),i=ET(t,e+4);return i*4294967296+r}wt.readUint64LE=uKe;function Nle(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),z8(t/4294967296>>>0,e,r),z8(t>>>0,e,r+4),e}wt.writeUint64BE=Nle;wt.writeInt64BE=Nle;function Ble(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),H8(t>>>0,e,r),H8(t/4294967296>>>0,e,r+4),e}wt.writeUint64LE=Ble;wt.writeInt64LE=Ble;function lKe(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=t/8+r-1;s>=r;s--)i+=e[s]*n,n*=256;return i}wt.readUintBE=lKe;function fKe(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+t/8;s++)i+=e[s]*n,n*=256;return i}wt.readUintLE=fKe;function hKe(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Ole.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,s=t/8+i-1;s>=i;s--)r[s]=e/n&255,n*=256;return r}wt.writeUintBE=hKe;function dKe(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Ole.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+t/8;s++)r[s]=e/n&255,n*=256;return r}wt.writeUintLE=dKe;function pKe(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}wt.readFloat32BE=pKe;function yKe(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}wt.readFloat32LE=yKe;function gKe(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}wt.readFloat64BE=gKe;function mKe(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}wt.readFloat64LE=mKe;function bKe(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}wt.writeFloat32BE=bKe;function wKe(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}wt.writeFloat32LE=wKe;function _Ke(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}wt.writeFloat64BE=_Ke;function vKe(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}wt.writeFloat64LE=vKe});var qle=g(Ho=>{f();"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var EKe=Ple(),SKe=Xg(),Lle=Xa();Ho.defaultRandomSource=new EKe.SystemRandomSource;function ST(t,e){return e===void 0&&(e=Ho.defaultRandomSource),e.randomBytes(t)}Ho.randomBytes=ST;function AKe(t){t===void 0&&(t=Ho.defaultRandomSource);var e=ST(4,t),r=SKe.readUint32LE(e);return Lle.wipe(e),r}Ho.randomUint32=AKe;var Mle="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function jle(t,e,r){if(e===void 0&&(e=Mle),r===void 0&&(r=Ho.defaultRandomSource),e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");for(var i="",n=e.length,s=256-256%n;t>0;){for(var o=ST(Math.ceil(t*256/s),r),a=0;a<o.length&&t>0;a++){var c=o[a];c<s&&(i+=e.charAt(c%n),t--)}Lle.wipe(o)}return i}Ho.randomString=jle;function xKe(t,e,r){e===void 0&&(e=Mle),r===void 0&&(r=Ho.defaultRandomSource);var i=Math.ceil(t/(Math.log(e.length)/Math.LN2));return jle(i,e,r)}Ho.randomStringForEntropy=xKe});var W8=g(Kn=>{f();"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});var RKe=qle(),IKe=Xa();Kn.PUBLIC_KEY_LENGTH=32;Kn.SECRET_KEY_LENGTH=32;Kn.SHARED_KEY_LENGTH=32;function Qa(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}var Ule=new Uint8Array(32);Ule[0]=9;var TKe=Qa([56129,1]);function AT(t){for(var e=1,r=0;r<16;r++){var i=t[r]+e+65535;e=Math.floor(i/65536),t[r]=i-e*65536}t[0]+=e-1+37*(e-1)}function Qg(t,e,r){for(var i=~(r-1),n=0;n<16;n++){var s=i&(t[n]^e[n]);t[n]^=s,e[n]^=s}}function PKe(t,e){for(var r=Qa(),i=Qa(),n=0;n<16;n++)i[n]=e[n];AT(i),AT(i),AT(i);for(var s=0;s<2;s++){r[0]=i[0]-65517;for(var n=1;n<15;n++)r[n]=i[n]-65535-(r[n-1]>>16&1),r[n-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);var o=r[15]>>16&1;r[14]&=65535,Qg(i,r,1-o)}for(var n=0;n<16;n++)t[2*n]=i[n]&255,t[2*n+1]=i[n]>>8}function CKe(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function $8(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]+r[i]}function G8(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]-r[i]}function Jc(t,e,r){var i,n,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,w=0,b=0,v=0,x=0,B=0,O=0,R=0,N=0,F=0,U=0,ie=0,te=0,ae=0,ue=0,De=0,ve=0,Ne=0,ee=0,Me=0,dt=0,ze=r[0],$e=r[1],le=r[2],Z=r[3],we=r[4],je=r[5],Ue=r[6],Re=r[7],rt=r[8],P=r[9],k=r[10],L=r[11],I=r[12],T=r[13],D=r[14],M=r[15];i=e[0],s+=i*ze,o+=i*$e,a+=i*le,c+=i*Z,u+=i*we,l+=i*je,h+=i*Ue,d+=i*Re,p+=i*rt,y+=i*P,m+=i*k,w+=i*L,b+=i*I,v+=i*T,x+=i*D,B+=i*M,i=e[1],o+=i*ze,a+=i*$e,c+=i*le,u+=i*Z,l+=i*we,h+=i*je,d+=i*Ue,p+=i*Re,y+=i*rt,m+=i*P,w+=i*k,b+=i*L,v+=i*I,x+=i*T,B+=i*D,O+=i*M,i=e[2],a+=i*ze,c+=i*$e,u+=i*le,l+=i*Z,h+=i*we,d+=i*je,p+=i*Ue,y+=i*Re,m+=i*rt,w+=i*P,b+=i*k,v+=i*L,x+=i*I,B+=i*T,O+=i*D,R+=i*M,i=e[3],c+=i*ze,u+=i*$e,l+=i*le,h+=i*Z,d+=i*we,p+=i*je,y+=i*Ue,m+=i*Re,w+=i*rt,b+=i*P,v+=i*k,x+=i*L,B+=i*I,O+=i*T,R+=i*D,N+=i*M,i=e[4],u+=i*ze,l+=i*$e,h+=i*le,d+=i*Z,p+=i*we,y+=i*je,m+=i*Ue,w+=i*Re,b+=i*rt,v+=i*P,x+=i*k,B+=i*L,O+=i*I,R+=i*T,N+=i*D,F+=i*M,i=e[5],l+=i*ze,h+=i*$e,d+=i*le,p+=i*Z,y+=i*we,m+=i*je,w+=i*Ue,b+=i*Re,v+=i*rt,x+=i*P,B+=i*k,O+=i*L,R+=i*I,N+=i*T,F+=i*D,U+=i*M,i=e[6],h+=i*ze,d+=i*$e,p+=i*le,y+=i*Z,m+=i*we,w+=i*je,b+=i*Ue,v+=i*Re,x+=i*rt,B+=i*P,O+=i*k,R+=i*L,N+=i*I,F+=i*T,U+=i*D,ie+=i*M,i=e[7],d+=i*ze,p+=i*$e,y+=i*le,m+=i*Z,w+=i*we,b+=i*je,v+=i*Ue,x+=i*Re,B+=i*rt,O+=i*P,R+=i*k,N+=i*L,F+=i*I,U+=i*T,ie+=i*D,te+=i*M,i=e[8],p+=i*ze,y+=i*$e,m+=i*le,w+=i*Z,b+=i*we,v+=i*je,x+=i*Ue,B+=i*Re,O+=i*rt,R+=i*P,N+=i*k,F+=i*L,U+=i*I,ie+=i*T,te+=i*D,ae+=i*M,i=e[9],y+=i*ze,m+=i*$e,w+=i*le,b+=i*Z,v+=i*we,x+=i*je,B+=i*Ue,O+=i*Re,R+=i*rt,N+=i*P,F+=i*k,U+=i*L,ie+=i*I,te+=i*T,ae+=i*D,ue+=i*M,i=e[10],m+=i*ze,w+=i*$e,b+=i*le,v+=i*Z,x+=i*we,B+=i*je,O+=i*Ue,R+=i*Re,N+=i*rt,F+=i*P,U+=i*k,ie+=i*L,te+=i*I,ae+=i*T,ue+=i*D,De+=i*M,i=e[11],w+=i*ze,b+=i*$e,v+=i*le,x+=i*Z,B+=i*we,O+=i*je,R+=i*Ue,N+=i*Re,F+=i*rt,U+=i*P,ie+=i*k,te+=i*L,ae+=i*I,ue+=i*T,De+=i*D,ve+=i*M,i=e[12],b+=i*ze,v+=i*$e,x+=i*le,B+=i*Z,O+=i*we,R+=i*je,N+=i*Ue,F+=i*Re,U+=i*rt,ie+=i*P,te+=i*k,ae+=i*L,ue+=i*I,De+=i*T,ve+=i*D,Ne+=i*M,i=e[13],v+=i*ze,x+=i*$e,B+=i*le,O+=i*Z,R+=i*we,N+=i*je,F+=i*Ue,U+=i*Re,ie+=i*rt,te+=i*P,ae+=i*k,ue+=i*L,De+=i*I,ve+=i*T,Ne+=i*D,ee+=i*M,i=e[14],x+=i*ze,B+=i*$e,O+=i*le,R+=i*Z,N+=i*we,F+=i*je,U+=i*Ue,ie+=i*Re,te+=i*rt,ae+=i*P,ue+=i*k,De+=i*L,ve+=i*I,Ne+=i*T,ee+=i*D,Me+=i*M,i=e[15],B+=i*ze,O+=i*$e,R+=i*le,N+=i*Z,F+=i*we,U+=i*je,ie+=i*Ue,te+=i*Re,ae+=i*rt,ue+=i*P,De+=i*k,ve+=i*L,Ne+=i*I,ee+=i*T,Me+=i*D,dt+=i*M,s+=38*O,o+=38*R,a+=38*N,c+=38*F,u+=38*U,l+=38*ie,h+=38*te,d+=38*ae,p+=38*ue,y+=38*De,m+=38*ve,w+=38*Ne,b+=38*ee,v+=38*Me,x+=38*dt,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=l+n+65535,n=Math.floor(i/65536),l=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=x+n+65535,n=Math.floor(i/65536),x=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=l+n+65535,n=Math.floor(i/65536),l=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=x+n+65535,n=Math.floor(i/65536),x=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=h,t[7]=d,t[8]=p,t[9]=y,t[10]=m,t[11]=w,t[12]=b,t[13]=v,t[14]=x,t[15]=B}function Zg(t,e){Jc(t,e,e)}function OKe(t,e){for(var r=Qa(),i=0;i<16;i++)r[i]=e[i];for(var i=253;i>=0;i--)Zg(r,r),i!==2&&i!==4&&Jc(r,r,e);for(var i=0;i<16;i++)t[i]=r[i]}function xT(t,e){for(var r=new Uint8Array(32),i=new Float64Array(80),n=Qa(),s=Qa(),o=Qa(),a=Qa(),c=Qa(),u=Qa(),l=0;l<31;l++)r[l]=t[l];r[31]=t[31]&127|64,r[0]&=248,CKe(i,e);for(var l=0;l<16;l++)s[l]=i[l];n[0]=a[0]=1;for(var l=254;l>=0;--l){var h=r[l>>>3]>>>(l&7)&1;Qg(n,s,h),Qg(o,a,h),$8(c,n,o),G8(n,n,o),$8(o,s,a),G8(s,s,a),Zg(a,c),Zg(u,n),Jc(n,o,n),Jc(o,s,c),$8(c,n,o),G8(n,n,o),Zg(s,n),G8(o,a,u),Jc(n,o,TKe),$8(n,n,a),Jc(o,o,n),Jc(n,a,u),Jc(a,s,i),Zg(s,c),Qg(n,s,h),Qg(o,a,h)}for(var l=0;l<16;l++)i[l+16]=n[l],i[l+32]=o[l],i[l+48]=s[l],i[l+64]=a[l];var d=i.subarray(32),p=i.subarray(16);OKe(d,d),Jc(p,p,d);var y=new Uint8Array(32);return PKe(y,p),y}Kn.scalarMult=xT;function Fle(t){return xT(t,Ule)}Kn.scalarMultBase=Fle;function Kle(t){if(t.length!==Kn.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+Kn.SECRET_KEY_LENGTH+" bytes");var e=new Uint8Array(t),r=Fle(e);return{publicKey:r,secretKey:e}}Kn.generateKeyPairFromSeed=Kle;function kKe(t){var e=RKe.randomBytes(32,t),r=Kle(e);return IKe.wipe(e),r}Kn.generateKeyPair=kKe;function DKe(t,e,r){if(r===void 0&&(r=!1),t.length!==Kn.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==Kn.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=xT(t,e);if(r){for(var n=0,s=0;s<i.length;s++)n|=i[s];if(n===0)throw new Error("X25519: invalid shared key")}return i}Kn.sharedKey=DKe});var H0=g((qPt,Vle)=>{f();"use strict";var NKe=K6(),BKe=Ea(),LKe=xa();Vle.exports=t=>{let e=BKe(),r=NKe(t.source),i=LKe(),n,s=t.sink(async function*(){yield*e,yield*await i.promise}());return s.catch(a=>{n=a}),{reader:r,writer:e,stream:{sink:a=>n?Promise.reject(n):(i.resolve(a),s),source:r},rest:()=>e.end(),write:e.push,read:async()=>(await r.next()).value}}});var $le=g((UPt,Hle)=>{f();"use strict";var MKe=bx(),jKe=H0(),zle=qo();Hle.exports=(t,e={})=>{let r=jKe(t),i=zle.decode.fromReader(r.reader,e),n=!1,s={read:async o=>{let{value:a,done:c}=await r.reader.next(o);if(c&&a.length<o)throw new Error("Couldn't read enough bytes");if(n=c,!a)throw new Error("Value is null");return a},readLP:async()=>{let{value:o,done:a}=await i.next();if(n=a,!o)throw new Error("Value is null");return o},readPB:async o=>{let a=await s.readLP();if(!a)throw new Error("Value is null");let c=MKe(a)?a:a.slice();return o.decode(c)},write:o=>{r.writer.push(o)},writeLP:o=>{s.write(zle.encode.single(o,e))},writePB:(o,a)=>{s.writeLP(a.encode(o))},pb:o=>({read:()=>s.readPB(o),write:a=>s.writePB(a,o)}),unwrap:()=>(r.rest(),r.stream)};return s}});var Wle=g((FPt,Gle)=>{f();"use strict";var qKe=M5();Gle.exports=function(){let e,r,i=async s=>{if(e)throw new Error("already piped");e=qKe(s),r&&r(e)},n={[Symbol.asyncIterator](){return this},next(){return e?e.next():new Promise(s=>{r=o=>{r=null,s(o.next())}})}};return{sink:i,source:n}}});var Qle=g((KPt,Xle)=>{f();var Yle=Wle();Xle.exports=function(){var t=Yle(),e=Yle();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}});var Q8=g((VPt,Jg)=>{f();"use strict";var{Buffer:Y8}=Gt(),X8=tn();Jg.exports=async function*(t){for await(let e of t)Y8.isBuffer(e)?yield e:X8.isBufferList(e)?yield e.slice():yield Y8.from(e)};Jg.exports.toBuffer=Jg.exports;Jg.exports.toList=async function*(t){for await(let e of t)Y8.isBuffer(e)?yield new X8().append(e):X8.isBufferList(e)?yield e:yield new X8().append(Y8.from(e))}});var Zle=g(RT=>{f();"use strict";Object.defineProperty(RT,"__esModule",{value:!0});function UKe(t){return typeof t.saveState!="undefined"&&typeof t.restoreState!="undefined"&&typeof t.cleanSavedState!="undefined"}RT.isSerializableHash=UKe});var Z8=g($0=>{f();"use strict";Object.defineProperty($0,"__esModule",{value:!0});function FKe(t,e,r){return~(t-1)&e|t-1&r}$0.select=FKe;function KKe(t,e){return(t|0)-(e|0)-1>>>31&1}$0.lessOrEqual=KKe;function Jle(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}$0.compare=Jle;function VKe(t,e){return t.length===0||e.length===0?!1:Jle(t,e)!==0}$0.equal=VKe});var tfe=g(em=>{f();"use strict";Object.defineProperty(em,"__esModule",{value:!0});var Za=Zle(),zKe=Z8(),HKe=Xa(),efe=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=54^92;this._outer.update(i),Za.isSerializableHash(this._inner)&&Za.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),HKe.wipe(i)}return t.prototype.reset=function(){if(!Za.isSerializableHash(this._inner)||!Za.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Za.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Za.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Za.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Za.isSerializableHash(this._inner)||!Za.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Za.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();em.HMAC=efe;function $Ke(t,e,r){var i=new efe(t,e);i.update(r);var n=i.digest();return i.clean(),n}em.hmac=$Ke;em.equal=zKe.equal});var nfe=g(IT=>{f();"use strict";Object.defineProperty(IT,"__esModule",{value:!0});var rfe=tfe(),ife=Xa(),GKe=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var s=rfe.hmac(this._hash,i,r);this._hmac=new rfe.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),ife.wipe(this._buffer),ife.wipe(this._counter),this._bufpos=0},t}();IT.HKDF=GKe});var PT=g(Ml=>{f();"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var J8=Xg(),ew=Xa();Ml.DIGEST_LENGTH=32;Ml.BLOCK_SIZE=64;var sfe=function(){function t(){this.digestLength=Ml.DIGEST_LENGTH,this.blockSize=Ml.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){ew.wipe(this._buffer),ew.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[i++],r--;this._bufferLength===this.blockSize&&(TT(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=TT(this._temp,this._state,e,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[i++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,n=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[i]=128;for(var a=i+1;a<o-8;a++)this._buffer[a]=0;J8.writeUint32BE(n,this._buffer,o-8),J8.writeUint32BE(s,this._buffer,o-4),TT(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)J8.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){ew.wipe(e.state),e.buffer&&ew.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Ml.SHA256=sfe;var WKe=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function TT(t,e,r,i,n){for(;n>=64;){for(var s=e[0],o=e[1],a=e[2],c=e[3],u=e[4],l=e[5],h=e[6],d=e[7],p=0;p<16;p++){var y=i+p*4;t[p]=J8.readUint32BE(r,y)}for(var p=16;p<64;p++){var m=t[p-2],w=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=t[p-15];var b=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;t[p]=(w+t[p-7]|0)+(b+t[p-16]|0)}for(var p=0;p<64;p++){var w=(((u>>>6|u<<32-6)^(u>>>11|u<<32-11)^(u>>>25|u<<32-25))+(u&l^~u&h)|0)+(d+(WKe[p]+t[p]|0)|0)|0,b=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&o^s&a^o&a)|0;d=h,h=l,l=u,u=c+w|0,c=a,a=o,o=s,s=w+b|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=c,e[4]+=u,e[5]+=l,e[6]+=h,e[7]+=d,i+=64,n-=64}return i}function YKe(t){var e=new sfe;e.update(t);var r=e.digest();return e.clean(),r}Ml.hash=YKe});var afe=g((ofe,tm)=>{f();"use strict";(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof ps=="function"&&typeof tm=="object"&&tm&&tm.exports&&(tm.exports=e(Si()))})(ofe,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return n.pb=function(){var s={};return s.NoiseHandshakePayload=function(){function o(a){if(a)for(var c=Object.keys(a),u=0;u<c.length;++u)a[c[u]]!=null&&(this[c[u]]=a[c[u]])}return o.prototype.identityKey=i.newBuffer([]),o.prototype.identitySig=i.newBuffer([]),o.prototype.data=i.newBuffer([]),o.create=function(c){return new o(c)},o.encode=function(c,u){return u||(u=r.create()),c.identityKey!=null&&Object.hasOwnProperty.call(c,"identityKey")&&u.uint32(10).bytes(c.identityKey),c.identitySig!=null&&Object.hasOwnProperty.call(c,"identitySig")&&u.uint32(18).bytes(c.identitySig),c.data!=null&&Object.hasOwnProperty.call(c,"data")&&u.uint32(26).bytes(c.data),u},o.encodeDelimited=function(c,u){return this.encode(c,u).ldelim()},o.decode=function(c,u){c instanceof e||(c=e.create(c));for(var l=u===void 0?c.len:c.pos+u,h=new n.pb.NoiseHandshakePayload;c.pos<l;){var d=c.uint32();switch(d>>>3){case 1:h.identityKey=c.bytes();break;case 2:h.identitySig=c.bytes();break;case 3:h.data=c.bytes();break;default:c.skipType(d&7);break}}return h},o.decodeDelimited=function(c){return c instanceof e||(c=new e(c)),this.decode(c,c.uint32())},o.verify=function(c){return typeof c!="object"||c===null?"object expected":c.identityKey!=null&&c.hasOwnProperty("identityKey")&&!(c.identityKey&&typeof c.identityKey.length=="number"||i.isString(c.identityKey))?"identityKey: buffer expected":c.identitySig!=null&&c.hasOwnProperty("identitySig")&&!(c.identitySig&&typeof c.identitySig.length=="number"||i.isString(c.identitySig))?"identitySig: buffer expected":c.data!=null&&c.hasOwnProperty("data")&&!(c.data&&typeof c.data.length=="number"||i.isString(c.data))?"data: buffer expected":null},o.fromObject=function(c){if(c instanceof n.pb.NoiseHandshakePayload)return c;var u=new n.pb.NoiseHandshakePayload;return c.identityKey!=null&&(typeof c.identityKey=="string"?i.base64.decode(c.identityKey,u.identityKey=i.newBuffer(i.base64.length(c.identityKey)),0):c.identityKey.length&&(u.identityKey=c.identityKey)),c.identitySig!=null&&(typeof c.identitySig=="string"?i.base64.decode(c.identitySig,u.identitySig=i.newBuffer(i.base64.length(c.identitySig)),0):c.identitySig.length&&(u.identitySig=c.identitySig)),c.data!=null&&(typeof c.data=="string"?i.base64.decode(c.data,u.data=i.newBuffer(i.base64.length(c.data)),0):c.data.length&&(u.data=c.data)),u},o.toObject=function(c,u){u||(u={});var l={};return u.defaults&&(u.bytes===String?l.identityKey="":(l.identityKey=[],u.bytes!==Array&&(l.identityKey=i.newBuffer(l.identityKey))),u.bytes===String?l.identitySig="":(l.identitySig=[],u.bytes!==Array&&(l.identitySig=i.newBuffer(l.identitySig))),u.bytes===String?l.data="":(l.data=[],u.bytes!==Array&&(l.data=i.newBuffer(l.data)))),c.identityKey!=null&&c.hasOwnProperty("identityKey")&&(l.identityKey=u.bytes===String?i.base64.encode(c.identityKey,0,c.identityKey.length):u.bytes===Array?Array.prototype.slice.call(c.identityKey):c.identityKey),c.identitySig!=null&&c.hasOwnProperty("identitySig")&&(l.identitySig=u.bytes===String?i.base64.encode(c.identitySig,0,c.identitySig.length):u.bytes===Array?Array.prototype.slice.call(c.identitySig):c.identitySig),c.data!=null&&c.hasOwnProperty("data")&&(l.data=u.bytes===String?i.base64.encode(c.data,0,c.data.length):u.bytes===Array?Array.prototype.slice.call(c.data):c.data),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s}(),n})});var jl=g(Zt=>{f();"use strict";var XKe=Zt&&Zt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),QKe=Zt&&Zt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ZKe=Zt&&Zt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XKe(e,t,r);return QKe(e,t),e},JKe=Zt&&Zt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.isValidPublicKey=Zt.getHkdf=Zt.verifySignedPayload=Zt.getHandshakePayload=Zt.decodePayload=Zt.getPeerIdFromPayload=Zt.signPayload=Zt.createHandshakePayload=Zt.getPayload=Zt.generateKeypair=void 0;var eVe=nfe(),tVe=PT(),rVe=ZKe(W8()),Vn=Gt(),CT=JKe(Je()),iVe=afe(),nVe=(qi(),Zn),tw=iVe.pb.NoiseHandshakePayload;function sVe(){let t=rVe.generateKeyPair();return{publicKey:Vn.Buffer.from(t.publicKey.buffer,t.publicKey.byteOffset,t.publicKey.length),privateKey:Vn.Buffer.from(t.secretKey.buffer,t.secretKey.byteOffset,t.secretKey.length)}}Zt.generateKeypair=sVe;async function oVe(t,e,r){let i=await ufe(t,OT(e)),n=r??Vn.Buffer.alloc(0);return cfe(t.marshalPubKey(),i,n)}Zt.getPayload=oVe;function cfe(t,e,r){let i=tw.create({identityKey:Vn.Buffer.from(t),identitySig:e,data:r??null});return Vn.Buffer.from(tw.encode(i).finish())}Zt.createHandshakePayload=cfe;async function ufe(t,e){return Vn.Buffer.from(await t.privKey.sign(e))}Zt.signPayload=ufe;async function aVe(t){return await CT.default.createFromPubKey(Vn.Buffer.from(t.identityKey))}Zt.getPeerIdFromPayload=aVe;function cVe(t){return tw.toObject(tw.decode(Vn.Buffer.from(t)))}Zt.decodePayload=cVe;function OT(t){return Vn.Buffer.concat([Vn.Buffer.from("noise-libp2p-static-key:"),t])}Zt.getHandshakePayload=OT;async function uVe(t,e){let r=await CT.default.createFromPubKey(e);return nVe.equals(r.id,t)}async function lVe(t,e,r){let i=Vn.Buffer.from(e.identityKey);if(!await uVe(r.id,i))throw new Error("Peer ID doesn't match libp2p public key.");let n=OT(t),s=await CT.default.createFromPubKey(i);if(!e.identitySig||!s.pubKey.verify(n,Vn.Buffer.from(e.identitySig)))throw new Error("Static key doesn't match to peer that signed payload!");return s}Zt.verifySignedPayload=lVe;function fVe(t,e){let i=new eVe.HKDF(tVe.SHA256,e,t).expand(96),n=Vn.Buffer.from(i.buffer,i.byteOffset,i.length),s=n.slice(0,32),o=n.slice(32,64),a=n.slice(64,96);return[s,o,a]}Zt.getHkdf=fVe;function hVe(t){return!(!Vn.Buffer.isBuffer(t)||t.length!==32)}Zt.isValidPublicKey=hVe});var ffe=g(rw=>{f();"use strict";Object.defineProperty(rw,"__esModule",{value:!0});var on=Xg(),kT=Xa(),dVe=20;function pVe(t,e,r){for(var i=1634760805,n=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],l=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],d=r[23]<<24|r[22]<<16|r[21]<<8|r[20],p=r[27]<<24|r[26]<<16|r[25]<<8|r[24],y=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],w=e[7]<<24|e[6]<<16|e[5]<<8|e[4],b=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],x=i,B=n,O=s,R=o,N=a,F=c,U=u,ie=l,te=h,ae=d,ue=p,De=y,ve=m,Ne=w,ee=b,Me=v,dt=0;dt<dVe;dt+=2)x=x+N|0,ve^=x,ve=ve>>>32-16|ve<<16,te=te+ve|0,N^=te,N=N>>>32-12|N<<12,B=B+F|0,Ne^=B,Ne=Ne>>>32-16|Ne<<16,ae=ae+Ne|0,F^=ae,F=F>>>32-12|F<<12,O=O+U|0,ee^=O,ee=ee>>>32-16|ee<<16,ue=ue+ee|0,U^=ue,U=U>>>32-12|U<<12,R=R+ie|0,Me^=R,Me=Me>>>32-16|Me<<16,De=De+Me|0,ie^=De,ie=ie>>>32-12|ie<<12,O=O+U|0,ee^=O,ee=ee>>>32-8|ee<<8,ue=ue+ee|0,U^=ue,U=U>>>32-7|U<<7,R=R+ie|0,Me^=R,Me=Me>>>32-8|Me<<8,De=De+Me|0,ie^=De,ie=ie>>>32-7|ie<<7,B=B+F|0,Ne^=B,Ne=Ne>>>32-8|Ne<<8,ae=ae+Ne|0,F^=ae,F=F>>>32-7|F<<7,x=x+N|0,ve^=x,ve=ve>>>32-8|ve<<8,te=te+ve|0,N^=te,N=N>>>32-7|N<<7,x=x+F|0,Me^=x,Me=Me>>>32-16|Me<<16,ue=ue+Me|0,F^=ue,F=F>>>32-12|F<<12,B=B+U|0,ve^=B,ve=ve>>>32-16|ve<<16,De=De+ve|0,U^=De,U=U>>>32-12|U<<12,O=O+ie|0,Ne^=O,Ne=Ne>>>32-16|Ne<<16,te=te+Ne|0,ie^=te,ie=ie>>>32-12|ie<<12,R=R+N|0,ee^=R,ee=ee>>>32-16|ee<<16,ae=ae+ee|0,N^=ae,N=N>>>32-12|N<<12,O=O+ie|0,Ne^=O,Ne=Ne>>>32-8|Ne<<8,te=te+Ne|0,ie^=te,ie=ie>>>32-7|ie<<7,R=R+N|0,ee^=R,ee=ee>>>32-8|ee<<8,ae=ae+ee|0,N^=ae,N=N>>>32-7|N<<7,B=B+U|0,ve^=B,ve=ve>>>32-8|ve<<8,De=De+ve|0,U^=De,U=U>>>32-7|U<<7,x=x+F|0,Me^=x,Me=Me>>>32-8|Me<<8,ue=ue+Me|0,F^=ue,F=F>>>32-7|F<<7;on.writeUint32LE(x+i|0,t,0),on.writeUint32LE(B+n|0,t,4),on.writeUint32LE(O+s|0,t,8),on.writeUint32LE(R+o|0,t,12),on.writeUint32LE(N+a|0,t,16),on.writeUint32LE(F+c|0,t,20),on.writeUint32LE(U+u|0,t,24),on.writeUint32LE(ie+l|0,t,28),on.writeUint32LE(te+h|0,t,32),on.writeUint32LE(ae+d|0,t,36),on.writeUint32LE(ue+p|0,t,40),on.writeUint32LE(De+y|0,t,44),on.writeUint32LE(ve+m|0,t,48),on.writeUint32LE(Ne+w|0,t,52),on.writeUint32LE(ee+b|0,t,56),on.writeUint32LE(Me+v|0,t,60)}function lfe(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=n}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){pVe(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)i[u]=r[u]^a[u-c];gVe(s,0,o)}return kT.wipe(a),n===0&&kT.wipe(s),i}rw.streamXOR=lfe;function yVe(t,e,r,i){return i===void 0&&(i=0),kT.wipe(r),lfe(t,e,r,r,i)}rw.stream=yVe;function gVe(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}});var dfe=g(eu=>{f();"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var mVe=Z8(),iw=Xa();eu.DIGEST_LENGTH=16;var hfe=function(){function t(e){this.digestLength=eu.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var i=e[2]|e[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var n=e[4]|e[5]<<8;this._r[2]=(i>>>10|n<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(n>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,i){for(var n=this._fin?0:1<<11,s=this._h[0],o=this._h[1],a=this._h[2],c=this._h[3],u=this._h[4],l=this._h[5],h=this._h[6],d=this._h[7],p=this._h[8],y=this._h[9],m=this._r[0],w=this._r[1],b=this._r[2],v=this._r[3],x=this._r[4],B=this._r[5],O=this._r[6],R=this._r[7],N=this._r[8],F=this._r[9];i>=16;){var U=e[r+0]|e[r+1]<<8;s+=U&8191;var ie=e[r+2]|e[r+3]<<8;o+=(U>>>13|ie<<3)&8191;var te=e[r+4]|e[r+5]<<8;a+=(ie>>>10|te<<6)&8191;var ae=e[r+6]|e[r+7]<<8;c+=(te>>>7|ae<<9)&8191;var ue=e[r+8]|e[r+9]<<8;u+=(ae>>>4|ue<<12)&8191,l+=ue>>>1&8191;var De=e[r+10]|e[r+11]<<8;h+=(ue>>>14|De<<2)&8191;var ve=e[r+12]|e[r+13]<<8;d+=(De>>>11|ve<<5)&8191;var Ne=e[r+14]|e[r+15]<<8;p+=(ve>>>8|Ne<<8)&8191,y+=Ne>>>5|n;var ee=0,Me=ee;Me+=s*m,Me+=o*(5*F),Me+=a*(5*N),Me+=c*(5*R),Me+=u*(5*O),ee=Me>>>13,Me&=8191,Me+=l*(5*B),Me+=h*(5*x),Me+=d*(5*v),Me+=p*(5*b),Me+=y*(5*w),ee+=Me>>>13,Me&=8191;var dt=ee;dt+=s*w,dt+=o*m,dt+=a*(5*F),dt+=c*(5*N),dt+=u*(5*R),ee=dt>>>13,dt&=8191,dt+=l*(5*O),dt+=h*(5*B),dt+=d*(5*x),dt+=p*(5*v),dt+=y*(5*b),ee+=dt>>>13,dt&=8191;var ze=ee;ze+=s*b,ze+=o*w,ze+=a*m,ze+=c*(5*F),ze+=u*(5*N),ee=ze>>>13,ze&=8191,ze+=l*(5*R),ze+=h*(5*O),ze+=d*(5*B),ze+=p*(5*x),ze+=y*(5*v),ee+=ze>>>13,ze&=8191;var $e=ee;$e+=s*v,$e+=o*b,$e+=a*w,$e+=c*m,$e+=u*(5*F),ee=$e>>>13,$e&=8191,$e+=l*(5*N),$e+=h*(5*R),$e+=d*(5*O),$e+=p*(5*B),$e+=y*(5*x),ee+=$e>>>13,$e&=8191;var le=ee;le+=s*x,le+=o*v,le+=a*b,le+=c*w,le+=u*m,ee=le>>>13,le&=8191,le+=l*(5*F),le+=h*(5*N),le+=d*(5*R),le+=p*(5*O),le+=y*(5*B),ee+=le>>>13,le&=8191;var Z=ee;Z+=s*B,Z+=o*x,Z+=a*v,Z+=c*b,Z+=u*w,ee=Z>>>13,Z&=8191,Z+=l*m,Z+=h*(5*F),Z+=d*(5*N),Z+=p*(5*R),Z+=y*(5*O),ee+=Z>>>13,Z&=8191;var we=ee;we+=s*O,we+=o*B,we+=a*x,we+=c*v,we+=u*b,ee=we>>>13,we&=8191,we+=l*w,we+=h*m,we+=d*(5*F),we+=p*(5*N),we+=y*(5*R),ee+=we>>>13,we&=8191;var je=ee;je+=s*R,je+=o*O,je+=a*B,je+=c*x,je+=u*v,ee=je>>>13,je&=8191,je+=l*b,je+=h*w,je+=d*m,je+=p*(5*F),je+=y*(5*N),ee+=je>>>13,je&=8191;var Ue=ee;Ue+=s*N,Ue+=o*R,Ue+=a*O,Ue+=c*B,Ue+=u*x,ee=Ue>>>13,Ue&=8191,Ue+=l*v,Ue+=h*b,Ue+=d*w,Ue+=p*m,Ue+=y*(5*F),ee+=Ue>>>13,Ue&=8191;var Re=ee;Re+=s*F,Re+=o*N,Re+=a*R,Re+=c*O,Re+=u*B,ee=Re>>>13,Re&=8191,Re+=l*x,Re+=h*v,Re+=d*b,Re+=p*w,Re+=y*m,ee+=Re>>>13,Re&=8191,ee=(ee<<2)+ee|0,ee=ee+Me|0,Me=ee&8191,ee=ee>>>13,dt+=ee,s=Me,o=dt,a=ze,c=$e,u=le,l=Z,h=we,d=je,p=Ue,y=Re,r+=16,i-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=c,this._h[4]=u,this._h[5]=l,this._h[6]=h,this._h[7]=d,this._h[8]=p,this._h[9]=y},t.prototype.finish=function(e,r){r===void 0&&(r=0);var i=new Uint16Array(10),n,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=n,n=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=n*5,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,i[0]=this._h[0]+5,n=i[0]>>>13,i[0]&=8191,a=1;a<10;a++)i[a]=this._h[a]+n,n=i[a]>>>13,i[a]&=8191;for(i[9]-=1<<13,s=(n^1)-1,a=0;a<10;a++)i[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|i[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,i=e.length,n;if(this._leftover){n=16-this._leftover,n>i&&(n=i);for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];if(i-=n,r+=n,this._leftover+=n,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(n=i-i%16,this._blocks(e,r,n),r+=n,i-=n),i){for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=i}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return iw.wipe(this._buffer),iw.wipe(this._r),iw.wipe(this._h),iw.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();eu.Poly1305=hfe;function bVe(t,e){var r=new hfe(t);r.update(e);var i=r.digest();return r.clean(),i}eu.oneTimeAuth=bVe;function wVe(t,e){return t.length!==eu.DIGEST_LENGTH||e.length!==eu.DIGEST_LENGTH?!1:mVe.equal(t,e)}eu.equal=wVe});var gfe=g(tu=>{f();"use strict";Object.defineProperty(tu,"__esModule",{value:!0});var nw=ffe(),_Ve=dfe(),rm=Xa(),pfe=Xg(),vVe=Z8();tu.KEY_LENGTH=32;tu.NONCE_LENGTH=12;tu.TAG_LENGTH=16;var yfe=new Uint8Array(16),EVe=function(){function t(e){if(this.nonceLength=tu.NONCE_LENGTH,this.tagLength=tu.TAG_LENGTH,e.length!==tu.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);nw.stream(this._key,s,o,4);var a=r.length+this.tagLength,c;if(n){if(n.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=n}else c=new Uint8Array(a);return nw.streamXOR(this._key,s,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),i),rm.wipe(s),c},t.prototype.open=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);nw.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),i),!vVe.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,u;if(n){if(n.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=n}else u=new Uint8Array(c);return nw.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),u,4),rm.wipe(s),u},t.prototype.clean=function(){return rm.wipe(this._key),this},t.prototype._authenticate=function(e,r,i,n){var s=new _Ve.Poly1305(r);n&&(s.update(n),n.length%16>0&&s.update(yfe.subarray(n.length%16))),s.update(i),i.length%16>0&&s.update(yfe.subarray(i.length%16));var o=new Uint8Array(8);n&&pfe.writeUint64LE(n.length,o),s.update(o),pfe.writeUint64LE(i.length,o),s.update(o);for(var a=s.digest(),c=0;c<a.length;c++)e[c]=a[c];s.clean(),rm.wipe(a),rm.wipe(o)},t}();tu.ChaCha20Poly1305=EVe});var sw=g(ru=>{f();"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.DUMP_SESSION_KEYS=ru.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=ru.NOISE_MSG_MAX_LENGTH_BYTES=void 0;ru.NOISE_MSG_MAX_LENGTH_BYTES=65535;ru.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=ru.NOISE_MSG_MAX_LENGTH_BYTES-16;ru.DUMP_SESSION_KEYS=process.env.DUMP_SESSION_KEYS});var G0=g(Hi=>{f();"use strict";var SVe=Hi&&Hi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.logCipherState=Hi.logRemoteEphemeralKey=Hi.logRemoteStaticKey=Hi.logLocalEphemeralKeys=Hi.logLocalStaticKeys=Hi.logger=void 0;var AVe=SVe(ce()),xVe=sw();Hi.logger=AVe.default("libp2p:noise");var ro;xVe.DUMP_SESSION_KEYS?ro=Hi.logger:ro=()=>{};function RVe(t){ro(`LOCAL_STATIC_PUBLIC_KEY ${t.publicKey.toString("hex")}`),ro(`LOCAL_STATIC_PRIVATE_KEY ${t.privateKey.toString("hex")}`)}Hi.logLocalStaticKeys=RVe;function IVe(t){t?(ro(`LOCAL_PUBLIC_EPHEMERAL_KEY ${t.publicKey.toString("hex")}`),ro(`LOCAL_PRIVATE_EPHEMERAL_KEY ${t.privateKey.toString("hex")}`)):ro("Missing local ephemeral keys.")}Hi.logLocalEphemeralKeys=IVe;function TVe(t){ro(`REMOTE_STATIC_PUBLIC_KEY ${t.toString("hex")}`)}Hi.logRemoteStaticKey=TVe;function PVe(t){ro(`REMOTE_EPHEMERAL_PUBLIC_KEY ${t.toString("hex")}`)}Hi.logRemoteEphemeralKey=PVe;function CVe(t){t.cs1&&t.cs2?(ro(`CIPHER_STATE_1 ${t.cs1.n} ${t.cs1.k.toString("hex")}`),ro(`CIPHER_STATE_2 ${t.cs2.n} ${t.cs2.k.toString("hex")}`)):ro("Missing cipher state.")}Hi.logCipherState=CVe});var DT=g(cs=>{f();"use strict";var OVe=cs&&cs.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),kVe=cs&&cs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mfe=cs&&cs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OVe(e,t,r);return kVe(e,t),e};Object.defineProperty(cs,"__esModule",{value:!0});cs.AbstractHandshake=cs.MIN_NONCE=void 0;var $i=Gt(),DVe=mfe(W8()),NVe=mfe(PT()),bfe=gfe(),wfe=jl(),BVe=G0();cs.MIN_NONCE=0;var _fe=class{encryptWithAd(e,r,i){let n=this.encrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),n}decryptWithAd(e,r,i){let{plaintext:n,valid:s}=this.decrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),{plaintext:n,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}setNonce(e,r){e.n=r}createEmptyKey(){return $i.Buffer.alloc(32)}isEmptyKey(e){return this.createEmptyKey().equals(e)}incrementNonce(e){return e+1}nonceToBytes(e){let r=$i.Buffer.alloc(12);return r.writeUInt32LE(e,4),r}encrypt(e,r,i,n){let s=this.nonceToBytes(r),a=new bfe.ChaCha20Poly1305(e).seal(s,n,i);return $i.Buffer.from(a.buffer,a.byteOffset,a.length)}encryptAndHash(e,r){let i;return this.hasKey(e.cs)?i=this.encryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,i),i}decrypt(e,r,i,n){let s=this.nonceToBytes(r),a=new bfe.ChaCha20Poly1305(e).open(s,n,i);return a?{plaintext:$i.Buffer.from(a.buffer,a.byteOffset,a.length),valid:!0}:{plaintext:$i.Buffer.from(""),valid:!1}}decryptAndHash(e,r){let i,n=!0;return this.hasKey(e.cs)?{plaintext:i,valid:n}=this.decryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,r),{plaintext:i,valid:n}}dh(e,r){try{let i=DVe.sharedKey(e,r),n=$i.Buffer.from(i.buffer,i.byteOffset,i.length),s=$i.Buffer.alloc(32);return n.copy(s),s}catch(i){return BVe.logger(i.message),$i.Buffer.alloc(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){let i=NVe.hash($i.Buffer.from([...e,...r]));return $i.Buffer.from(i.buffer,i.byteOffset,i.length)}mixKey(e,r){let[i,n]=wfe.getHkdf(e.ck,r);e.cs=this.initializeKey(n),e.ck=i}initializeKey(e){let r=cs.MIN_NONCE;return{k:e,n:r}}initializeSymmetric(e){let r=$i.Buffer.from(e,"utf-8"),i=this.hashProtocolName(r),n=i,s=this.createEmptyKey();return{cs:this.initializeKey(s),ck:n,h:i}}hashProtocolName(e){if(e.length<=32){let r=$i.Buffer.alloc(32);return e.copy(r),r}else return this.getHash(e,$i.Buffer.alloc(0))}split(e){let[r,i]=wfe.getHkdf(e.ck,$i.Buffer.alloc(0)),n=this.initializeKey(r),s=this.initializeKey(i);return{cs1:n,cs2:s}}writeMessageRegular(e,r){let i=this.encryptWithAd(e,$i.Buffer.alloc(0),r),n=this.createEmptyKey(),s=$i.Buffer.alloc(0);return{ne:n,ns:s,ciphertext:i}}readMessageRegular(e,r){return this.decryptWithAd(e,$i.Buffer.alloc(0),r.ciphertext)}};cs.AbstractHandshake=_fe});var Efe=g(ow=>{f();"use strict";Object.defineProperty(ow,"__esModule",{value:!0});ow.XX=void 0;var Nh=Gt(),W0=jl(),LVe=DT(),vfe=class extends LVe.AbstractHandshake{initializeInitiator(e,r,i,n){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=Nh.Buffer.alloc(32);return{ss:o,s:r,rs:i,psk:n,re:a}}initializeResponder(e,r,i,n){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=Nh.Buffer.alloc(32);return{ss:o,s:r,rs:i,psk:n,re:a}}writeMessageA(e,r,i){let n=Nh.Buffer.alloc(0);i!==void 0?e.e=i:e.e=W0.generateKeypair();let s=e.e.publicKey;this.mixHash(e.ss,s);let o=this.encryptAndHash(e.ss,r);return{ne:s,ns:n,ciphertext:o}}writeMessageB(e,r){e.e=W0.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let n=Nh.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,r);return{ne:i,ns:s,ciphertext:o}}writeMessageC(e,r){let i=Nh.Buffer.from(e.s.publicKey),n=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r),a={ne:this.createEmptyKey(),ns:n,ciphertext:s},{cs1:c,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:u}}readMessageA(e,r){return W0.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(W0.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&W0.isValidPublicKey(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:n&&o}}readMessageC(e,r){let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);if(n&&i.length===32&&W0.isValidPublicKey(i)&&(e.rs=i),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:s,valid:n&&o,cs1:a,cs2:c}}initSession(e,r,i){let n=this.createEmptyKey(),s=Nh.Buffer.alloc(32),o;return e?o=this.initializeInitiator(r,i,s,n):o=this.initializeResponder(r,i,s,n),{hs:o,i:e,mc:0}}sendMessage(e,r,i){let n;if(e.mc===0)n=this.writeMessageA(e.hs,r,i);else if(e.mc===1)n=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:s,messageBuffer:o,cs1:a,cs2:c}=this.writeMessageC(e.hs,r);n=o,e.h=s,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,n}recvMessage(e,r){let i=Nh.Buffer.alloc(0),n=!1;if(e.mc===0)({plaintext:i,valid:n}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:i,valid:n}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:s,plaintext:o,valid:a,cs1:c,cs2:u}=this.readMessageC(e.hs,r);i=o,n=a,e.h=s,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}};ow.XX=vfe});var im=g(ui=>{f();"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.decode2=ui.decode1=ui.decode0=ui.encode2=ui.encode1=ui.encode0=ui.uint16BEDecode=ui.uint16BEEncode=void 0;var Y0=Gt(),MVe=(t,e,r)=>(e=e||Y0.Buffer.allocUnsafe(2),e.writeUInt16BE(t,r),e);ui.uint16BEEncode=MVe;ui.uint16BEEncode.bytes=2;var jVe=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t.readUInt16BE(0)};ui.uint16BEDecode=jVe;ui.uint16BEDecode.bytes=2;function qVe(t){return Y0.Buffer.concat([t.ne,t.ciphertext])}ui.encode0=qVe;function UVe(t){return Y0.Buffer.concat([t.ne,t.ns,t.ciphertext])}ui.encode1=UVe;function FVe(t){return Y0.Buffer.concat([t.ns,t.ciphertext])}ui.encode2=FVe;function KVe(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:Y0.Buffer.alloc(0)}}ui.decode0=KVe;function VVe(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}}ui.decode1=VVe;function zVe(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:Y0.Buffer.alloc(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}ui.decode2=zVe});var NT=g(aw=>{f();"use strict";Object.defineProperty(aw,"__esModule",{value:!0});aw.XXHandshake=void 0;var nm=Gt(),HVe=Efe(),X0=jl(),ei=G0(),Q0=im(),Sfe=class{constructor(e,r,i,n,s,o,a){this.isInitiator=e,this.payload=r,this.prologue=i,this.staticKeypair=n,this.connection=s,o&&(this.remotePeer=o),this.xx=a??new HVe.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=nm.Buffer.alloc(0)}async propose(){if(ei.logLocalStaticKeys(this.session.hs.s),this.isInitiator){ei.logger("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,nm.Buffer.alloc(0));this.connection.writeLP(Q0.encode0(e)),ei.logger("Stage 0 - Initiator finished sending first message."),ei.logLocalEphemeralKeys(this.session.hs.e)}else{ei.logger("Stage 0 - Responder waiting to receive first message...");let e=Q0.decode0((await this.connection.readLP()).slice()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Error("xx handshake stage 0 validation fail");ei.logger("Stage 0 - Responder received first message."),ei.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){ei.logger("Stage 1 - Initiator waiting to receive first message from responder...");let e=Q0.decode1((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 1 validation fail");ei.logger("Stage 1 - Initiator received the message."),ei.logRemoteEphemeralKey(this.session.hs.re),ei.logRemoteStaticKey(this.session.hs.rs),ei.logger("Initiator going to check remote's signature...");try{let n=await X0.decodePayload(r);this.remotePeer=this.remotePeer||await X0.getPeerIdFromPayload(n),this.remotePeer=await X0.verifySignedPayload(e.ns,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}ei.logger("All good with the signature!")}else{ei.logger("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(Q0.encode1(e)),ei.logger("Stage 1 - Responder sent the second handshake message with signed payload."),ei.logLocalEphemeralKeys(this.session.hs.e)}}async finish(){if(this.isInitiator){ei.logger("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(Q0.encode2(e)),ei.logger("Stage 2 - Initiator sent message with signed payload.")}else{ei.logger("Stage 2 - Responder waiting for third handshake message...");let e=Q0.decode2((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 2 validation fail");ei.logger("Stage 2 - Responder received the message, finished handshake.");try{let n=await X0.decodePayload(r);this.remotePeer=this.remotePeer||await X0.getPeerIdFromPayload(n),await X0.verifySignedPayload(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}}ei.logCipherState(this.session)}encrypt(e,r){let i=this.getCS(r);return this.xx.encryptWithAd(i,nm.Buffer.alloc(0),e)}decrypt(e,r){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,nm.Buffer.alloc(0),e)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=nm.Buffer.from(e.buffer,e.byteOffset,e.length))}};aw.XXHandshake=Sfe});var xfe=g(uw=>{f();"use strict";Object.defineProperty(uw,"__esModule",{value:!0});uw.IK=void 0;var cw=Gt(),sm=jl(),$Ve=DT(),Afe=class extends $Ve.AbstractHandshake{initSession(e,r,i,n){let s=this.createEmptyKey(),o;return e?o=this.initializeInitiator(r,i,n,s):o=this.initializeResponder(r,i,n,s),{hs:o,i:e,mc:0}}sendMessage(e,r){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r);else if(e.mc===1){let{messageBuffer:n,h:s,cs1:o,cs2:a}=this.writeMessageB(e.hs,r);i=n,e.h=s,e.cs1=o,e.cs2=a}else if(e.mc>1)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let i=cw.Buffer.alloc(0),n=!1;if(e.mc===0&&({plaintext:i,valid:n}=this.readMessageA(e.hs,r)),e.mc===1){let{plaintext:s,valid:o,h:a,cs1:c,cs2:u}=this.readMessageB(e.hs,r);i=s,n=o,e.h=a,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}writeMessageA(e,r){e.e=sm.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=cw.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let o=this.encryptAndHash(e.ss,r);return{ne:i,ns:s,ciphertext:o}}writeMessageB(e,r){e.e=sm.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=this.encryptAndHash(e.ss,r),s=this.createEmptyKey(),o={ne:i,ns:s,ciphertext:n},{cs1:a,cs2:c}=this.split(e.ss);return{messageBuffer:o,cs1:a,cs2:c,h:e.ss.h}}readMessageA(e,r){sm.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&sm.isValidPublicKey(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:n&&o}}readMessageB(e,r){if(sm.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:s,cs2:o}=this.split(e.ss);return{h:e.ss.h,valid:n,plaintext:i,cs1:s,cs2:o}}initializeInitiator(e,r,i,n){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,i);let a=cw.Buffer.alloc(32);return{ss:o,s:r,rs:i,re:a,psk:n}}initializeResponder(e,r,i,n){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,r.publicKey);let a=cw.Buffer.alloc(32);return{ss:o,s:r,rs:i,re:a,psk:n}}};uw.IK=Afe});var Ife=g(lw=>{f();"use strict";Object.defineProperty(lw,"__esModule",{value:!0});lw.FailedIKError=void 0;var Rfe=class extends Error{constructor(e,r){super(r);this.initialMsg=e,this.name="FailedIKhandshake"}};lw.FailedIKError=Rfe});var Cfe=g(hw=>{f();"use strict";Object.defineProperty(hw,"__esModule",{value:!0});hw.IKHandshake=void 0;var GVe=xfe(),Z0=Gt(),fw=im(),J0=jl(),Tfe=Ife(),gi=G0(),Pfe=class{constructor(e,r,i,n,s,o,a,c){this.isInitiator=e,this.payload=Z0.Buffer.from(r),this.prologue=i,this.staticKeypair=n,this.connection=s,a&&(this.remotePeer=a),this.ik=c??new GVe.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=Z0.Buffer.alloc(0)}async stage0(){if(gi.logLocalStaticKeys(this.session.hs.s),gi.logRemoteStaticKey(this.session.hs.rs),this.isInitiator){gi.logger("IK Stage 0 - Initiator sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(fw.encode1(e)),gi.logger("IK Stage 0 - Initiator sent message."),gi.logLocalEphemeralKeys(this.session.hs.e)}else{gi.logger("IK Stage 0 - Responder receiving message...");let e=await this.connection.readLP();try{let r=fw.decode1(e.slice()),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");gi.logger("IK Stage 0 - Responder got message, going to verify payload.");let s=await J0.decodePayload(i);this.remotePeer=this.remotePeer||await J0.getPeerIdFromPayload(s),await J0.verifySignedPayload(this.session.hs.rs,s,this.remotePeer),this.setRemoteEarlyData(s.data),gi.logger("IK Stage 0 - Responder successfully verified payload!"),gi.logRemoteEphemeralKey(this.session.hs.re)}catch(r){let i=r;throw gi.logger("Responder breaking up with IK handshake in stage 0."),new Tfe.FailedIKError(e,`Error occurred while verifying initiator's signed payload: ${i.message}`)}}}async stage1(){if(this.isInitiator){gi.logger("IK Stage 1 - Initiator receiving message...");let e=(await this.connection.readLP()).slice(),r=fw.decode0(Z0.Buffer.from(e)),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);gi.logger("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!n)throw new Error("ik stage 1 decryption validation fail");let s=await J0.decodePayload(i);this.remotePeer=this.remotePeer||await J0.getPeerIdFromPayload(s),await J0.verifySignedPayload(r.ns.slice(0,32),s,this.remotePeer),this.setRemoteEarlyData(s.data),gi.logger("IK Stage 1 - Initiator successfully verified payload!"),gi.logRemoteEphemeralKey(this.session.hs.re)}catch(s){let o=s;throw gi.logger("Initiator breaking up with IK handshake in stage 1."),new Tfe.FailedIKError(e,`Error occurred while verifying responder's signed payload: ${o.message}`)}}else{gi.logger("IK Stage 1 - Responder sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(fw.encode0(e)),gi.logger("IK Stage 1 - Responder sent message..."),gi.logLocalEphemeralKeys(this.session.hs.e)}gi.logCipherState(this.session)}decrypt(e,r){let i=this.getCS(r,!1);return this.ik.decryptWithAd(i,Z0.Buffer.alloc(0),e)}encrypt(e,r){let i=this.getCS(r);return this.ik.encryptWithAd(i,Z0.Buffer.alloc(0),e)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=Z0.Buffer.from(e.buffer,e.byteOffset,e.length))}};hw.IKHandshake=Pfe});var Dfe=g(dw=>{f();"use strict";Object.defineProperty(dw,"__esModule",{value:!0});dw.XXFallbackHandshake=void 0;var BT=Gt(),WVe=NT(),LT=jl(),io=G0(),Ofe=im(),kfe=class extends WVe.XXHandshake{constructor(e,r,i,n,s,o,a,c,u){super(e,r,i,n,s,a,u);c&&(this.ephemeralKeys=c),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,BT.Buffer.alloc(0),this.ephemeralKeys),io.logger("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),io.logLocalEphemeralKeys(this.session.hs.e);else{io.logger("XX Fallback Stage 0 - Responder decoding initial msg from IK.");let e=Ofe.decode0(this.initialMsg),{valid:r}=this.xx.recvMessage(this.session,{ne:e.ne,ns:BT.Buffer.alloc(0),ciphertext:BT.Buffer.alloc(0)});if(!r)throw new Error("xx fallback stage 0 decryption validation fail");io.logger("XX Fallback Stage 0 - Responder used received message from IK."),io.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){let e=Ofe.decode1(this.initialMsg),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx fallback stage 1 decryption validation fail");io.logger("XX Fallback Stage 1 - Initiator used received message from IK."),io.logRemoteEphemeralKey(this.session.hs.re),io.logRemoteStaticKey(this.session.hs.rs),io.logger("Initiator going to check remote's signature...");try{let n=await LT.decodePayload(r);this.remotePeer=this.remotePeer||await LT.getPeerIdFromPayload(n),await LT.verifySignedPayload(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload from responder: ${s.message}`)}io.logger("All good with the signature!")}else io.logger("XX Fallback Stage 1 - Responder start"),await super.exchange(),io.logger("XX Fallback Stage 1 - Responder end")}};dw.XXFallbackHandshake=kfe});var Bfe=g(e1=>{f();"use strict";Object.defineProperty(e1,"__esModule",{value:!0});e1.decryptStream=e1.encryptStream=void 0;var Nfe=Gt(),pw=sw();function YVe(t){return async function*(e){for await(let r of e){let i=Nfe.Buffer.from(r.buffer,r.byteOffset,r.length);for(let n=0;n<i.length;n+=pw.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let s=n+pw.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;s>i.length&&(s=i.length),yield t.encrypt(i.slice(n,s),t.session)}}}}e1.encryptStream=YVe;function XVe(t){return async function*(e){for await(let r of e){let i=Nfe.Buffer.from(r.buffer,r.byteOffset,r.length);for(let n=0;n<i.length;n+=pw.NOISE_MSG_MAX_LENGTH_BYTES){let s=n+pw.NOISE_MSG_MAX_LENGTH_BYTES;s>i.length&&(s=i.length);let o=i.slice(n,s),{plaintext:a,valid:c}=await t.decrypt(o,t.session);if(!c)throw new Error("Failed to validate decrypted chunk");yield a}}}}e1.decryptStream=XVe});var Mfe=g(yw=>{f();"use strict";Object.defineProperty(yw,"__esModule",{value:!0});yw.KeyCache=void 0;var Lfe=class{constructor(){this.storage=new Map}store(e,r){this.storage.set(e.id,r)}load(e){var r;return e&&(r=this.storage.get(e.id))!==null&&r!==void 0?r:null}resetStorage(){this.storage.clear()}},QVe=new Lfe;yw.KeyCache=QVe});var jT=g(no=>{f();"use strict";var ZVe=no&&no.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),JVe=no&&no.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eze=no&&no.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZVe(e,t,r);return JVe(e,t),e},gw=no&&no.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(no,"__esModule",{value:!0});no.Noise=void 0;var tze=eze(W8()),om=Gt(),jfe=gw($le()),rze=gw(Qle()),qfe=gw(Q8()),ize=gw(vr()),Ufe=qo(),nze=NT(),sze=Cfe(),oze=Dfe(),Ffe=jl(),t1=im(),Kfe=Bfe(),MT=Mfe(),aze=G0(),Vfe=sw(),zfe=class{constructor(e,r){if(this.protocol="/noise",this.prologue=om.Buffer.alloc(0),this.earlyData=r??om.Buffer.alloc(0),this.useNoisePipes=!1,e){let i=tze.generateKeyPairFromSeed(e);this.staticKeys={privateKey:om.Buffer.from(i.secretKey.buffer,i.secretKey.byteOffset,i.secretKey.length),publicKey:om.Buffer.from(i.publicKey.buffer,i.publicKey.byteOffset,i.publicKey.length)}}else this.staticKeys=Ffe.generateKeypair()}async secureOutbound(e,r,i){let n=jfe.default(r,{lengthEncoder:t1.uint16BEEncode,lengthDecoder:t1.uint16BEDecode,maxDataLength:Vfe.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async secureInbound(e,r,i){let n=jfe.default(r,{lengthEncoder:t1.uint16BEEncode,lengthDecoder:t1.uint16BEDecode,maxDataLength:Vfe.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async performHandshake(e){var r;let i=await Ffe.getPayload(e.localPeer,this.staticKeys.publicKey,this.earlyData),n=this.useNoisePipes;if(e.isInitiator&&MT.KeyCache.load(e.remotePeer)===null&&(n=!1),n){let{remotePeer:s,connection:o,isInitiator:a}=e,c=new sze.IKHandshake(a,i,this.prologue,this.staticKeys,o,(r=MT.KeyCache.load(e.remotePeer))!==null&&r!==void 0?r:om.Buffer.alloc(32),s);try{return await this.performIKHandshake(c)}catch(u){let l;return e.isInitiator&&(l=c.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(e,i,u.initialMsg,l)}}else return await this.performXXHandshake(e,i)}async performXXFallbackHandshake(e,r,i,n){let{isInitiator:s,remotePeer:o,connection:a}=e,c=new oze.XXFallbackHandshake(s,r,this.prologue,this.staticKeys,a,i,o,n);try{await c.propose(),await c.exchange(),await c.finish()}catch(u){aze.logger(u);let l=u;throw new Error(`Error occurred during XX Fallback handshake: ${l.message}`)}return c}async performXXHandshake(e,r){let{isInitiator:i,remotePeer:n,connection:s}=e,o=new nze.XXHandshake(i,r,this.prologue,this.staticKeys,s,n);try{await o.propose(),await o.exchange(),await o.finish(),this.useNoisePipes&&o.remotePeer&&MT.KeyCache.store(o.remotePeer,o.getRemoteStaticKey())}catch(a){let c=a;throw new Error(`Error occurred during XX handshake: ${c.message}`)}return o}async performIKHandshake(e){return await e.stage0(),await e.stage1(),e}async createSecureConnection(e,r){let[i,n]=rze.default(),s=e.unwrap();return await ize.default(i,qfe.default,Kfe.encryptStream(r),Ufe.encode({lengthEncoder:t1.uint16BEEncode}),s,Ufe.decode({lengthDecoder:t1.uint16BEDecode}),qfe.default,Kfe.decryptStream(r),i),n}};no.Noise=zfe});var Hfe=g(iu=>{f();"use strict";var cze=iu&&iu.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),uze=iu&&iu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cze(e,t,r)};Object.defineProperty(iu,"__esModule",{value:!0});iu.NOISE=void 0;var lze=jT();uze(jT(),iu);iu.NOISE=new lze.Noise});var Wfe=g((dCt,Gfe)=>{f();"use strict";var fze=kI(),{EventEmitter:hze}=Wt();function $fe(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;++r)if(t[r]!==e[r])return!1;return!0}function qT(){return{contacts:[],dontSplit:!1,left:null,right:null}}function am(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}var cm=class extends hze{constructor(e={}){super();this.localNodeId=e.localNodeId||fze(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||cm.distance,this.arbiter=e.arbiter||cm.arbiter,this.metadata=Object.assign({},e.metadata),am("option.localNodeId as parameter 1",this.localNodeId),this.root=qT()}static arbiter(e,r){return e.vectorClock>r.vectorClock?e:r}static distance(e,r){let i=0,n=0,s=Math.min(e.length,r.length),o=Math.max(e.length,r.length);for(;n<s;++n)i=i*256+(e[n]^r[n]);for(;n<o;++n)i=i*256+255;return i}add(e){am("contact.id",(e||{}).id);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e.id,r++);let n=this._indexOf(i,e.id);return n>=0?(this._update(i,n,e),this):i.contacts.length<this.numberOfNodesPerKBucket?(i.contacts.push(e),this.emit("added",e),this):i.dontSplit?(this.emit("ping",i.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(i,r),this.add(e))}closest(e,r=1/0){if(am("id",e),!Number.isInteger(r)&&r!==1/0||r<=0)throw new TypeError("n is not positive number");let i=[];for(let n=[this.root],s=0;n.length>0&&i.length<r;){let o=n.pop();if(o.contacts===null){let a=this._determineNode(o,e,s++);n.push(o.left===a?o.right:o.left),n.push(a)}else i=i.concat(o.contacts)}return i.map(n=>[this.distance(n.id,e),n]).sort((n,s)=>n[0]-s[0]).slice(0,r).map(n=>n[1])}count(){let e=0;for(let r=[this.root];r.length>0;){let i=r.pop();i.contacts===null?r.push(i.right,i.left):e+=i.contacts.length}return e}_determineNode(e,r,i){let n=i>>3,s=i%8;return r.length<=n&&s!==0?e.left:r[n]&1<<7-s?e.right:e.left}get(e){am("id",e);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e,r++);let n=this._indexOf(i,e);return n>=0?i.contacts[n]:null}_indexOf(e,r){for(let i=0;i<e.contacts.length;++i)if($fe(e.contacts[i].id,r))return i;return-1}remove(e){am("the id as parameter 1",e);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e,r++);let n=this._indexOf(i,e);if(n>=0){let s=i.contacts.splice(n,1)[0];this.emit("removed",s)}return this}_split(e,r){e.left=qT(),e.right=qT();for(let s of e.contacts)this._determineNode(e,s.id,r).contacts.push(s);e.contacts=null;let i=this._determineNode(e,this.localNodeId,r),n=e.left===i?e.right:e.left;n.dontSplit=!0}toArray(){let e=[];for(let r=[this.root];r.length>0;){let i=r.pop();i.contacts===null?r.push(i.right,i.left):e=e.concat(i.contacts)}return e}*toIterable(){for(let e=[this.root];e.length>0;){let r=e.pop();r.contacts===null?e.push(r.right,r.left):yield*r.contacts}}_update(e,r,i){if(!$fe(e.contacts[r].id,i.id))throw new Error("wrong index for _update");let n=e.contacts[r],s=this.arbiter(n,i);s===n&&n!==i||(e.contacts.splice(r,1),e.contacts.push(s),this.emit("updated",n,s))}};Gfe.exports=cm});var Yfe=g(um=>{f();(function(){var t,e,r,i,n,s,o,a;a=function(c){var u,l,h,d;return u=(c&255<<24)>>>24,l=(c&255<<16)>>>16,h=(c&255<<8)>>>8,d=c&255,[u,l,h,d].join(".")},o=function(c){var u,l,h,d,p,y;for(u=[],h=d=0;d<=3&&c.length!==0;h=++d){if(h>0){if(c[0]!==".")throw new Error("Invalid IP");c=c.substring(1)}y=e(c),p=y[0],l=y[1],c=c.substring(l),u.push(p)}if(c.length!==0)throw new Error("Invalid IP");switch(u.length){case 1:if(u[0]>4294967295)throw new Error("Invalid IP");return u[0]>>>0;case 2:if(u[0]>255||u[1]>16777215)throw new Error("Invalid IP");return(u[0]<<24|u[1])>>>0;case 3:if(u[0]>255||u[1]>255||u[2]>65535)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2])>>>0;case 4:if(u[0]>255||u[1]>255||u[2]>255||u[3]>255)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2]<<8|u[3])>>>0;default:throw new Error("Invalid IP")}},r=function(c){return c.charCodeAt(0)},i=r("0"),s=r("a"),n=r("A"),e=function(c){var u,l,h,d,p;for(d=0,u=10,l="9",h=0,c.length>1&&c[h]==="0"&&(c[h+1]==="x"||c[h+1]==="X"?(h+=2,u=16):"0"<=c[h+1]&&c[h+1]<="9"&&(h++,u=8,l="7")),p=h;h<c.length;){if("0"<=c[h]&&c[h]<=l)d=d*u+(r(c[h])-i)>>>0;else if(u===16)if("a"<=c[h]&&c[h]<="f")d=d*u+(10+r(c[h])-s)>>>0;else if("A"<=c[h]&&c[h]<="F")d=d*u+(10+r(c[h])-n)>>>0;else break;else break;if(d>4294967295)throw new Error("too large");h++}if(h===p)throw new Error("empty octet");return[d,h]},t=function(){function c(u,l){var h,d,p,y;if(typeof u!="string")throw new Error("Missing `net' parameter");if(l||(y=u.split("/",2),u=y[0],l=y[1]),l||(l=32),typeof l=="string"&&l.indexOf(".")>-1){try{this.maskLong=o(l)}catch(m){throw h=m,new Error("Invalid mask: "+l)}for(d=p=32;p>=0;d=--p)if(this.maskLong===4294967295<<32-d>>>0){this.bitmask=d;break}}else if(l||l===0)this.bitmask=parseInt(l,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(o(u)&this.maskLong)>>>0}catch(m){throw h=m,new Error("Invalid net address: "+u)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+l);this.size=Math.pow(2,32-this.bitmask),this.base=a(this.netLong),this.mask=a(this.maskLong),this.hostmask=a(~this.maskLong),this.first=this.bitmask<=30?a(this.netLong+1):this.base,this.last=this.bitmask<=30?a(this.netLong+this.size-2):a(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?a(this.netLong+this.size-1):void 0}return c.prototype.contains=function(u){return typeof u=="string"&&(u.indexOf("/")>0||u.split(".").length!==4)&&(u=new c(u)),u instanceof c?this.contains(u.base)&&this.contains(u.broadcast||u.last):(o(u)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},c.prototype.next=function(u){return u==null&&(u=1),new c(a(this.netLong+this.size*u),this.mask)},c.prototype.forEach=function(u){var l,h,d;for(d=o(this.first),h=o(this.last),l=0;d<=h;)u(a(d),d,l),l++,d++},c.prototype.toString=function(){return this.base+"/"+this.bitmask},c}(),um.ip2long=o,um.long2ip=a,um.Netmask=t}).call(um)});var Qfe=g((Xfe,mw)=>{f();(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},i=new RegExp("^0[0-7]+$","i"),n=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${s})?$`,"i")};function c(p,y){if(p.indexOf("::")!==p.lastIndexOf("::"))return null;let m=0,w=-1,b=(p.match(a.zoneIndex)||[])[0],v,x;for(b&&(b=b.substring(1),p=p.replace(/%.+$/,""));(w=p.indexOf(":",w+1))>=0;)m++;if(p.substr(0,2)==="::"&&m--,p.substr(-2,2)==="::"&&m--,m>y)return null;for(x=y-m,v=":";x--;)v+="0:";return p=p.replace("::",v),p[0]===":"&&(p=p.slice(1)),p[p.length-1]===":"&&(p=p.slice(0,-1)),y=function(){let B=p.split(":"),O=[];for(let R=0;R<B.length;R++)O.push(parseInt(B[R],16));return O}(),{parts:y,zoneId:b}}function u(p,y,m,w){if(p.length!==y.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let b=0,v;for(;w>0;){if(v=m-w,v<0&&(v=0),p[b]>>v!=y[b]>>v)return!1;w-=m,b+=1}return!0}function l(p){if(n.test(p))return parseInt(p,16);if(p[0]==="0"&&!isNaN(parseInt(p[1],10))){if(i.test(p))return parseInt(p,8);throw new Error(`ipaddr: cannot parse ${p} as octal`)}return parseInt(p,10)}function h(p,y){for(;p.length<y;)p=`0${p}`;return p}let d={};d.IPv4=function(){function p(y){if(y.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,w;for(m=0;m<y.length;m++)if(w=y[m],!(0<=w&&w<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=y}return p.prototype.SpecialRanges={unspecified:[[new p([0,0,0,0]),8]],broadcast:[[new p([255,255,255,255]),32]],multicast:[[new p([224,0,0,0]),4]],linkLocal:[[new p([169,254,0,0]),16]],loopback:[[new p([127,0,0,0]),8]],carrierGradeNat:[[new p([100,64,0,0]),10]],private:[[new p([10,0,0,0]),8],[new p([172,16,0,0]),12],[new p([192,168,0,0]),16]],reserved:[[new p([192,0,0,0]),24],[new p([192,0,2,0]),24],[new p([192,88,99,0]),24],[new p([198,51,100,0]),24],[new p([203,0,113,0]),24],[new p([240,0,0,0]),4]]},p.prototype.kind=function(){return"ipv4"},p.prototype.match=function(y,m){let w;if(m===void 0&&(w=y,y=w[0],m=w[1]),y.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,y.octets,8,m)},p.prototype.prefixLengthFromSubnetMask=function(){let y=0,m=!1,w={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},b,v,x;for(b=3;b>=0;b-=1)if(v=this.octets[b],v in w){if(x=w[v],m&&x!==0)return null;x!==8&&(m=!0),y+=x}else return null;return 32-y},p.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},p.prototype.toByteArray=function(){return this.octets.slice(0)},p.prototype.toIPv4MappedAddress=function(){return d.IPv6.parse(`::ffff:${this.toString()}`)},p.prototype.toNormalizedString=function(){return this.toString()},p.prototype.toString=function(){return this.octets.join(".")},p}(),d.IPv4.broadcastAddressFromCIDR=function(p){try{let y=this.parseCIDR(p),m=y[0].toByteArray(),w=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],v=0;for(;v<4;)b.push(parseInt(m[v],10)|parseInt(w[v],10)^255),v++;return new this(b)}catch(y){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.isIPv4=function(p){return this.parser(p)!==null},d.IPv4.isValid=function(p){try{return new this(this.parser(p)),!0}catch(y){return!1}},d.IPv4.isValidFourPartDecimal=function(p){return!!(d.IPv4.isValid(p)&&p.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},d.IPv4.networkAddressFromCIDR=function(p){let y,m,w,b,v;try{for(y=this.parseCIDR(p),w=y[0].toByteArray(),v=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],m=0;m<4;)b.push(parseInt(w[m],10)&parseInt(v[m],10)),m++;return new this(b)}catch(x){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.parse=function(p){let y=this.parser(p);if(y===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(y)},d.IPv4.parseCIDR=function(p){let y;if(y=p.match(/^(.+)\/(\d+)$/)){let m=parseInt(y[2]);if(m>=0&&m<=32){let w=[this.parse(y[1]),m];return Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},d.IPv4.parser=function(p){let y,m,w;if(y=p.match(r.fourOctet))return function(){let b=y.slice(1,6),v=[];for(let x=0;x<b.length;x++)m=b[x],v.push(l(m));return v}();if(y=p.match(r.longValue)){if(w=l(y[1]),w>4294967295||w<0)throw new Error("ipaddr: address outside defined range");return function(){let b=[],v;for(v=0;v<=24;v+=8)b.push(w>>v&255);return b}().reverse()}else return(y=p.match(r.twoOctet))?function(){let b=y.slice(1,4),v=[];if(w=l(b[1]),w>16777215||w<0)throw new Error("ipaddr: address outside defined range");return v.push(l(b[0])),v.push(w>>16&255),v.push(w>>8&255),v.push(w&255),v}():(y=p.match(r.threeOctet))?function(){let b=y.slice(1,5),v=[];if(w=l(b[2]),w>65535||w<0)throw new Error("ipaddr: address outside defined range");return v.push(l(b[0])),v.push(l(b[1])),v.push(w>>8&255),v.push(w&255),v}():null},d.IPv4.subnetMaskFromPrefixLength=function(p){if(p=parseInt(p),p<0||p>32)throw new Error("ipaddr: invalid IPv4 prefix length");let y=[0,0,0,0],m=0,w=Math.floor(p/8);for(;m<w;)y[m]=255,m++;return w<4&&(y[w]=Math.pow(2,p%8)-1<<8-p%8),new this(y)},d.IPv6=function(){function p(y,m){let w,b;if(y.length===16)for(this.parts=[],w=0;w<=14;w+=2)this.parts.push(y[w]<<8|y[w+1]);else if(y.length===8)this.parts=y;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(w=0;w<this.parts.length;w++)if(b=this.parts[w],!(0<=b&&b<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return p.prototype.SpecialRanges={unspecified:[new p([0,0,0,0,0,0,0,0]),128],linkLocal:[new p([65152,0,0,0,0,0,0,0]),10],multicast:[new p([65280,0,0,0,0,0,0,0]),8],loopback:[new p([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new p([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new p([0,0,0,0,0,65535,0,0]),96],rfc6145:[new p([0,0,0,0,65535,0,0,0]),96],rfc6052:[new p([100,65435,0,0,0,0,0,0]),96],"6to4":[new p([8194,0,0,0,0,0,0,0]),16],teredo:[new p([8193,0,0,0,0,0,0,0]),32],reserved:[[new p([8193,3512,0,0,0,0,0,0]),32]]},p.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},p.prototype.kind=function(){return"ipv6"},p.prototype.match=function(y,m){let w;if(m===void 0&&(w=y,y=w[0],m=w[1]),y.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,y.parts,16,m)},p.prototype.prefixLengthFromSubnetMask=function(){let y=0,m=!1,w={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},b,v;for(let x=7;x>=0;x-=1)if(b=this.parts[x],b in w){if(v=w[b],m&&v!==0)return null;v!==16&&(m=!0),y+=v}else return null;return 128-y},p.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},p.prototype.toByteArray=function(){let y,m=[],w=this.parts;for(let b=0;b<w.length;b++)y=w[b],m.push(y>>8),m.push(y&255);return m},p.prototype.toFixedLengthString=function(){let y=function(){let w=[];for(let b=0;b<this.parts.length;b++)w.push(h(this.parts[b].toString(16),4));return w}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),y+m},p.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let y=this.parts.slice(-2),m=y[0],w=y[1];return new d.IPv4([m>>8,m&255,w>>8,w&255])},p.prototype.toNormalizedString=function(){let y=function(){let w=[];for(let b=0;b<this.parts.length;b++)w.push(this.parts[b].toString(16));return w}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),y+m},p.prototype.toRFC5952String=function(){let y=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),w=0,b=-1,v;for(;v=y.exec(m);)v[0].length>b&&(w=v.index,b=v[0].length);return b<0?m:`${m.substring(0,w)}::${m.substring(w+b)}`},p.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},p}(),d.IPv6.broadcastAddressFromCIDR=function(p){try{let y=this.parseCIDR(p),m=y[0].toByteArray(),w=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],v=0;for(;v<16;)b.push(parseInt(m[v],10)|parseInt(w[v],10)^255),v++;return new this(b)}catch(y){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${y})`)}},d.IPv6.isIPv6=function(p){return this.parser(p)!==null},d.IPv6.isValid=function(p){if(typeof p=="string"&&p.indexOf(":")===-1)return!1;try{let y=this.parser(p);return new this(y.parts,y.zoneId),!0}catch(y){return!1}},d.IPv6.networkAddressFromCIDR=function(p){let y,m,w,b,v;try{for(y=this.parseCIDR(p),w=y[0].toByteArray(),v=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],m=0;m<16;)b.push(parseInt(w[m],10)&parseInt(v[m],10)),m++;return new this(b)}catch(x){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${x})`)}},d.IPv6.parse=function(p){let y=this.parser(p);if(y.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(y.parts,y.zoneId)},d.IPv6.parseCIDR=function(p){let y,m,w;if((m=p.match(/^(.+)\/(\d+)$/))&&(y=parseInt(m[2]),y>=0&&y<=128))return w=[this.parse(m[1]),y],Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},d.IPv6.parser=function(p){let y,m,w,b,v,x;if(w=p.match(a.deprecatedTransitional))return this.parser(`::ffff:${w[1]}`);if(a.native.test(p))return c(p,8);if((w=p.match(a.transitional))&&(x=w[6]||"",y=c(w[1].slice(0,-1)+x,6),y.parts)){for(v=[parseInt(w[2]),parseInt(w[3]),parseInt(w[4]),parseInt(w[5])],m=0;m<v.length;m++)if(b=v[m],!(0<=b&&b<=255))return null;return y.parts.push(v[0]<<8|v[1]),y.parts.push(v[2]<<8|v[3]),{parts:y.parts,zoneId:y.zoneId}}return null},d.IPv6.subnetMaskFromPrefixLength=function(p){if(p=parseInt(p),p<0||p>128)throw new Error("ipaddr: invalid IPv6 prefix length");let y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,w=Math.floor(p/8);for(;m<w;)y[m]=255,m++;return w<16&&(y[w]=Math.pow(2,p%8)-1<<8-p%8),new this(y)},d.fromByteArray=function(p){let y=p.length;if(y===4)return new d.IPv4(p);if(y===16)return new d.IPv6(p);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},d.isValid=function(p){return d.IPv6.isValid(p)||d.IPv4.isValid(p)},d.parse=function(p){if(d.IPv6.isValid(p))return d.IPv6.parse(p);if(d.IPv4.isValid(p))return d.IPv4.parse(p);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},d.parseCIDR=function(p){try{return d.IPv6.parseCIDR(p)}catch(y){try{return d.IPv4.parseCIDR(p)}catch(m){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},d.process=function(p){let y=this.parse(p);return y.kind()==="ipv6"&&y.isIPv4MappedAddress()?y.toIPv4Address():y},d.subnetMatch=function(p,y,m){let w,b,v,x;m==null&&(m="unicast");for(b in y)if(Object.prototype.hasOwnProperty.call(y,b)){for(v=y[b],v[0]&&!(v[0]instanceof Array)&&(v=[v]),w=0;w<v.length;w++)if(x=v[w],p.kind()===x[0].kind()&&p.match.apply(p,x))return b}return m},typeof mw!="undefined"&&mw.exports?mw.exports=d:t.ipaddr=d})(Xfe)});var the=g(lm=>{f();"use strict";var Zfe=lm&&lm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lm,"__esModule",{value:!0});var dze=Yfe(),pze=Zfe(kv()),yze=Zfe(Nv()),Jfe=Qfe(),gze=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],mze=gze.map(t=>new dze.Netmask(t));function bze(t){for(let e of mze)if(e.contains(t))return!0;return!1}function ehe(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}lm.default=t=>{if(Jfe.isValid(t)){let e=Jfe.parse(t);if(e.kind()==="ipv4")return bze(e.toNormalizedString());if(e.kind()==="ipv6")return ehe(t)}else if(yze.default(t)&&pze.default.v6().test(t))return ehe(t)}});var bw=g((gCt,rhe)=>{f();"use strict";rhe.exports=the().default});var Er=g((mCt,she)=>{f();"use strict";var fm=ce(),{sha256:ihe}=(ti(),vs),{base58btc:wze}=(Yr(),mo),{base32:_ze}=(Mi(),dc),{Key:vze}=(Ar(),qd),{Record:Eze}=Aa(),Sze=Je(),{fromString:Aze}=(ht(),ri),{toString:UT}=(Qe(),rr),{concat:xze}=(Wi(),As),nhe=bw(),Rze=Aze("/pk/");function Ize({id:t,multiaddrs:e}){return{id:t,multiaddrs:e.filter(r=>{let[[i,n]]=r.stringTuples();return i!==4&&i!==6?!1:!nhe(n)})}}function Tze({id:t,multiaddrs:e}){return{id:t,multiaddrs:e.filter(r=>{let[[i,n]]=r.stringTuples();return i!==4&&i!==6?!1:nhe(n)})}}var Pze=async t=>(await ihe.digest(t)).digest,Cze=async t=>(await ihe.digest(t.id)).digest,Oze=t=>new vze("/"+UT(t,"base32"),!1),kze=t=>xze([Rze,t.id]),Dze=t=>UT(t.slice(0,4))==="/pk/",Nze=t=>UT(t.slice(0,4))==="/ipns/",Bze=t=>new Sze(t.slice(4)),Lze=(t,e)=>{let r=new Date;return new Eze(t,e,r).serialize()},Mze=t=>(fm.formatters.b=r=>wze.baseEncode(r),fm.formatters.t=r=>_ze.baseEncode(r),fm.formatters.p=r=>r.toB58String(),Object.assign(fm(t),{error:fm(`${t}:error`)}));she.exports={removePrivateAddresses:Ize,removePublicAddresses:Tze,convertBuffer:Pze,convertPeerId:Cze,bufferToKey:Oze,keyForPublicKey:kze,isPublicKeyKey:Dze,isIPNSKey:Nze,fromPublicKeyKey:Bze,createPutRecord:Lze,logger:Mze}});var Ja=g(li=>{f();"use strict";var hm=li.second=1e3,FT=li.minute=60*hm,KT=li.hour=60*FT;li.MAX_RECORD_AGE=36*KT;li.PROTOCOL_DHT="/kad/1.0.0";li.RECORD_KEY_PREFIX="/dht/record";li.PROVIDER_KEY_PREFIX="/dht/provider";li.PROVIDERS_LRU_CACHE_SIZE=256;li.PROVIDERS_VALIDITY=24*KT;li.PROVIDERS_CLEANUP_INTERVAL=KT;li.READ_MESSAGE_TIMEOUT=10*hm;li.GET_MANY_RECORD_COUNT=16;li.K=20;li.ALPHA=3;li.QUERY_SELF_INTERVAL=Number(5*FT);li.QUERY_SELF_TIMEOUT=Number(30*hm);li.TABLE_REFRESH_INTERVAL=Number(5*FT);li.TABLE_REFRESH_QUERY_TIMEOUT=Number(30*hm);li.DEFAULT_QUERY_TIMEOUT=Number(30*hm)});var che=g((wCt,ahe)=>{f();"use strict";var jze=Wfe(),dm=Er(),{default:qze}=So(),{PROTOCOL_DHT:Uze}=Ja(),{TimeoutController:Fze}=ca(),VT="routing-table-size",ohe=class{constructor({peerId:e,dialer:r,kBucketSize:i,pingTimeout:n,lan:s,metrics:o}){this._log=dm.logger(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table`),this._peerId=e,this._dialer=r,this._kBucketSize=i||20,this._pingTimeout=n||1e4,this._lan=s,this._metrics=o,this.kb,this.commonPrefixLengthRefreshedAt=[],this._onPing=this._onPing.bind(this),this._pingQueue=new qze({concurrency:1}),this._running=!1}async start(){this._running=!0,this.kb=new jze({localNodeId:await dm.convertPeerId(this._peerId),numberOfNodesPerKBucket:this._kBucketSize,numberOfNodesToPing:1}),this.kb.on("ping",this._onPing)}async stop(){this._running=!1,this._pingQueue.clear()}_onPing(e,r){this._pingQueue.add(async()=>{if(!this._running)return;let i=0;try{await Promise.all(e.map(async n=>{let s;try{s=new Fze(this._pingTimeout),this._log(`pinging old contact ${n.peer}`);let{stream:o}=await this._dialer.dialProtocol(n.peer,Uze,{signal:s.signal});await o.close(),i++}catch(o){this._running&&(this._log.error("could not ping peer %p",n.peer,o),this._log(`evicting old contact after ping failed ${n.peer}`),this.kb.remove(n.id))}finally{s&&s.clear(),this._metrics&&this._metrics.updateComponentMetric(`kad-dht-${this._lan?"lan":"wan"}`,VT,this.size)}})),this._running&&i<e.length&&(this._log(`adding new contact ${r.peer}`),this.kb.add(r))}catch(n){this._log.error("could not process k-bucket ping event",n)}})}get size(){return this.kb.count()}async find(e){let r=await dm.convertPeerId(e),i=this.closestPeer(r);if(i&&e.equals(i))return i}closestPeer(e){let r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,r=this._kBucketSize){return this.kb.closest(e,r).map(n=>n.peer)}async add(e){let r=await dm.convertPeerId(e);this.kb.add({id:r,peer:e}),this._log("added %p with kad id %b",e,r),this._metrics&&this._metrics.updateComponentMetric(`kad-dht-${this._lan?"lan":"wan"}`,VT,this.size)}async remove(e){let r=await dm.convertPeerId(e);this.kb.remove(r),this._metrics&&this._metrics.updateComponentMetric(`kad-dht-${this._lan?"lan":"wan"}`,VT,this.size)}};ahe.exports.RoutingTable=ohe});var ww={};kt(ww,{xor:()=>Kze});function Kze(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]^e[i];return r}var _w=tt(()=>{f()});var uhe=g((_Ct,Vze)=>{Vze.exports=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782]});var hhe=g((vCt,fhe)=>{f();"use strict";var{xor:zze}=(_w(),ww),Hze=uhe(),{sha256:$ze}=(ti(),vs),Gze=Ic(),Wze=Je(),Yze=Er(),Xze=Yy(),{TimeoutController:Qze}=ca(),{TABLE_REFRESH_INTERVAL:Zze,TABLE_REFRESH_QUERY_TIMEOUT:Jze}=Ja(),vw=15,lhe=class{constructor({peerRouting:e,routingTable:r,refreshInterval:i,refreshQueryTimeout:n,lan:s}){this._log=Yze.logger(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table:refresh`),this._peerRouting=e,this._routingTable=r,this._refreshInterval=i||Zze,this._refreshQueryTimeout=n||Jze,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async start(){this._log(`refreshing routing table every ${this._refreshInterval}ms`),await this.refreshTable(!0)}async stop(){this._refreshTimeoutId&&clearTimeout(this._refreshTimeoutId)}async refreshTable(e){this._log("refreshing routing table");let r=this._maxCommonPrefix(),i=this._getTrackedCommonPrefixLengthsForRefresh(r);this._log(`max common prefix length ${r}`),this._log(`tracked CPLs [ ${i.map(n=>n.toISOString()).join(", ")} ]`),await Promise.all(i.map(async(n,s)=>{try{if(await this._refreshCommonPrefixLength(s,n,e===!0),this._numPeersForCpl(r)===0){let o=Math.min(2*(s+1),i.length-1);for(let a=s+1;a<o+1;a++)try{await this._refreshCommonPrefixLength(a,n,e===!0)}catch(c){this._log.error(c)}}}catch(o){this._log.error(o)}})),this._refreshTimeoutId=setTimeout(this.refreshTable,this._refreshInterval),this._refreshTimeoutId.unref&&this._refreshTimeoutId.unref()}async _refreshCommonPrefixLength(e,r,i){if(!i&&r.getTime()>Date.now()-this._refreshInterval){this._log("not running refresh for cpl %s as time since last refresh not above interval",e);return}let n=await this._generateRandomPeerId(e);this._log("starting refreshing cpl %s with key %p (routing table size was %s)",e,n,this._routingTable.kb.count());let s=new Qze(this._refreshQueryTimeout);try{let o=await Xze(this._peerRouting.getClosestPeers(n.toBytes(),{signal:s.signal}));this._log(`found ${o} peers that were close to imaginary peer %p`,n),this._log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,n,this._routingTable.kb.count())}finally{s.clear()}}_getTrackedCommonPrefixLengthsForRefresh(e){e>vw&&(e=vw);let r=[];for(let i=0;i<=e;i++)r[i]=this.commonPrefixLengthRefreshedAt[i]||new Date;return r}async _generateRandomPeerId(e){let r=Gze.randomBytes(2),i=(r[1]<<8)+r[0],n=await this._makePeerId(this._routingTable.kb.localNodeId,i,e);return Wze.createFromBytes(n)}async _makePeerId(e,r,i){if(i>vw)throw new Error(`Cannot generate peer ID for common prefix length greater than ${vw}`);let o=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1)^32768>>i,a=65535<<16-(i+1),c=o&a|r&~a,u=Hze[c],l=new ArrayBuffer(34),h=new DataView(l,0,l.byteLength);return h.setUint8(0,$ze.code),h.setUint8(1,32),h.setUint32(2,u,!1),new Uint8Array(h.buffer,h.byteOffset,h.byteLength)}_maxCommonPrefix(){let e=0;for(let r of this._prefixLengths())r>e&&(e=r);return e}_numPeersForCpl(e){let r=0;for(let i of this._prefixLengths())i===e&&r++;return r}*_prefixLengths(){if(!!this._routingTable.kb)for(let{id:e}of this._routingTable.kb.toIterable()){let r=zze(this._routingTable.kb.localNodeId,e),i=0;for(let n of r)if(n===0)i++;else break;yield i}}};fhe.exports.RoutingTableRefresh=lhe});var ec=g((ECt,phe)=>{f();"use strict";function dhe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function eHe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return dhe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),dhe(new n,r)}}phe.exports=eHe});var HT=g((SCt,yhe)=>{f();"use strict";var ql=Si(),r1=ql.Reader,zT=ql.Writer,Ve=ql.util,Kr=ql.roots["libp2p-dht-message"]||(ql.roots["libp2p-dht-message"]={});Kr.Record=function(){function t(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}t.prototype.key=null,t.prototype.value=null,t.prototype.author=null,t.prototype.signature=null,t.prototype.timeReceived=null;var e;return Object.defineProperty(t.prototype,"_key",{get:Ve.oneOfGetter(e=["key"]),set:Ve.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_value",{get:Ve.oneOfGetter(e=["value"]),set:Ve.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_author",{get:Ve.oneOfGetter(e=["author"]),set:Ve.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:Ve.oneOfGetter(e=["signature"]),set:Ve.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_timeReceived",{get:Ve.oneOfGetter(e=["timeReceived"]),set:Ve.oneOfSetter(e)}),t.encode=function(i,n){return n||(n=zT.create()),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&n.uint32(10).bytes(i.key),i.value!=null&&Object.hasOwnProperty.call(i,"value")&&n.uint32(18).bytes(i.value),i.author!=null&&Object.hasOwnProperty.call(i,"author")&&n.uint32(26).bytes(i.author),i.signature!=null&&Object.hasOwnProperty.call(i,"signature")&&n.uint32(34).bytes(i.signature),i.timeReceived!=null&&Object.hasOwnProperty.call(i,"timeReceived")&&n.uint32(42).string(i.timeReceived),n},t.decode=function(i,n){i instanceof r1||(i=r1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Kr.Record;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.key=i.bytes();break;case 2:o.value=i.bytes();break;case 3:o.author=i.bytes();break;case 4:o.signature=i.bytes();break;case 5:o.timeReceived=i.string();break;default:i.skipType(a&7);break}}return o},t.fromObject=function(i){if(i instanceof Kr.Record)return i;var n=new Kr.Record;return i.key!=null&&(typeof i.key=="string"?Ve.base64.decode(i.key,n.key=Ve.newBuffer(Ve.base64.length(i.key)),0):i.key.length&&(n.key=i.key)),i.value!=null&&(typeof i.value=="string"?Ve.base64.decode(i.value,n.value=Ve.newBuffer(Ve.base64.length(i.value)),0):i.value.length&&(n.value=i.value)),i.author!=null&&(typeof i.author=="string"?Ve.base64.decode(i.author,n.author=Ve.newBuffer(Ve.base64.length(i.author)),0):i.author.length&&(n.author=i.author)),i.signature!=null&&(typeof i.signature=="string"?Ve.base64.decode(i.signature,n.signature=Ve.newBuffer(Ve.base64.length(i.signature)),0):i.signature.length&&(n.signature=i.signature)),i.timeReceived!=null&&(n.timeReceived=String(i.timeReceived)),n},t.toObject=function(i,n){n||(n={});var s={};return i.key!=null&&i.hasOwnProperty("key")&&(s.key=n.bytes===String?Ve.base64.encode(i.key,0,i.key.length):n.bytes===Array?Array.prototype.slice.call(i.key):i.key,n.oneofs&&(s._key="key")),i.value!=null&&i.hasOwnProperty("value")&&(s.value=n.bytes===String?Ve.base64.encode(i.value,0,i.value.length):n.bytes===Array?Array.prototype.slice.call(i.value):i.value,n.oneofs&&(s._value="value")),i.author!=null&&i.hasOwnProperty("author")&&(s.author=n.bytes===String?Ve.base64.encode(i.author,0,i.author.length):n.bytes===Array?Array.prototype.slice.call(i.author):i.author,n.oneofs&&(s._author="author")),i.signature!=null&&i.hasOwnProperty("signature")&&(s.signature=n.bytes===String?Ve.base64.encode(i.signature,0,i.signature.length):n.bytes===Array?Array.prototype.slice.call(i.signature):i.signature,n.oneofs&&(s._signature="signature")),i.timeReceived!=null&&i.hasOwnProperty("timeReceived")&&(s.timeReceived=i.timeReceived,n.oneofs&&(s._timeReceived="timeReceived")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,ql.util.toJSONOptions)},t}();Kr.Message=function(){function t(r){if(this.closerPeers=[],this.providerPeers=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}t.prototype.type=null,t.prototype.clusterLevelRaw=null,t.prototype.key=null,t.prototype.record=null,t.prototype.closerPeers=Ve.emptyArray,t.prototype.providerPeers=Ve.emptyArray;var e;return Object.defineProperty(t.prototype,"_type",{get:Ve.oneOfGetter(e=["type"]),set:Ve.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_clusterLevelRaw",{get:Ve.oneOfGetter(e=["clusterLevelRaw"]),set:Ve.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:Ve.oneOfGetter(e=["key"]),set:Ve.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_record",{get:Ve.oneOfGetter(e=["record"]),set:Ve.oneOfSetter(e)}),t.encode=function(i,n){if(n||(n=zT.create()),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&n.uint32(8).int32(i.type),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&n.uint32(18).bytes(i.key),i.record!=null&&Object.hasOwnProperty.call(i,"record")&&n.uint32(26).bytes(i.record),i.closerPeers!=null&&i.closerPeers.length)for(var s=0;s<i.closerPeers.length;++s)Kr.Message.Peer.encode(i.closerPeers[s],n.uint32(66).fork()).ldelim();if(i.providerPeers!=null&&i.providerPeers.length)for(var s=0;s<i.providerPeers.length;++s)Kr.Message.Peer.encode(i.providerPeers[s],n.uint32(74).fork()).ldelim();return i.clusterLevelRaw!=null&&Object.hasOwnProperty.call(i,"clusterLevelRaw")&&n.uint32(80).int32(i.clusterLevelRaw),n},t.decode=function(i,n){i instanceof r1||(i=r1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Kr.Message;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.type=i.int32();break;case 10:o.clusterLevelRaw=i.int32();break;case 2:o.key=i.bytes();break;case 3:o.record=i.bytes();break;case 8:o.closerPeers&&o.closerPeers.length||(o.closerPeers=[]),o.closerPeers.push(Kr.Message.Peer.decode(i,i.uint32()));break;case 9:o.providerPeers&&o.providerPeers.length||(o.providerPeers=[]),o.providerPeers.push(Kr.Message.Peer.decode(i,i.uint32()));break;default:i.skipType(a&7);break}}return o},t.fromObject=function(i){if(i instanceof Kr.Message)return i;var n=new Kr.Message;switch(i.type){case"PUT_VALUE":case 0:n.type=0;break;case"GET_VALUE":case 1:n.type=1;break;case"ADD_PROVIDER":case 2:n.type=2;break;case"GET_PROVIDERS":case 3:n.type=3;break;case"FIND_NODE":case 4:n.type=4;break;case"PING":case 5:n.type=5;break}if(i.clusterLevelRaw!=null&&(n.clusterLevelRaw=i.clusterLevelRaw|0),i.key!=null&&(typeof i.key=="string"?Ve.base64.decode(i.key,n.key=Ve.newBuffer(Ve.base64.length(i.key)),0):i.key.length&&(n.key=i.key)),i.record!=null&&(typeof i.record=="string"?Ve.base64.decode(i.record,n.record=Ve.newBuffer(Ve.base64.length(i.record)),0):i.record.length&&(n.record=i.record)),i.closerPeers){if(!Array.isArray(i.closerPeers))throw TypeError(".Message.closerPeers: array expected");n.closerPeers=[];for(var s=0;s<i.closerPeers.length;++s){if(typeof i.closerPeers[s]!="object")throw TypeError(".Message.closerPeers: object expected");n.closerPeers[s]=Kr.Message.Peer.fromObject(i.closerPeers[s])}}if(i.providerPeers){if(!Array.isArray(i.providerPeers))throw TypeError(".Message.providerPeers: array expected");n.providerPeers=[];for(var s=0;s<i.providerPeers.length;++s){if(typeof i.providerPeers[s]!="object")throw TypeError(".Message.providerPeers: object expected");n.providerPeers[s]=Kr.Message.Peer.fromObject(i.providerPeers[s])}}return n},t.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.closerPeers=[],s.providerPeers=[]),i.type!=null&&i.hasOwnProperty("type")&&(s.type=n.enums===String?Kr.Message.MessageType[i.type]:i.type,n.oneofs&&(s._type="type")),i.key!=null&&i.hasOwnProperty("key")&&(s.key=n.bytes===String?Ve.base64.encode(i.key,0,i.key.length):n.bytes===Array?Array.prototype.slice.call(i.key):i.key,n.oneofs&&(s._key="key")),i.record!=null&&i.hasOwnProperty("record")&&(s.record=n.bytes===String?Ve.base64.encode(i.record,0,i.record.length):n.bytes===Array?Array.prototype.slice.call(i.record):i.record,n.oneofs&&(s._record="record")),i.closerPeers&&i.closerPeers.length){s.closerPeers=[];for(var o=0;o<i.closerPeers.length;++o)s.closerPeers[o]=Kr.Message.Peer.toObject(i.closerPeers[o],n)}if(i.providerPeers&&i.providerPeers.length){s.providerPeers=[];for(var o=0;o<i.providerPeers.length;++o)s.providerPeers[o]=Kr.Message.Peer.toObject(i.providerPeers[o],n)}return i.clusterLevelRaw!=null&&i.hasOwnProperty("clusterLevelRaw")&&(s.clusterLevelRaw=i.clusterLevelRaw,n.oneofs&&(s._clusterLevelRaw="clusterLevelRaw")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,ql.util.toJSONOptions)},t.MessageType=function(){var r={},i=Object.create(r);return i[r[0]="PUT_VALUE"]=0,i[r[1]="GET_VALUE"]=1,i[r[2]="ADD_PROVIDER"]=2,i[r[3]="GET_PROVIDERS"]=3,i[r[4]="FIND_NODE"]=4,i[r[5]="PING"]=5,i}(),t.ConnectionType=function(){var r={},i=Object.create(r);return i[r[0]="NOT_CONNECTED"]=0,i[r[1]="CONNECTED"]=1,i[r[2]="CAN_CONNECT"]=2,i[r[3]="CANNOT_CONNECT"]=3,i}(),t.Peer=function(){function r(n){if(this.addrs=[],n)for(var s=Object.keys(n),o=0;o<s.length;++o)n[s[o]]!=null&&(this[s[o]]=n[s[o]])}r.prototype.id=null,r.prototype.addrs=Ve.emptyArray,r.prototype.connection=null;var i;return Object.defineProperty(r.prototype,"_id",{get:Ve.oneOfGetter(i=["id"]),set:Ve.oneOfSetter(i)}),Object.defineProperty(r.prototype,"_connection",{get:Ve.oneOfGetter(i=["connection"]),set:Ve.oneOfSetter(i)}),r.encode=function(s,o){if(o||(o=zT.create()),s.id!=null&&Object.hasOwnProperty.call(s,"id")&&o.uint32(10).bytes(s.id),s.addrs!=null&&s.addrs.length)for(var a=0;a<s.addrs.length;++a)o.uint32(18).bytes(s.addrs[a]);return s.connection!=null&&Object.hasOwnProperty.call(s,"connection")&&o.uint32(24).int32(s.connection),o},r.decode=function(s,o){s instanceof r1||(s=r1.create(s));for(var a=o===void 0?s.len:s.pos+o,c=new Kr.Message.Peer;s.pos<a;){var u=s.uint32();switch(u>>>3){case 1:c.id=s.bytes();break;case 2:c.addrs&&c.addrs.length||(c.addrs=[]),c.addrs.push(s.bytes());break;case 3:c.connection=s.int32();break;default:s.skipType(u&7);break}}return c},r.fromObject=function(s){if(s instanceof Kr.Message.Peer)return s;var o=new Kr.Message.Peer;if(s.id!=null&&(typeof s.id=="string"?Ve.base64.decode(s.id,o.id=Ve.newBuffer(Ve.base64.length(s.id)),0):s.id.length&&(o.id=s.id)),s.addrs){if(!Array.isArray(s.addrs))throw TypeError(".Message.Peer.addrs: array expected");o.addrs=[];for(var a=0;a<s.addrs.length;++a)typeof s.addrs[a]=="string"?Ve.base64.decode(s.addrs[a],o.addrs[a]=Ve.newBuffer(Ve.base64.length(s.addrs[a])),0):s.addrs[a].length&&(o.addrs[a]=s.addrs[a])}switch(s.connection){case"NOT_CONNECTED":case 0:o.connection=0;break;case"CONNECTED":case 1:o.connection=1;break;case"CAN_CONNECT":case 2:o.connection=2;break;case"CANNOT_CONNECT":case 3:o.connection=3;break}return o},r.toObject=function(s,o){o||(o={});var a={};if((o.arrays||o.defaults)&&(a.addrs=[]),s.id!=null&&s.hasOwnProperty("id")&&(a.id=o.bytes===String?Ve.base64.encode(s.id,0,s.id.length):o.bytes===Array?Array.prototype.slice.call(s.id):s.id,o.oneofs&&(a._id="id")),s.addrs&&s.addrs.length){a.addrs=[];for(var c=0;c<s.addrs.length;++c)a.addrs[c]=o.bytes===String?Ve.base64.encode(s.addrs[c],0,s.addrs[c].length):o.bytes===Array?Array.prototype.slice.call(s.addrs[c]):s.addrs[c]}return s.connection!=null&&s.hasOwnProperty("connection")&&(a.connection=o.enums===String?Kr.Message.ConnectionType[s.connection]:s.connection,o.oneofs&&(a._connection="connection")),a},r.prototype.toJSON=function(){return this.constructor.toObject(this,ql.util.toJSONOptions)},r}(),t}();yhe.exports=Kr});var $o=g((ACt,Sw)=>{f();"use strict";var tHe=Je(),{Multiaddr:rHe}=ct(),{Record:iHe}=Aa(),Ew=HT(),$T=Ew.Message.MessageType,ghe=Ew.Message.ConnectionType,nHe=Object.keys($T),i1=class{constructor(e,r,i){if(r&&!(r instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=r,this._clusterLevelRaw=i,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){let e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){let e={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(mhe),providerPeers:this.providerPeers.map(mhe),record:void 0};return this.record&&(this.record instanceof Uint8Array?e.record=this.record:e.record=this.record.serialize()),Ew.Message.encode(e).finish()}static deserialize(e){let r=Ew.Message.decode(e),i=new i1(r.type||0,r.key||Uint8Array.from([]),r.clusterLevelRaw||0);return i.closerPeers=r.closerPeers.map(bhe),i.providerPeers=r.providerPeers.map(bhe),r.record&&r.record.length&&(i.record=iHe.deserialize(r.record)),i}};i1.TYPES=$T;i1.CONNECTION_TYPES=ghe;function mhe(t){return{id:t.id.id,addrs:(t.multiaddrs||[]).map(r=>r.bytes),connection:ghe.CONNECTED}}function bhe(t){return{id:new tHe(t.id),multiaddrs:(t.addrs||[]).map(e=>new rHe(e))}}Sw.exports.Message=i1;Sw.exports.MESSAGE_TYPE=$T;Sw.exports.MESSAGE_TYPE_LOOKUP=nHe});var Bh=g((xCt,whe)=>{f();"use strict";var{MESSAGE_TYPE_LOOKUP:sHe}=$o(),oHe=["PUT_VALUE","GET_VALUE","ADD_PROVIDER","GET_PROVIDERS","FIND_NODE","PING"];function aHe(t){return{...t,name:"SENDING_QUERY",type:0,messageName:sHe[t.type],messageType:t.type}}function cHe(t){return{...t,name:"PEER_RESPONSE",type:1,messageName:oHe[t.messageType],closer:t.closer?t.closer:[],providers:t.providers?t.providers:[]}}function uHe(t){return{...t,name:"FINAL_PEER",type:2}}function lHe(t){return{...t,name:"QUERY_ERROR",type:3}}function fHe(t){return{...t,name:"PROVIDER",type:4}}function hHe(t){return{...t,name:"VALUE",type:5}}function dHe(t){return{...t,name:"ADDING_PEER",type:6}}function pHe(t){return{...t,name:"DIALING_PEER",type:7}}whe.exports={sendingQueryEvent:aHe,peerResponseEvent:cHe,finalPeerEvent:uHe,queryErrorEvent:lHe,providerEvent:fHe,valueEvent:hHe,addingPeerEvent:dHe,dialingPeerEvent:pHe}});var The=g((RCt,Ihe)=>{f();"use strict";var yHe=ec(),{pipe:_he}=vr(),GT=qo(),gHe=Ln(),mHe=Vf(),{Message:bHe,MESSAGE_TYPE_LOOKUP:vhe}=$o(),wHe=Er(),{EventEmitter:_He}=Wt(),{dialingPeerEvent:Ehe,sendingQueryEvent:She,peerResponseEvent:Ahe,queryErrorEvent:xhe}=Bh(),Rhe=class extends _He{constructor({dialer:e,protocol:r,lan:i}){super();this._log=wHe.logger(`libp2p:kad-dht:${i?"lan":"wan"}:network`),this._running=!1,this._dialer=e,this._protocol=r}start(){this._running||(this._running=!0)}stop(){this._running=!1}get isStarted(){return this._running}async*sendRequest(e,r,i={}){if(!!this._running){this._log("sending %s to %p",vhe[r.type],e);try{yield Ehe({peer:e});let{stream:n}=await this._dialer.dialProtocol(e,this._protocol,i);yield She({to:e,type:r.type});let s=await this._writeReadMessage(n,r.serialize(),i);yield Ahe({from:e,messageType:s.type,closer:s.closerPeers,providers:s.providerPeers,record:s.record})}catch(n){yield xhe({from:e,error:n})}}}async*sendMessage(e,r,i={}){if(!this._running)return;this._log("sending %s to %p",vhe[r.type],e),yield Ehe({peer:e});let{stream:n}=await this._dialer.dialProtocol(e,this._protocol,i);yield She({to:e,type:r.type});try{await this._writeMessage(n,r.serialize(),i),yield Ahe({from:e,messageType:r.type})}catch(s){yield xhe({from:e,error:s})}}async _writeMessage(e,r,i={}){await _he([r],GT.encode(),e,gHe)}async _writeReadMessage(e,r,i={}){let n=await _he([r],GT.encode(),e,GT.decode(),async o=>{let a=await mHe(o);if(a)return a.slice()});if(n.length===0)throw yHe(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");let s=bHe.deserialize(n);return s.closerPeers.forEach(o=>{this.emit("peer",o)}),s.providerPeers.forEach(o=>{this.emit("peer",o)}),s}};Ihe.exports.Network=Rhe});var Dhe=g((ICt,khe)=>{f();"use strict";var WT=ec(),{equals:YT}=(qi(),Zn),{toString:vHe}=(Qe(),rr),XT=Aa(),{ALPHA:EHe}=Ja(),Ul=Er(),pm=XT.Record,SHe=y6(),AHe=mn(),{valueEvent:Phe,queryErrorEvent:Che}=Bh(),{Message:Aw}=$o(),{pipe:xHe}=vr(),Ohe=class{constructor({peerId:e,records:r,validators:i,selectors:n,peerRouting:s,queryManager:o,routingTable:a,network:c,lan:u}){this._log=Ul.logger(`libp2p:kad-dht:${u?"lan":"wan"}:content-fetching`),this._peerId=e,this._records=r,this._validators=i,this._selectors=n,this._peerRouting=s,this._queryManager=o,this._routingTable=a,this._network=c}async putLocal(e,r){return this._records.put(Ul.bufferToKey(e),r)}async getLocal(e){this._log(`getLocal ${vHe(e,"base32")}`);let r=Ul.bufferToKey(e);this._log(`fetching record for key ${r}`);let i=await this._records.get(r);this._log(`found ${r} in local datastore`);let n=pm.deserialize(i);return await XT.validator.verifyRecord(this._validators,n),n}async*sendCorrectionRecord(e,r,i,n={}){this._log("sendCorrection for %b",e);let s=await Ul.createPutRecord(e,i);for(let{value:o,from:a}of r){if(YT(o,i)){this._log("record was ok");continue}if(this._peerId.equals(a)){try{let l=Ul.bufferToKey(e);this._log(`Storing corrected record for key ${l}`),await this._records.put(l,s)}catch(l){this._log.error("Failed error correcting self",l)}continue}let c=!1,u=new Aw(Aw.TYPES.PUT_VALUE,e,0);u.record=pm.deserialize(s);for await(let l of this._network.sendRequest(a,u,n))l.name==="PEER_RESPONSE"&&l.record&&YT(l.record.value,pm.deserialize(s).value)&&(c=!0),yield l;c||(yield Che({from:a,error:WT(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})),this._log.error("Failed error correcting entry")}}async*put(e,r,i={}){this._log("put key %b value %b",e,r);let n=await Ul.createPutRecord(e,r),s=Ul.bufferToKey(e);this._log(`storing record for key ${s}`),await this._records.put(s,n),yield*xHe(this._peerRouting.getClosestPeers(e,{signal:i.signal}),o=>AHe(o,a=>async()=>{if(a.name!=="FINAL_PEER")return[a];let c=[],u=new Aw(Aw.TYPES.PUT_VALUE,e,0);u.record=pm.deserialize(n);for await(let l of this._network.sendRequest(a.peer.id,u,i))c.push(l),l.name==="PEER_RESPONSE"&&(l.record&&YT(l.record.value,pm.deserialize(n).value)||c.push(Che({from:a.peer.id,error:WT(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})));return c}),o=>SHe(o,{ordered:!1,concurrency:EHe}),async function*(o){for await(let a of o)yield*a})}async*get(e,r={}){this._log("get %b",e);let i=[];for await(let a of this.getMany(e,r))a.name==="VALUE"&&i.push(a),yield a;if(!i.length)return;let n=i.map(a=>a.value),s=0;try{s=XT.selection.bestRecord(this._selectors,e,n)}catch(a){if(a.code!=="ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")throw a}let o=n[s];if(this._log("GetValue %b %b",e,o),!o)throw WT(new Error("best value was not found"),"ERR_NOT_FOUND");yield*this.sendCorrectionRecord(e,i,o,r),yield i[s]}async*getMany(e,r={}){this._log("getMany values for %t",e);try{let a=await this.getLocal(e);yield Phe({value:a.value,from:this._peerId})}catch(a){this._log("error getting local value for %b",e,a)}let i=await Ul.convertBuffer(e),n=this._routingTable.closestPeers(i);this._log("found %d peers in routing table",n.length);let s=this,o=async function*({peer:a,signal:c}){for await(let u of s._peerRouting.getValueOrPeers(a,e,{signal:c}))yield u,u.name==="PEER_RESPONSE"&&u.record&&(yield Phe({from:a,value:u.record.value}))};yield*this._queryManager.run(e,n,o,r)}};khe.exports.ContentFetching=Ohe});var Mhe=g((TCt,Lhe)=>{f();"use strict";var{Message:xw}=$o(),RHe=y6(),IHe=mn(),{convertBuffer:THe,logger:PHe}=Er(),{ALPHA:CHe}=Ja(),{pipe:OHe}=vr(),{queryErrorEvent:kHe,peerResponseEvent:DHe,providerEvent:Nhe}=Bh(),{Message:{MessageType:NHe}}=HT(),Bhe=class{constructor({peerId:e,network:r,peerRouting:i,queryManager:n,routingTable:s,providers:o,peerStore:a,lan:c}){this._log=PHe(`libp2p:kad-dht:${c?"lan":"wan"}:content-routing`),this._peerId=e,this._network=r,this._peerRouting=i,this._queryManager=n,this._routingTable=s,this._providers=o,this._peerStore=a}async*provide(e,r,i={}){this._log("provide %s",e),await this._providers.addProvider(e,this._peerId);let n=new xw(xw.TYPES.ADD_PROVIDER,e.bytes,0);n.providerPeers=[{id:this._peerId,multiaddrs:r}];let s=0,o=a=>async()=>{if(a.name!=="FINAL_PEER")return[a];let c=[];this._log("putProvider %s to %p",e,a.peer.id);try{this._log("sending provider record for %s to %p",e,a.peer.id);for await(let u of this._network.sendMessage(a.peer.id,n,i))u.name==="PEER_RESPONSE"&&(this._log("sent provider record for %s to %p",e,a.peer.id),s++),c.push(u)}catch(u){this._log.error("error sending provide record to peer %p",a.peer.id,u),c.push(kHe({from:a.peer.id,error:u}))}return c};yield*OHe(this._peerRouting.getClosestPeers(e.multihash.bytes,i),a=>IHe(a,c=>o(c)),a=>RHe(a,{ordered:!1,concurrency:CHe}),async function*(a){for await(let c of a)yield*c}),this._log("sent provider records to %d peers",s)}async*findProviders(e,r={maxNumProviders:5}){let i=r.maxNumProviders||this._routingTable._kBucketSize,n=e.multihash.bytes,s=await THe(n),o=this;this._log(`findProviders ${e}`);let a=await this._providers.getProviders(e);if(a.length){let l=a.slice(0,i).map(h=>({id:h,multiaddrs:(this._peerStore.addressBook.get(h)||[]).map(d=>d.multiaddr)}));yield DHe({from:this._peerId,messageType:NHe.GET_PROVIDERS,providers:l}),yield Nhe({from:this._peerId,providers:l})}if(a.length>=i)return;let c=async function*({peer:l,signal:h}){let d=new xw(xw.TYPES.GET_PROVIDERS,n,0);yield*o._network.sendRequest(l,d,{signal:h})},u=new Set(a.map(l=>l.toB58String()));for await(let l of this._queryManager.run(n,this._routingTable.closestPeers(s),c,r))if(yield l,l.name==="PEER_RESPONSE"){this._log(`Found ${l.providers.length} provider entries for ${e} and ${l.closer.length} closer peers`);let h=[];for(let d of l.providers)u.has(d.id.toB58String())||(u.add(d.id.toB58String()),h.push(d));if(h.length&&(yield Nhe({from:l.from,providers:h})),u.size===i)return}}};Lhe.exports.ContentRouting=Bhe});var qhe=g((PCt,jhe)=>{f();"use strict";jhe.exports=(t,e=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof r.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(e===0)return t;let i=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(i,r.indent.repeat(e))}});var Uhe=g(()=>{f()});var zhe=g((kCt,Vhe)=>{f();"use strict";var Fhe=Uhe(),Khe=/\s+at.*(?:\(|\s)(.*)\)?/,BHe=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,LHe=typeof Fhe.homedir=="undefined"?"":Fhe.homedir();Vhe.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split(`
`).filter(r=>{let i=r.match(Khe);if(i===null||!i[1])return!0;let n=i[1];return n.includes(".app/Contents/Resources/electron.asar")||n.includes(".app/Contents/Resources/default_app.asar")?!1:!BHe.test(n)}).filter(r=>r.trim()!=="").map(r=>e.pretty?r.replace(Khe,(i,n)=>i.replace(n,n.replace(LHe,"~"))):r).join(`
`))});var QT=g((DCt,$he)=>{f();"use strict";var MHe=qhe(),jHe=zhe(),qHe=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),Hhe=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(i=>i instanceof Error?i:i!==null&&typeof i=="object"?Object.assign(new Error(i.message),i):new Error(i));let r=e.map(i=>typeof i.stack=="string"?qHe(jHe(i.stack)):String(i)).join(`
`);r=`
`+MHe(r,4);super(r);this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(let e of this._errors)yield e}};$he.exports=Hhe});var Whe=g((NCt,Ghe)=>{f();"use strict";var UHe=QT();Ghe.exports=async(t,e,{concurrency:r=1/0,stopOnError:i=!0}={})=>new Promise((n,s)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(r)||r===1/0)&&r>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let o=[],a=[],c=t[Symbol.iterator](),u=!1,l=!1,h=0,d=0,p=()=>{if(u)return;let y=c.next(),m=d;if(d++,y.done){l=!0,h===0&&(!i&&a.length!==0?s(new UHe(a)):n(o));return}h++,(async()=>{try{let w=await y.value;o[m]=await e(w,m),h--,p()}catch(w){i?(u=!0,s(w)):(a.push(w),h--,p())}})()};for(let y=0;y<r&&(p(),!l);y++);})});var ede=g((BCt,Jhe)=>{f();"use strict";var Yhe=Er(),FHe=Whe(),{compare:Xhe}=(TA(),PX),{xor:Qhe}=(_w(),ww),Zhe=class{constructor(e,r){this.originDhtKey=e,this.capacity=r,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peerId)}async add(e){if(this.peerDistances.find(n=>n.peerId.equals(e)))return;let r=await Yhe.convertPeerId(e),i={peerId:e,distance:Qhe(this.originDhtKey,r)};this.peerDistances.push(i),this.peerDistances.sort((n,s)=>Xhe(n.distance,s.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(!e.length)return!1;if(!this.length)return!0;let r=await FHe(e,n=>Yhe.convertPeerId(n)),i=this.peerDistances[this.peerDistances.length-1].distance;for(let n of r){let s=Qhe(this.originDhtKey,n);if(Xhe(s,i)<0)return!0}return!1}};Jhe.exports=Zhe});var nde=g((LCt,ide)=>{f();"use strict";var Rw=ec(),{validator:KHe}=Aa(),VHe=Je(),{toString:zHe}=(Qe(),rr),{Message:n1}=$o(),ym=Er(),{queryErrorEvent:tde,finalPeerEvent:Iw,valueEvent:HHe}=Bh(),$He=ede(),{Record:GHe}=Aa(),rde=class{constructor({peerId:e,routingTable:r,peerStore:i,network:n,validators:s,queryManager:o,lan:a}){this._peerId=e,this._routingTable=r,this._peerStore=i,this._network=n,this._validators=s,this._queryManager=o,this._log=ym.logger(`libp2p:kad-dht:${a?"lan":"wan"}:peer-routing`)}async findPeerLocal(e){let r,i=await this._routingTable.find(e);if(i&&(this._log("findPeerLocal found %p in routing table",e),r=this._peerStore.get(i)),r||(r=this._peerStore.get(e)),r)return this._log("findPeerLocal found %p in peer store",e),{id:r.id,multiaddrs:r.addresses.map(n=>n.multiaddr)}}async*_getValueSingle(e,r,i={}){let n=new n1(n1.TYPES.GET_VALUE,r,0);yield*this._network.sendRequest(e,n,i)}async*getPublicKeyFromNode(e,r){let i=ym.keyForPublicKey(e);for await(let n of this._getValueSingle(e,i,r))if(yield n,n.name==="PEER_RESPONSE"&&n.record){let s=await VHe.createFromPubKey(n.record.value);if(!s.equals(e))throw Rw(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");yield HHe({from:e,value:s.pubKey.bytes})}throw Rw(new Error(`Node not responding with its public key: ${e.toB58String()}`),"ERR_INVALID_RECORD")}async*findPeer(e,r={}){this._log("findPeer %p",e);let i=await this.findPeerLocal(e);if(i!=null){this._log("found local"),yield Iw({from:this._peerId,peer:i});return}let n=await ym.convertPeerId(e),s=this._routingTable.closestPeers(n);if(s.find(l=>l.equals(e))){let l=this._peerStore.get(e);if(l){this._log("found in peerStore"),yield Iw({from:this._peerId,peer:{id:l.id,multiaddrs:l.addresses.map(h=>h.multiaddr)}});return}}let a=this,c=async function*({peer:l,signal:h}){let d=new n1(n1.TYPES.FIND_NODE,e.toBytes(),0);for await(let p of a._network.sendRequest(l,d,{signal:h}))if(yield p,p.name==="PEER_RESPONSE"){let y=p.closer.find(m=>m.id.equals(e));y&&(yield Iw({from:p.from,peer:y}))}},u=!1;for await(let l of this._queryManager.run(e.id,s,c,r))l.name==="FINAL_PEER"&&(u=!0),yield l;u||(yield tde({from:this._peerId,error:Rw(new Error("Not found"),"ERR_NOT_FOUND")}))}async*getClosestPeers(e,r={}){this._log("getClosestPeers to %b",e);let i=await ym.convertBuffer(e),n=this._routingTable.closestPeers(i),s=this,o=new $He(i,this._routingTable._kBucketSize);n.forEach(c=>o.add(c));let a=async function*({peer:c,signal:u}){s._log("closerPeersSingle %s from %p",zHe(e,"base32"),c);let l=new n1(n1.TYPES.FIND_NODE,e,0);yield*s._network.sendRequest(c,l,{signal:u})};for await(let c of this._queryManager.run(e,n,a,r))yield c,c.name==="PEER_RESPONSE"&&c.closer.forEach(u=>{o.add(u.id)});this._log("found %d peers close to %b",o.length,e),yield*o.peers.map(c=>Iw({from:this._peerId,peer:{id:c,multiaddrs:(this._peerStore.addressBook.get(c)||[]).map(u=>u.multiaddr)}}))}async*getValueOrPeers(e,r,i={}){for await(let n of this._getValueSingle(e,r,i)){if(n.name==="PEER_RESPONSE"&&n.record)try{await this._verifyRecordOnline(n.record)}catch(s){let o="invalid record received, discarded";this._log(o),yield tde({from:n.from,error:Rw(new Error(o),"ERR_INVALID_RECORD")});continue}yield n}}async _verifyRecordOnline({key:e,value:r,timeReceived:i}){await KHe.verifyRecord(this._validators,new GHe(e,r,i))}async getCloserPeersOffline(e,r){let i=await ym.convertBuffer(e),s=this._routingTable.closestPeers(i).map(o=>{let a=this._peerStore.get(o);return{id:o,multiaddrs:a?a.addresses.map(c=>c.multiaddr):[]}}).filter(o=>!o.id.equals(r));return s.length?this._log("getCloserPeersOffline found %d peer(s) closer to %b than %p",s.length,e,r):this._log("getCloserPeersOffline could not find peer closer to %b than %p",e,r),s}};ide.exports.PeerRouting=rde});var fde=g((MCt,lde)=>{f();"use strict";var WHe=Fd(),sde=Cn(),YHe=Je(),{Key:XHe}=(Ar(),qd),{default:QHe}=So(),{PROVIDERS_CLEANUP_INTERVAL:ZHe,PROVIDERS_VALIDITY:JHe,PROVIDERS_LRU_CACHE_SIZE:e$e,PROVIDER_KEY_PREFIX:ode}=Ja(),t$e=Er(),{toString:r$e}=(Qe(),rr),Fl=t$e.logger("libp2p:kad-dht:providers"),ade=class{constructor({providers:e,cacheSize:r,cleanupInterval:i,provideValidity:n}){this.datastore=e,this.cleanupInterval=i||ZHe,this.provideValidity=n||JHe,this.cache=WHe(r||e$e),this.syncQueue=new QHe({concurrency:1})}start(){this._started||(this._started=!0,this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval))}stop(){this._started=!1,this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add(async()=>{let e=Date.now(),r=0,i=0,n=new Map,s=this.datastore.batch(),o=this.datastore.query({prefix:ode});for await(let a of o)try{let{cid:c,peerId:u}=cde(a.key),l=ude(a.value),h=Date.now(),d=h-l,p=d>this.provideValidity;if(Fl("comparing: %d - %d = %d > %d %s",h,l,d,this.provideValidity,p?"(expired)":""),p){i++,s.delete(a.key);let y=n.get(c)||new Set;y.add(u),n.set(c,y)}r++}catch(c){Fl.error(c.message)}n.size?(Fl("deleting %d / %d entries",i,r),await s.commit()):Fl("nothing to delete");for(let[a,c]of n){let u=gm(a),l=this.cache.get(u);if(l){for(let h of c)l.delete(h);l.size===0?this.cache.remove(u):this.cache.set(u,l)}}Fl("Cleanup successful (%dms)",Date.now()-e)})}async _getProvidersMap(e){let r=gm(e),i=this.cache.get(r);return i||(i=await n$e(this.datastore,e),this.cache.set(r,i)),i}async addProvider(e,r){return this.syncQueue.add(async()=>{Fl("%p provides %s",r,e);let i=await this._getProvidersMap(e);Fl("loaded %s provs",i.size);let n=new Date;i.set(r.toString(),n);let s=gm(e);return this.cache.set(s,i),i$e(this.datastore,e,r,n)})}async getProviders(e){return this.syncQueue.add(async()=>(Fl("get providers for %s",e),[...(await this._getProvidersMap(e)).keys()].map(i=>YHe.parse(i))))}};function gm(t){return t=typeof t=="string"?t:r$e(t.multihash.bytes,"base32"),`${ode}/${t}`}async function i$e(t,e,r,i){let n=[gm(e),"/",r.toString()].join(""),s=new XHe(n),o=Uint8Array.from(sde.encode(i.getTime()));return t.put(s,o)}function cde(t){let e=t.toString().split("/");if(e.length!==5)throw new Error("incorrectly formatted provider entry key in datastore: "+t);return{cid:e[3],peerId:e[4]}}async function n$e(t,e){let r=new Map,i=t.query({prefix:gm(e)});for await(let n of i){let{peerId:s}=cde(n.key);r.set(s,ude(n.value))}return r}function ude(t){return sde.decode(t)}lde.exports.Providers=ade});var mde=g((jCt,gde)=>{f();"use strict";var{default:s$e}=So(),{xor:hde}=(_w(),ww),{toString:dde}=(Qe(),rr),pde=xa(),o$e=ec(),{convertPeerId:yde,convertBuffer:a$e}=Er(),{TimeoutController:c$e}=ca(),{anySignal:u$e}=Eo(),{queryErrorEvent:l$e}=Bh(),f$e=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");gde.exports.queryPath=async function*({key:e,startingPeer:r,ourPeerId:i,signal:n,query:s,alpha:o,pathIndex:a,numPaths:c,cleanUp:u,queryFuncTimeout:l,log:h}){let d=new s$e({concurrency:o}),p=await a$e(e),y=new Set;function m(w,b){if(!w)return;y.add(w.toB58String());let v=BigInt("0x"+dde(hde(b,p),"base16"));d.add(async()=>{let x,B=[n];l!=null&&(x=new c$e(l),B.push(x.signal));let O=u$e(B);try{for await(let R of s({key:e,peer:w,signal:O,pathIndex:a,numPaths:c})){if(O.aborted)return;if(R.name==="PEER_RESPONSE")for(let N of R.closer){if(y.has(N.id.toB58String())){h("already seen %p in query",N.id);continue}if(i.equals(N.id)){h("not querying ourselves");continue}let F=await yde(N.id);if(BigInt("0x"+dde(hde(F,p),"base16"))>v){h("skipping %p as they are not closer to %b than %p",N.id,e,w);continue}h("querying closer peer %p",N.id),m(N.id,F)}d.emit("completed",R)}x&&x.clear()}catch(R){n.aborted?d.emit("error",R):d.emit("completed",l$e({from:w,error:R}))}finally{x&&x.clear()}},{priority:f$e-v})}m(r,await yde(r)),yield*h$e(d,n,u,h)};async function*h$e(t,e,r,i){let n=pde(),s=!0,o=[],a=()=>{!s||(i("clean up queue, results %d, queue size %d, pending tasks %d",o.length,t.size,t.pending),s=!1,t.clear(),o.splice(0,o.length))};for(t.on("completed",c=>{o.push(c),n.resolve()}),t.on("error",c=>{i("queue error",c),a(),n.reject(c)}),t.on("idle",()=>{i("queue idle"),s=!1,n.resolve()}),e.addEventListener("abort",()=>{i("abort queue");let c=s;a(),c&&n.reject(o$e(new Error("Query aborted"),"ERR_QUERY_ABORTED"))}),r.on("cleanup",()=>{a(),n.resolve()});s;)for(await n.promise,n=pde();o.length;){let c=o.shift();c&&(yield c)}yield*o}});var Ade=g((qCt,Sde)=>{f();"use strict";var{AbortController:d$e}=Ii(),{TimeoutController:p$e}=ca(),{anySignal:y$e}=Eo(),{ALPHA:bde,K:wde,DEFAULT_QUERY_TIMEOUT:g$e}=Ja(),{toString:m$e}=(Qe(),rr),{logger:b$e}=Er(),{queryPath:w$e}=mde(),_$e=Yu(),{EventEmitter:v$e,setMaxListeners:_de}=Wt(),vde="running-queries",Ede=class{constructor({peerId:e,lan:r,metrics:i,disjointPaths:n=wde,alpha:s=bde}){this._peerId=e,this._disjointPaths=n||wde,this._controllers=new Set,this._running=!1,this._alpha=s||bde,this._lan=r,this._metrics=i,this._queries=0}start(){this._running=!0}stop(){this._running=!1;for(let e of this._controllers)e.abort();this._controllers.clear()}async*run(e,r,i,n={}){if(!this._running)throw new Error("QueryManager not started");let s;n.signal||(s=new p$e(g$e),n.signal=s.signal);let o=new d$e;this._controllers.add(o);let a=[o.signal];n.signal&&a.push(n.signal);let c=y$e(a);try{_de&&_de(0,c)}catch{}let u=b$e(`libp2p:kad-dht:${this._lan?"lan":"wan"}:query:`+m$e(e,"base58btc")),l=r.slice(0,Math.min(this._disjointPaths,r.length)),h=Date.now(),d=new v$e;try{if(u("query:start"),this._queries++,this._metrics&&this._metrics.updateComponentMetric(`kad-dht-${this._lan?"lan":"wan"}`,vde,this._queries),r.length===0){u.error("Running query with no peers");return}let p=l.map((y,m)=>w$e({key:e,startingPeer:y,ourPeerId:this._peerId,signal:c,query:i,pathIndex:m,numPaths:l.length,alpha:this._alpha,cleanUp:d,queryFuncTimeout:n.queryFuncTimeout,log:u}));for await(let y of _$e(...p))yield y,y.name==="QUERY_ERROR"&&y.error&&u("error",y.error)}catch(p){if(!(!this._running&&p.code==="ERR_QUERY_ABORTED"))throw p}finally{this._controllers.delete(o),s&&s.clear(),this._queries--,this._metrics&&this._metrics.updateComponentMetric(`kad-dht-${this._lan?"lan":"wan"}`,vde,this._queries),d.emit("cleanup"),u(`query:done in ${Date.now()-(h||0)}ms`)}}};Sde.exports.QueryManager=Ede});var Tde=g((UCt,Ide)=>{f();"use strict";var{CID:E$e}=(ye(),_u),xde=ec(),S$e=Er(),mm=S$e.logger("libp2p:kad-dht:rpc:handlers:add-provider"),Rde=class{constructor({peerId:e,providers:r,peerStore:i}){this._peerId=e,this._providers=r,this._peerStore=i}async handle(e,r){if(mm("start"),!r.key||r.key.length===0)throw xde(new Error("Missing key"),"ERR_MISSING_KEY");let i;try{i=E$e.decode(r.key)}catch(n){let s=`Invalid CID: ${n.message}`;throw xde(new Error(s),"ERR_INVALID_CID")}(!r.providerPeers||!r.providerPeers.length)&&mm.error("no providers found in message"),await Promise.all(r.providerPeers.map(async n=>{if(!n.id.equals(e)){mm("invalid provider peer %p from %p",n.id,e);return}if(n.multiaddrs.length<1){mm("no valid addresses for provider %p. Ignore",e);return}mm("received provider %p for %s (addrs %s)",e,i,n.multiaddrs.map(s=>s.toString())),this._peerId.equals(n.id)||(this._peerStore.addressBook.add(n.id,n.multiaddrs),await this._providers.addProvider(i,n.id))}))}};Ide.exports.AddProviderHandler=Rde});var kde=g((FCt,Ode)=>{f();"use strict";var{Message:A$e}=$o(),x$e=Er(),Pde=x$e.logger("libp2p:kad-dht:rpc:handlers:find-node"),{removePrivateAddresses:R$e,removePublicAddresses:I$e}=Er(),Cde=class{constructor({peerId:e,addressable:r,peerRouting:i,lan:n}){this._peerId=e,this._addressable=r,this._peerRouting=i,this._lan=Boolean(n)}async handle(e,r){Pde("incoming request from %p for peers closer to %b",e,r.key);let i;this._peerId.equals(r.key)?i=[{id:this._peerId,multiaddrs:this._addressable.multiaddrs}]:i=await this._peerRouting.getCloserPeersOffline(r.key,e),i=i.map(this._lan?I$e:R$e).filter(({multiaddrs:s})=>s.length);let n=new A$e(r.type,new Uint8Array(0),r.clusterLevel);return i.length>0?n.closerPeers=i:Pde("could not find any peers closer to %p",e),n}};Ode.exports.FindNodeHandler=Cde});var Lde=g((KCt,Bde)=>{f();"use strict";var{CID:T$e}=(ye(),_u),P$e=ec(),{Message:C$e}=$o(),O$e=Er(),Dde=O$e.logger("libp2p:kad-dht:rpc:handlers:get-providers"),{removePrivateAddresses:k$e,removePublicAddresses:D$e}=Er(),Nde=class{constructor({peerId:e,peerRouting:r,providers:i,peerStore:n,addressable:s,lan:o}){this._peerId=e,this._peerRouting=r,this._providers=i,this._peerStore=n,this._addressable=s,this._lan=Boolean(o)}async handle(e,r){let i;try{i=T$e.decode(r.key)}catch(u){throw P$e(new Error(`Invalid CID: ${u.message}`),"ERR_INVALID_CID")}Dde("%p asking for providers for %s",e,i);let[n,s]=await Promise.all([this._providers.getProviders(i),this._peerRouting.getCloserPeersOffline(r.key,e)]),o=this._getPeers(n),a=this._getPeers(s.map(({id:u})=>u)),c=new C$e(r.type,r.key,r.clusterLevel);return o.length>0&&(c.providerPeers=o),a.length>0&&(c.closerPeers=a),Dde("got %s providers %s closerPeers",o.length,a.length),c}_getAddresses(e){return this._peerId.equals(e)?this._addressable.multiaddrs:(this._peerStore.addressBook.get(e)||[]).map(r=>r.multiaddr)}_getPeers(e){return e.map(r=>({id:r,multiaddrs:this._getAddresses(r)})).map(this._lan?D$e:k$e).filter(({multiaddrs:r})=>r.length)}};Bde.exports.GetProvidersHandler=Nde});var Kde=g((VCt,Fde)=>{f();"use strict";var{Record:Mde}=Aa(),jde=ec(),{Message:qde}=$o(),{MAX_RECORD_AGE:N$e}=Ja(),Tw=Er(),s1=Tw.logger("libp2p:kad-dht:rpc:handlers:get-value"),Ude=class{constructor({peerId:e,peerStore:r,peerRouting:i,records:n}){this._peerId=e,this._peerStore=r,this._peerRouting=i,this._records=n}async handle(e,r){let i=r.key;if(s1("%p asked for key %b",e,i),!i||i.length===0)throw jde(new Error("Invalid key"),"ERR_INVALID_KEY");let n=new qde(qde.TYPES.GET_VALUE,i,r.clusterLevel);if(Tw.isPublicKeyKey(i)){s1("is public key");let a=Tw.fromPublicKeyKey(i),c;if(this._peerId.equals(a))c=this._peerId;else{let u=this._peerStore.get(a);c=u&&u.id}if(c&&c.pubKey)return s1("returning found public key"),n.record=new Mde(i,c.pubKey.bytes),n}let[s,o]=await Promise.all([this._checkLocalDatastore(i),this._peerRouting.getCloserPeersOffline(r.key,e)]);return s&&(s1("had record for %b in local datastore",i),n.record=s),o.length>0&&(s1("had %s closer peers in routing table",o.length),n.closerPeers=o),n}async _checkLocalDatastore(e){s1("checkLocalDatastore looking for %b",e);let r=Tw.bufferToKey(e),i;try{i=await this._records.get(r)}catch(s){if(s.code==="ERR_NOT_FOUND")return;throw s}let n=Mde.deserialize(i);if(!n)throw jde(new Error("Invalid record"),"ERR_INVALID_RECORD");if(n.timeReceived==null||Date.now()-n.timeReceived.getTime()>N$e){await this._records.delete(r);return}return n}};Fde.exports.GetValueHandler=Ude});var Hde=g((zCt,zde)=>{f();"use strict";var B$e=Er(),L$e=B$e.logger("libp2p:kad-dht:rpc:handlers:ping"),Vde=class{async handle(e,r){return L$e(`ping from ${e}`),r}};zde.exports.PingHandler=Vde});var Xde=g((HCt,Yde)=>{f();"use strict";var $de=Er(),M$e=ec(),j$e=Aa(),Gde=$de.logger("libp2p:kad-dht:rpc:handlers:put-value"),Wde=class{constructor({validators:e,records:r}){this._validators=e,this._records=r}async handle(e,r){let i=r.key;Gde("%p asked to store value for key %b",e,i);let n=r.record;if(!n){let o=`Empty record from: ${e.toB58String()}`;throw Gde.error(o),M$e(new Error(o),"ERR_EMPTY_RECORD")}await j$e.validator.verifyRecord(this._validators,n),n.timeReceived=new Date;let s=$de.bufferToKey(n.key);return await this._records.put(s,n.serialize()),r}};Yde.exports.PutValueHandler=Wde});var Zde=g(($Ct,Qde)=>{f();"use strict";var{Message:o1}=$o(),{AddProviderHandler:q$e}=Tde(),{FindNodeHandler:U$e}=kde(),{GetProvidersHandler:F$e}=Lde(),{GetValueHandler:K$e}=Kde(),{PingHandler:V$e}=Hde(),{PutValueHandler:z$e}=Xde();Qde.exports=({peerId:t,providers:e,peerStore:r,addressable:i,peerRouting:n,records:s,validators:o,lan:a})=>{let c={[o1.TYPES.GET_VALUE]:new K$e({peerId:t,peerStore:r,peerRouting:n,records:s}),[o1.TYPES.PUT_VALUE]:new z$e({validators:o,records:s}),[o1.TYPES.FIND_NODE]:new U$e({peerId:t,addressable:i,peerRouting:n,lan:a}),[o1.TYPES.ADD_PROVIDER]:new q$e({peerId:t,providers:e,peerStore:r}),[o1.TYPES.GET_PROVIDERS]:new F$e({peerId:t,peerRouting:n,providers:e,peerStore:r,addressable:i,lan:a}),[o1.TYPES.PING]:new V$e};function u(l){return c[l]}return u}});var rpe=g((GCt,tpe)=>{f();"use strict";var{pipe:H$e}=vr(),Jde=qo(),{Message:$$e,MESSAGE_TYPE_LOOKUP:G$e}=$o(),W$e=Zde(),Y$e=Er(),Pw=Y$e.logger("libp2p:kad-dht:rpc"),epe=class{constructor(e){this._messageHandler=W$e(e),this._routingTable=e.routingTable}async handleMessage(e,r){let i=this._messageHandler(r.type);try{await this._routingTable.add(e)}catch(n){Pw.error("Failed to update the kbucket store",n)}if(!i){Pw.error(`no handler found for message type: ${r.type}`);return}return i.handle(e,r)}async onIncomingStream({stream:e,connection:r}){let i=r.remotePeer;try{await this._routingTable.add(i)}catch(s){Pw.error(s)}let n=this;await H$e(e.source,Jde.decode(),s=>async function*(){for await(let o of s){let a=$$e.deserialize(o.slice());Pw("incoming %s from %p",G$e[a.type],i);let c=await n.handleMessage(i,a);c&&(yield c.serialize())}}(),Jde.encode(),e.sink)}};tpe.exports.RPC=epe});var spe=g((WCt,npe)=>{f();"use strict";var X$e=D5(),{EventEmitter:Q$e}=Wt(),Z$e=Er(),ipe=class extends Q$e{constructor({registrar:e,protocol:r,lan:i}){super();this._log=Z$e.logger(`libp2p:kad-dht:topology-listener:${i?"lan":"wan"}:network`),this._running=!1,this._registrar=e,this._protocol=r}start(){if(this._running)return;this._running=!0;let e=new X$e({multicodecs:[this._protocol],handlers:{onConnect:r=>{this._log("observed peer that with protocol %s %p",this._protocol,r),this.emit("peer",r)},onDisconnect:()=>{}}});this._registrarId=this._registrar.register(e)}stop(){this._running=!1,this._registrarId&&this._registrar.unregister(this._registrarId)}};npe.exports.TopologyListener=ipe});var fpe=g((YCt,lpe)=>{f();"use strict";var{EventEmitter:J$e}=Wt(),eGe=If(),tGe=Yy(),{QUERY_SELF_INTERVAL:ope,QUERY_SELF_TIMEOUT:ape,K:cpe}=Ja(),rGe=Er(),{TimeoutController:iGe}=ca(),{anySignal:nGe}=Eo(),upe=class extends J$e{constructor({peerId:e,peerRouting:r,lan:i,count:n=cpe,interval:s=ope,queryTimeout:o=ape}){super();this._log=rGe.logger(`libp2p:kad-dht:${i?"lan":"wan"}:query-self`),this._running=!1,this._peerId=e,this._peerRouting=r,this._count=n||cpe,this._interval=s||ope,this._queryTimeout=o||ape}start(){this._running||(this._running=!0,this._querySelf())}stop(){this._running=!1,this._timeoutId&&clearTimeout(this._timeoutId),this._controller&&this._controller.abort()}async _querySelf(){let e=new iGe(this._queryTimeout);try{this._controller=new AbortController;let r=await tGe(await eGe(this._peerRouting.getClosestPeers(this._peerId.toBytes(),{signal:nGe([this._controller.signal,e.signal])}),this._count));this._log("query ran successfully - found %d peers",r)}catch(r){this._log("query error",r)}finally{this._timeoutId=setTimeout(this._querySelf.bind(this),this._interval),e.clear()}}};lpe.exports.QuerySelf=upe});var wpe=g((XCt,bpe)=>{f();"use strict";var{EventEmitter:sGe}=Wt(),hpe=Ic(),dpe=Aa(),{MemoryDatastore:oGe}=(XE(),xF),{RoutingTable:aGe}=che(),{RoutingTableRefresh:cGe}=hhe(),ppe=Er(),{K:uGe,QUERY_SELF_INTERVAL:lGe,RECORD_KEY_PREFIX:fGe}=Ja(),{Network:hGe}=The(),{ContentFetching:dGe}=Dhe(),{ContentRouting:pGe}=Mhe(),{PeerRouting:yGe}=nde(),{Providers:gGe}=fde(),{QueryManager:mGe}=Ade(),{RPC:bGe}=rpe(),{TopologyListener:wGe}=spe(),{QuerySelf:_Ge}=fpe(),{removePrivateAddresses:vGe,removePublicAddresses:EGe}=Er(),{KeyTransformDatastore:SGe}=(i6(),DF),{Key:ype}=(Ar(),qd),gpe=class{constructor(e){this._prefix=e,this._prefix.startsWith("/")&&(this._prefix=this._prefix.substring(1))}convert(e){return new ype(`/${this._prefix}${e}`)}invert(e){let r=e.namespaces();return r[0]===this._prefix&&r.shift(),ype.withNamespaces(r)}},mpe=class extends sGe{constructor({libp2p:e,kBucketSize:r=uGe,clientMode:i=!0,validators:n={},selectors:s={},querySelfInterval:o=lGe,lan:a=!0,protocol:c="/ipfs/lan/kad/1.0.0",bootstrapPeers:u=[]}){super();this._running=!1,this._log=ppe.logger(`libp2p:kad-dht:${a?"lan":"wan"}`),this._libp2p=e,this._protocol=c,this._kBucketSize=r,this._clientMode=i,this._bootstrapPeers=u,this._routingTable=new aGe({peerId:e.peerId,dialer:e,kBucketSize:r,metrics:e.metrics,lan:a});let l=e.datastore||new oGe,h=new SGe(l,new gpe(fGe));this._providers=new gGe({providers:l}),this._lan=a,this._validators={pk:dpe.validator.validators.pk,...n},this._selectors={pk:dpe.selection.selectors.pk,...s},this._network=new hGe({dialer:e,protocol:this._protocol,lan:a}),this._queryManager=new mGe({peerId:e.peerId,disjointPaths:Math.ceil(r/2),metrics:e.metrics,lan:a}),this._peerRouting=new yGe({peerId:e.peerId,routingTable:this._routingTable,peerStore:e.peerStore,network:this._network,validators:this._validators,queryManager:this._queryManager,lan:a}),this._contentFetching=new dGe({peerId:e.peerId,records:h,validators:this._validators,selectors:this._selectors,peerRouting:this._peerRouting,queryManager:this._queryManager,routingTable:this._routingTable,network:this._network,lan:a}),this._contentRouting=new pGe({peerId:e.peerId,network:this._network,peerRouting:this._peerRouting,queryManager:this._queryManager,routingTable:this._routingTable,providers:this._providers,peerStore:e.peerStore,lan:a}),this._routingTableRefresh=new cGe({peerRouting:this._peerRouting,routingTable:this._routingTable,lan:a}),this._rpc=new bGe({routingTable:this._routingTable,peerId:e.peerId,providers:this._providers,peerStore:e.peerStore,addressable:e,peerRouting:this._peerRouting,records:h,validators:this._validators,lan:a}),this._topologyListener=new wGe({registrar:e.registrar,protocol:this._protocol,lan:a}),this._querySelf=new _Ge({peerId:e.peerId,peerRouting:this._peerRouting,interval:o,lan:a}),this._network.on("peer",d=>{this.onPeerConnect(d).catch(p=>{this._log.error(`could not add ${d.id} to routing table`,p)}),this.emit("peer",d)}),this._topologyListener.on("peer",async d=>{let p={id:d,multiaddrs:(this._libp2p.peerStore.addressBook.get(d)||[]).map(y=>y.multiaddr)};this.onPeerConnect(p).catch(y=>{this._log.error(`could not add ${p.id} to routing table`,y)})})}async onPeerConnect(e){if(this._log("peer %p connected",e.id),this._lan?e=EGe(e):e=vGe(e),!e.multiaddrs.length){this._log("ignoring %p as they do not have any %s addresses in %s",e.id,this._lan?"private":"public",e.multiaddrs.map(r=>r.toString()));return}try{await this._routingTable.add(e.id)}catch(r){this._log.error("could not add %p to routing table",e.id,r)}}isStarted(){return this._running}isServer(){return!this._clientMode}enableServerMode(){this._log("enabling server mode"),this._clientMode=!1,this._libp2p.handle(this._protocol,this._rpc.onIncomingStream.bind(this._rpc))}enableClientMode(){this._log("enabling client mode"),this._clientMode=!0,this._libp2p.unhandle(this._protocol)}async start(){this._running=!0,this._clientMode?this.enableClientMode():this.enableServerMode(),await Promise.all([this._providers.start(),this._queryManager.start(),this._network.start(),this._routingTable.start(),this._topologyListener.start(),this._querySelf.start()]),await Promise.all(this._bootstrapPeers.map(e=>this._routingTable.add(e.id))),await this._routingTableRefresh.start(),await this.refreshRoutingTable()}async stop(){this._running=!1,await Promise.all([this._providers.stop(),this._queryManager.stop(),this._network.stop(),this._routingTable.stop(),this._routingTableRefresh.stop(),this._topologyListener.stop(),this._querySelf.stop()])}async*put(e,r,i={}){yield*this._contentFetching.put(e,r,i)}async*get(e,r={}){yield*this._contentFetching.get(e,r)}async*provide(e,r={}){yield*this._contentRouting.provide(e,this._libp2p.multiaddrs,r)}async*findProviders(e,r={maxNumProviders:5}){yield*this._contentRouting.findProviders(e,r)}async*findPeer(e,r={}){yield*this._peerRouting.findPeer(e,r)}async*getClosestPeers(e,r={}){yield*this._peerRouting.getClosestPeers(e,r)}async getPublicKey(e,r={}){this._log("getPublicKey %p",e);let i;for await(let n of this._peerRouting.getPublicKeyFromNode(e,r))n.name==="VALUE"&&(i=hpe.keys.unmarshalPublicKey(n.value));if(!i){let n=ppe.keyForPublicKey(e);for await(let s of this.get(n,r))s.name==="VALUE"&&(i=hpe.keys.unmarshalPublicKey(s.value))}return i}async refreshRoutingTable(){await this._routingTableRefresh.refreshTable(!0)}};bpe.exports={KadDHT:mpe}});var Epe=g((QCt,vpe)=>{f();"use strict";var{EventEmitter:AGe}=Wt(),xGe=Je(),RGe=Er(),Kl=ec(),a1=Yu(),{queryErrorEvent:IGe}=Bh(),Cw=RGe.logger("libp2p:kad-dht"),_pe=class extends AGe{constructor(e,r,i){super();this._wan=e,this._lan=r,this._libp2p=i,this._wan.on("peer",n=>{this.emit("peer",n)}),this._lan.on("peer",n=>{this.emit("peer",n)})}isStarted(){return this._wan.isStarted()&&this._lan.isStarted()}enableServerMode(){this._wan.enableServerMode()}enableClientMode(){this._wan.enableClientMode()}async start(){await Promise.all([this._lan.start(),this._wan.start()])}async stop(){await Promise.all([this._lan.stop(),this._wan.stop()])}async*put(e,r,i={}){let n=0,s=0;for await(let a of a1(this._lan.put(e,r,i),this._wan.put(e,r,i)))yield a,a.name==="SENDING_QUERY"&&a.messageName==="PUT_VALUE"&&n++,a.name==="PEER_RESPONSE"&&a.messageName==="PUT_VALUE"&&s++;let o=i.minPeers==null?n||1:i.minPeers;if(s<o){let a=Kl(new Error(`Failed to put value to enough peers: ${s}/${o}`),"ERR_NOT_ENOUGH_PUT_PEERS");throw Cw.error(a),a}}async*get(e,r={}){let i=!1,n=!1;for await(let s of a1(this._lan.get(e,r),this._wan.get(e,r)))yield s,s.name==="DIALING_PEER"&&(i=!0),s.name==="VALUE"&&(i=!0,s.value!=null&&(n=!0)),s.name==="SENDING_QUERY"&&(i=!0);if(!i)throw Kl(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");n||(yield IGe({from:this._libp2p.peerId,error:Kl(new Error("Not found"),"ERR_NOT_FOUND")}))}async*provide(e,r={}){let i=0,n=0,s=[],o=[this._lan];this._wan.isServer()&&o.push(this._wan);for await(let a of a1(...o.map(c=>c.provide(e,r))))yield a,a.name==="SENDING_QUERY"&&i++,a.name==="QUERY_ERROR"&&s.push(a.error),a.name==="PEER_RESPONSE"&&a.messageName==="ADD_PROVIDER"&&(Cw("sent provider record for %s to %p",e,a.from.id),n++);if(n===0)throw s.length?Kl(new Error(`Failed to provide to ${s.length} of ${i} peers`),"ERR_PROVIDES_FAILED",{errors:s}):Kl(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}async*findProviders(e,r={maxNumProviders:5}){yield*a1(this._lan.findProviders(e,r),this._wan.findProviders(e,r))}async*findPeer(e,r={}){let i=!1;for await(let n of a1(this._lan.findPeer(e,r),this._wan.findPeer(e,r)))yield n,(n.name==="SENDING_QUERY"||n.name==="FINAL_PEER")&&(i=!0);if(!i)throw Kl(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async*getClosestPeers(e,r={}){yield*a1(this._lan.getClosestPeers(e,r),this._wan.getClosestPeers(e,r))}async getPublicKey(e,r={}){Cw("getPublicKey %p",e);let i=this._libp2p.peerStore.get(e);if(i&&i.id.pubKey)return Cw("getPublicKey: found local copy"),i.id.pubKey;let n=await Promise.all([this._lan.getPublicKey(e,r),this._wan.getPublicKey(e,r)]);if(n[0]&&n[1]&&!n[0].equals(n[1]))throw Kl(new Error("Inconsistent public key loaded from wan and lan DHTs"),"ERR_FAILED_TO_LOAD_KEY");let s=n[0]||n[1];if(!s)throw Kl(new Error("Failed to load public key"),"ERR_FAILED_TO_LOAD_KEY");let o=new xGe(e.id,void 0,s),a=(i&&i.addresses||[]).map(c=>c.multiaddr);return this._libp2p.peerStore.addressBook.add(o,a),this._libp2p.peerStore.keyBook.set(o,s),s}async refreshRoutingTable(){await Promise.all([this._lan.refreshRoutingTable(),this._wan.refreshRoutingTable()])}};vpe.exports={DualKadDHT:_pe}});var xpe=g((ZCt,Ape)=>{f();"use strict";var{KadDHT:Spe}=wpe(),{DualKadDHT:TGe}=Epe();Ape.exports={create:t=>new TGe(new Spe({...t,protocol:"/ipfs/kad/1.0.0",lan:!1}),new Spe({...t,protocol:"/ipfs/lan/kad/1.0.0",clientMode:!1,lan:!0}),t.libp2p)}});var jpe=g((ZT,Mpe)=>{f();"use strict";var PGe=Je(),{Multiaddr:CGe}=ct(),OGe=af(),{EventEmitter:kGe}=Wt(),Bpe=ce(),Ow=Object.assign(Bpe("libp2p:bootstrap"),{error:Bpe("libp2p:bootstrap:error")}),Lpe=class extends kGe{constructor(e={list:[]}){if(!e.list||!e.list.length)throw new Error("Bootstrap requires a list of peer addresses");super();this._list=e.list,this._interval=e.interval||1e4,this._timer=null}start(){this._timer||(this._timer=setInterval(()=>this._discoverBootstrapPeers(),this._interval),Ow("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){!this._timer||this._list.forEach(e=>{if(!OGe.P2P.matches(e))return Ow.error("Invalid multiaddr");let r=new CGe(e),i=r.getPeerId();if(!i){Ow.error("Invalid bootstrap multiaddr without peer id");return}let n=PGe.createFromB58String(i);try{this.emit("peer",{id:n,multiaddrs:[r]})}catch(s){Ow.error("Invalid bootstrap peer id",s)}})}stop(){this._timer&&clearInterval(this._timer),this._timer=null}};ZT=Mpe.exports=Lpe;ZT.tag="bootstrap"});var JT=g((iOt,qpe)=>{f();"use strict";var DGe=ur(),NGe=To(),BGe=mn(),LGe=If();function MGe(t,e){return BGe(t,r=>(e.addressBook.add(r.id,r.multiaddrs),r))}function jGe(t){let e=new Set;return NGe(t,r=>e.has(r.id.toString())?!1:(e.add(r.id.toString()),!0))}async function*qGe(t,e=1){let r=0;for await(let i of t)r++,yield i;if(r<e)throw DGe(new Error("not found"),"NOT_FOUND")}function UGe(t,e){return e?LGe(t,e):t}qpe.exports={storeAddresses:MGe,uniquePeers:jGe,requirePeers:qGe,maybeLimitSource:UGe}});var eP=g((nOt,Upe)=>{f();"use strict";var c1=new Map,FGe=()=>`${Date.now()}:${Math.floor(Math.random()*1e6)}`;async function KGe(t,e,r){for(;c1.get(r);){try{await t()}catch(i){setTimeout(()=>{throw i},1);break}if(!c1.get(r))break;await new Promise(i=>{let n=setTimeout(i,e);c1.set(r,n)})}}function VGe(t,e,r){r=r||e;let i=FGe(),n=setTimeout(()=>{KGe(t,e,i)},r);return c1.set(i,n),i}function zGe(t){let e=c1.get(t);e&&(clearTimeout(e),c1.delete(t))}Upe.exports={setDelayedInterval:VGe,clearDelayedInterval:zGe}});var Vpe=g((sOt,Kpe)=>{f();"use strict";var HGe=ur(),{messages:$Ge,codes:GGe}=lr(),Fpe=class{constructor(e){this._dht=e}async findPeer(e,r={}){for await(let i of this._dht.findPeer(e,r))if(i.name==="PEER_RESPONSE"){let n=i.closer.find(s=>s.id.equals(e));if(n)return n}throw HGe(new Error($Ge.NOT_FOUND),GGe.ERR_NOT_FOUND)}async*getClosestPeers(e,r={}){for await(let i of this._dht.getClosestPeers(e,r))i.name==="PEER_RESPONSE"&&(yield*i.closer)}};Kpe.exports={DHTPeerRouting:Fpe}});var Qpe=g((oOt,Xpe)=>{f();"use strict";var zpe=ce(),Hpe=Object.assign(zpe("libp2p:peer-routing"),{error:zpe("libp2p:peer-routing:err")}),kw=ur(),bm=lr(),{storeAddresses:$pe,uniquePeers:WGe,requirePeers:YGe}=JT(),{TimeoutController:XGe}=ca(),Gpe=Yu(),{pipe:Wpe}=vr(),QGe=Vf(),ZGe=Ln(),JGe=To(),{setDelayedInterval:eWe,clearDelayedInterval:tWe}=eP(),{DHTPeerRouting:rWe}=Vpe(),Ype=class{constructor(e){this._peerId=e.peerId,this._peerStore=e.peerStore,this._routers=e._modules.peerRouting||[],e._dht&&e._config.dht.enabled&&this._routers.push(new rWe(e._dht)),this._refreshManagerOptions=e._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){!this._routers.length||this._timeoutId||!this._refreshManagerOptions.enabled||(this._timeoutId=eWe(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await ZGe(this.getClosestPeers(this._peerId.id,{timeout:this._refreshManagerOptions.timeout||1e4}))}catch(e){Hpe.error(e)}}stop(){tWe(this._timeoutId)}async findPeer(e,r){if(!this._routers.length)throw kw(new Error("No peer routers available"),bm.codes.ERR_NO_ROUTERS_AVAILABLE);if(e.toB58String()===this._peerId.toB58String())throw kw(new Error("Should not try to find self"),bm.codes.ERR_FIND_SELF);let i=await Wpe(Gpe(...this._routers.map(n=>async function*(){try{yield await n.findPeer(e,r)}catch(s){Hpe.error(s)}}())),n=>JGe(n,Boolean),n=>$pe(n,this._peerStore),n=>QGe(n));if(i)return i;throw kw(new Error(bm.messages.NOT_FOUND),bm.codes.ERR_NOT_FOUND)}async*getClosestPeers(e,r={timeout:3e4}){if(!this._routers.length)throw kw(new Error("No peer routers available"),bm.codes.ERR_NO_ROUTERS_AVAILABLE);r.timeout&&(r.signal=new XGe(r.timeout).signal),yield*Wpe(Gpe(...this._routers.map(i=>i.getClosestPeers(e,r))),i=>$pe(i,this._peerStore),i=>WGe(i),i=>YGe(i))}};Xpe.exports=Ype});var e0e=g((aOt,Jpe)=>{f();"use strict";var iWe=Ln(),Zpe=class{constructor(e){this._dht=e}async provide(e){await iWe(this._dht.provide(e))}async*findProviders(e,r){for await(let i of this._dht.findProviders(e,r))i.name==="PROVIDER"&&(yield*i.providers)}};Jpe.exports={DHTContentRouting:Zpe}});var i0e=g((cOt,r0e)=>{f();"use strict";var Lh=ur(),{messages:wm,codes:Mh}=lr(),{storeAddresses:nWe,uniquePeers:sWe,requirePeers:oWe,maybeLimitSource:aWe}=JT(),cWe=Ln(),uWe=Yu(),{pipe:lWe}=vr(),{DHTContentRouting:fWe}=e0e(),t0e=class{constructor(e){this.libp2p=e,this.routers=e._modules.contentRouting||[],this.dht=e._dht,this.dht&&e._config.dht.enabled&&this.routers.push(new fWe(this.dht))}async*findProviders(e,r={}){if(!this.routers.length)throw Lh(new Error("No content this.routers available"),Mh.ERR_NO_ROUTERS_AVAILABLE);yield*lWe(uWe(...this.routers.map(i=>i.findProviders(e,r))),i=>nWe(i,this.libp2p.peerStore),i=>sWe(i),i=>aWe(i,r.maxNumProviders),i=>oWe(i))}async provide(e){if(!this.routers.length)throw Lh(new Error("No content routers available"),Mh.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map(r=>r.provide(e)))}async put(e,r,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Lh(new Error(wm.NOT_STARTED_YET),Mh.DHT_NOT_STARTED);await cWe(this.dht.put(e,r,i))}async get(e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Lh(new Error(wm.NOT_STARTED_YET),Mh.DHT_NOT_STARTED);for await(let i of this.dht.get(e,r))if(i.name==="VALUE")return{from:i.peerId,val:i.value};throw Lh(new Error(wm.NOT_FOUND),Mh.ERR_NOT_FOUND)}async*getMany(e,r,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Lh(new Error(wm.NOT_STARTED_YET),Mh.DHT_NOT_STARTED);if(!r)return;let n=0;for await(let s of this.dht.get(e,i))if(s.name==="VALUE"&&(yield{from:s.peerId,val:s.value},n++,n===r))break;if(n===0)throw Lh(new Error(wm.NOT_FOUND),Mh.ERR_NOT_FOUND)}};r0e.exports=t0e});var tP=g((uOt,a0e)=>{f();"use strict";var hWe=Je(),{Multiaddr:n0e}=ct(),s0e=ur(),{codes:o0e}=lr();function dWe(t){typeof t=="string"&&(t=new n0e(t));let e;if(n0e.isMultiaddr(t)){e=t;let r=t.getPeerId();if(!r)throw s0e(new Error(`${t} does not have a valid peer type`),o0e.ERR_INVALID_MULTIADDR);try{t=hWe.createFromB58String(r)}catch(i){throw s0e(new Error(`${t} is not a valid peer type`),o0e.ERR_INVALID_MULTIADDR)}}return{id:t,multiaddrs:e?[e]:void 0}}a0e.exports=dWe});var l0e=g((lOt,u0e)=>{f();"use strict";u0e.exports=c0e;var pWe=N_(),Vl=c0e.prototype,yWe=new Date%1e9;function gWe(){return(Math.random()*1e9>>>0)+yWe++}function c0e(t){t=t||{},this.id=t.id||gWe(),this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,i=this.items.length;i--;)e=this.items[i],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}Vl.has=function(t){return t in this._lookup};Vl.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value};Vl.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null};Vl.set=function(t,e,r){var i=this._lookup[t],n=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,i?(clearTimeout(i.timeout),this.items.splice(this.items.indexOf(i),1,n)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(n),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(n.meta=r.meta),r.refresh&&(n.refresh=r.ttl)),this};Vl.delete=function(t){var e=this._lookup[t];return e?(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this):!1};Vl.expire=function(t,e){var r=e||0,i=this._lookup[t];if(!i)return this;if(typeof r=="string"&&(r=pWe(e)),typeof r!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this};Vl.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this};Vl.toJSON=function(){for(var t=new Array(this.items.length),e,r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}});var h0e=g((fOt,f0e)=>{f();"use strict";var{default:mWe,Headers:bWe}=y7();function wWe({serverResolver:t,hostname:e,recordType:r}){return`${t}?name=${e}&type=${r}`}function _We(t){return mWe(t,{headers:new bWe({accept:"application/dns-json"})})}function vWe(t,e){return`${e}_${t}`}f0e.exports={buildResource:wWe,fetch:_We,getCacheKey:vWe}});var y0e=g((hOt,p0e)=>{f();"use strict";var d0e=ce(),Dw=d0e("dns-over-http-resolver");Dw.error=d0e("dns-over-http-resolver:error");var EWe=l0e(),so=h0e(),Nw=class{constructor({maxCache:e=100}={}){this._cache=new EWe({max:e}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){let e=[].concat(this._servers);for(let r=e.length-1;r>0;r--){let i=Math.floor(Math.random()*r),n=e[r];e[r]=e[i],e[i]=n}return e}setServers(e){this._servers=e}resolve(e,r="A"){switch(r){case"A":return this.resolve4(e);case"AAAA":return this.resolve6(e);case"TXT":return this.resolveTxt(e);default:throw new Error(`${r} is not supported`)}}async resolve4(e){let r="A",i=this._cache.get(so.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await so.fetch(so.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>u.data),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(so.getCacheKey(e,r),a,{ttl:c}),a}catch(s){Dw.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolve6(e){let r="AAAA",i=this._cache.get(so.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await so.fetch(so.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>u.data),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(so.getCacheKey(e,r),a,{ttl:c}),a}catch(s){Dw.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolveTxt(e){let r="TXT",i=this._cache.get(so.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await so.fetch(so.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>[u.data.replace(/['"]+/g,"")]),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(so.getCacheKey(e,r),a,{ttl:c}),a}catch(s){Dw.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}};Nw.Resolver=Nw;p0e.exports=Nw});var m0e=g((dOt,g0e)=>{f();"use strict";var SWe=y0e();g0e.exports=SWe});var w0e=g((pOt,b0e)=>{f();"use strict";var AWe=f2(),{code:xWe}=AWe("dnsaddr");async function RWe(t){let e=m0e(),r=new e,i=t.getPeerId(),[,n]=t.stringTuples().find(([a])=>a===xWe)||[],o=(await r.resolveTxt(`_dnsaddr.${n}`)).flat().map(a=>a.split("=")[1]);return i&&(o=o.filter(a=>a.includes(i))),o}b0e.exports={dnsaddrResolver:RWe}});var Bw=g((yOt,_0e)=>{f();"use strict";_0e.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3],maxOldPeersRetention:50}}});var rP=g((gOt,IWe)=>{IWe.exports={name:"libp2p",version:"0.35.5",description:"JavaScript implementation of libp2p, a modular peer to peer network stack",leadMaintainer:"Jacob Heun <jacobheun@gmail.com>",main:"src/index.js",types:"dist/src/index.d.ts",typesVersions:{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},files:["dist","src"],scripts:{lint:"aegir lint",build:"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:address-book":"pbjs -t static-module -w commonjs -r libp2p-address-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/address-book.js ./src/peer-store/persistent/pb/address-book.proto","build:proto:proto-book":"pbjs -t static-module -w commonjs -r libp2p-proto-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/proto-book.js ./src/peer-store/persistent/pb/proto-book.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:address-book":"pbts -o src/peer-store/persistent/pb/address-book.d.ts src/peer-store/persistent/pb/address-book.js","build:proto-types:proto-book":"pbts -o src/peer-store/persistent/pb/proto-book.d.ts src/peer-store/persistent/pb/proto-book.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js",test:"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":'aegir test -t node -f "./test/**/*.{node,spec}.js"',"test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all","test:interop":"LIBP2P_JS=$PWD npx aegir test -t node -f ./node_modules/libp2p-interop/test/*",prepare:"aegir build --no-bundle",release:"aegir release -t node -t browser","release-minor":"aegir release --type minor -t node -t browser","release-major":"aegir release --type major -t node -t browser",coverage:"nyc --reporter=text --reporter=lcov npm run test:node"},repository:{type:"git",url:"https://github.com/libp2p/js-libp2p.git"},keywords:["libp2p","network","p2p","peer","peer-to-peer","IPFS"],bugs:{url:"https://github.com/libp2p/js-libp2p/issues"},homepage:"https://libp2p.io",license:"MIT",engines:{node:">=15.0.0"},browser:{"nat-api":!1},eslintConfig:{extends:"ipfs",ignorePatterns:["!.aegir.js","test/ts-use","*.d.ts"]},dependencies:{"@vascosantos/moving-average":"^1.1.0","abort-controller":"^3.0.0","abortable-iterator":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^2.1.1","bignumber.js":"^9.0.1","class-is":"^1.1.0",debug:"^4.3.1","err-code":"^3.0.0","es6-promisify":"^7.0.0",events:"^3.3.0",hashlru:"^2.3.0","interface-datastore":"^6.0.2","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-take":"^1.0.0","libp2p-crypto":"^0.21.0","libp2p-interfaces":"^2.0.1","libp2p-utils":"^0.4.0",mafmt:"^10.0.0","merge-options":"^3.0.4",multiaddr:"^10.0.0",multiformats:"^9.0.0","multistream-select":"^2.0.0","mutable-proxy":"^1.0.0","nat-api":"^0.3.1","node-forge":"^0.10.0","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.16.0","private-ip":"^2.1.0",protobufjs:"^6.10.2",retimer:"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^2.0.0",uint8arrays:"^3.0.0",varint:"^6.0.0",wherearewe:"^1.0.0",xsalsa20:"^1.1.0"},devDependencies:{"@chainsafe/libp2p-noise":"^5.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^0.10.1","@types/varint":"^6.0.0",aegir:"^36.0.0",buffer:"^6.0.3","datastore-core":"^6.0.7",delay:"^5.0.0","into-stream":"^6.0.0","ipfs-http-client":"^54.0.2","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0",libp2p:".","libp2p-bootstrap":"^0.14.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.11.1","libp2p-floodsub":"^0.27.0","libp2p-gossipsub":"^0.12.1","libp2p-interfaces-compliance-tests":"^2.0.1","libp2p-interop":"^0.5.0","libp2p-kad-dht":"^0.27.1","libp2p-mdns":"^0.18.0","libp2p-mplex":"^0.10.1","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.25.0","libp2p-websockets":"^0.16.0",nock:"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0",rimraf:"^3.0.2",sinon:"^12.0.1",util:"^0.12.3"},contributors:["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej Kr\xFCger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","dirkmc <dirkmdev@gmail.com>","Chris Dostert <chrisdostert@users.noreply.github.com>","Volker Mische <volker.mische@gmail.com>","Robert Kiel <robert.kiel@hoprnet.org>","Richard Littauer <richard.littauer@gmail.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","a1300 <matthias-knopp@gmx.net>","Ryan Bell <ryan@piing.net>","\u1D20\u026A\u1D04\u1D1B\u1D0F\u0280 \u0299\u1D0A\u1D07\u029F\u1D0B\u029C\u1D0F\u029F\u1D0D <victorbjelkholm@gmail.com>","Andrew Nesbitt <andrewnez@gmail.com>","Franck Royer <franck@royer.one>","Thomas Eizinger <thomas@eizinger.io>","Giovanni T. Parra <fiatjaf@gmail.com>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Alan Smithee <ggnore.alan.smithee@gmail.com>","Elven <mon.samuel@qq.com>","Samlior <samlior@foxmail.com>","Didrik Nordstr\xF6m <didrik.nordstrom@gmail.com>","Soeren <nikorpoulsen@gmail.com>","S\xF6nke Hahn <soenkehahn@gmail.com>","TJKoury <TJKoury@gmail.com>","TheStarBoys <41286328+TheStarBoys@users.noreply.github.com>","Tiago Alves <alvesjtiago@gmail.com>","XiaoZhang <zxinmyth@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","ebinks <elizabethjbinks@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","isan_rivkin <isanrivkin@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","mcclure <andi.m.mcclure@gmail.com>","patrickwoodhead <91056047+patrickwoodhead@users.noreply.github.com>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","swedneck <40505480+swedneck@users.noreply.github.com>","greenSnot <greenSnot@users.noreply.github.com>","Aleksei <vozhdb@gmail.com>","Bernd Strehl <bernd.strehl@gmail.com>","Chris Bratlien <chrisbratlien@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Ethan Lam <elmemphis2000@gmail.com>","Fei Liu <liu.feiwood@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","Francis Gulotta <wizard@roborooter.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","Jo\xE3o Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Leask Wong <i@leaskh.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Marston Connell <34043723+TheMarstonConnell@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Philipp Muens <raute1337@gmx.de>","RasmusErik Voel Jensen <github@solsort.com>","Smite Chow <xiaopengyou@live.com>"]}});var iP=g((mOt,tc)=>{f();"use strict";var TWe=rP().version;tc.exports.PROTOCOL_VERSION="ipfs/0.1.0";tc.exports.AGENT_VERSION=`js-libp2p/${TWe}`;tc.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0";tc.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0";tc.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0";tc.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id";tc.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push";tc.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0";tc.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"});var Lw=g((bOt,E0e)=>{f();"use strict";var v0e=60*1e3;E0e.exports={ADVERTISE_BOOT_DELAY:15*v0e,ADVERTISE_TTL:30*v0e,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}});var A0e=g((wOt,S0e)=>{f();"use strict";var PWe=bw();function CWe(t){let{address:e}=t.nodeAddress();return PWe(e)}S0e.exports=CWe});var nP=g((_Ot,R0e)=>{f();"use strict";var x0e=A0e();function OWe(t,e){let r=x0e(t.multiaddr),i=x0e(e.multiaddr);return r&&!i?1:!r&&i||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function kWe(t){return[...t].sort(OWe)}R0e.exports.publicAddressesFirst=kWe});var T0e=g((vOt,sP)=>{f();"use strict";var I0e=async t=>{try{let e=await t;return{isFulfilled:!0,isRejected:!1,value:e}}catch(e){return{isFulfilled:!1,isRejected:!0,reason:e}}};sP.exports=I0e;sP.exports.default=I0e});var C0e=g((EOt,oP)=>{f();"use strict";var P0e=(t,...e)=>new Promise(r=>{r(t(...e))});oP.exports=P0e;oP.exports.default=P0e});var k0e=g((SOt,aP)=>{f();"use strict";var DWe=C0e(),O0e=t=>{if(!((Number.isInteger(t)||t===1/0)&&t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let e=[],r=0,i=()=>{r--,e.length>0&&e.shift()()},n=(a,c,...u)=>{r++;let l=DWe(a,...u);c(l),l.then(i,i)},s=(a,c,...u)=>{r<t?n(a,c,...u):e.push(n.bind(null,a,c,...u))},o=(a,...c)=>new Promise(u=>s(a,u,...c));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),o};aP.exports=O0e;aP.exports.default=O0e});var N0e=g((AOt,D0e)=>{f();"use strict";var cP=T0e(),NWe=k0e();D0e.exports=async(t,e={})=>{let{concurrency:r=1/0}=e,i=NWe(r);return Promise.all(t.map(n=>n&&typeof n.then=="function"?cP(n):cP(typeof n=="function"?i(()=>n()):Promise.resolve(n))))}});var L0e=g((xOt,B0e)=>{f();"use strict";function BWe(t,e){return t.length===e.length&&e.sort()&&t.sort().every((r,i)=>e[i].equals(r))}B0e.exports=BWe});var q0e=g((ROt,j0e)=>{f();"use strict";var jh=Si(),Mw=jh.Reader,M0e=jh.Writer,Vr=jh.util,oo=jh.roots["libp2p-peer-record"]||(jh.roots["libp2p-peer-record"]={});oo.PeerRecord=function(){function t(e){if(this.addresses=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.peerId=Vr.newBuffer([]),t.prototype.seq=Vr.Long?Vr.Long.fromBits(0,0,!0):0,t.prototype.addresses=Vr.emptyArray,t.encode=function(r,i){if(i||(i=M0e.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&i.uint32(10).bytes(r.peerId),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&i.uint32(16).uint64(r.seq),r.addresses!=null&&r.addresses.length)for(var n=0;n<r.addresses.length;++n)oo.PeerRecord.AddressInfo.encode(r.addresses[n],i.uint32(26).fork()).ldelim();return i},t.decode=function(r,i){r instanceof Mw||(r=Mw.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new oo.PeerRecord;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.peerId=r.bytes();break;case 2:s.seq=r.uint64();break;case 3:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(oo.PeerRecord.AddressInfo.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof oo.PeerRecord)return r;var i=new oo.PeerRecord;if(r.peerId!=null&&(typeof r.peerId=="string"?Vr.base64.decode(r.peerId,i.peerId=Vr.newBuffer(Vr.base64.length(r.peerId)),0):r.peerId.length&&(i.peerId=r.peerId)),r.seq!=null&&(Vr.Long?(i.seq=Vr.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?i.seq=parseInt(r.seq,10):typeof r.seq=="number"?i.seq=r.seq:typeof r.seq=="object"&&(i.seq=new Vr.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".PeerRecord.addresses: array expected");i.addresses=[];for(var n=0;n<r.addresses.length;++n){if(typeof r.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");i.addresses[n]=oo.PeerRecord.AddressInfo.fromObject(r.addresses[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.addresses=[]),i.defaults)if(i.bytes===String?n.peerId="":(n.peerId=[],i.bytes!==Array&&(n.peerId=Vr.newBuffer(n.peerId))),Vr.Long){var s=new Vr.Long(0,0,!0);n.seq=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.seq=i.longs===String?"0":0;if(r.peerId!=null&&r.hasOwnProperty("peerId")&&(n.peerId=i.bytes===String?Vr.base64.encode(r.peerId,0,r.peerId.length):i.bytes===Array?Array.prototype.slice.call(r.peerId):r.peerId),r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?n.seq=i.longs===String?String(r.seq):r.seq:n.seq=i.longs===String?Vr.Long.prototype.toString.call(r.seq):i.longs===Number?new Vr.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.addresses&&r.addresses.length){n.addresses=[];for(var o=0;o<r.addresses.length;++o)n.addresses[o]=oo.PeerRecord.AddressInfo.toObject(r.addresses[o],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,jh.util.toJSONOptions)},t.AddressInfo=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.multiaddr=Vr.newBuffer([]),e.encode=function(i,n){return n||(n=M0e.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&n.uint32(10).bytes(i.multiaddr),n},e.decode=function(i,n){i instanceof Mw||(i=Mw.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new oo.PeerRecord.AddressInfo;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.multiaddr=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof oo.PeerRecord.AddressInfo)return i;var n=new oo.PeerRecord.AddressInfo;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?Vr.base64.decode(i.multiaddr,n.multiaddr=Vr.newBuffer(Vr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(n.multiaddr=i.multiaddr)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=Vr.newBuffer(s.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?Vr.base64.encode(i.multiaddr,0,i.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,jh.util.toJSONOptions)},e}(),t}();j0e.exports=oo});var F0e=g((IOt,U0e)=>{f();"use strict";var LWe="libp2p-peer-record",MWe=Uint8Array.from([3,1]);U0e.exports={ENVELOPE_DOMAIN_PEER_RECORD:LWe,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:MWe}});var jw=g((TOt,z0e)=>{f();"use strict";var{Multiaddr:jWe}=ct(),qWe=Je(),UWe=L0e(),{PeerRecord:K0e}=q0e(),{ENVELOPE_DOMAIN_PEER_RECORD:V0e,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:FWe}=F0e(),qh=class{constructor({peerId:e,multiaddrs:r=[],seqNumber:i=Date.now()}){this.domain=V0e,this.codec=FWe,this.peerId=e,this.multiaddrs=r,this.seqNumber=i,this._marshal=void 0}marshal(){return this._marshal?this._marshal:(this._marshal=K0e.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))}).finish(),this._marshal)}equals(e){return!(!(e instanceof qh)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!UWe(this.multiaddrs,e.multiaddrs))}};qh.createFromProtobuf=t=>{let e=K0e.decode(t),r=qWe.createFromBytes(e.peerId),i=(e.addresses||[]).map(s=>new jWe(s.multiaddr)),n=Number(e.seq);return new qh({peerId:r,multiaddrs:i,seqNumber:n})};qh.DOMAIN=V0e;z0e.exports=qh});var uP=g((POt,H0e)=>{f();"use strict";var KWe=Ng(),VWe=jw();async function zWe(t){let e=new VWe({peerId:t.peerId,multiaddrs:t.multiaddrs}),r=await KWe.seal(e,t.peerId);t.peerStore.addressBook.consumePeerRecord(r)}H0e.exports.updateSelfPeerRecord=zWe});var fP=g((COt,W0e)=>{f();"use strict";var $0e=ce(),Uh=Object.assign($0e("libp2p:transports"),{error:$0e("libp2p:transports:err")}),HWe=N0e(),{codes:u1}=lr(),_m=ur(),{updateSelfPeerRecord:G0e}=uP(),lP=class{constructor({libp2p:e,upgrader:r,faultTolerance:i=qw.FATAL_ALL}){this.libp2p=e,this.upgrader=r,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=i}add(e,r,i={}){if(Uh("adding %s",e),!e)throw _m(new Error(`Transport must have a valid key, was given '${e}'`),u1.ERR_INVALID_KEY);if(this._transports.has(e))throw _m(new Error("There is already a transport with this key"),u1.ERR_DUPLICATE_TRANSPORT);let n=new r({...i,libp2p:this.libp2p,upgrader:this.upgrader});this._transports.set(e,n),this._listenerOptions.set(e,i.listenerOptions||{}),this._listeners.has(e)||this._listeners.set(e,[])}async close(){let e=[];for(let[r,i]of this._listeners)for(Uh("closing listeners for %s",r);i.length;){let n=i.pop();n.removeAllListeners("listening"),n.removeAllListeners("close"),e.push(n.close())}await Promise.all(e),Uh("all listeners closed");for(let r of this._listeners.keys())this._listeners.set(r,[])}async dial(e,r){let i=this.transportForMultiaddr(e);if(!i)throw _m(new Error(`No transport available for address ${String(e)}`),u1.ERR_TRANSPORT_UNAVAILABLE);try{return await i.dial(e,r)}catch(n){throw n.code||(n.code=u1.ERR_TRANSPORT_DIAL_FAILED),n}}getAddrs(){let e=[];for(let r of this._listeners.values())for(let i of r)e=[...e,...i.getAddrs()];return e}getTransports(){return this._transports.values()}transportForMultiaddr(e){for(let r of this._transports.values())if(r.filter([e]).length)return r;return null}async listen(e){if(!e||e.length===0){Uh("no addresses were provided for listening, this node is dial only");return}let r=[];for(let[i,n]of this._transports.entries()){let s=n.filter(e),o=[];for(let u of s){Uh("creating listener for %s on %s",i,u);let l=n.createListener(this._listenerOptions.get(i));this._listeners.get(i).push(l),l.on("listening",()=>G0e(this.libp2p)),l.on("close",()=>G0e(this.libp2p)),o.push(l.listen(u))}if(o.length===0){r.push(i);continue}if(!(await HWe(o)).find(u=>u.isFulfilled===!0)&&this.faultTolerance!==qw.NO_FATAL)throw _m(new Error(`Transport (${i}) could not listen on any available address`),u1.ERR_NO_VALID_ADDRESSES)}if(r.length===this._transports.size){let i=`no valid addresses were provided for transports [${r}]`;if(this.faultTolerance===qw.FATAL_ALL)throw _m(new Error(i),u1.ERR_NO_VALID_ADDRESSES);Uh(`libp2p in dial mode only: ${i}`)}}async remove(e){if(Uh("removing %s",e),this._listeners.has(e))for(let r of this._listeners.get(e))r.removeAllListeners("listening"),r.removeAllListeners("close"),await r.close();this._transports.delete(e),this._listeners.delete(e)}async removeAll(){let e=[];for(let r of this._transports.keys())e.push(this.remove(r));await Promise.all(e)}},qw={FATAL_ALL:0,NO_FATAL:1};lP.FaultTolerance=qw;W0e.exports=lP});var Q0e=g((OOt,X0e)=>{f();"use strict";var $We=du(),{dnsaddrResolver:GWe}=w0e(),hP=Bw(),{AGENT_VERSION:WWe}=iP(),Y0e=Lw(),{publicAddressesFirst:YWe}=nP(),{FaultTolerance:XWe}=fP(),QWe={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{minConnections:25},transportManager:{faultTolerance:XWe.FATAL_ALL},dialer:{maxParallelDials:hP.MAX_PARALLEL_DIALS,maxDialsPerPeer:hP.MAX_PER_PEER_DIALS,dialTimeout:hP.DIAL_TIMEOUT,resolvers:{dnsaddr:GWe},addressSorter:YWe},host:{agentVersion:WWe},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:Y0e.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:Y0e.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};X0e.exports.validate=t=>{let e=$We(QWe,t);if(e.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return e}});var e1e=g((kOt,J0e)=>{f();"use strict";var{EventEmitter:ZWe}=Wt(),{Multiaddr:vm}=ct(),JWe=Je(),Z0e=class extends ZWe{constructor(e,{listen:r=[],announce:i=[]}={}){super();this.peerId=e,this.listen=new Set(r.map(n=>n.toString())),this.announce=new Set(i.map(n=>n.toString())),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map(e=>new vm(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>new vm(e))}getObservedAddrs(){return Array.from(this.observed).map(e=>new vm(e))}addObservedAddr(e){let r=new vm(e),i=r.getPeerId();i&&JWe.createFromB58String(i).equals(this.peerId)&&(r=r.decapsulate(new vm(`/p2p/${this.peerId}`)));let n=r.toString();this.observed.has(n)||(this.observed.add(n),this.emit("change:addresses"))}};J0e.exports=Z0e});var i1e=g((DOt,r1e)=>{f();"use strict";var{EventEmitter:eYe}=Wt(),dP=ce()("latency-monitor:VisibilityChangeEmitter"),t1e=class extends eYe{constructor(){super();if(typeof document=="undefined"){dP('This is not a browser, no "document" found. Stopping.');return}this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()}_initializeVisibilityVarNames(){let e,r;typeof document.hidden!="undefined"?(e="hidden",r="visibilitychange"):typeof document.mozHidden!="undefined"?(e="mozHidden",r="mozvisibilitychange"):typeof document.msHidden!="undefined"?(e="msHidden",r="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(e="webkitHidden",r="webkitvisibilitychange"),this._hidden=e,this._visibilityChange=r}_addVisibilityChangeListener(){typeof document.addEventListener=="undefined"||typeof document[this._hidden]=="undefined"?dP("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(!(this._hidden===void 0||document[this._hidden]===void 0))return!document[this._hidden]}_handleVisibilityChange(){let e=!document[this._hidden];dP(e?"Page Visible":"Page Hidden"),this.emit("visibilityChange",e)}};r1e.exports=t1e});var o1e=g((NOt,s1e)=>{f();"use strict";var{EventEmitter:tYe}=Wt(),rYe=i1e(),nu=ce()("latency-monitor:LatencyMonitor"),n1e=class extends tYe{constructor({latencyCheckIntervalMs:e,dataEmitIntervalMs:r,asyncTestFn:i,latencyRandomPercentage:n}={}){super();let s=this;s.latencyCheckIntervalMs=e||500,s.latencyRandomPercentage=n||10,s._latecyCheckMultiply=2*(s.latencyRandomPercentage/100)*s.latencyCheckIntervalMs,s._latecyCheckSubtract=s._latecyCheckMultiply/2,s.dataEmitIntervalMs=r===null||r===0?void 0:r||5*1e3,nu("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",s.latencyCheckIntervalMs,s.dataEmitIntervalMs),s.dataEmitIntervalMs?nu("Expecting ~%s events per summary",s.latencyCheckIntervalMs/s.dataEmitIntervalMs):nu("Not emitting summaries"),s.asyncTestFn=i}start(){globalThis.process&&globalThis.process.hrtime?(nu("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{let r=this.now(e);return r[0]*1e3+r[1]/1e6}):typeof window!="undefined"&&window.performance&&window.performance.now?(nu("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):(nu("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this._latencyData=this._initLatencyData(),iYe()&&(this._visibilityChangeEmitter=new rYe,this._visibilityChangeEmitter.on("visibilityChange",e=>{e?this._startTimers():(this._emitSummary(),this._stopTimers())})),(!this._visibilityChangeEmitter||this._visibilityChangeEmitter.isVisible())&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval(()=>this._emitSummary(),this.dataEmitIntervalMs),typeof this._emitIntervalID.unref=="function"&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){let e=this.getSummary();e.events>0&&this.emit("data",e)}getSummary(){let e={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),nu("Summary: %O",e),e}_checkLatency(){let e=this,r=Math.random()*e._latecyCheckMultiply-e._latecyCheckSubtract,i={deltaOffset:Math.ceil(e.latencyCheckIntervalMs+r),startTime:e.now()},n=()=>{if(!this._checkLatencyID)return;let s=e.getDeltaMS(i.startTime)-i.deltaOffset;e._checkLatency(),e._latencyData.events++,e._latencyData.minMs=Math.min(e._latencyData.minMs,s),e._latencyData.maxMs=Math.max(e._latencyData.maxMs,s),e._latencyData.totalMs+=s,nu("MS: %s Data: %O",s,e._latencyData)};nu("localData: %O",i),this._checkLatencyID=setTimeout(()=>{e.asyncTestFn?(i.deltaOffset=0,i.startTime=e.now(),e.asyncTestFn(n)):(i.deltaOffset-=1,n())},i.deltaOffset),typeof this._checkLatencyID.unref=="function"&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}};function iYe(){return typeof window!="undefined"}s1e.exports=n1e});var d1e=g((BOt,h1e)=>{f();"use strict";var a1e=ce(),su=Object.assign(a1e("libp2p:connection-manager"),{error:a1e("libp2p:connection-manager:err")}),c1e=ur(),nYe=du(),sYe=o1e(),u1e=_2(),{EventEmitter:oYe}=Wt(),aYe=Je(),{codes:{ERR_INVALID_PARAMETERS:l1e}}=lr(),cYe={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},l1="connection-manager",pP="peer-connections",yP="all-connections",f1e=class extends oYe{constructor(e,r={}){super();if(this._libp2p=e,this._peerId=e.peerId.toB58String(),this._options=nYe.call({ignoreUndefined:!0},cYe,r),this._options.maxConnections<this._options.minConnections)throw c1e(new Error("Connection Manager maxConnections must be greater than minConnections"),l1e);su("options: %j",this._options),this._peerValues=new Map,this.connections=new Map,this._started=!1,this._timer=null,this._checkMetrics=this._checkMetrics.bind(this),this._latencyMonitor=new sYe({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval})}get size(){return Array.from(this.connections.values()).reduce((e,r)=>e+r.length,0)}start(){this._libp2p.metrics&&(this._timer=this._timer||u1e(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,su("started")}async stop(){this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),su("stopped")}async _close(){let e=[];for(let r of this.connections.values())for(let i of r)e.push(i.close());await Promise.all(e),this.connections.clear(),this._libp2p.metrics&&this._libp2p.metrics.updateComponentMetric(l1,pP,0),this._libp2p.metrics&&this._libp2p.metrics.updateComponentMetric(l1,yP,0)}setPeerValue(e,r){if(r<0||r>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(e.toB58String(),r)}_checkMetrics(){if(this._libp2p.metrics){let e=this._libp2p.metrics.global.movingAverages,r=e.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxReceivedData",r);let i=e.dataSent[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxSentData",i);let n=r+i;this._checkMaxLimit("maxData",n),su("metrics update",n),this._timer=u1e(this._checkMetrics,this._options.pollInterval)}}onConnect(e){let r=e.remotePeer,i=r.toB58String(),n=this.connections.get(i);this.emit("peer:connect",e),n?n.push(e):(this.connections.set(i,[e]),this._libp2p.metrics&&this._libp2p.metrics.updateComponentMetric(l1,pP,this.connections.size),this._libp2p.metrics&&this._libp2p.metrics.updateComponentMetric(l1,yP,this.size)),this._libp2p.peerStore.keyBook.set(r,r.pubKey),this._peerValues.has(i)||this._peerValues.set(i,this._options.defaultPeerValue),this._checkMaxLimit("maxConnections",this.size)}onDisconnect(e){let r=e.remotePeer.toB58String(),i=this.connections.get(r);i&&i.length>1?(i=i.filter(n=>n.id!==e.id),this.connections.set(r,i)):i&&(this.connections.delete(r),this._peerValues.delete(e.remotePeer.toB58String()),this.emit("peer:disconnect",e),this._libp2p.metrics&&this._libp2p.metrics.onPeerDisconnected(e.remotePeer)),this._libp2p.metrics&&this._libp2p.metrics.updateComponentMetric(l1,pP,this.connections.size),this._libp2p.metrics&&this._libp2p.metrics.updateComponentMetric(l1,yP,this.size)}get(e){let r=this.getAll(e);return r.length?r[0]:null}getAll(e){if(!aYe.isPeerId(e))throw c1e(new Error("peerId must be an instance of peer-id"),l1e);let r=e.toB58String(),i=this.connections.get(r);return i?i.filter(n=>n.stat.status==="open"):[]}_onLatencyMeasure(e){this._checkMaxLimit("maxEventLoopDelay",e.avgMs)}_checkMaxLimit(e,r){let i=this._options[e];su("checking limit of %s. current value: %d of %d",e,r,i),r>i&&(su("%s: limit exceeded: %s, %d",this._peerId,e,r),this._maybeDisconnectOne())}_maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){let e=Array.from(new Map([...this._peerValues.entries()].sort((i,n)=>i[1]-n[1])));su("%s: sorted peer values: %j",this._peerId,e);let r=e[0];if(r){let i=r[0];su("%s: lowest value peer is %s",this._peerId,i),su("%s: closing a connection to %j",this._peerId,i);for(let n of this.connections.values())if(n[0].remotePeer.toB58String()===i){n[0].close();break}}}}};h1e.exports=f1e});var b1e=g((LOt,m1e)=>{f();"use strict";var p1e=ce(),uYe=du(),y1e=_2(),Fh=Object.assign(p1e("libp2p:connection-manager:auto-dialler"),{error:p1e("libp2p:connection-manager:auto-dialler:err")}),lYe={enabled:!0,minConnections:0,autoDialInterval:1e4},g1e=class{constructor(e,r={}){this._options=uYe.call({ignoreUndefined:!0},lYe,r),this._libp2p=e,this._running=!1,this._autoDialTimeout=null,this._autoDial=this._autoDial.bind(this),Fh("options: %j",this._options)}start(){if(!this._options.enabled){Fh("not enabled");return}this._running=!0,this._autoDial(),Fh("started")}async stop(){if(!this._options.enabled){Fh("not enabled");return}this._running=!1,this._autoDialTimeout&&this._autoDialTimeout.clear(),Fh("stopped")}async _autoDial(){let e=this._options.minConnections;if(this._libp2p.connections.size>=e){this._autoDialTimeout=y1e(this._autoDial,this._options.autoDialInterval);return}let r=Array.from(this._libp2p.peerStore.peers.values()).sort((i,n)=>n.protocols&&n.protocols.length&&(!i.protocols||!i.protocols.length)||n.id.pubKey&&!i.id.pubKey?1:-1);for(let i=0;this._running&&i<r.length&&this._libp2p.connections.size<e;i++)if(!this._libp2p.connectionManager.get(r[i].id)){Fh("connecting to a peerStore stored peer %s",r[i].id.toB58String());try{await this._libp2p.dialer.connectToPeer(r[i].id)}catch(n){Fh.error("could not connect to peerStore stored peer",n)}}!this._running||(this._autoDialTimeout=y1e(this._autoDial,this._options.autoDialInterval))}};m1e.exports=g1e});var f1=g((MOt,_1e)=>{f();"use strict";var Kh=Si(),Uw=Kh.Reader,w1e=Kh.Writer,ao=Kh.util,Di=Kh.roots["libp2p-circuit"]||(Kh.roots["libp2p-circuit"]={});Di.CircuitRelay=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.type=1,t.prototype.srcPeer=null,t.prototype.dstPeer=null,t.prototype.code=100,t.encode=function(r,i){return i||(i=w1e.create()),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&i.uint32(8).int32(r.type),r.srcPeer!=null&&Object.hasOwnProperty.call(r,"srcPeer")&&Di.CircuitRelay.Peer.encode(r.srcPeer,i.uint32(18).fork()).ldelim(),r.dstPeer!=null&&Object.hasOwnProperty.call(r,"dstPeer")&&Di.CircuitRelay.Peer.encode(r.dstPeer,i.uint32(26).fork()).ldelim(),r.code!=null&&Object.hasOwnProperty.call(r,"code")&&i.uint32(32).int32(r.code),i},t.decode=function(r,i){r instanceof Uw||(r=Uw.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Di.CircuitRelay;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.type=r.int32();break;case 2:s.srcPeer=Di.CircuitRelay.Peer.decode(r,r.uint32());break;case 3:s.dstPeer=Di.CircuitRelay.Peer.decode(r,r.uint32());break;case 4:s.code=r.int32();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Di.CircuitRelay)return r;var i=new Di.CircuitRelay;switch(r.type){case"HOP":case 1:i.type=1;break;case"STOP":case 2:i.type=2;break;case"STATUS":case 3:i.type=3;break;case"CAN_HOP":case 4:i.type=4;break}if(r.srcPeer!=null){if(typeof r.srcPeer!="object")throw TypeError(".CircuitRelay.srcPeer: object expected");i.srcPeer=Di.CircuitRelay.Peer.fromObject(r.srcPeer)}if(r.dstPeer!=null){if(typeof r.dstPeer!="object")throw TypeError(".CircuitRelay.dstPeer: object expected");i.dstPeer=Di.CircuitRelay.Peer.fromObject(r.dstPeer)}switch(r.code){case"SUCCESS":case 100:i.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:i.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:i.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:i.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:i.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:i.code=260;break;case"HOP_CANT_DIAL_DST":case 261:i.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:i.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:i.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:i.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:i.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:i.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:i.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:i.code=351;break;case"STOP_RELAY_REFUSED":case 390:i.code=390;break;case"MALFORMED_MESSAGE":case 400:i.code=400;break}return i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.type=i.enums===String?"HOP":1,n.srcPeer=null,n.dstPeer=null,n.code=i.enums===String?"SUCCESS":100),r.type!=null&&r.hasOwnProperty("type")&&(n.type=i.enums===String?Di.CircuitRelay.Type[r.type]:r.type),r.srcPeer!=null&&r.hasOwnProperty("srcPeer")&&(n.srcPeer=Di.CircuitRelay.Peer.toObject(r.srcPeer,i)),r.dstPeer!=null&&r.hasOwnProperty("dstPeer")&&(n.dstPeer=Di.CircuitRelay.Peer.toObject(r.dstPeer,i)),r.code!=null&&r.hasOwnProperty("code")&&(n.code=i.enums===String?Di.CircuitRelay.Status[r.code]:r.code),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Kh.util.toJSONOptions)},t.Status=function(){var e={},r=Object.create(e);return r[e[100]="SUCCESS"]=100,r[e[220]="HOP_SRC_ADDR_TOO_LONG"]=220,r[e[221]="HOP_DST_ADDR_TOO_LONG"]=221,r[e[250]="HOP_SRC_MULTIADDR_INVALID"]=250,r[e[251]="HOP_DST_MULTIADDR_INVALID"]=251,r[e[260]="HOP_NO_CONN_TO_DST"]=260,r[e[261]="HOP_CANT_DIAL_DST"]=261,r[e[262]="HOP_CANT_OPEN_DST_STREAM"]=262,r[e[270]="HOP_CANT_SPEAK_RELAY"]=270,r[e[280]="HOP_CANT_RELAY_TO_SELF"]=280,r[e[320]="STOP_SRC_ADDR_TOO_LONG"]=320,r[e[321]="STOP_DST_ADDR_TOO_LONG"]=321,r[e[350]="STOP_SRC_MULTIADDR_INVALID"]=350,r[e[351]="STOP_DST_MULTIADDR_INVALID"]=351,r[e[390]="STOP_RELAY_REFUSED"]=390,r[e[400]="MALFORMED_MESSAGE"]=400,r}(),t.Type=function(){var e={},r=Object.create(e);return r[e[1]="HOP"]=1,r[e[2]="STOP"]=2,r[e[3]="STATUS"]=3,r[e[4]="CAN_HOP"]=4,r}(),t.Peer=function(){function e(r){if(this.addrs=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.id=ao.newBuffer([]),e.prototype.addrs=ao.emptyArray,e.encode=function(i,n){if(n||(n=w1e.create()),n.uint32(10).bytes(i.id),i.addrs!=null&&i.addrs.length)for(var s=0;s<i.addrs.length;++s)n.uint32(18).bytes(i.addrs[s]);return n},e.decode=function(i,n){i instanceof Uw||(i=Uw.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Di.CircuitRelay.Peer;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.id=i.bytes();break;case 2:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(i.bytes());break;default:i.skipType(a&7);break}}if(!o.hasOwnProperty("id"))throw ao.ProtocolError("missing required 'id'",{instance:o});return o},e.fromObject=function(i){if(i instanceof Di.CircuitRelay.Peer)return i;var n=new Di.CircuitRelay.Peer;if(i.id!=null&&(typeof i.id=="string"?ao.base64.decode(i.id,n.id=ao.newBuffer(ao.base64.length(i.id)),0):i.id.length&&(n.id=i.id)),i.addrs){if(!Array.isArray(i.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");n.addrs=[];for(var s=0;s<i.addrs.length;++s)typeof i.addrs[s]=="string"?ao.base64.decode(i.addrs[s],n.addrs[s]=ao.newBuffer(ao.base64.length(i.addrs[s])),0):i.addrs[s].length&&(n.addrs[s]=i.addrs[s])}return n},e.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.addrs=[]),n.defaults&&(n.bytes===String?s.id="":(s.id=[],n.bytes!==Array&&(s.id=ao.newBuffer(s.id)))),i.id!=null&&i.hasOwnProperty("id")&&(s.id=n.bytes===String?ao.base64.encode(i.id,0,i.id.length):n.bytes===Array?Array.prototype.slice.call(i.id):i.id),i.addrs&&i.addrs.length){s.addrs=[];for(var o=0;o<i.addrs.length;++o)s.addrs[o]=n.bytes===String?ao.base64.encode(i.addrs[o],0,i.addrs[o].length):n.bytes===Array?Array.prototype.slice.call(i.addrs[o]):i.addrs[o]}return s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Kh.util.toJSONOptions)},e}(),t}();_1e.exports=Di});var S1e=g((jOt,E1e)=>{f();"use strict";var{source:v1e}=Fa(),fYe=ce(),hYe=fYe("libp2p:stream:converter");function dYe({stream:t,remoteAddr:e,localAddr:r},i={}){let{sink:n,source:s}=t,o={async sink(c){i.signal&&(c=v1e(c,i.signal));try{await n(c)}catch(u){u.type!=="aborted"&&hYe(u)}a()},source:i.signal?v1e(s,i.signal):s,conn:t,localAddr:r,remoteAddr:e,timeline:{open:Date.now(),close:void 0},close(){return n(new Uint8Array(0)),a()}};function a(){return o.timeline.close||(o.timeline.close=Date.now()),Promise.resolve()}return o}E1e.exports=dYe});var Em=g((qOt,A1e)=>{f();"use strict";A1e.exports={relay:"/libp2p/circuit/relay/0.1.0"}});var R1e=g((UOt,x1e)=>{f();"use strict";var{EventEmitter:pYe}=Wt(),{Multiaddr:yYe}=ct();x1e.exports=t=>{let e=new Map;async function r(s){let o=String(s).split("/p2p-circuit").find(u=>u!==""),a=await t.dial(new yYe(o)),c=a.remoteAddr.encapsulate("/p2p-circuit");e.set(a.remotePeer.toB58String(),c),n.emit("listening")}function i(){let s=[];for(let o of e.values())s.push(o);return s}let n=Object.assign(new pYe,{close:()=>Promise.resolve(),listen:r,getAddrs:i});return t.connectionManager.on("peer:disconnect",s=>{e.delete(s.remotePeer.toB58String())&&n.emit("close")}),n}});var gP=g((FOt,P1e)=>{f();"use strict";var{Multiaddr:I1e}=ct(),{CircuitRelay:Vh}=f1();function T1e(t,e){t.write({type:Vh.Type.STATUS,code:e})}function gYe(t,e){try{t.dstPeer&&t.dstPeer.addrs&&t.dstPeer.addrs.forEach(r=>new I1e(r))}catch(r){throw T1e(e,t.type===Vh.Type.HOP?Vh.Status.HOP_DST_MULTIADDR_INVALID:Vh.Status.STOP_DST_MULTIADDR_INVALID),r}try{t.srcPeer&&t.srcPeer.addrs&&t.srcPeer.addrs.forEach(r=>new I1e(r))}catch(r){throw T1e(e,t.type===Vh.Type.HOP?Vh.Status.HOP_SRC_MULTIADDR_INVALID:Vh.Status.STOP_SRC_MULTIADDR_INVALID),r}}P1e.exports={validateAddrs:gYe}});var Kw=g((KOt,N1e)=>{f();"use strict";var C1e=ce(),Fw=Object.assign(C1e("libp2p:circuit:stream-handler"),{error:C1e("libp2p:circuit:stream-handler:err")}),O1e=qo(),mYe=H0(),{CircuitRelay:k1e}=f1(),D1e=class{constructor({stream:e,maxLength:r=4096}){this.stream=e,this.shake=mYe(this.stream),this.decoder=O1e.decode.fromReader(this.shake.reader,{maxDataLength:r})}async read(){let e=await this.decoder.next();if(e.value){let r=k1e.decode(e.value.slice());return Fw("read message type",r.type),r}Fw("read received no value, closing stream"),this.close()}write(e){Fw("write message type %s",e.type),this.shake.write(O1e.encode.single(k1e.encode(e).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){Fw("closing the stream"),this.rest().sink([])}};N1e.exports=D1e});var wP=g((VOt,bP)=>{f();"use strict";var B1e=ce(),Sm=Object.assign(B1e("libp2p:circuit:stop"),{error:B1e("libp2p:circuit:stop:err")}),{CircuitRelay:mP}=f1(),bYe=Em(),wYe=Kw(),{validateAddrs:_Ye}=gP();bP.exports.handleStop=function({connection:e,request:r,streamHandler:i}){try{_Ye(r,i)}catch(n){return Sm.error("invalid stop request via peer %s",e.remotePeer.toB58String(),n)}return Sm("stop request is valid"),i.write({type:mP.Type.STATUS,code:mP.Status.SUCCESS}),i.rest()};bP.exports.stop=async function({connection:e,request:r}){let{stream:i}=await e.newStream([bYe.relay]);Sm("starting stop request to %s",e.remotePeer.toB58String());let n=new wYe({stream:i});n.write(r);let s=await n.read();if(!s)return n.close();if(s.code===mP.Status.SUCCESS)return Sm("stop request to %s was successful",e.remotePeer.toB58String()),n.rest();Sm("stop request failed with code %d",s.code),n.close()}});var _P=g((zOt,F1e)=>{f();"use strict";var L1e=ce(),ou=Object.assign(L1e("libp2p:circuit:hop"),{error:L1e("libp2p:circuit:hop:err")}),M1e=ur(),vYe=Je(),{validateAddrs:EYe}=gP(),j1e=Kw(),{CircuitRelay:us}=f1(),{pipe:SYe}=vr(),{codes:q1e}=lr(),{stop:AYe}=wP(),U1e=Em();async function xYe({connection:t,request:e,streamHandler:r,circuit:i}){if(!i._options.hop.enabled)return ou("HOP request received but we are not acting as a relay"),r.end({type:us.Type.STATUS,code:us.Status.HOP_CANT_SPEAK_RELAY});try{EYe(e,r)}catch(u){return ou.error("invalid hop request via peer %s",t.remotePeer.toB58String(),u)}if(!e.dstPeer){ou("HOP request received but we do not receive a dstPeer");return}let n=new vYe(e.dstPeer.id),s=i._connectionManager.get(n);if(!s&&!i._options.hop.active)return ou("HOP request received but we are not connected to the destination peer"),r.end({type:us.Type.STATUS,code:us.Status.HOP_NO_CONN_TO_DST});if(!s)return;let o={type:us.Type.STOP,dstPeer:e.dstPeer,srcPeer:e.srcPeer},a;try{a=await AYe({connection:s,request:o})}catch(u){return ou.error(u)}ou("hop request from %s is valid",t.remotePeer.toB58String()),r.write({type:us.Type.STATUS,code:us.Status.SUCCESS});let c=r.rest();return SYe(c,a,c)}async function RYe({connection:t,request:e}){let{stream:r}=await t.newStream([U1e.relay]),i=new j1e({stream:r});i.write(e);let n=await i.read();if(!n)throw M1e(new Error("HOP request had no response"),q1e.ERR_HOP_REQUEST_FAILED);if(n.code===us.Status.SUCCESS)return ou("hop request was successful"),i.rest();throw ou("hop request failed with code %d, closing stream",n.code),i.close(),M1e(new Error(`HOP request failed with code ${n.code}`),q1e.ERR_HOP_REQUEST_FAILED)}async function IYe({connection:t}){let{stream:e}=await t.newStream([U1e.relay]),r=new j1e({stream:e});r.write({type:us.Type.CAN_HOP});let i=await r.read();return await r.close(),!(!i||i.code!==us.Status.SUCCESS)}function TYe({connection:t,streamHandler:e,circuit:r}){let i=r._options.hop.enabled;ou("can hop (%s) request from %s",i,t.remotePeer.toB58String()),e.end({type:us.Type.STATUS,code:i?us.Status.SUCCESS:us.Status.HOP_CANT_SPEAK_RELAY})}F1e.exports={handleHop:xYe,hop:RYe,canHop:IYe,handleCanHop:TYe}});var G1e=g((HOt,$1e)=>{f();"use strict";var K1e=ce(),au=Object.assign(K1e("libp2p:circuit"),{error:K1e("libp2p:circuit:err")}),PYe=ur(),CYe=af(),{Multiaddr:Am}=ct(),V1e=Je(),{CircuitRelay:xm}=f1(),{codes:OYe}=lr(),z1e=S1e(),{relay:kYe}=Em(),DYe=R1e(),{handleCanHop:NYe,handleHop:BYe,hop:LYe}=_P(),{handleStop:MYe}=wP(),jYe=Kw(),qYe=Symbol.for("@libp2p/js-libp2p-circuit/circuit"),H1e=class{constructor({libp2p:e,upgrader:r}){this._dialer=e.dialer,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._upgrader=r,this._options=e._config.relay,this._libp2p=e,this.peerId=e.peerId,this._registrar.handle(kYe,this._onProtocol.bind(this))}async _onProtocol({connection:e,stream:r}){let i=new jYe({stream:r}),n=await i.read();if(!n)return;let s=this,o;switch(n.type){case xm.Type.CAN_HOP:{au("received CAN_HOP request from %s",e.remotePeer.toB58String()),await NYe({circuit:s,connection:e,streamHandler:i});break}case xm.Type.HOP:{au("received HOP request from %s",e.remotePeer.toB58String()),o=await BYe({connection:e,request:n,streamHandler:i,circuit:s});break}case xm.Type.STOP:{au("received STOP request from %s",e.remotePeer.toB58String()),o=await MYe({connection:e,request:n,streamHandler:i});break}default:au("Request of type %s not supported",n.type)}if(o){let a=new Am(n.dstPeer.addrs[0]),c=new Am(n.srcPeer.addrs[0]),u=z1e({stream:o,remoteAddr:a,localAddr:c}),l=n.type===xm.Type.HOP?"relay":"inbound";au("new %s connection %s",l,u.remoteAddr);let h=await this._upgrader.upgradeInbound(u);au("%s connection %s upgraded",l,u.remoteAddr),this.handler&&this.handler(h)}}async dial(e,r){let i=e.toString().split("/p2p-circuit"),n=new Am(i[0]),s=new Am(i[i.length-1]),o=n.getPeerId(),a=s.getPeerId();if(!o||!a){let d="Circuit relay dial failed as addresses did not have peer id";throw au.error(d),PYe(new Error(d),OYe.ERR_RELAYED_DIAL)}let c=V1e.createFromB58String(o),u=V1e.createFromB58String(a),l=!1,h=this._connectionManager.get(c);h||(h=await this._dialer.connectToPeer(n,r),l=!0);try{let d=await LYe({connection:h,request:{type:xm.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map(m=>m.bytes)},dstPeer:{id:u.toBytes(),addrs:[new Am(s).bytes]}}}),p=n.encapsulate(`/p2p-circuit/p2p/${this.peerId.toB58String()}`),y=z1e({stream:d,remoteAddr:e,localAddr:p});return au("new outbound connection %s",y.remoteAddr),this._upgrader.upgradeOutbound(y)}catch(d){throw au.error("Circuit relay dial failed",d),l&&await h.close(),d}}createListener(e,r){return typeof e=="function"&&(r=e,e={}),this.handler=r,DYe(this._libp2p)}filter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>CYe.Circuit.matches(r))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(e){return Boolean(e&&e[qYe])}};$1e.exports=H1e});var vP=g(($Ot,W1e)=>{f();"use strict";var{CID:UYe}=(ye(),_u),{sha256:FYe}=(ti(),vs);W1e.exports.namespaceToCid=async t=>{let e=new TextEncoder().encode(t),r=await FYe.digest(e);return UYe.createV0(r)}});var t2e=g((GOt,e2e)=>{f();"use strict";var Y1e=ce(),X1e=Object.assign(Y1e("libp2p:auto-relay"),{error:Y1e("libp2p:auto-relay:err")}),{fromString:KYe}=(ht(),ri),{toString:VYe}=(Qe(),rr),{Multiaddr:zYe}=ct(),HYe=Je(),{relay:$Ye}=Em(),{canHop:GYe}=_P(),{namespaceToCid:WYe}=vP(),{CIRCUIT_PROTO_CODE:YYe,HOP_METADATA_KEY:Q1e,HOP_METADATA_VALUE:Z1e,RELAY_RENDEZVOUS_NS:XYe}=Lw(),J1e=class{constructor({libp2p:e,maxListeners:r=1,onError:i}){this._libp2p=e,this._peerId=e.peerId,this._peerStore=e.peerStore,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._addressSorter=e.dialer.addressSorter,this.maxListeners=r,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(n,s)=>{X1e.error(s||n),i&&i(n,s)}}async _onProtocolChange({peerId:e,protocols:r}){let i=e.toB58String(),n=r.find(s=>s===$Ye);if(!n&&this._listenRelays.has(i)){this._removeListenRelay(i);return}else if(!n||this._listenRelays.has(i))return;try{let s=this._connectionManager.get(e);if(!s)return;if(s.remoteAddr.protoCodes().includes(YYe)){X1e(`relayed connection to ${i} will not be used to hop on`);return}await GYe({connection:s})&&(this._peerStore.metadataBook.set(e,Q1e,KYe(Z1e)),await this._addListenRelay(s,i))}catch(s){this._onError(s)}}_onPeerDisconnected(e){let i=e.remotePeer.toB58String();!this._listenRelays.has(i)||this._removeListenRelay(i)}async _addListenRelay(e,r){if(this._listenRelays.size>=this.maxListeners)return;let i=this._peerStore.addressBook.getMultiaddrsForPeer(e.remotePeer,this._addressSorter);if(!i||!i.length)return;let n=`${i[0].toString()}/p2p-circuit`;this._listenRelays.add(r);try{await this._transportManager.listen([new zYe(n)])}catch(s){this._onError(s),this._listenRelays.delete(r)}}_removeListenRelay(e){this._listenRelays.delete(e)&&this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this._listenRelays.size>=this.maxListeners)return;let r=[];for(let[i,n]of this._peerStore.metadataBook.data.entries()){if(this._listenRelays.has(i)||e.includes(i))continue;let s=n.get(Q1e);if(!s||VYe(s)!==Z1e)continue;let o=HYe.createFromB58String(i),a=this._connectionManager.get(o);if(!a){r.push(o);continue}if(await this._addListenRelay(a,i),this._listenRelays.size>=this.maxListeners)return}for(let i of r)if(await this._tryToListenOnRelay(i),this._listenRelays.size>=this.maxListeners)return;try{let i=await WYe(XYe);for await(let n of this._libp2p.contentRouting.findProviders(i)){if(!n.multiaddrs.length)continue;let s=n.id;if(this._peerStore.addressBook.add(s,n.multiaddrs),await this._tryToListenOnRelay(s),this._listenRelays.size>=this.maxListeners)return}}catch(i){this._onError(i)}}async _tryToListenOnRelay(e){try{let r=await this._libp2p.dial(e);await this._addListenRelay(r,e.toB58String())}catch(r){this._onError(r,`could not connect and listen on known hop relay ${e.toB58String()}`)}}};e2e.exports=J1e});var o2e=g((WOt,s2e)=>{f();"use strict";var r2e=ce(),i2e=Object.assign(r2e("libp2p:relay"),{error:r2e("libp2p:relay:err")}),{codes:QYe}=lr(),{setDelayedInterval:ZYe,clearDelayedInterval:JYe}=eP(),eXe=t2e(),{namespaceToCid:tXe}=vP(),{RELAY_RENDEZVOUS_NS:rXe}=Lw(),n2e=class{constructor(e){this._libp2p=e,this._options={...e._config.relay},this._autoRelay=this._options.autoRelay.enabled&&new eXe({libp2p:e,...this._options.autoRelay}),this._advertiseService=this._advertiseService.bind(this)}start(){this._options.hop.enabled&&this._options.advertise.enabled&&(this._timeout=ZYe(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){JYe(this._timeout)}async _advertiseService(){try{let e=await tXe(rXe);await this._libp2p.contentRouting.provide(e)}catch(e){e.code===QYe.ERR_NO_ROUTERS_AVAILABLE?(i2e.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e),this.stop()):i2e.error(e)}}};s2e.exports=n2e});var l2e=g((XOt,u2e)=>{f();var a2e=LE(),c2e=xa();u2e.exports=class{constructor(){this._buffer=new a2e,this._waitingConsumers=new a2e}push(e){let{promise:r,resolve:i}=c2e();return this._buffer.push({chunk:e,resolve:i}),this._consume(),r}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){let e=this._waitingConsumers.shift(),r=this._buffer.shift();e.resolve(r.chunk),r.resolve()}}shift(){let{promise:e,resolve:r}=c2e();return this._waitingConsumers.push({resolve:r}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}});var f2e=g((QOt,SP)=>{f();"use strict";var EP=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},Rm=class{static fn(e){return(...r)=>new Rm((i,n,s)=>{r.push(s),e(...r).then(i,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,i)=>{this._reject=i;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,i(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new EP(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Rm.prototype,Promise.prototype);SP.exports=Rm;SP.exports.CancelError=EP});var d2e=g((ZOt,Vw)=>{f();"use strict";var h2e=QT(),iXe=f2e(),AP=class extends Error{},nXe=(t,e)=>new iXe((r,i,n)=>{let{count:s,filter:o=()=>!0}=e;if(!Number.isFinite(s)){i(new TypeError(`Expected a finite number, got ${typeof e.count}`));return}let a=[],c=[],u=0,l=!1,h=new Set,d=()=>(a.length===s&&(r(a),l=!0),u-c.length<s&&(i(new h2e(c)),l=!0),l),p=()=>{for(let y of t)!h.has(y)&&typeof y.cancel=="function"&&y.cancel()};n(p);for(let y of t)u++,(async()=>{try{let m=await y;if(l)return;if(!o(m))throw new AP("Value does not satisfy filter");a.push(m)}catch(m){c.push(m)}finally{h.add(y),!l&&d()&&p()}})();s>u&&(i(new RangeError(`Expected input to contain at least ${e.count} items, but contains ${u} items`)),p())});Vw.exports=nXe;Vw.exports.AggregateError=h2e;Vw.exports.FilterError=AP});var p2e=g((JOt,RP)=>{f();"use strict";var xP=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},Im=class{static fn(e){return(...r)=>new Im((i,n,s)=>{r.push(s),e(...r).then(i,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,i)=>{this._reject=i;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,i(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new xP(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Im.prototype,Promise.prototype);RP.exports=Im;RP.exports.CancelError=xP});var g2e=g((ekt,IP)=>{f();"use strict";var y2e=d2e(),sXe=p2e();IP.exports=(t,e)=>{let r=y2e(t,{...e,count:1});return sXe.fn(async i=>{i(()=>{r.cancel()});let[n]=await r;return n})()};IP.exports.AggregateError=y2e.AggregateError});var _2e=g((tkt,w2e)=>{f();"use strict";var oXe=ur(),{anySignal:aXe}=Eo(),cXe=l2e(),uXe=g2e(),{setMaxListeners:m2e}=Wt(),{codes:lXe}=lr(),b2e=class{constructor({addrs:e,dialAction:r,dialer:i}){this.addrs=e,this.dialer=i,this.dialAction=r}async run(e={}){let r=this.dialer.getTokens(this.addrs.length);if(r.length<1)throw oXe(new Error("No dial tokens available"),lXe.ERR_NO_DIAL_TOKENS);let i=new cXe;r.forEach(o=>i.push(o));let n=this.addrs.map(()=>{let o=new AbortController;return m2e&&m2e(1/0,o.signal),o}),s=0;try{return await uXe(this.addrs.map(async(o,a)=>{let c=await i.shift(),u;try{let l=n[a].signal;u=await this.dialAction(o,{...e,signal:e.signal?aXe([l,e.signal]):l}),n.splice(a,1)}finally{s++,this.addrs.length-s>=r.length?i.push(c):this.dialer.releaseToken(r.splice(r.indexOf(c),1)[0])}return u}))}finally{n.map(o=>o.abort()),r.forEach(o=>this.dialer.releaseToken(o))}}};w2e.exports=b2e});var A2e=g((rkt,S2e)=>{f();"use strict";var v2e=ce(),h1=Object.assign(v2e("libp2p:dialer"),{error:v2e("libp2p:dialer:err")}),TP=ur(),{Multiaddr:PP}=ct(),{TimeoutController:fXe}=ca(),{AbortError:hXe}=Fa(),{anySignal:dXe}=Eo(),pXe=_2e(),{publicAddressesFirst:yXe}=nP(),gXe=tP(),{codes:zw}=lr(),{DIAL_TIMEOUT:mXe,MAX_PARALLEL_DIALS:bXe,MAX_PER_PEER_DIALS:wXe,MAX_ADDRS_TO_DIAL:_Xe}=Bw(),d1="dialler",CP="pending-dials",OP="pending-dial-targets",E2e=class{constructor({transportManager:e,peerStore:r,addressSorter:i=yXe,maxParallelDials:n=bXe,maxAddrsToDial:s=_Xe,dialTimeout:o=mXe,maxDialsPerPeer:a=wXe,resolvers:c={},metrics:u}){this.transportManager=e,this.peerStore=r,this.addressSorter=i,this.maxParallelDials=n,this.maxAddrsToDial=s,this.timeout=o,this.maxDialsPerPeer=a,this.tokens=[...new Array(n)].map((l,h)=>h),this._pendingDials=new Map,this._pendingDialTargets=new Map,this._metrics=u;for(let[l,h]of Object.entries(c))PP.resolvers.set(l,h)}destroy(){for(let e of this._pendingDials.values())try{e.controller.abort()}catch(r){h1.error(r)}this._pendingDials.clear();for(let e of this._pendingDialTargets.values())e.reject(new hXe("Dialer was destroyed"));this._pendingDialTargets.clear(),this._metrics&&this._metrics.updateComponentMetric(d1,CP,0),this._metrics&&this._metrics.updateComponentMetric(d1,OP,0)}async connectToPeer(e,r={}){let i=await this._createCancellableDialTarget(e);if(!i.addrs.length)throw TP(new Error("The dial request has no valid addresses"),zw.ERR_NO_VALID_ADDRESSES);let n=this._pendingDials.get(i.id)||this._createPendingDial(i,r);try{let s=await n.promise;return h1("dial succeeded to %s",i.id),s}catch(s){throw n.controller.signal.aborted&&(s.code=zw.ERR_TIMEOUT),h1.error(s),s}finally{n.destroy()}}async _createCancellableDialTarget(e){let r=`${parseInt(String(Math.random()*1e9),10).toString()+Date.now()}`,i=new Promise((n,s)=>{this._pendingDialTargets.set(r,{resolve:n,reject:s}),this._metrics&&this._metrics.updateComponentMetric(d1,OP,this._pendingDialTargets.size)});try{return await Promise.race([this._createDialTarget(e),i])}finally{this._pendingDialTargets.delete(r),this._metrics&&this._metrics.updateComponentMetric(d1,OP,this._pendingDialTargets.size)}}async _createDialTarget(e){let{id:r,multiaddrs:i}=gXe(e);i&&this.peerStore.addressBook.add(r,i);let n=this.peerStore.addressBook.getMultiaddrsForPeer(r,this.addressSorter)||[];PP.isMultiaddr(e)&&(n=n.filter(a=>!e.equals(a)),n.unshift(e));let s=[];for(let a of n)(await this._resolve(a)).forEach(u=>s.push(u));let o=s.filter(a=>this.transportManager.transportForMultiaddr(a));if(o.length>this.maxAddrsToDial)throw this.peerStore.delete(r),TP(new Error("dial with more addresses than allowed"),zw.ERR_TOO_MANY_ADDRESSES);return{id:r.toB58String(),addrs:o}}_createPendingDial(e,r={}){let i=(u,l)=>{if(l.signal.aborted)throw TP(new Error("already aborted"),zw.ERR_ALREADY_ABORTED);return this.transportManager.dial(u,l)},n=new pXe({addrs:e.addrs,dialAction:i,dialer:this}),s=new fXe(this.timeout),o=[s.signal];r.signal&&o.push(r.signal);let a=dXe(o),c={dialRequest:n,controller:s,promise:n.run({...r,signal:a}),destroy:()=>{s.clear(),this._pendingDials.delete(e.id),this._metrics&&this._metrics.updateComponentMetric(d1,CP,this._pendingDials.size)}};return this._pendingDials.set(e.id,c),this._metrics&&this._metrics.updateComponentMetric(d1,CP,this._pendingDials.size),c}getTokens(e){let r=Math.min(e,this.maxDialsPerPeer,this.tokens.length),i=this.tokens.splice(0,r);return h1("%d tokens request, returning %d, %d remaining",e,r,this.tokens.length),i}releaseToken(e){this.tokens.indexOf(e)>-1||(h1("token %d released",e),this.tokens.push(e))}async _resolve(e){if(!e.protoNames().includes("dnsaddr"))return[e];let i=await this._resolveRecord(e);return(await Promise.all(i.map(o=>this._resolve(o)))).flat().reduce((o,a)=>(o.find(c=>c.equals(a))||o.push(a),o),[])}async _resolveRecord(e){try{return e=new PP(e.toString()),await e.resolve()}catch(r){return h1.error(`multiaddr ${e} could not be resolved`),[]}}};S2e.exports=E2e});var R2e=g((ikt,x2e)=>{f();"use strict";function vXe(t){return t>=55296&&t<=56319}function EXe(t){return t>=56320&&t<=57343}x2e.exports=function(e,r,i){if(typeof r!="string")throw new Error("Input must be string");for(var n=r.length,s=0,o,a,c=0;c<n;c+=1){if(o=r.charCodeAt(c),a=r[c],vXe(o)&&EXe(r.charCodeAt(c+1))&&(c+=1,a+=r[c]),s+=e(a),s===i)return r.slice(0,c+1);if(s>i)return r.slice(0,c-a.length+1)}return r}});var T2e=g((nkt,I2e)=>{f();"use strict";function SXe(t){return t>=55296&&t<=56319}function AXe(t){return t>=56320&&t<=57343}I2e.exports=function(e){if(typeof e!="string")throw new Error("Input must be string");for(var r=e.length,i=0,n=null,s=null,o=0;o<r;o++)n=e.charCodeAt(o),AXe(n)?s!=null&&SXe(s)?i+=1:i+=3:n<=127?i+=1:n>=128&&n<=2047?i+=2:n>=2048&&n<=65535&&(i+=3),s=n;return i}});var C2e=g((skt,P2e)=>{f();"use strict";var xXe=R2e(),RXe=T2e();P2e.exports=xXe.bind(null,RXe)});var D2e=g((okt,k2e)=>{f();"use strict";var IXe=C2e(),TXe=/[\/\?<>\\:\*\|"]/g,PXe=/[\x00-\x1f\x80-\x9f]/g,CXe=/^\.+$/,OXe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,kXe=/[\. ]+$/;function O2e(t,e){if(typeof t!="string")throw new Error("Input must be string");var r=t.replace(TXe,e).replace(PXe,e).replace(CXe,e).replace(OXe,e).replace(kXe,e);return IXe(r,255)}k2e.exports=function(t,e){var r=e&&e.replacement||"",i=O2e(t,r);return r===""?i:O2e(i,"")}});var M2e=g((akt,L2e)=>{f();var p1=vt();Nu();fr();var Oe=p1.asn1,y1=L2e.exports=p1.pkcs7asn1=p1.pkcs7asn1||{};p1.pkcs7=p1.pkcs7||{};p1.pkcs7.asn1=y1;var N2e={name:"ContentInfo",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};y1.contentInfoValidator=N2e;var B2e={name:"EncryptedContentInfo",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Oe.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Oe.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};y1.envelopedDataValidator={name:"EnvelopedData",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(B2e)};y1.encryptedDataValidator={name:"EncryptedData",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.INTEGER,constructed:!1,capture:"version"}].concat(B2e)};var DXe={name:"SignerInfo",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Oe.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Oe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};y1.signedDataValidator={name:"SignedData",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},N2e,{name:"SignedData.Certificates",tagClass:Oe.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Oe.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SET,capture:"signerInfos",optional:!0,value:[DXe]}]};y1.recipientInfoValidator={name:"RecipientInfo",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Oe.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:Oe.Class.UNIVERSAL,type:Oe.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var q2e=g((ckt,j2e)=>{f();var zh=vt();fr();zh.mgf=zh.mgf||{};var NXe=j2e.exports=zh.mgf.mgf1=zh.mgf1=zh.mgf1||{};NXe.create=function(t){var e={generate:function(r,i){for(var n=new zh.util.ByteBuffer,s=Math.ceil(i/t.digestLength),o=0;o<s;o++){var a=new zh.util.ByteBuffer;a.putInt32(o),t.start(),t.update(r+a.getBytes()),n.putBuffer(t.digest())}return n.truncate(n.length()-i),n.getBytes()}};return e}});var F2e=g((ukt,U2e)=>{f();var Hw=vt();q2e();U2e.exports=Hw.mgf=Hw.mgf||{};Hw.mgf.mgf1=Hw.mgf1});var V2e=g((lkt,K2e)=>{f();var Hh=vt();hf();fr();var BXe=K2e.exports=Hh.pss=Hh.pss||{};BXe.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,i=e.digestLength,n=t.salt||null;typeof n=="string"&&(n=Hh.util.createBuffer(n));var s;if("saltLength"in t)s=t.saltLength;else if(n!==null)s=n.length();else throw new Error("Salt length not specified or specific salt not given.");if(n!==null&&n.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=t.prng||Hh.random,a={};return a.encode=function(c,u){var l,h=u-1,d=Math.ceil(h/8),p=c.digest().getBytes();if(d<i+s+2)throw new Error("Message is too long to encrypt.");var y;n===null?y=o.getBytesSync(s):y=n.bytes();var m=new Hh.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(p),m.putBytes(y),e.start(),e.update(m.getBytes());var w=e.digest().getBytes(),b=new Hh.util.ByteBuffer;b.fillWithByte(0,d-s-i-2),b.putByte(1),b.putBytes(y);var v=b.getBytes(),x=d-i-1,B=r.generate(w,x),O="";for(l=0;l<x;l++)O+=String.fromCharCode(v.charCodeAt(l)^B.charCodeAt(l));var R=65280>>8*d-h&255;return O=String.fromCharCode(O.charCodeAt(0)&~R)+O.substr(1),O+w+String.fromCharCode(188)},a.verify=function(c,u,l){var h,d=l-1,p=Math.ceil(d/8);if(u=u.substr(-p),p<i+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var y=p-i-1,m=u.substr(0,y),w=u.substr(y,i),b=65280>>8*p-d&255;if((m.charCodeAt(0)&b)!=0)throw new Error("Bits beyond keysize not zero as expected.");var v=r.generate(w,y),x="";for(h=0;h<y;h++)x+=String.fromCharCode(m.charCodeAt(h)^v.charCodeAt(h));x=String.fromCharCode(x.charCodeAt(0)&~b)+x.substr(1);var B=p-i-s-2;for(h=0;h<B;h++)if(x.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(x.charCodeAt(B)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var O=x.substr(-s),R=new Hh.util.ByteBuffer;R.fillWithByte(0,8),R.putBytes(c),R.putBytes(O),e.start(),e.update(R.getBytes());var N=e.digest().getBytes();return w===N},a}});var DP=g((fkt,G2e)=>{f();var Ae=vt();Gd();Nu();l4();Bu();F2e();zd();p4();V2e();P2();fr();var S=Ae.asn1,be=G2e.exports=Ae.pki=Ae.pki||{},nt=be.oids,zr={};zr.CN=nt.commonName;zr.commonName="CN";zr.C=nt.countryName;zr.countryName="C";zr.L=nt.localityName;zr.localityName="L";zr.ST=nt.stateOrProvinceName;zr.stateOrProvinceName="ST";zr.O=nt.organizationName;zr.organizationName="O";zr.OU=nt.organizationalUnitName;zr.organizationalUnitName="OU";zr.E=nt.emailAddress;zr.emailAddress="E";var z2e=Ae.pki.rsa.publicKeyValidator,LXe={name:"Certificate",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:S.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:S.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:S.Class.UNIVERSAL,type:S.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:S.Class.UNIVERSAL,type:S.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:S.Class.UNIVERSAL,type:S.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:S.Class.UNIVERSAL,type:S.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},z2e,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:S.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:S.Class.UNIVERSAL,type:S.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:S.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:S.Class.UNIVERSAL,type:S.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:S.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:S.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:S.Class.UNIVERSAL,type:S.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},MXe={name:"rsapss",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:S.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:S.Class.UNIVERSAL,type:S.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:S.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:S.Class.UNIVERSAL,type:S.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:S.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:S.Class.UNIVERSAL,type:S.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:S.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:S.Class.UNIVERSAL,type:S.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},jXe={name:"CertificationRequestInfo",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},z2e,{name:"CertificationRequestInfo.attributes",tagClass:S.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:S.Class.UNIVERSAL,type:S.Type.SET,constructed:!0}]}]}]},qXe={name:"CertificationRequest",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[jXe,{name:"CertificationRequest.signatureAlgorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:S.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:S.Class.UNIVERSAL,type:S.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};be.RDNAttributesAsArray=function(t,e){for(var r=[],i,n,s,o=0;o<t.value.length;++o){i=t.value[o];for(var a=0;a<i.value.length;++a)s={},n=i.value[a],s.type=S.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in nt&&(s.name=nt[s.type],s.name in zr&&(s.shortName=zr[s.name])),e&&(e.update(s.type),e.update(s.value)),r.push(s)}return r};be.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var i=t[r],n=S.derToOid(i.value[0].value),s=i.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=n,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in nt&&(a.name=nt[a.type],a.name in zr&&(a.shortName=zr[a.name])),a.type===nt.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(be.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function zl(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,i,n=0;r===null&&n<t.attributes.length;++n)i=t.attributes[n],(e.type&&e.type===i.type||e.name&&e.name===i.name||e.shortName&&e.shortName===i.shortName)&&(r=i);return r}var $w=function(t,e,r){var i={};if(t!==nt["RSASSA-PSS"])return i;r&&(i={hash:{algorithmOid:nt.sha1},mgf:{algorithmOid:nt.mgf1,hash:{algorithmOid:nt.sha1}},saltLength:20});var n={},s=[];if(!S.validate(e,MXe,n,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return n.hashOid!==void 0&&(i.hash=i.hash||{},i.hash.algorithmOid=S.derToOid(n.hashOid)),n.maskGenOid!==void 0&&(i.mgf=i.mgf||{},i.mgf.algorithmOid=S.derToOid(n.maskGenOid),i.mgf.hash=i.mgf.hash||{},i.mgf.hash.algorithmOid=S.derToOid(n.maskGenHashOid)),n.saltLength!==void 0&&(i.saltLength=n.saltLength.charCodeAt(0)),i};be.certificateFromPem=function(t,e,r){var i=Ae.pem.decode(t)[0];if(i.type!=="CERTIFICATE"&&i.type!=="X509 CERTIFICATE"&&i.type!=="TRUSTED CERTIFICATE"){var n=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw n.headerType=i.type,n}if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=S.fromDer(i.body,r);return be.certificateFromAsn1(s,e)};be.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:S.toDer(be.certificateToAsn1(t)).getBytes()};return Ae.pem.encode(r,{maxline:e})};be.publicKeyFromPem=function(t){var e=Ae.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var i=S.fromDer(e.body);return be.publicKeyFromAsn1(i)};be.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:S.toDer(be.publicKeyToAsn1(t)).getBytes()};return Ae.pem.encode(r,{maxline:e})};be.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:S.toDer(be.publicKeyToRSAPublicKey(t)).getBytes()};return Ae.pem.encode(r,{maxline:e})};be.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Ae.md.sha1.create(),i=e.type||"RSAPublicKey",n;switch(i){case"RSAPublicKey":n=S.toDer(be.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":n=S.toDer(be.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(n);var s=r.digest();if(e.encoding==="hex"){var o=s.toHex();return e.delimiter?o.match(/.{2}/g).join(e.delimiter):o}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};be.certificationRequestFromPem=function(t,e,r){var i=Ae.pem.decode(t)[0];if(i.type!=="CERTIFICATE REQUEST"){var n=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw n.headerType=i.type,n}if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=S.fromDer(i.body,r);return be.certificationRequestFromAsn1(s,e)};be.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:S.toDer(be.certificationRequestToAsn1(t)).getBytes()};return Ae.pem.encode(r,{maxline:e})};be.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return zl(t.issuer,e)},t.issuer.addField=function(e){co([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return zl(t.subject,e)},t.subject.addField=function(e){co([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){co(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){co(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)H2e(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,i,n=0;r===null&&n<t.extensions.length;++n)i=t.extensions[n],(e.id&&i.id===e.id||e.name&&i.name===e.name)&&(r=i);return r},t.sign=function(e,r){t.md=r||Ae.md.sha1.create();var i=nt[t.md.algorithm+"WithRSAEncryption"];if(!i){var n=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw n.algorithm=t.md.algorithm,n}t.signatureOid=t.siginfo.algorithmOid=i,t.tbsCertificate=be.getTBSCertificate(t);var s=S.toDer(t.tbsCertificate);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var i=e.issuer,n=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var o=e.md;if(o===null){if(e.signatureOid in nt){var a=nt[e.signatureOid];switch(a){case"sha1WithRSAEncryption":o=Ae.md.sha1.create();break;case"md5WithRSAEncryption":o=Ae.md.md5.create();break;case"sha256WithRSAEncryption":o=Ae.md.sha256.create();break;case"sha384WithRSAEncryption":o=Ae.md.sha384.create();break;case"sha512WithRSAEncryption":o=Ae.md.sha512.create();break;case"RSASSA-PSS":o=Ae.md.sha256.create();break}}if(o===null){var s=new Error("Could not compute certificate digest. Unknown signature OID.");throw s.signatureOid=e.signatureOid,s}var c=e.tbsCertificate||be.getTBSCertificate(e),u=S.toDer(c);o.update(u.getBytes())}if(o!==null){var l;switch(e.signatureOid){case nt.sha1WithRSAEncryption:l=void 0;break;case nt["RSASSA-PSS"]:var h,d;if(h=nt[e.signatureParameters.mgf.hash.algorithmOid],h===void 0||Ae.md[h]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=e.signatureParameters.mgf.hash.algorithmOid,s.name=h,s}if(d=nt[e.signatureParameters.mgf.algorithmOid],d===void 0||Ae.mgf[d]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=e.signatureParameters.mgf.algorithmOid,s.name=d,s}if(d=Ae.mgf[d].create(Ae.md[h].create()),h=nt[e.signatureParameters.hash.algorithmOid],h===void 0||Ae.md[h]===void 0)throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:h};l=Ae.pss.create(Ae.md[h].create(),d,e.signatureParameters.saltLength);break}r=t.publicKey.verify(o.digest().getBytes(),e.signature,l)}return r},t.isIssuer=function(e){var r=!1,i=t.issuer,n=e.subject;if(i.hash&&n.hash)r=i.hash===n.hash;else if(i.attributes.length===n.attributes.length){r=!0;for(var s,o,a=0;r&&a<i.attributes.length;++a)s=i.attributes[a],o=n.attributes[a],(s.type!==o.type||s.value!==o.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return be.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=nt.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var n=t.generateSubjectKeyIdentifier().getBytes();return Ae.util.hexToBytes(i.subjectKeyIdentifier)===n}}return!1},t};be.certificateFromAsn1=function(t,e){var r={},i=[];if(!S.validate(t,LXe,r,i)){var n=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw n.errors=i,n}var s=S.derToOid(r.publicKeyOid);if(s!==be.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=be.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=Ae.util.createBuffer(r.certSerialNumber);o.serialNumber=a.toHex(),o.signatureOid=Ae.asn1.derToOid(r.certSignatureOid),o.signatureParameters=$w(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=Ae.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=$w(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1),o.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(S.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(S.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(S.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(S.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=c[0],o.validity.notAfter=c[1],o.tbsCertificate=r.tbsCertificate,e){if(o.md=null,o.signatureOid in nt){var s=nt[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=Ae.md.sha1.create();break;case"md5WithRSAEncryption":o.md=Ae.md.md5.create();break;case"sha256WithRSAEncryption":o.md=Ae.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=Ae.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=Ae.md.sha512.create();break;case"RSASSA-PSS":o.md=Ae.md.sha256.create();break}}if(o.md===null){var n=new Error("Could not compute certificate digest. Unknown signature OID.");throw n.signatureOid=o.signatureOid,n}var u=S.toDer(o.tbsCertificate);o.md.update(u.getBytes())}var l=Ae.md.sha1.create();o.issuer.getField=function(d){return zl(o.issuer,d)},o.issuer.addField=function(d){co([d]),o.issuer.attributes.push(d)},o.issuer.attributes=be.RDNAttributesAsArray(r.certIssuer,l),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=l.digest().toHex();var h=Ae.md.sha1.create();return o.subject.getField=function(d){return zl(o.subject,d)},o.subject.addField=function(d){co([d]),o.subject.attributes.push(d)},o.subject.attributes=be.RDNAttributesAsArray(r.certSubject,h),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=h.digest().toHex(),r.certExtensions?o.extensions=be.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=be.publicKeyFromAsn1(r.subjectPublicKeyInfo),o};be.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var i=t.value[r],n=0;n<i.value.length;++n)e.push(be.certificateExtensionFromAsn1(i.value[n]));return e};be.certificateExtensionFromAsn1=function(t){var e={};if(e.id=S.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===S.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in nt){if(e.name=nt[e.id],e.name==="keyUsage"){var r=S.fromDer(e.value),i=0,n=0;r.value.length>1&&(i=r.value.charCodeAt(1),n=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(i&128)==128,e.nonRepudiation=(i&64)==64,e.keyEncipherment=(i&32)==32,e.dataEncipherment=(i&16)==16,e.keyAgreement=(i&8)==8,e.keyCertSign=(i&4)==4,e.cRLSign=(i&2)==2,e.encipherOnly=(i&1)==1,e.decipherOnly=(n&128)==128}else if(e.name==="basicConstraints"){var r=S.fromDer(e.value);r.value.length>0&&r.value[0].type===S.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var s=null;r.value.length>0&&r.value[0].type===S.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(e.pathLenConstraint=S.derToInteger(s))}else if(e.name==="extKeyUsage")for(var r=S.fromDer(e.value),o=0;o<r.value.length;++o){var a=S.derToOid(r.value[o].value);a in nt?e[nt[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=S.fromDer(e.value),i=0;r.value.length>1&&(i=r.value.charCodeAt(1)),e.client=(i&128)==128,e.server=(i&64)==64,e.email=(i&32)==32,e.objsign=(i&16)==16,e.reserved=(i&8)==8,e.sslCA=(i&4)==4,e.emailCA=(i&2)==2,e.objCA=(i&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=S.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var l={type:c.type,value:c.value};switch(e.altNames.push(l),c.type){case 1:case 2:case 6:break;case 7:l.ip=Ae.util.bytesToIP(c.value);break;case 8:l.oid=S.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=S.fromDer(e.value);e.subjectKeyIdentifier=Ae.util.bytesToHex(r.value)}}return e};be.certificationRequestFromAsn1=function(t,e){var r={},i=[];if(!S.validate(t,qXe,r,i)){var n=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw n.errors=i,n}var s=S.derToOid(r.publicKeyOid);if(s!==be.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=be.createCertificationRequest();if(o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=Ae.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=$w(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=Ae.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=$w(o.siginfo.algorithmOid,r.csrSignatureParams,!1),o.signature=r.csrSignature,o.certificationRequestInfo=r.certificationRequestInfo,e){if(o.md=null,o.signatureOid in nt){var s=nt[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=Ae.md.sha1.create();break;case"md5WithRSAEncryption":o.md=Ae.md.md5.create();break;case"sha256WithRSAEncryption":o.md=Ae.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=Ae.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=Ae.md.sha512.create();break;case"RSASSA-PSS":o.md=Ae.md.sha256.create();break}}if(o.md===null){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=o.signatureOid,n}var a=S.toDer(o.certificationRequestInfo);o.md.update(a.getBytes())}var c=Ae.md.sha1.create();return o.subject.getField=function(u){return zl(o.subject,u)},o.subject.addField=function(u){co([u]),o.subject.attributes.push(u)},o.subject.attributes=be.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),o.subject.hash=c.digest().toHex(),o.publicKey=be.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(u){return zl(o,u)},o.addAttribute=function(u){co([u]),o.attributes.push(u)},o.attributes=be.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o};be.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return zl(t.subject,e)},t.subject.addField=function(e){co([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return zl(t,e)},t.addAttribute=function(e){co([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){co(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){co(e),t.attributes=e},t.sign=function(e,r){t.md=r||Ae.md.sha1.create();var i=nt[t.md.algorithm+"WithRSAEncryption"];if(!i){var n=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw n.algorithm=t.md.algorithm,n}t.signatureOid=t.siginfo.algorithmOid=i,t.certificationRequestInfo=be.getCertificationRequestInfo(t);var s=S.toDer(t.certificationRequestInfo);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){if(t.signatureOid in nt){var i=nt[t.signatureOid];switch(i){case"sha1WithRSAEncryption":r=Ae.md.sha1.create();break;case"md5WithRSAEncryption":r=Ae.md.md5.create();break;case"sha256WithRSAEncryption":r=Ae.md.sha256.create();break;case"sha384WithRSAEncryption":r=Ae.md.sha384.create();break;case"sha512WithRSAEncryption":r=Ae.md.sha512.create();break;case"RSASSA-PSS":r=Ae.md.sha256.create();break}}if(r===null){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=t.signatureOid,n}var s=t.certificationRequestInfo||be.getCertificationRequestInfo(t),o=S.toDer(s);r.update(o.getBytes())}if(r!==null){var a;switch(t.signatureOid){case nt.sha1WithRSAEncryption:break;case nt["RSASSA-PSS"]:var c,u;if(c=nt[t.signatureParameters.mgf.hash.algorithmOid],c===void 0||Ae.md[c]===void 0){var n=new Error("Unsupported MGF hash function.");throw n.oid=t.signatureParameters.mgf.hash.algorithmOid,n.name=c,n}if(u=nt[t.signatureParameters.mgf.algorithmOid],u===void 0||Ae.mgf[u]===void 0){var n=new Error("Unsupported MGF function.");throw n.oid=t.signatureParameters.mgf.algorithmOid,n.name=u,n}if(u=Ae.mgf[u].create(Ae.md[c].create()),c=nt[t.signatureParameters.hash.algorithmOid],c===void 0||Ae.md[c]===void 0){var n=new Error("Unsupported RSASSA-PSS hash function.");throw n.oid=t.signatureParameters.hash.algorithmOid,n.name=c,n}a=Ae.pss.create(Ae.md[c].create(),u,t.signatureParameters.saltLength);break}e=t.publicKey.verify(r.digest().getBytes(),t.signature,a)}return e},t};function g1(t){for(var e=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]),r,i,n=t.attributes,s=0;s<n.length;++s){r=n[s];var o=r.value,a=S.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===S.Type.UTF8&&(o=Ae.util.encodeUtf8(o))),i=S.create(S.Class.UNIVERSAL,S.Type.SET,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(r.type).getBytes()),S.create(S.Class.UNIVERSAL,a,!1,o)])]),e.value.push(i)}return e}function co(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in be.oids?e.name=be.oids[e.type]:e.shortName&&e.shortName in zr&&(e.name=be.oids[zr[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in be.oids)e.type=be.oids[e.name];else{var i=new Error("Attribute type not specified.");throw i.attribute=e,i}if(typeof e.shortName=="undefined"&&e.name&&e.name in zr&&(e.shortName=zr[e.name]),e.type===nt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=S.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(be.certificateExtensionToAsn1(H2e(e.extensions[n])))}if(typeof e.value=="undefined"){var i=new Error("Attribute value not specified.");throw i.attribute=e,i}}}function H2e(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in be.oids&&(t.name=be.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in be.oids)t.id=be.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var i=0,n=0,s=0;t.digitalSignature&&(n|=128,i=7),t.nonRepudiation&&(n|=64,i=6),t.keyEncipherment&&(n|=32,i=5),t.dataEncipherment&&(n|=16,i=4),t.keyAgreement&&(n|=8,i=3),t.keyCertSign&&(n|=4,i=2),t.cRLSign&&(n|=2,i=1),t.encipherOnly&&(n|=1,i=0),t.decipherOnly&&(s|=128,i=7);var o=String.fromCharCode(i);s!==0?o+=String.fromCharCode(n)+String.fromCharCode(s):n!==0&&(o+=String.fromCharCode(n)),t.value=S.create(S.Class.UNIVERSAL,S.Type.BITSTRING,!1,o)}else if(t.name==="basicConstraints")t.value=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(S.create(S.Class.UNIVERSAL,S.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var c in t)t[c]===!0&&(c in nt?a.push(S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(nt[c]).getBytes())):c.indexOf(".")!==-1&&a.push(S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var i=0,n=0;t.client&&(n|=128,i=7),t.server&&(n|=64,i=6),t.email&&(n|=32,i=5),t.objsign&&(n|=16,i=4),t.reserved&&(n|=8,i=3),t.sslCA&&(n|=4,i=2),t.emailCA&&(n|=2,i=1),t.objCA&&(n|=1,i=0);var o=String.fromCharCode(i);n!==0&&(o+=String.fromCharCode(n)),t.value=S.create(S.Class.UNIVERSAL,S.Type.BITSTRING,!1,o)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]);for(var u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var o=u.value;if(u.type===7&&u.ip){if(o=Ae.util.bytesFromIP(u.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?o=S.oidToDer(S.oidToDer(u.oid)):o=S.oidToDer(o));t.value.value.push(S.create(S.Class.CONTEXT_SPECIFIC,u.type,!1,o))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=S.create(S.Class.UNIVERSAL,S.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,h.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var d=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(S.create(S.Class.CONTEXT_SPECIFIC,0,!1,d))}if(t.authorityCertIssuer){var p=[S.create(S.Class.CONTEXT_SPECIFIC,4,!0,[g1(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(S.create(S.Class.CONTEXT_SPECIFIC,1,!0,p))}if(t.serialNumber){var y=Ae.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(S.create(S.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if(t.name==="cRLDistributionPoints"){t.value=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]);for(var a=t.value.value,m=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]),w=S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[]),u,l=0;l<t.altNames.length;++l){u=t.altNames[l];var o=u.value;if(u.type===7&&u.ip){if(o=Ae.util.bytesFromIP(u.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?o=S.oidToDer(S.oidToDer(u.oid)):o=S.oidToDer(o));w.value.push(S.create(S.Class.CONTEXT_SPECIFIC,u.type,!1,o))}m.value.push(S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[w])),a.push(m)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function kP(t,e){switch(t){case nt["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.hash.algorithmOid).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(S.create(S.Class.CONTEXT_SPECIFIC,1,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.mgf.algorithmOid).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.mgf.hash.algorithmOid).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(S.create(S.Class.CONTEXT_SPECIFIC,2,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(e.saltLength).getBytes())])),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,r);default:return S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")}}function UXe(t){var e=S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,i=0;i<r.length;++i){var n=r[i],s=n.value,o=S.Type.UTF8;"valueTagClass"in n&&(o=n.valueTagClass),o===S.Type.UTF8&&(s=Ae.util.encodeUtf8(s));var a=!1;"valueConstructed"in n&&(a=n.valueConstructed);var c=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(n.type).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SET,!0,[S.create(S.Class.UNIVERSAL,o,a,s)])]);e.value.push(c)}return e}var FXe=new Date("1950-01-01T00:00:00Z"),KXe=new Date("2050-01-01T00:00:00Z");function $2e(t){return t>=FXe&&t<KXe?S.create(S.Class.UNIVERSAL,S.Type.UTCTIME,!1,S.dateToUtcTime(t)):S.create(S.Class.UNIVERSAL,S.Type.GENERALIZEDTIME,!1,S.dateToGeneralizedTime(t))}be.getTBSCertificate=function(t){var e=$2e(t.validity.notBefore),r=$2e(t.validity.notAfter),i=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(t.version).getBytes())]),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,Ae.util.hexToBytes(t.serialNumber)),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(t.siginfo.algorithmOid).getBytes()),kP(t.siginfo.algorithmOid,t.siginfo.parameters)]),g1(t.issuer),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[e,r]),g1(t.subject),be.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&i.value.push(S.create(S.Class.CONTEXT_SPECIFIC,1,!0,[S.create(S.Class.UNIVERSAL,S.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&i.value.push(S.create(S.Class.CONTEXT_SPECIFIC,2,!0,[S.create(S.Class.UNIVERSAL,S.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&i.value.push(be.certificateExtensionsToAsn1(t.extensions)),i};be.getCertificationRequestInfo=function(t){var e=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(t.version).getBytes()),g1(t.subject),be.publicKeyToAsn1(t.publicKey),UXe(t)]);return e};be.distinguishedNameToAsn1=function(t){return g1(t)};be.certificateToAsn1=function(t){var e=t.tbsCertificate||be.getTBSCertificate(t);return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[e,S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(t.signatureOid).getBytes()),kP(t.signatureOid,t.signatureParameters)]),S.create(S.Class.UNIVERSAL,S.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};be.certificateExtensionsToAsn1=function(t){var e=S.create(S.Class.CONTEXT_SPECIFIC,3,!0,[]),r=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]);e.value.push(r);for(var i=0;i<t.length;++i)r.value.push(be.certificateExtensionToAsn1(t[i]));return e};be.certificateExtensionToAsn1=function(t){var e=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]);e.value.push(S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(t.id).getBytes())),t.critical&&e.value.push(S.create(S.Class.UNIVERSAL,S.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=S.toDer(r).getBytes()),e.value.push(S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,r)),e};be.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||be.getCertificationRequestInfo(t);return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[e,S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(t.signatureOid).getBytes()),kP(t.signatureOid,t.signatureParameters)]),S.create(S.Class.UNIVERSAL,S.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};be.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(o){var a=r(o.issuer);return a},e.addCertificate=function(o){if(typeof o=="string"&&(o=Ae.pki.certificateFromPem(o)),i(o.subject),!e.hasCertificate(o))if(o.subject.hash in e.certs){var a=e.certs[o.subject.hash];Ae.util.isArray(a)||(a=[a]),a.push(o),e.certs[o.subject.hash]=a}else e.certs[o.subject.hash]=o},e.hasCertificate=function(o){typeof o=="string"&&(o=Ae.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;Ae.util.isArray(a)||(a=[a]);for(var c=S.toDer(be.certificateToAsn1(o)).getBytes(),u=0;u<a.length;++u){var l=S.toDer(be.certificateToAsn1(a[u])).getBytes();if(c===l)return!0}return!1},e.listAllCertificates=function(){var o=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!Ae.util.isArray(c))o.push(c);else for(var u=0;u<c.length;++u)o.push(c[u])}return o},e.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=Ae.pki.certificateFromPem(o)),i(o.subject),!e.hasCertificate(o))return null;var c=r(o.subject);if(!Ae.util.isArray(c))return a=e.certs[o.subject.hash],delete e.certs[o.subject.hash],a;for(var u=S.toDer(be.certificateToAsn1(o)).getBytes(),l=0;l<c.length;++l){var h=S.toDer(be.certificateToAsn1(c[l])).getBytes();u===h&&(a=c[l],c.splice(l,1))}return c.length===0&&delete e.certs[o.subject.hash],a};function r(o){return i(o),e.certs[o.hash]||null}function i(o){if(!o.hash){var a=Ae.md.sha1.create();o.attributes=be.RDNAttributesAsArray(g1(o),a),o.hash=a.digest().toHex()}}if(t)for(var n=0;n<t.length;++n){var s=t[n];e.addCertificate(s)}return e};be.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};be.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var i=e.slice(0),n=r.validityCheckDate;typeof n=="undefined"&&(n=new Date);var s=!0,o=null,a=0;do{var c=e.shift(),u=null,l=!1;if(n&&(n<c.validity.notBefore||n>c.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:be.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:n}),o===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(l=!0,u=c),u){var h=u;Ae.util.isArray(h)||(h=[h]);for(var d=!1;!d&&h.length>0;){u=h.shift();try{d=u.verify(c)}catch(O){}}d||(o={message:"Certificate signature is invalid.",error:be.certificateError.bad_certificate})}o===null&&(!u||l)&&!t.hasCertificate(c)&&(o={message:"Certificate is not trusted.",error:be.certificateError.unknown_ca})}if(o===null&&u&&!c.isIssuer(u)&&(o={message:"Certificate issuer is invalid.",error:be.certificateError.bad_certificate}),o===null)for(var p={keyUsage:!0,basicConstraints:!0},y=0;o===null&&y<c.extensions.length;++y){var m=c.extensions[y];m.critical&&!(m.name in p)&&(o={message:"Certificate has an unsupported critical extension.",error:be.certificateError.unsupported_certificate})}if(o===null&&(!s||e.length===0&&(!u||l))){var w=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||w===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:be.certificateError.bad_certificate}),o===null&&w!==null&&!w.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:be.certificateError.bad_certificate}),o===null&&b!==null&&"pathLenConstraint"in w){var v=a-1;v>w.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:be.certificateError.bad_certificate})}}var x=o===null?!0:o.error,B=r.verify?r.verify(x,a,i):x;if(B===!0)o=null;else throw x===!0&&(o={message:"The application rejected the certificate.",error:be.certificateError.bad_certificate}),(B||B===0)&&(typeof B=="object"&&!Ae.util.isArray(B)?(B.message&&(o.message=B.message),B.error&&(o.error=B.error)):typeof B=="string"&&(o.error=B)),o;s=!1,++a}while(e.length>0);return!0}});var X2e=g((hkt,Y2e)=>{f();var Ie=vt();Gd();Nu();l4();zd();p4();M2e();hf();fr();DP();var z=Ie.asn1,An=Y2e.exports=Ie.pkcs7=Ie.pkcs7||{};An.messageFromPem=function(t){var e=Ie.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var i=z.fromDer(e.body);return An.messageFromAsn1(i)};An.messageToPem=function(t,e){var r={type:"PKCS7",body:z.toDer(t.toAsn1()).getBytes()};return Ie.pem.encode(r,{maxline:e})};An.messageFromAsn1=function(t){var e={},r=[];if(!z.validate(t,An.asn1.contentInfoValidator,e,r)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw i.errors=r,i}var n=z.derToOid(e.contentType),s;switch(n){case Ie.pki.oids.envelopedData:s=An.createEnvelopedData();break;case Ie.pki.oids.encryptedData:s=An.createEncryptedData();break;case Ie.pki.oids.signedData:s=An.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+n+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s};An.createSignedData=function(){var t=null;return t={type:Ie.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(i){if(BP(t,i,An.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var n=t.rawCapture.certificates.value,s=0;s<n.length;++s)t.certificates.push(Ie.pki.certificateFromAsn1(n[s]))},toAsn1:function(){t.contentInfo||t.sign();for(var i=[],n=0;n<t.certificates.length;++n)i.push(Ie.pki.certificateToAsn1(t.certificates[n]));var s=[],o=z.create(z.Class.CONTEXT_SPECIFIC,0,!0,[z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.INTEGER,!1,z.integerToDer(t.version).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return i.length>0&&o.value[0].value.push(z.create(z.Class.CONTEXT_SPECIFIC,0,!0,i)),s.length>0&&o.value[0].value.push(z.create(z.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(z.create(z.Class.UNIVERSAL,z.Type.SET,!0,t.signerInfos)),z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.type).getBytes()),o])},addSigner:function(i){var n=i.issuer,s=i.serialNumber;if(i.certificate){var o=i.certificate;typeof o=="string"&&(o=Ie.pki.certificateFromPem(o)),n=o.issuer.attributes,s=o.serialNumber}var a=i.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Ie.pki.privateKeyFromPem(a));var c=i.digestAlgorithm||Ie.pki.oids.sha1;switch(c){case Ie.pki.oids.sha1:case Ie.pki.oids.sha256:case Ie.pki.oids.sha384:case Ie.pki.oids.sha512:case Ie.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=i.authenticatedAttributes||[];if(u.length>0){for(var l=!1,h=!1,d=0;d<u.length;++d){var p=u[d];if(!l&&p.type===Ie.pki.oids.contentType){if(l=!0,h)break;continue}if(!h&&p.type===Ie.pki.oids.messageDigest){if(h=!0,l)break;continue}}if(!l||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:n,serialNumber:s,digestAlgorithm:c,signatureAlgorithm:Ie.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(i){if(i=i||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(Ie.pki.oids.data).getBytes())]),"content"in t)){var n;t.content instanceof Ie.util.ByteBuffer?n=t.content.bytes():typeof t.content=="string"&&(n=Ie.util.encodeUtf8(t.content)),i.detached?t.detachedContent=z.create(z.Class.UNIVERSAL,z.Type.OCTETSTRING,!1,n):t.contentInfo.value.push(z.create(z.Class.CONTEXT_SPECIFIC,0,!0,[z.create(z.Class.UNIVERSAL,z.Type.OCTETSTRING,!1,n)]))}if(t.signers.length!==0){var s=e();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(i){typeof i=="string"&&(i=Ie.pki.certificateFromPem(i)),t.certificates.push(i)},addCertificateRevokationList:function(i){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var i={},n=0;n<t.signers.length;++n){var s=t.signers[n],o=s.digestAlgorithm;o in i||(i[o]=Ie.md[Ie.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=i[o]:s.md=Ie.md[Ie.pki.oids[o]].create()}t.digestAlgorithmIdentifiers=[];for(var o in i)t.digestAlgorithmIdentifiers.push(z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(o).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.NULL,!1,"")]));return i}function r(i){var n;if(t.detachedContent?n=t.detachedContent:(n=t.contentInfo.value[1],n=n.value[0]),!n)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=z.derToOid(t.contentInfo.value[0].value),o=z.toDer(n);o.getByte(),z.getBerValueLength(o),o=o.getBytes();for(var a in i)i[a].start().update(o);for(var c=new Date,u=0;u<t.signers.length;++u){var l=t.signers[u];if(l.authenticatedAttributes.length===0){if(s!==Ie.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=z.create(z.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=z.create(z.Class.UNIVERSAL,z.Type.SET,!0,[]),d=0;d<l.authenticatedAttributes.length;++d){var p=l.authenticatedAttributes[d];p.type===Ie.pki.oids.messageDigest?p.value=i[l.digestAlgorithm].digest():p.type===Ie.pki.oids.signingTime&&(p.value||(p.value=c)),h.value.push(NP(p)),l.authenticatedAttributesAsn1.value.push(NP(p))}o=z.toDer(h).getBytes(),l.md.start().update(o)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=WXe(t.signers)}};An.createEncryptedData=function(){var t=null;return t={type:Ie.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ie.pki.oids["aes256-CBC"]},fromAsn1:function(e){BP(t,e,An.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),W2e(t)}},t};An.createEnvelopedData=function(){var t=null;return t={type:Ie.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ie.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=BP(t,e,An.asn1.envelopedDataValidator);t.recipients=HXe(r.recipientInfos.value)},toAsn1:function(){return z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.type).getBytes()),z.create(z.Class.CONTEXT_SPECIFIC,0,!0,[z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.INTEGER,!1,z.integerToDer(t.version).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.SET,!0,$Xe(t.recipients)),z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,YXe(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,i=0;i<t.recipients.length;++i){var n=t.recipients[i],s=n.issuer;if(n.serialNumber===e.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return n}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Ie.pki.oids.rsaEncryption:case Ie.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Ie.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}W2e(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Ie.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var i,n,s;switch(r){case Ie.pki.oids["aes128-CBC"]:i=16,n=16,s=Ie.aes.createEncryptionCipher;break;case Ie.pki.oids["aes192-CBC"]:i=24,n=16,s=Ie.aes.createEncryptionCipher;break;case Ie.pki.oids["aes256-CBC"]:i=32,n=16,s=Ie.aes.createEncryptionCipher;break;case Ie.pki.oids["des-EDE3-CBC"]:i=24,n=8,s=Ie.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Ie.util.createBuffer(Ie.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Ie.util.createBuffer(Ie.random.getBytes(n));var o=s(e);if(o.start(t.encryptedContent.parameter.copy()),o.update(t.content),!o.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=o.output}for(var a=0;a<t.recipients.length;++a){var c=t.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ie.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function VXe(t){var e={},r=[];if(!z.validate(t,An.asn1.recipientInfoValidator,e,r)){var i=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw i.errors=r,i}return{version:e.version.charCodeAt(0),issuer:Ie.pki.RDNAttributesAsArray(e.issuer),serialNumber:Ie.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:z.derToOid(e.encAlgorithm),parameter:e.encParameter.value,content:e.encKey}}}function zXe(t){return z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.INTEGER,!1,z.integerToDer(t.version).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[Ie.pki.distinguishedNameToAsn1({attributes:t.issuer}),z.create(z.Class.UNIVERSAL,z.Type.INTEGER,!1,Ie.util.hexToBytes(t.serialNumber))]),z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.encryptedContent.algorithm).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.NULL,!1,"")]),z.create(z.Class.UNIVERSAL,z.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function HXe(t){for(var e=[],r=0;r<t.length;++r)e.push(VXe(t[r]));return e}function $Xe(t){for(var e=[],r=0;r<t.length;++r)e.push(zXe(t[r]));return e}function GXe(t){var e=z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.INTEGER,!1,z.integerToDer(t.version).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[Ie.pki.distinguishedNameToAsn1({attributes:t.issuer}),z.create(z.Class.UNIVERSAL,z.Type.INTEGER,!1,Ie.util.hexToBytes(t.serialNumber))]),z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.digestAlgorithm).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.signatureAlgorithm).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.NULL,!1,"")])),e.value.push(z.create(z.Class.UNIVERSAL,z.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=z.create(z.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var n=t.unauthenticatedAttributes[i];r.values.push(NP(n))}e.value.push(r)}return e}function WXe(t){for(var e=[],r=0;r<t.length;++r)e.push(GXe(t[r]));return e}function NP(t){var e;if(t.type===Ie.pki.oids.contentType)e=z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.value).getBytes());else if(t.type===Ie.pki.oids.messageDigest)e=z.create(z.Class.UNIVERSAL,z.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Ie.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),n=t.value;if(typeof n=="string"){var s=Date.parse(n);isNaN(s)?n.length===13?n=z.utcTimeToDate(n):n=z.generalizedTimeToDate(n):n=new Date(s)}n>=r&&n<i?e=z.create(z.Class.UNIVERSAL,z.Type.UTCTIME,!1,z.dateToUtcTime(n)):e=z.create(z.Class.UNIVERSAL,z.Type.GENERALIZEDTIME,!1,z.dateToGeneralizedTime(n))}return z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.type).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.SET,!0,[e])])}function YXe(t){return[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(Ie.pki.oids.data).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.SEQUENCE,!0,[z.create(z.Class.UNIVERSAL,z.Type.OID,!1,z.oidToDer(t.algorithm).getBytes()),z.create(z.Class.UNIVERSAL,z.Type.OCTETSTRING,!1,t.parameter.getBytes())]),z.create(z.Class.CONTEXT_SPECIFIC,0,!0,[z.create(z.Class.UNIVERSAL,z.Type.OCTETSTRING,!1,t.content.getBytes())])]}function BP(t,e,r){var i={},n=[];if(!z.validate(e,r,i,n)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var o=z.derToOid(i.contentType);if(o!==Ie.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var a="";if(Ie.util.isArray(i.encryptedContent))for(var c=0;c<i.encryptedContent.length;++c){if(i.encryptedContent[c].type!==z.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=i.encryptedContent[c].value}else a=i.encryptedContent;t.encryptedContent={algorithm:z.derToOid(i.encAlgorithm),parameter:Ie.util.createBuffer(i.encParameter.value),content:Ie.util.createBuffer(a)}}if(i.content){var a="";if(Ie.util.isArray(i.content))for(var c=0;c<i.content.length;++c){if(i.content[c].type!==z.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=i.content[c].value}else a=i.content;t.content=Ie.util.createBuffer(a)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function W2e(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Ie.pki.oids["aes128-CBC"]:case Ie.pki.oids["aes192-CBC"]:case Ie.pki.oids["aes256-CBC"]:e=Ie.aes.createDecryptionCipher(t.encryptedContent.key);break;case Ie.pki.oids.desCBC:case Ie.pki.oids["des-EDE3-CBC"]:e=Ie.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var J2e=g((dkt,Z2e)=>{f();"use strict";DP();var XXe=vt(),Q2e=XXe.pki,QXe=(t,e)=>{let r=Q2e.setRsaPublicKey(e.n,e.e),i=Q2e.createCertificate();i.publicKey=r,i.serialNumber="01",i.validity.notBefore=new Date,i.validity.notAfter=new Date,i.validity.notAfter.setFullYear(i.validity.notBefore.getFullYear()+10);let n=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return i.setSubject(n),i.setIssuer(n),i.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),i.sign(e),i};async function ZXe(t,e){let r=t.map(e),n=(await Promise.all(r)).findIndex(s=>s);return t[n]}Z2e.exports={certificateForKey:QXe,findAsync:ZXe}});var iye=g((pkt,rye)=>{f();"use strict";X2e();K7();var Hl=vt(),{certificateForKey:JXe,findAsync:eQe}=J2e(),m1=ur(),{fromString:eye}=(ht(),ri),{toString:tQe}=(Qe(),rr),{codes:b1}=lr(),LP=new WeakMap,tye=class{constructor(e,r){if(!e)throw m1(new Error("keychain is required"),b1.ERR_KEYCHAIN_REQUIRED);this.keychain=e,LP.set(this,{dek:r})}async encrypt(e,r){if(!(r instanceof Uint8Array))throw m1(new Error("Plain data must be a Uint8Array"),b1.ERR_INVALID_PARAMETERS);let i=await this.keychain.findKeyByName(e),n=await this.keychain._getPrivateKey(e),s=LP.get(this).dek,o=Hl.pki.decryptRsaPrivateKey(n,s),a=await JXe(i,o),c=Hl.pkcs7.createEnvelopedData();c.addRecipient(a),c.content=Hl.util.createBuffer(r),c.encrypt();let u=Hl.asn1.toDer(c.toAsn1()).getBytes();return eye(u,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw m1(new Error("CMS data is required"),b1.ERR_INVALID_PARAMETERS);let r;try{let u=Hl.util.createBuffer(tQe(e,"ascii")),l=Hl.asn1.fromDer(u);r=Hl.pkcs7.messageFromAsn1(l)}catch(u){throw m1(new Error("Invalid CMS: "+u.message),b1.ERR_INVALID_CMS)}let i=r.recipients.filter(u=>u.issuer.find(l=>l.shortName==="O"&&l.value==="ipfs")).filter(u=>u.issuer.find(l=>l.shortName==="CN")).map(u=>({recipient:u,keyId:u.issuer.find(l=>l.shortName==="CN").value})),n=await eQe(i,async u=>{try{if(await this.keychain.findKeyById(u.keyId))return!0}catch(l){return!1}return!1});if(!n){let u=i.map(l=>l.keyId);throw m1(new Error("Decryption needs one of the key(s): "+u.join(", ")),b1.ERR_MISSING_KEYS,{missingKeys:u})}let s=await this.keychain.findKeyById(n.keyId);if(!s)throw m1(new Error("No key available to decrypto"),b1.ERR_NO_KEY);let o=await this.keychain._getPrivateKey(s.name),a=LP.get(this).dek,c=Hl.pki.decryptRsaPrivateKey(o,a);return r.decrypt(n.recipient,c),eye(r.content.getBytes(),"ascii")}};rye.exports=tye});var lye=g((ykt,uye)=>{f();"use strict";var nye=ce(),sye=Object.assign(nye("libp2p:keychain"),{error:nye("libp2p:keychain:err")}),rQe=D2e(),iQe=du(),$h=Ic(),{Key:oye}=(Ar(),qd),nQe=iye(),Or=ur(),{codes:kr}=lr(),{toString:Gh}=(Qe(),rr),{fromString:cu}=(ht(),ri);$7();var sQe="/pkcs8/",aye="/info/",$l=new WeakMap,Wh={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},MP={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function uu(t){return!t||typeof t!="string"?!1:t===rQe(t.trim())}async function Jt(t){let e=200,r=1e3,i=Math.random()*(r-e)+e;throw await new Promise(n=>setTimeout(n,i)),t}function rc(t){return new oye(sQe+t)}function Gl(t){return new oye(aye+t)}var cye=class{constructor(e,r){if(!e)throw new Error("store is required");if(this.store=e,this.opts=iQe(MP,r),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<Wh.minKeyLength)throw new Error(`dek.keyLength must be least ${Wh.minKeyLength} bytes`);if(this.opts.dek.salt.length<Wh.minSaltLength)throw new Error(`dek.saltLength must be least ${Wh.minSaltLength} bytes`);if(this.opts.dek.iterationCount<Wh.minIterationCount)throw new Error(`dek.iterationCount must be least ${Wh.minIterationCount}`);let i=this.opts.pass?$h.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";$l.set(this,{dek:i})}get cms(){return new nQe(this,$l.get(this).dek)}static generateOptions(){let e=Object.assign({},MP),r=Math.ceil(Wh.minSaltLength/3)*3;return e.dek.salt=Gh($h.randomBytes(r),"base64"),e}static get options(){return MP}async createKey(e,r,i=2048){let n=this;if(!uu(e)||e==="self")return Jt(Or(new Error(`Invalid key name '${e}'`),kr.ERR_INVALID_KEY_NAME));if(typeof r!="string")return Jt(Or(new Error(`Invalid key type '${r}'`),kr.ERR_INVALID_KEY_TYPE));let s=rc(e);if(await n.store.has(s))return Jt(Or(new Error(`Key '${e}' already exists`),kr.ERR_KEY_ALREADY_EXISTS));switch(r.toLowerCase()){case"rsa":if(!Number.isSafeInteger(i)||i<2048)return Jt(Or(new Error(`Invalid RSA key size ${i}`),kr.ERR_INVALID_KEY_SIZE));break;default:break}let a;try{let c=await $h.keys.generateKeyPair(r,i),u=await c.id(),l=$l.get(this).dek,h=await c.export(l);a={name:e,id:u};let d=n.store.batch();d.put(s,cu(h)),d.put(Gl(e),cu(JSON.stringify(a))),await d.commit()}catch(c){return Jt(c)}return a}async listKeys(){let e=this,r={prefix:aye},i=[];for await(let n of e.store.query(r))i.push(JSON.parse(Gh(n.value)));return i}async findKeyById(e){try{return(await this.listKeys()).find(i=>i.id===e)}catch(r){return Jt(r)}}async findKeyByName(e){if(!uu(e))return Jt(Or(new Error(`Invalid key name '${e}'`),kr.ERR_INVALID_KEY_NAME));let r=Gl(e);try{let i=await this.store.get(r);return JSON.parse(Gh(i))}catch(i){return Jt(Or(new Error(`Key '${e}' does not exist. ${i.message}`),kr.ERR_KEY_NOT_FOUND))}}async removeKey(e){let r=this;if(!uu(e)||e==="self")return Jt(Or(new Error(`Invalid key name '${e}'`),kr.ERR_INVALID_KEY_NAME));let i=rc(e),n=await r.findKeyByName(e),s=r.store.batch();return s.delete(i),s.delete(Gl(e)),await s.commit(),n}async renameKey(e,r){let i=this;if(!uu(e)||e==="self")return Jt(Or(new Error(`Invalid old key name '${e}'`),kr.ERR_OLD_KEY_NAME_INVALID));if(!uu(r)||r==="self")return Jt(Or(new Error(`Invalid new key name '${r}'`),kr.ERR_NEW_KEY_NAME_INVALID));let n=rc(e),s=rc(r),o=Gl(e),a=Gl(r);if(await i.store.has(s))return Jt(Or(new Error(`Key '${r}' already exists`),kr.ERR_KEY_ALREADY_EXISTS));try{let u=await i.store.get(n),l=await i.store.get(o),h=JSON.parse(Gh(l));h.name=r;let d=i.store.batch();return d.put(s,u),d.put(a,cu(JSON.stringify(h))),d.delete(n),d.delete(o),await d.commit(),h}catch(u){return Jt(u)}}async exportKey(e,r){if(!uu(e))return Jt(Or(new Error(`Invalid key name '${e}'`),kr.ERR_INVALID_KEY_NAME));if(!r)return Jt(Or(new Error("Password is required"),kr.ERR_PASSWORD_REQUIRED));let i=rc(e);try{let n=await this.store.get(i),s=Gh(n),o=$l.get(this).dek;return(await $h.keys.import(s,o)).export(r)}catch(n){return Jt(n)}}async importKey(e,r,i){let n=this;if(!uu(e)||e==="self")return Jt(Or(new Error(`Invalid key name '${e}'`),kr.ERR_INVALID_KEY_NAME));if(!r)return Jt(Or(new Error("PEM encoded key is required"),kr.ERR_PEM_REQUIRED));let s=rc(e);if(await n.store.has(s))return Jt(Or(new Error(`Key '${e}' already exists`),kr.ERR_KEY_ALREADY_EXISTS));let a;try{a=await $h.keys.import(r,i)}catch(h){return Jt(Or(new Error("Cannot read the key, most likely the password is wrong"),kr.ERR_CANNOT_READ_KEY))}let c;try{c=await a.id();let h=$l.get(this).dek;r=await a.export(h)}catch(h){return Jt(h)}let u={name:e,id:c},l=n.store.batch();return l.put(s,cu(r)),l.put(Gl(e),cu(JSON.stringify(u))),await l.commit(),u}async importPeer(e,r){let i=this;if(!uu(e))return Jt(Or(new Error(`Invalid key name '${e}'`),kr.ERR_INVALID_KEY_NAME));if(!r||!r.privKey)return Jt(Or(new Error("Peer.privKey is required"),kr.ERR_MISSING_PRIVATE_KEY));let n=r.privKey,s=rc(e);if(await i.store.has(s))return Jt(Or(new Error(`Key '${e}' already exists`),kr.ERR_KEY_ALREADY_EXISTS));try{let a=await n.id(),c=$l.get(this).dek,u=await n.export(c),l={name:e,id:a},h=i.store.batch();return h.put(s,cu(u)),h.put(Gl(e),cu(JSON.stringify(l))),await h.commit(),l}catch(a){return Jt(a)}}async _getPrivateKey(e){if(!uu(e))return Jt(Or(new Error(`Invalid key name '${e}'`),kr.ERR_INVALID_KEY_NAME));try{let r=rc(e),i=await this.store.get(r);return Gh(i)}catch(r){return Jt(Or(new Error(`Key '${e}' does not exist. ${r.message}`),kr.ERR_KEY_NOT_FOUND))}}async rotateKeychainPass(e,r){if(typeof e!="string")return Jt(Or(new Error(`Invalid old pass type '${typeof e}'`),kr.ERR_INVALID_OLD_PASS_TYPE));if(typeof r!="string")return Jt(Or(new Error(`Invalid new pass type '${typeof r}'`),kr.ERR_INVALID_NEW_PASS_TYPE));if(r.length<20)return Jt(Or(new Error(`Invalid pass length ${r.length}`),kr.ERR_INVALID_PASS_LENGTH));sye("recreating keychain");let i=$l.get(this).dek;this.opts.pass=r;let n=r?$h.pbkdf2(r,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";$l.set(this,{dek:n});let s=await this.listKeys();for(let o of s){let a=await this.store.get(rc(o.name)),c=Gh(a),u=await $h.keys.import(c,i),l=n.toString(),h=await u.export(l),d=this.store.batch(),p={name:o.name,id:o.id};d.put(rc(o.name),cu(h)),d.put(Gl(o.name),cu(JSON.stringify(p))),await d.commit()}sye("keychain reconstructed")}};uye.exports=cye});var Ww=g((Gw,fye)=>{f();(function(t,e){typeof Gw=="object"&&typeof fye!="undefined"?e(Gw):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.streamingIterables={}))})(Gw,function(t){"use strict";async function*e(I,T){let D=[];for await(let M of T)D.push(M),D.length===I&&(yield D,D=[]);D.length>0&&(yield D)}function*r(I,T){let D=[];for(let M of T)D.push(M),D.length===I&&(yield D,D=[]);D.length>0&&(yield D)}function i(I,T){return T===void 0?D=>i(I,D):T[Symbol.asyncIterator]?e(I,T):r(I,T)}function n(I){if(typeof I.next=="function")return I;if(typeof I[Symbol.iterator]=="function")return I[Symbol.iterator]();if(typeof I[Symbol.asyncIterator]=="function")return I[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function s(){let I,T;return{promise:new Promise((M,j)=>{T=M,I=j}),reject:I,resolve:T}}function o(I,T){let D=n(T),M=[],j=[],V=!1,G=!1;function X(){for(;j.length>0&&M.length>0;){let ke=j.shift(),{error:it,value:$t}=M.shift();it?ke.reject(it):ke.resolve({done:!1,value:$t})}for(;j.length>0&&G;){let{resolve:ke}=j.shift();ke({done:!0,value:void 0})}}async function re(){if(!G&&!V&&!(M.length>=I)){V=!0;try{let{done:ke,value:it}=await D.next();ke?G=!0:M.push({value:it})}catch(ke){G=!0,M.push({error:ke})}X(),V=!1,re()}}async function me(){if(M.length>0){let{error:it,value:$t}=M.shift();if(it)throw it;return re(),{done:!1,value:$t}}if(G)return{done:!0,value:void 0};let ke=s();return j.push(ke),re(),ke.promise}let Ee={next:me,[Symbol.asyncIterator]:()=>Ee};return Ee}function*a(I,T){let D=[],M;try{for(let j of T)D.push(j),!(D.length<=I)&&(yield D.shift())}catch(j){M=j}for(let j of D)yield j;if(M)throw M}function c(I,T){return T===void 0?D=>c(I,D):I===0?T:T[Symbol.asyncIterator]?o(I,T):a(I,T)}async function u(I){let T=[];for await(let D of I)T.push(D);return T}function l(I){return I[Symbol.asyncIterator]?u(I):Array.from(I)}async function*h(I){for await(let T of I)yield*T}function*d(I){for(let T of I)yield*T}function p(...I){return I.find(D=>D[Symbol.asyncIterator]!==void 0)?h(I):d(I)}async function y(I){for await(let T of I);}function m(I){if(I[Symbol.asyncIterator])return y(I);for(let T of I);}async function*w(I,T){for await(let D of T)await I(D)&&(yield D)}function b(I,T){return T===void 0?D=>w(I,D):w(I,T)}async function*v(I){for await(let T of I)T&&typeof T!="string"&&(T[Symbol.iterator]||T[Symbol.asyncIterator])?yield*v(T):yield T}async function*x(I,T){for await(let D of T)yield await I(D)}function B(I,T){return T===void 0?D=>x(I,D):x(I,T)}function O(I,T){return T===void 0?D=>O(I,D):b(D=>D!=null,v(B(I,T)))}function R(I,T,D){let M=n(D),j=[],V=[],G=!1,X=!1,re=0,me=null;function Ee(){for(;V.length>0&&j.length>0;){let{resolve:Ge}=V.shift(),et=j.shift();Ge({done:!1,value:et})}for(;V.length>0&&re===0&&G;){let{resolve:Ge,reject:et}=V.shift();me?(et(me),me=null):Ge({done:!0,value:void 0})}}async function ke(){if(G){Ee();return}if(!X&&!(re+j.length>=I)){X=!0,re++;try{let{done:Ge,value:et}=await M.next();Ge?(G=!0,re--,Ee()):it(et)}catch(Ge){G=!0,re--,me=Ge,Ee()}X=!1,ke()}}async function it(Ge){try{let et=await T(Ge);if(et&&et[Symbol.asyncIterator])for await(let lu of et)j.push(lu);else j.push(et)}catch(et){G=!0,me=et}re--,Ee(),ke()}async function $t(){if(j.length===0){let et=s();return V.push(et),ke(),et.promise}let Ge=j.shift();return ke(),{done:!1,value:Ge}}let ot={next:$t,[Symbol.asyncIterator]:()=>ot};return ot}function N(I,T,D){return T===void 0?(M,j)=>j?N(I,M,j):N(I,M):D===void 0?M=>N(I,T,M):b(M=>M!=null,v(R(I,T,D)))}async function F(I){return new Promise(T=>{I.once("readable",()=>{T()})})}async function*U(I){for(;;){let T=I.read();if(T!==null){yield T;continue}if(I._readableState.ended)break;await F(I)}}function ie(I){return typeof I[Symbol.asyncIterator]=="function"?I:U(I)}async function*te(...I){let T=new Set(I.map(n));for(;T.size>0;)for(let D of T){let M=await D.next();M.done?T.delete(D):yield M.value}}function ae(I,...T){let D=I();for(let M of T)D=M(D);return D}async function*ue(I,T,D){let M=null,j=re=>({value:T(re)}),V=async function*(re){for await(let me of re){if(M)return;yield me}},G=ae(()=>D,c(1),V,B(j),c(I-1)),X=n(G);for(;;){let{value:re,done:me}=await X.next();if(me)break;try{let Ee=await re.value;M||(yield Ee)}catch(Ee){M=Ee}}if(M)throw M}function De(I,T,D){return T===void 0?(M,j)=>De(I,M,j):D===void 0?M=>De(I,T,M):I===1?B(T,D):ue(I,T,D)}function ve(I,T,D){return T===void 0?(M,j)=>j?ve(I,M,j):ve(I,M):D===void 0?M=>ve(I,T,M):b(M=>M!=null,v(De(I,T,D)))}async function*Ne(...I){let T=I.map(n),D=new Set,M=new Map,j=null,V=null,G=null,X=ke=>{j=ke,V&&V(ke)},re=ke=>{G&&G(ke)},me=()=>new Promise((ke,it)=>{if(j&&it(j),M.size>0)return ke();G=ke,V=it}),Ee=ke=>{let it=Promise.resolve(ke.next()).then(async({done:$t,value:ot})=>{$t||M.set(ke,ot),D.delete(it)});D.add(it),it.then(re,X)};for(let ke of T)Ee(ke);for(;;){if(D.size===0&&M.size===0)return;await me();for(let[ke,it]of M)M.delete(ke),yield it,Ee(ke)}}async function ee(I,T,D){let M=T;for await(let j of D)M=await I(M,j);return M}function Me(I,T,D){return T===void 0?(M,j)=>j?ee(I,M,j):Me(I,M):D===void 0?M=>Me(I,T,M):ee(I,T,D)}async function*dt(I,T){let D=0;for await(let M of T)if(yield await M,D++,D>=I)break}function*ze(I,T){let D=0;for(let M of T)if(yield M,D++,D>=I)break}function $e(I,T){return T===void 0?D=>$e(I,D):T[Symbol.asyncIterator]?dt(I,T):ze(I,T)}async function*le(I,T){for await(let D of T)await I(D),yield D}function Z(I,T){return T===void 0?D=>le(I,D):le(I,T)}function we(I,T){let D=I[0]+T[0],M=I[1]+T[1];if(M>=1e9){let j=M%1e9;D+=(M-j)/1e9,M=j}return[D,M]}async function*je(I,T){let D=T[Symbol.asyncIterator](),M=[0,0];for(;;){let j=process.hrtime(),{value:V,done:G}=await D.next(),X=process.hrtime(j);if(M=we(M,X),I.progress&&I.progress(X,M),G)return I.total&&I.total(M),V;yield V}}function*Ue(I,T){let D=T[Symbol.iterator](),M=[0,0];for(;;){let j=process.hrtime(),{value:V,done:G}=D.next(),X=process.hrtime(j);if(M=we(M,X),I.progress&&I.progress(X,M),G)return I.total&&I.total(M),V;yield V}}function Re(I={},T){return T===void 0?D=>Re(I,D):T[Symbol.asyncIterator]!==void 0?je(I,T):Ue(I,T)}function rt(I,T,D){let M=n(D),j=[],V=[],G=!1,X=!1,re=0,me=null;function Ee(){for(;V.length>0&&j.length>0;){let{resolve:Ge}=V.shift(),et=j.shift();Ge({done:!1,value:et})}for(;V.length>0&&re===0&&G;){let{resolve:Ge,reject:et}=V.shift();me?(et(me),me=null):Ge({done:!0,value:void 0})}}async function ke(){if(G){Ee();return}if(!X&&!(re+j.length>=I)){X=!0,re++;try{let{done:Ge,value:et}=await M.next();Ge?(G=!0,re--,Ee()):it(et)}catch(Ge){G=!0,re--,me=Ge,Ee()}X=!1,ke()}}async function it(Ge){try{let et=await T(Ge);j.push(et)}catch(et){G=!0,me=et}re--,Ee(),ke()}async function $t(){if(j.length===0){let et=s();return V.push(et),ke(),et.promise}let Ge=j.shift();return ke(),{done:!1,value:Ge}}let ot={next:$t,[Symbol.asyncIterator]:()=>ot};return ot}function P(I,T,D){return T===void 0?(M,j)=>j?P(I,M,j):P(I,M):D===void 0?M=>P(I,T,M):rt(I,T,D)}async function k(I,T){let D=null,M=null,j=null,V=me=>{D=me,M&&M(me)},G=()=>{j&&j()},X=()=>{I.removeListener("error",V),I.removeListener("drain",G)};I.once("error",V);let re=()=>new Promise((me,Ee)=>{if(D)return Ee(D);I.once("drain",G),j=me,M=Ee});for await(let me of T)if(I.write(me)===!1&&await re(),D)break;if(X(),D)throw D}function L(I,T){return T===void 0?D=>k(I,D):k(I,T)}t.batch=i,t.buffer=c,t.collect=l,t.concat=p,t.consume=m,t.filter=b,t.flatMap=O,t.flatTransform=N,t.flatten=v,t.fromStream=ie,t.getIterator=n,t.map=B,t.merge=te,t.parallelFlatMap=ve,t.parallelMap=De,t.parallelMerge=Ne,t.pipeline=ae,t.reduce=Me,t.take=$e,t.tap=Z,t.time=Re,t.transform=P,t.writeToStream=L,Object.defineProperty(t,"__esModule",{value:!0})})});var dye=g((gkt,hye)=>{f();"use strict";var oQe=Fd();hye.exports=t=>{let e=oQe(t);return e.delete=e.remove,e}});var yye=g((pye,Yw)=>{f();(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,n=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,u=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function p(O){var R,N,F,U=Z.prototype={constructor:Z,toString:null,valueOf:null},ie=new Z(1),te=20,ae=4,ue=-7,De=21,ve=-1e7,Ne=1e7,ee=!1,Me=1,dt=0,ze={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},$e="0123456789abcdefghijklmnopqrstuvwxyz",le=!0;function Z(P,k){var L,I,T,D,M,j,V,G,X=this;if(!(X instanceof Z))return new Z(P,k);if(k==null){if(P&&P._isBigNumber===!0){X.s=P.s,!P.c||P.e>Ne?X.c=X.e=null:P.e<ve?X.c=[X.e=0]:(X.e=P.e,X.c=P.c.slice());return}if((j=typeof P=="number")&&P*0==0){if(X.s=1/P<0?(P=-P,-1):1,P===~~P){for(D=0,M=P;M>=10;M/=10,D++);D>Ne?X.c=X.e=null:(X.e=D,X.c=[P]);return}G=String(P)}else{if(!r.test(G=String(P)))return F(X,G,j);X.s=G.charCodeAt(0)==45?(G=G.slice(1),-1):1}(D=G.indexOf("."))>-1&&(G=G.replace(".","")),(M=G.search(/e/i))>0?(D<0&&(D=M),D+=+G.slice(M+1),G=G.substring(0,M)):D<0&&(D=G.length)}else{if(b(k,2,$e.length,"Base"),k==10&&le)return X=new Z(P),Re(X,te+X.e+1,ae);if(G=String(P),j=typeof P=="number"){if(P*0!=0)return F(X,G,j,k);if(X.s=1/P<0?(G=G.slice(1),-1):1,Z.DEBUG&&G.replace(/^0\.0*|\./,"").length>15)throw Error(o+P)}else X.s=G.charCodeAt(0)===45?(G=G.slice(1),-1):1;for(L=$e.slice(0,k),D=M=0,V=G.length;M<V;M++)if(L.indexOf(I=G.charAt(M))<0){if(I=="."){if(M>D){D=V;continue}}else if(!T&&(G==G.toUpperCase()&&(G=G.toLowerCase())||G==G.toLowerCase()&&(G=G.toUpperCase()))){T=!0,M=-1,D=0;continue}return F(X,String(P),j,k)}j=!1,G=N(G,k,10,X.s),(D=G.indexOf("."))>-1?G=G.replace(".",""):D=G.length}for(M=0;G.charCodeAt(M)===48;M++);for(V=G.length;G.charCodeAt(--V)===48;);if(G=G.slice(M,++V)){if(V-=M,j&&Z.DEBUG&&V>15&&(P>u||P!==n(P)))throw Error(o+X.s*P);if((D=D-M-1)>Ne)X.c=X.e=null;else if(D<ve)X.c=[X.e=0];else{if(X.e=D,X.c=[],M=(D+1)%c,D<0&&(M+=c),M<V){for(M&&X.c.push(+G.slice(0,M)),V-=c;M<V;)X.c.push(+G.slice(M,M+=c));M=c-(G=G.slice(M)).length}else M-=V;for(;M--;G+="0");X.c.push(+G)}}else X.c=[X.e=0]}Z.clone=p,Z.ROUND_UP=0,Z.ROUND_DOWN=1,Z.ROUND_CEIL=2,Z.ROUND_FLOOR=3,Z.ROUND_HALF_UP=4,Z.ROUND_HALF_DOWN=5,Z.ROUND_HALF_EVEN=6,Z.ROUND_HALF_CEIL=7,Z.ROUND_HALF_FLOOR=8,Z.EUCLID=9,Z.config=Z.set=function(P){var k,L;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty(k="DECIMAL_PLACES")&&(L=P[k],b(L,0,d,k),te=L),P.hasOwnProperty(k="ROUNDING_MODE")&&(L=P[k],b(L,0,8,k),ae=L),P.hasOwnProperty(k="EXPONENTIAL_AT")&&(L=P[k],L&&L.pop?(b(L[0],-d,0,k),b(L[1],0,d,k),ue=L[0],De=L[1]):(b(L,-d,d,k),ue=-(De=L<0?-L:L))),P.hasOwnProperty(k="RANGE"))if(L=P[k],L&&L.pop)b(L[0],-d,-1,k),b(L[1],1,d,k),ve=L[0],Ne=L[1];else if(b(L,-d,d,k),L)ve=-(Ne=L<0?-L:L);else throw Error(s+k+" cannot be zero: "+L);if(P.hasOwnProperty(k="CRYPTO"))if(L=P[k],L===!!L)if(L)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ee=L;else throw ee=!L,Error(s+"crypto unavailable");else ee=L;else throw Error(s+k+" not true or false: "+L);if(P.hasOwnProperty(k="MODULO_MODE")&&(L=P[k],b(L,0,9,k),Me=L),P.hasOwnProperty(k="POW_PRECISION")&&(L=P[k],b(L,0,d,k),dt=L),P.hasOwnProperty(k="FORMAT"))if(L=P[k],typeof L=="object")ze=L;else throw Error(s+k+" not an object: "+L);if(P.hasOwnProperty(k="ALPHABET"))if(L=P[k],typeof L=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(L))le=L.slice(0,10)=="0123456789",$e=L;else throw Error(s+k+" invalid: "+L)}else throw Error(s+"Object expected: "+P);return{DECIMAL_PLACES:te,ROUNDING_MODE:ae,EXPONENTIAL_AT:[ue,De],RANGE:[ve,Ne],CRYPTO:ee,MODULO_MODE:Me,POW_PRECISION:dt,FORMAT:ze,ALPHABET:$e}},Z.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!Z.DEBUG)return!0;var k,L,I=P.c,T=P.e,D=P.s;e:if({}.toString.call(I)=="[object Array]"){if((D===1||D===-1)&&T>=-d&&T<=d&&T===n(T)){if(I[0]===0){if(T===0&&I.length===1)return!0;break e}if(k=(T+1)%c,k<1&&(k+=c),String(I[0]).length==k){for(k=0;k<I.length;k++)if(L=I[k],L<0||L>=a||L!==n(L))break e;if(L!==0)return!0}}}else if(I===null&&T===null&&(D===null||D===1||D===-1))return!0;throw Error(s+"Invalid BigNumber: "+P)},Z.maximum=Z.max=function(){return je(arguments,U.lt)},Z.minimum=Z.min=function(){return je(arguments,U.gt)},Z.random=function(){var P=9007199254740992,k=Math.random()*P&2097151?function(){return n(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(L){var I,T,D,M,j,V=0,G=[],X=new Z(ie);if(L==null?L=te:b(L,0,d),M=i(L/c),ee)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array(M*=2));V<M;)j=I[V]*131072+(I[V+1]>>>11),j>=9e15?(T=crypto.getRandomValues(new Uint32Array(2)),I[V]=T[0],I[V+1]=T[1]):(G.push(j%1e14),V+=2);V=M/2}else if(crypto.randomBytes){for(I=crypto.randomBytes(M*=7);V<M;)j=(I[V]&31)*281474976710656+I[V+1]*1099511627776+I[V+2]*4294967296+I[V+3]*16777216+(I[V+4]<<16)+(I[V+5]<<8)+I[V+6],j>=9e15?crypto.randomBytes(7).copy(I,V):(G.push(j%1e14),V+=7);V=M/7}else throw ee=!1,Error(s+"crypto unavailable");if(!ee)for(;V<M;)j=k(),j<9e15&&(G[V++]=j%1e14);for(M=G[--V],L%=c,M&&L&&(j=l[c-L],G[V]=n(M/j)*j);G[V]===0;G.pop(),V--);if(V<0)G=[D=0];else{for(D=-1;G[0]===0;G.splice(0,1),D-=c);for(V=1,j=G[0];j>=10;j/=10,V++);V<c&&(D-=c-V)}return X.e=D,X.c=G,X}}(),Z.sum=function(){for(var P=1,k=arguments,L=new Z(k[0]);P<k.length;)L=L.plus(k[P++]);return L},N=function(){var P="0123456789";function k(L,I,T,D){for(var M,j=[0],V,G=0,X=L.length;G<X;){for(V=j.length;V--;j[V]*=I);for(j[0]+=D.indexOf(L.charAt(G++)),M=0;M<j.length;M++)j[M]>T-1&&(j[M+1]==null&&(j[M+1]=0),j[M+1]+=j[M]/T|0,j[M]%=T)}return j.reverse()}return function(L,I,T,D,M){var j,V,G,X,re,me,Ee,ke,it=L.indexOf("."),$t=te,ot=ae;for(it>=0&&(X=dt,dt=0,L=L.replace(".",""),ke=new Z(I),me=ke.pow(L.length-it),dt=X,ke.c=k(B(m(me.c),me.e,"0"),10,T,P),ke.e=ke.c.length),Ee=k(L,I,T,M?(j=$e,P):(j=P,$e)),G=X=Ee.length;Ee[--X]==0;Ee.pop());if(!Ee[0])return j.charAt(0);if(it<0?--G:(me.c=Ee,me.e=G,me.s=D,me=R(me,ke,$t,ot,T),Ee=me.c,re=me.r,G=me.e),V=G+$t+1,it=Ee[V],X=T/2,re=re||V<0||Ee[V+1]!=null,re=ot<4?(it!=null||re)&&(ot==0||ot==(me.s<0?3:2)):it>X||it==X&&(ot==4||re||ot==6&&Ee[V-1]&1||ot==(me.s<0?8:7)),V<1||!Ee[0])L=re?B(j.charAt(1),-$t,j.charAt(0)):j.charAt(0);else{if(Ee.length=V,re)for(--T;++Ee[--V]>T;)Ee[V]=0,V||(++G,Ee=[1].concat(Ee));for(X=Ee.length;!Ee[--X];);for(it=0,L="";it<=X;L+=j.charAt(Ee[it++]));L=B(L,G,j.charAt(0))}return L}}(),R=function(){function P(I,T,D){var M,j,V,G,X=0,re=I.length,me=T%h,Ee=T/h|0;for(I=I.slice();re--;)V=I[re]%h,G=I[re]/h|0,M=Ee*V+G*me,j=me*V+M%h*h+X,X=(j/D|0)+(M/h|0)+Ee*G,I[re]=j%D;return X&&(I=[X].concat(I)),I}function k(I,T,D,M){var j,V;if(D!=M)V=D>M?1:-1;else for(j=V=0;j<D;j++)if(I[j]!=T[j]){V=I[j]>T[j]?1:-1;break}return V}function L(I,T,D,M){for(var j=0;D--;)I[D]-=j,j=I[D]<T[D]?1:0,I[D]=j*M+I[D]-T[D];for(;!I[0]&&I.length>1;I.splice(0,1));}return function(I,T,D,M,j){var V,G,X,re,me,Ee,ke,it,$t,ot,Ge,et,lu,M1,j1,xn,Yl,an=I.s==T.s?1:-1,Bi=I.c,br=T.c;if(!Bi||!Bi[0]||!br||!br[0])return new Z(!I.s||!T.s||(Bi?br&&Bi[0]==br[0]:!br)?NaN:Bi&&Bi[0]==0||!br?an*0:an/0);for(it=new Z(an),$t=it.c=[],G=I.e-T.e,an=D+G+1,j||(j=a,G=y(I.e/c)-y(T.e/c),an=an/c|0),X=0;br[X]==(Bi[X]||0);X++);if(br[X]>(Bi[X]||0)&&G--,an<0)$t.push(1),re=!0;else{for(M1=Bi.length,xn=br.length,X=0,an+=2,me=n(j/(br[0]+1)),me>1&&(br=P(br,me,j),Bi=P(Bi,me,j),xn=br.length,M1=Bi.length),lu=xn,ot=Bi.slice(0,xn),Ge=ot.length;Ge<xn;ot[Ge++]=0);Yl=br.slice(),Yl=[0].concat(Yl),j1=br[0],br[1]>=j/2&&j1++;do{if(me=0,V=k(br,ot,xn,Ge),V<0){if(et=ot[0],xn!=Ge&&(et=et*j+(ot[1]||0)),me=n(et/j1),me>1)for(me>=j&&(me=j-1),Ee=P(br,me,j),ke=Ee.length,Ge=ot.length;k(Ee,ot,ke,Ge)==1;)me--,L(Ee,xn<ke?Yl:br,ke,j),ke=Ee.length,V=1;else me==0&&(V=me=1),Ee=br.slice(),ke=Ee.length;if(ke<Ge&&(Ee=[0].concat(Ee)),L(ot,Ee,Ge,j),Ge=ot.length,V==-1)for(;k(br,ot,xn,Ge)<1;)me++,L(ot,xn<Ge?Yl:br,Ge,j),Ge=ot.length}else V===0&&(me++,ot=[0]);$t[X++]=me,ot[0]?ot[Ge++]=Bi[lu]||0:(ot=[Bi[lu]],Ge=1)}while((lu++<M1||ot[0]!=null)&&an--);re=ot[0]!=null,$t[0]||$t.splice(0,1)}if(j==a){for(X=1,an=$t[0];an>=10;an/=10,X++);Re(it,D+(it.e=X+G*c-1)+1,M,re)}else it.e=G,it.r=+re;return it}}();function we(P,k,L,I){var T,D,M,j,V;if(L==null?L=ae:b(L,0,8),!P.c)return P.toString();if(T=P.c[0],M=P.e,k==null)V=m(P.c),V=I==1||I==2&&(M<=ue||M>=De)?x(V,M):B(V,M,"0");else if(P=Re(new Z(P),k,L),D=P.e,V=m(P.c),j=V.length,I==1||I==2&&(k<=D||D<=ue)){for(;j<k;V+="0",j++);V=x(V,D)}else if(k-=M,V=B(V,D,"0"),D+1>j){if(--k>0)for(V+=".";k--;V+="0");}else if(k+=D-j,k>0)for(D+1==j&&(V+=".");k--;V+="0");return P.s<0&&T?"-"+V:V}function je(P,k){for(var L,I=1,T=new Z(P[0]);I<P.length;I++)if(L=new Z(P[I]),L.s)k.call(T,L)&&(T=L);else{T=L;break}return T}function Ue(P,k,L){for(var I=1,T=k.length;!k[--T];k.pop());for(T=k[0];T>=10;T/=10,I++);return(L=I+L*c-1)>Ne?P.c=P.e=null:L<ve?P.c=[P.e=0]:(P.e=L,P.c=k),P}F=function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,L=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(D,M,j,V){var G,X=j?M:M.replace(T,"");if(I.test(X))D.s=isNaN(X)?null:X<0?-1:1;else{if(!j&&(X=X.replace(P,function(re,me,Ee){return G=(Ee=Ee.toLowerCase())=="x"?16:Ee=="b"?2:8,!V||V==G?me:re}),V&&(G=V,X=X.replace(k,"$1").replace(L,"0.$1")),M!=X))return new Z(X,G);if(Z.DEBUG)throw Error(s+"Not a"+(V?" base "+V:"")+" number: "+M);D.s=null}D.c=D.e=null}}();function Re(P,k,L,I){var T,D,M,j,V,G,X,re=P.c,me=l;if(re){e:{for(T=1,j=re[0];j>=10;j/=10,T++);if(D=k-T,D<0)D+=c,M=k,V=re[G=0],X=V/me[T-M-1]%10|0;else if(G=i((D+1)/c),G>=re.length)if(I){for(;re.length<=G;re.push(0));V=X=0,T=1,D%=c,M=D-c+1}else break e;else{for(V=j=re[G],T=1;j>=10;j/=10,T++);D%=c,M=D-c+T,X=M<0?0:V/me[T-M-1]%10|0}if(I=I||k<0||re[G+1]!=null||(M<0?V:V%me[T-M-1]),I=L<4?(X||I)&&(L==0||L==(P.s<0?3:2)):X>5||X==5&&(L==4||I||L==6&&(D>0?M>0?V/me[T-M]:0:re[G-1])%10&1||L==(P.s<0?8:7)),k<1||!re[0])return re.length=0,I?(k-=P.e+1,re[0]=me[(c-k%c)%c],P.e=-k||0):re[0]=P.e=0,P;if(D==0?(re.length=G,j=1,G--):(re.length=G+1,j=me[c-D],re[G]=M>0?n(V/me[T-M]%me[M])*j:0),I)for(;;)if(G==0){for(D=1,M=re[0];M>=10;M/=10,D++);for(M=re[0]+=j,j=1;M>=10;M/=10,j++);D!=j&&(P.e++,re[0]==a&&(re[0]=1));break}else{if(re[G]+=j,re[G]!=a)break;re[G--]=0,j=1}for(D=re.length;re[--D]===0;re.pop());}P.e>Ne?P.c=P.e=null:P.e<ve&&(P.c=[P.e=0])}return P}function rt(P){var k,L=P.e;return L===null?P.toString():(k=m(P.c),k=L<=ue||L>=De?x(k,L):B(k,L,"0"),P.s<0?"-"+k:k)}return U.absoluteValue=U.abs=function(){var P=new Z(this);return P.s<0&&(P.s=1),P},U.comparedTo=function(P,k){return w(this,new Z(P,k))},U.decimalPlaces=U.dp=function(P,k){var L,I,T,D=this;if(P!=null)return b(P,0,d),k==null?k=ae:b(k,0,8),Re(new Z(D),P+D.e+1,k);if(!(L=D.c))return null;if(I=((T=L.length-1)-y(this.e/c))*c,T=L[T])for(;T%10==0;T/=10,I--);return I<0&&(I=0),I},U.dividedBy=U.div=function(P,k){return R(this,new Z(P,k),te,ae)},U.dividedToIntegerBy=U.idiv=function(P,k){return R(this,new Z(P,k),0,1)},U.exponentiatedBy=U.pow=function(P,k){var L,I,T,D,M,j,V,G,X,re=this;if(P=new Z(P),P.c&&!P.isInteger())throw Error(s+"Exponent not an integer: "+rt(P));if(k!=null&&(k=new Z(k)),j=P.e>14,!re.c||!re.c[0]||re.c[0]==1&&!re.e&&re.c.length==1||!P.c||!P.c[0])return X=new Z(Math.pow(+rt(re),j?2-v(P):+rt(P))),k?X.mod(k):X;if(V=P.s<0,k){if(k.c?!k.c[0]:!k.s)return new Z(NaN);I=!V&&re.isInteger()&&k.isInteger(),I&&(re=re.mod(k))}else{if(P.e>9&&(re.e>0||re.e<-1||(re.e==0?re.c[0]>1||j&&re.c[1]>=24e7:re.c[0]<8e13||j&&re.c[0]<=9999975e7)))return D=re.s<0&&v(P)?-0:0,re.e>-1&&(D=1/D),new Z(V?1/D:D);dt&&(D=i(dt/c+2))}for(j?(L=new Z(.5),V&&(P.s=1),G=v(P)):(T=Math.abs(+rt(P)),G=T%2),X=new Z(ie);;){if(G){if(X=X.times(re),!X.c)break;D?X.c.length>D&&(X.c.length=D):I&&(X=X.mod(k))}if(T){if(T=n(T/2),T===0)break;G=T%2}else if(P=P.times(L),Re(P,P.e+1,1),P.e>14)G=v(P);else{if(T=+rt(P),T===0)break;G=T%2}re=re.times(re),D?re.c&&re.c.length>D&&(re.c.length=D):I&&(re=re.mod(k))}return I?X:(V&&(X=ie.div(X)),k?X.mod(k):D?Re(X,dt,ae,M):X)},U.integerValue=function(P){var k=new Z(this);return P==null?P=ae:b(P,0,8),Re(k,k.e+1,P)},U.isEqualTo=U.eq=function(P,k){return w(this,new Z(P,k))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(P,k){return w(this,new Z(P,k))>0},U.isGreaterThanOrEqualTo=U.gte=function(P,k){return(k=w(this,new Z(P,k)))===1||k===0},U.isInteger=function(){return!!this.c&&y(this.e/c)>this.c.length-2},U.isLessThan=U.lt=function(P,k){return w(this,new Z(P,k))<0},U.isLessThanOrEqualTo=U.lte=function(P,k){return(k=w(this,new Z(P,k)))===-1||k===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(P,k){var L,I,T,D,M=this,j=M.s;if(P=new Z(P,k),k=P.s,!j||!k)return new Z(NaN);if(j!=k)return P.s=-k,M.plus(P);var V=M.e/c,G=P.e/c,X=M.c,re=P.c;if(!V||!G){if(!X||!re)return X?(P.s=-k,P):new Z(re?M:NaN);if(!X[0]||!re[0])return re[0]?(P.s=-k,P):new Z(X[0]?M:ae==3?-0:0)}if(V=y(V),G=y(G),X=X.slice(),j=V-G){for((D=j<0)?(j=-j,T=X):(G=V,T=re),T.reverse(),k=j;k--;T.push(0));T.reverse()}else for(I=(D=(j=X.length)<(k=re.length))?j:k,j=k=0;k<I;k++)if(X[k]!=re[k]){D=X[k]<re[k];break}if(D&&(T=X,X=re,re=T,P.s=-P.s),k=(I=re.length)-(L=X.length),k>0)for(;k--;X[L++]=0);for(k=a-1;I>j;){if(X[--I]<re[I]){for(L=I;L&&!X[--L];X[L]=k);--X[L],X[I]+=a}X[I]-=re[I]}for(;X[0]==0;X.splice(0,1),--G);return X[0]?Ue(P,X,G):(P.s=ae==3?-1:1,P.c=[P.e=0],P)},U.modulo=U.mod=function(P,k){var L,I,T=this;return P=new Z(P,k),!T.c||!P.s||P.c&&!P.c[0]?new Z(NaN):!P.c||T.c&&!T.c[0]?new Z(T):(Me==9?(I=P.s,P.s=1,L=R(T,P,0,3),P.s=I,L.s*=I):L=R(T,P,0,Me),P=T.minus(L.times(P)),!P.c[0]&&Me==1&&(P.s=T.s),P)},U.multipliedBy=U.times=function(P,k){var L,I,T,D,M,j,V,G,X,re,me,Ee,ke,it,$t,ot=this,Ge=ot.c,et=(P=new Z(P,k)).c;if(!Ge||!et||!Ge[0]||!et[0])return!ot.s||!P.s||Ge&&!Ge[0]&&!et||et&&!et[0]&&!Ge?P.c=P.e=P.s=null:(P.s*=ot.s,!Ge||!et?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(I=y(ot.e/c)+y(P.e/c),P.s*=ot.s,V=Ge.length,re=et.length,V<re&&(ke=Ge,Ge=et,et=ke,T=V,V=re,re=T),T=V+re,ke=[];T--;ke.push(0));for(it=a,$t=h,T=re;--T>=0;){for(L=0,me=et[T]%$t,Ee=et[T]/$t|0,M=V,D=T+M;D>T;)G=Ge[--M]%$t,X=Ge[M]/$t|0,j=Ee*G+X*me,G=me*G+j%$t*$t+ke[D]+L,L=(G/it|0)+(j/$t|0)+Ee*X,ke[D--]=G%it;ke[D]=L}return L?++I:ke.splice(0,1),Ue(P,ke,I)},U.negated=function(){var P=new Z(this);return P.s=-P.s||null,P},U.plus=function(P,k){var L,I=this,T=I.s;if(P=new Z(P,k),k=P.s,!T||!k)return new Z(NaN);if(T!=k)return P.s=-k,I.minus(P);var D=I.e/c,M=P.e/c,j=I.c,V=P.c;if(!D||!M){if(!j||!V)return new Z(T/0);if(!j[0]||!V[0])return V[0]?P:new Z(j[0]?I:T*0)}if(D=y(D),M=y(M),j=j.slice(),T=D-M){for(T>0?(M=D,L=V):(T=-T,L=j),L.reverse();T--;L.push(0));L.reverse()}for(T=j.length,k=V.length,T-k<0&&(L=V,V=j,j=L,k=T),T=0;k;)T=(j[--k]=j[k]+V[k]+T)/a|0,j[k]=a===j[k]?0:j[k]%a;return T&&(j=[T].concat(j),++M),Ue(P,j,M)},U.precision=U.sd=function(P,k){var L,I,T,D=this;if(P!=null&&P!==!!P)return b(P,1,d),k==null?k=ae:b(k,0,8),Re(new Z(D),P,k);if(!(L=D.c))return null;if(T=L.length-1,I=T*c+1,T=L[T]){for(;T%10==0;T/=10,I--);for(T=L[0];T>=10;T/=10,I++);}return P&&D.e+1>I&&(I=D.e+1),I},U.shiftedBy=function(P){return b(P,-u,u),this.times("1e"+P)},U.squareRoot=U.sqrt=function(){var P,k,L,I,T,D=this,M=D.c,j=D.s,V=D.e,G=te+4,X=new Z("0.5");if(j!==1||!M||!M[0])return new Z(!j||j<0&&(!M||M[0])?NaN:M?D:1/0);if(j=Math.sqrt(+rt(D)),j==0||j==1/0?(k=m(M),(k.length+V)%2==0&&(k+="0"),j=Math.sqrt(+k),V=y((V+1)/2)-(V<0||V%2),j==1/0?k="5e"+V:(k=j.toExponential(),k=k.slice(0,k.indexOf("e")+1)+V),L=new Z(k)):L=new Z(j+""),L.c[0]){for(V=L.e,j=V+G,j<3&&(j=0);;)if(T=L,L=X.times(T.plus(R(D,T,G,1))),m(T.c).slice(0,j)===(k=m(L.c)).slice(0,j))if(L.e<V&&--j,k=k.slice(j-3,j+1),k=="9999"||!I&&k=="4999"){if(!I&&(Re(T,T.e+te+2,0),T.times(T).eq(D))){L=T;break}G+=4,j+=4,I=1}else{(!+k||!+k.slice(1)&&k.charAt(0)=="5")&&(Re(L,L.e+te+2,1),P=!L.times(L).eq(D));break}}return Re(L,L.e+te+1,ae,P)},U.toExponential=function(P,k){return P!=null&&(b(P,0,d),P++),we(this,P,k,1)},U.toFixed=function(P,k){return P!=null&&(b(P,0,d),P=P+this.e+1),we(this,P,k)},U.toFormat=function(P,k,L){var I,T=this;if(L==null)P!=null&&k&&typeof k=="object"?(L=k,k=null):P&&typeof P=="object"?(L=P,P=k=null):L=ze;else if(typeof L!="object")throw Error(s+"Argument not an object: "+L);if(I=T.toFixed(P,k),T.c){var D,M=I.split("."),j=+L.groupSize,V=+L.secondaryGroupSize,G=L.groupSeparator||"",X=M[0],re=M[1],me=T.s<0,Ee=me?X.slice(1):X,ke=Ee.length;if(V&&(D=j,j=V,V=D,ke-=D),j>0&&ke>0){for(D=ke%j||j,X=Ee.substr(0,D);D<ke;D+=j)X+=G+Ee.substr(D,j);V>0&&(X+=G+Ee.slice(D)),me&&(X="-"+X)}I=re?X+(L.decimalSeparator||"")+((V=+L.fractionGroupSize)?re.replace(new RegExp("\\d{"+V+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):re):X}return(L.prefix||"")+I+(L.suffix||"")},U.toFraction=function(P){var k,L,I,T,D,M,j,V,G,X,re,me,Ee=this,ke=Ee.c;if(P!=null&&(j=new Z(P),!j.isInteger()&&(j.c||j.s!==1)||j.lt(ie)))throw Error(s+"Argument "+(j.isInteger()?"out of range: ":"not an integer: ")+rt(j));if(!ke)return new Z(Ee);for(k=new Z(ie),G=L=new Z(ie),I=V=new Z(ie),me=m(ke),D=k.e=me.length-Ee.e-1,k.c[0]=l[(M=D%c)<0?c+M:M],P=!P||j.comparedTo(k)>0?D>0?k:G:j,M=Ne,Ne=1/0,j=new Z(me),V.c[0]=0;X=R(j,k,0,1),T=L.plus(X.times(I)),T.comparedTo(P)!=1;)L=I,I=T,G=V.plus(X.times(T=G)),V=T,k=j.minus(X.times(T=k)),j=T;return T=R(P.minus(L),I,0,1),V=V.plus(T.times(G)),L=L.plus(T.times(I)),V.s=G.s=Ee.s,D=D*2,re=R(G,I,D,ae).minus(Ee).abs().comparedTo(R(V,L,D,ae).minus(Ee).abs())<1?[G,I]:[V,L],Ne=M,re},U.toNumber=function(){return+rt(this)},U.toPrecision=function(P,k){return P!=null&&b(P,1,d),we(this,P,k,2)},U.toString=function(P){var k,L=this,I=L.s,T=L.e;return T===null?I?(k="Infinity",I<0&&(k="-"+k)):k="NaN":(P==null?k=T<=ue||T>=De?x(m(L.c),T):B(m(L.c),T,"0"):P===10&&le?(L=Re(new Z(L),te+T+1,ae),k=B(m(L.c),L.e,"0")):(b(P,2,$e.length,"Base"),k=N(B(m(L.c),T,"0"),10,P,I,!0)),I<0&&L.c[0]&&(k="-"+k)),k},U.valueOf=U.toJSON=function(){return rt(this)},U._isBigNumber=!0,O!=null&&Z.set(O),Z}function y(O){var R=O|0;return O>0||O===R?R:R-1}function m(O){for(var R,N,F=1,U=O.length,ie=O[0]+"";F<U;){for(R=O[F++]+"",N=c-R.length;N--;R="0"+R);ie+=R}for(U=ie.length;ie.charCodeAt(--U)===48;);return ie.slice(0,U+1||1)}function w(O,R){var N,F,U=O.c,ie=R.c,te=O.s,ae=R.s,ue=O.e,De=R.e;if(!te||!ae)return null;if(N=U&&!U[0],F=ie&&!ie[0],N||F)return N?F?0:-ae:te;if(te!=ae)return te;if(N=te<0,F=ue==De,!U||!ie)return F?0:!U^N?1:-1;if(!F)return ue>De^N?1:-1;for(ae=(ue=U.length)<(De=ie.length)?ue:De,te=0;te<ae;te++)if(U[te]!=ie[te])return U[te]>ie[te]^N?1:-1;return ue==De?0:ue>De^N?1:-1}function b(O,R,N,F){if(O<R||O>N||O!==n(O))throw Error(s+(F||"Argument")+(typeof O=="number"?O<R||O>N?" out of range: ":" not an integer: ":" not a primitive number: ")+String(O))}function v(O){var R=O.c.length-1;return y(O.e/c)==R&&O.c[R]%2!=0}function x(O,R){return(O.length>1?O.charAt(0)+"."+O.slice(1):O)+(R<0?"e":"e+")+R}function B(O,R,N){var F,U;if(R<0){for(U=N+".";++R;U+=N);O=U+O}else if(F=O.length,++R>F){for(U=N,R-=F;--R;U+=N);O+=U}else R<F&&(O=O.slice(0,R)+"."+O.slice(R));return O}e=p(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Yw!="undefined"&&Yw.exports?Yw.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(pye)});var jP=g((gye,mye)=>{f();"use strict";var aQe=Math.exp;gye=mye.exports=function(e){if(typeof e!="number")throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let r,i=0,n=0,s=0,o,a={};function c(u,l){return 1-aQe(-(u-l)/e)}return a.push=function(l,h){if(o){let d=c(l,o),p=h-r,y=d*p;r=d*h+(1-d)*r,i=(1-d)*(i+p*y),n=Math.sqrt(i),s=r+d*p}else r=h;o=l},a.movingAverage=function(){return r},a.variance=function(){return i},a.deviation=function(){return n},a.forecast=function(){return s},a}});var vye=g((mkt,_ye)=>{f();"use strict";var{EventEmitter:cQe}=Wt(),{BigNumber:Xw}=yye(),bye=jP(),uQe=_2(),wye=class extends cQe{constructor(e,r){super();this._options=r,this._queue=[],this._stats={dataReceived:Xw(0),dataSent:Xw(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);let i=this._options.movingAverageIntervals;for(let n=0;n<e.length;n++){let s=e[n];this._stats[s]=Xw(0),this._movingAverages[s]={};for(let o=0;o<i.length;o++){let a=i[o];(this._movingAverages[s][a]=bye(a)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){let e=this.snapshot,r=this.movingAverages,i={dataReceived:e.dataReceived.toString(),dataSent:e.dataSent.toString(),movingAverages:{}},n=Object.keys(r);for(let s of n){i.movingAverages[s]={};for(let o of Object.keys(r[s]))i.movingAverages[s][o]=r[s][o].movingAverage()}return i}push(e,r){this._queue.push([e,r,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=uQe(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(e of this._queue)this._applyOp(e);this._queue=[],this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let r=e-this._frequencyLastTime;Object.keys(this._stats).forEach(i=>{this._updateFrequencyFor(i,r,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,r,i){let n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let o=n/(r||1)*1e3,a=this._movingAverages[e];a||(a=this._movingAverages[e]={});let c=this._options.movingAverageIntervals;for(let u=0;u<c.length;u++){let l=c[u],h=a[l];h||(h=a[l]=bye(l)),h.push(i,o)}}_applyOp(e){let r=e[0],i=e[1];if(typeof i!="number")throw new Error(`invalid increment number: ${i}`);let n;Object.prototype.hasOwnProperty.call(this._stats,r)?n=this._stats[r]:n=this._stats[r]=Xw(0),this._stats[r]=n.plus(i),this._frequencyAccumulators[r]||(this._frequencyAccumulators[r]=0),this._frequencyAccumulators[r]+=i}};_ye.exports=wye});var Aye=g((bkt,Sye)=>{f();"use strict";var lQe=du(),{pipe:fQe}=vr(),{tap:Eye}=Ww(),hQe=dye(),{METRICS:dQe}=Bw(),qP=vye(),UP=["dataReceived","dataSent"],pQe={in:"dataReceived",out:"dataSent"},Qw=class{constructor(e){this._options=lQe(dQe,e),this._globalStats=new qP(UP,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=hQe(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._componentMetrics=new Map}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(let e of this._peerStats.values())e.stop();for(let e of this._protocolStats.values())e.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}getComponentMetrics(){return this._componentMetrics}updateComponentMetric(e,r,i){this._componentMetrics.has(e)||this._componentMetrics.set(e,new Map),this._componentMetrics.get(e).set(r,i)}forPeer(e){let r=e.toB58String();return this._peerStats.get(r)||this._oldPeers.get(r)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(e){return this._protocolStats.get(e)}onPeerDisconnected(e){let r=e.toB58String(),i=this._peerStats.get(r);i&&(i.stop(),this._peerStats.delete(r),this._oldPeers.set(r,i))}_onMessage({remotePeer:e,protocol:r,direction:i,dataLength:n}){if(!this._running)return;let s=pQe[i],o=this.forPeer(e);if(o||(o=new qP(UP,this._options),this._peerStats.set(e.toB58String(),o)),o.push(s,n),this._globalStats.push(s,n),r){let a=this.forProtocol(r);a||(a=new qP(UP,this._options),this._protocolStats.set(r,a)),a.push(s,n)}}updatePlaceholder(e,r){if(!this._running)return;let i=this.forPeer(e),n=r.toB58String(),s=this.forPeer(r),o=i;s&&(o=Qw.mergeStats(s,o),this._oldPeers.delete(n)),this._peerStats.delete(e.toB58String()),this._peerStats.set(n,o),o.start()}trackStream({stream:e,remotePeer:r,protocol:i}){let n=this,s=e.source;e.source=Eye(a=>n._onMessage({remotePeer:r,protocol:i,direction:"in",dataLength:a.length}))(s);let o=e.sink;return e.sink=a=>fQe(a,Eye(c=>n._onMessage({remotePeer:r,protocol:i,direction:"out",dataLength:c.length})),o),e}static mergeStats(e,r){return e.stop(),r.stop(),e._queue=[...e._queue,...r._queue],e}};Sye.exports=Qw});var FP=g((wkt,Rye)=>{f();"use strict";function xye(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function yQe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return xye(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),xye(new n,r)}}Rye.exports=yQe});var Zw=g(Yh=>{f();"use strict";var Iye=tn(),Tye=qo(),gQe=vr(),mQe=FP(),{fromString:bQe}=(ht(),ri),wQe=Vf(),Pye=bQe(`
`);Yh.encode=t=>Tye.encode.single(new Iye([t,Pye]));Yh.write=(t,e)=>t.push(Yh.encode(e));Yh.writeAll=(t,e)=>{t.push(e.reduce((r,i)=>r.append(Yh.encode(i)),new Iye))};Yh.read=async t=>{let e=1,r={[Symbol.asyncIterator](){return this},next:()=>t.next(e)},i=s=>{e=s},n=await gQe(r,Tye.decode({onLength:i}),wQe);if(n.get(n.length-1)!==Pye[0])throw mQe(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return n.shallowSlice(0,-1)}});var Oye=g((vkt,Cye)=>{f();"use strict";var w1=ce()("mss:select"),_Qe=FP(),_1=Zw(),vQe=H0();Cye.exports=async(t,e,r)=>{e=Array.isArray(e)?[...e]:[e];let{reader:i,writer:n,rest:s,stream:o}=vQe(t),a=e.shift();r?(w1('select: write ["%s", "%s"]',r,a),_1.writeAll(n,[r,a])):(w1('select: write "%s"',a),_1.write(n,a));let c=(await _1.read(i)).toString();if(w1('select: read "%s"',c),c===r&&(c=(await _1.read(i)).toString(),w1('select: read "%s"',c)),c===a)return s(),{stream:o,protocol:a};for(let u of e){w1('select: write "%s"',u),_1.write(n,u);let l=(await _1.read(i)).toString();if(w1('select: read "%s" for "%s"',l,u),l===u)return s(),{stream:o,protocol:u}}throw s(),_Qe(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}});var KP=g(kye=>{f();"use strict";kye.PROTOCOL_ID="/multistream/1.0.0"});var Nye=g((Skt,Dye)=>{f();"use strict";var Tm=ce()("mss:handle"),EQe=tn(),v1=Zw(),SQe=H0(),{PROTOCOL_ID:VP}=KP();Dye.exports=async(t,e)=>{e=Array.isArray(e)?e:[e];let{writer:r,reader:i,rest:n,stream:s}=SQe(t);for(;;){let o=(await v1.read(i)).toString();if(Tm('read "%s"',o),o===VP){Tm('respond with "%s" for "%s"',VP,o),v1.write(r,VP);continue}if(e.includes(o))return v1.write(r,o),Tm('respond with "%s" for "%s"',o,o),n(),{stream:s,protocol:o};if(o==="ls"){v1.write(r,new EQe(e.map(a=>v1.encode(a)))),Tm('respond with "%s" for %s',e,o);continue}v1.write(r,"na"),Tm('respond with "na" for "%s"',o)}}});var Mye=g((Akt,Lye)=>{f();"use strict";var AQe=K6(),xQe=ce()("it-multistream-select:ls"),Bye=Zw(),RQe=H0(),IQe=qo(),TQe=vr();Lye.exports=async t=>{let{reader:e,writer:r,rest:i,stream:n}=RQe(t);xQe('write "ls"'),Bye.write(r,"ls"),i();let s=await Bye.read(e),o=AQe([s]),a=[];return await TQe(o,IQe.decode(),async c=>{for await(let u of c)a.push(u.shallowSlice(0,-1).toString())}),{stream:n,protocols:a}}});var Fye=g(Jw=>{f();"use strict";var jye=Oye(),PQe=Nye(),CQe=Mye(),{PROTOCOL_ID:zP}=KP();Jw.PROTOCOL_ID=zP;var HP=class{constructor(e){this._stream=e,this._shaken=!1}async _handshake(){if(this._shaken)return;let{stream:e}=await jye(this._stream,zP);this._stream=e,this._shaken=!0}},qye=class extends HP{select(e){return jye(this._stream,e,this._shaken?null:zP)}async ls(){await this._handshake();let{stream:e,protocols:r}=await CQe(this._stream);return this._stream=e,r}};Jw.Dialer=qye;var Uye=class extends HP{handle(e){return PQe(this._stream,e)}};Jw.Listener=Uye});var Vye=g((Rkt,Kye)=>{f();"use strict";var OQe={OPEN:"open",CLOSING:"closing",CLOSED:"closed"};Kye.exports=OQe});var Yye=g((Ikt,Wye)=>{f();"use strict";var zye=Je(),{Multiaddr:kQe}=ct(),ls=SR(),{OPEN:DQe,CLOSING:Hye,CLOSED:$P}=Vye(),$ye=Symbol.for("@libp2p/interface-connection/connection"),Gye=class{constructor({localAddr:e,remoteAddr:r,localPeer:i,remotePeer:n,newStream:s,close:o,getStreams:a,stat:c}){NQe(e,i,n,s,o,a,c),this.id=parseInt(String(Math.random()*1e9)).toString(36)+Date.now(),this.localAddr=e,this.remoteAddr=r,this.localPeer=i,this.remotePeer=n,this._stat={...c,status:DQe},this._newStream=s,this._close=o,this._getStreams=a,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[$ye](){return!0}static isConnection(e){return Boolean(e&&e[$ye])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(e){if(this.stat.status===Hye)throw ls(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===$P)throw ls(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);let{stream:r,protocol:i}=await this._newStream(e);return this.addStream(r,{protocol:i}),{stream:r,protocol:i}}addStream(e,{protocol:r,metadata:i={}}){this.registry.set(e.id,{protocol:r,...i})}removeStream(e){this.registry.delete(e)}async close(){if(this.stat.status!==$P){if(this._closing)return this._closing;this.stat.status=Hye,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=$P}}};Wye.exports=Gye;function NQe(t,e,r,i,n,s,o){if(t&&!kQe.isMultiaddr(t))throw ls(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!zye.isPeerId(e))throw ls(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!zye.isPeerId(r))throw ls(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(typeof i!="function")throw ls(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if(typeof n!="function")throw ls(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if(typeof s!="function")throw ls(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!o)throw ls(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if(o.direction!=="inbound"&&o.direction!=="outbound")throw ls(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!o.timeline)throw ls(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!o.timeline.open)throw ls(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!o.timeline.upgraded)throw ls(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}});var Qye=g(Xye=>{f();"use strict";Xye.Connection=Yye()});var Jye=g((Pkt,Zye)=>{f();"use strict";function BQe(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}Zye.exports=function(e){var r=void 0,i=void 0;function n(a){if(!(a instanceof Object))throw new Error('Target "'+a+'" is not an object');i=a}function s(a){Object.keys(a).forEach(function(c){var u=a[c];if(typeof u!="function")throw new Error('Trap "'+c+": "+u+'" is not a function');if(!Reflect[c])throw new Error('Trap "'+c+": "+u+'" is not a valid trap')}),r=a}n(function(){}),e&&n(e),s(Reflect);var o=new Proxy({},{get:function(c,u){return function(){for(var l=arguments.length,h=Array(l),d=0;d<l;d++)h[d]=arguments[d];return r[u].apply(null,[i].concat(BQe(h.slice(1))))}}});return{setTarget:n,setHandler:s,getTarget:function(){return i},getHandler:function(){return r},proxy:new Proxy(i,o)}}});var nge=g((Ckt,ige)=>{f();"use strict";var ege=ce(),mi=Object.assign(ege("libp2p:upgrader"),{error:ege("libp2p:upgrader:err")}),Xh=ur(),E1=Fye(),{Connection:LQe}=Qye(),MQe=Je(),{pipe:jQe}=vr(),tge=Jye(),{codes:Qh}=lr(),rge=class{constructor({localPeer:e,metrics:r,cryptos:i=new Map,muxers:n=new Map,onConnectionEnd:s=()=>{},onConnection:o=()=>{}}){this.localPeer=e,this.metrics=r,this.cryptos=i,this.muxers=n,this.protector=null,this.protocols=new Map,this.onConnection=o,this.onConnectionEnd=s}async upgradeInbound(e){let r,i,n,s,o,a,c;if(this.metrics){({setTarget:a,proxy:c}=tge());let l=(Math.random()*1e9).toString(36)+Date.now();a({toB58String:()=>l}),e=this.metrics.trackStream({stream:e,remotePeer:c})}mi("Starting the inbound connection upgrade");let u=e;this.protector&&(u=await this.protector.protect(e));try{({conn:r,remotePeer:i,protocol:o}=await this._encryptInbound(this.localPeer,u,this.cryptos)),this.muxers.size?{stream:n,Muxer:s}=await this._multiplexInbound(r,this.muxers):n=r}catch(l){throw mi.error("Failed to upgrade inbound connection",l),await e.close(l),l}return this.metrics&&(this.metrics.updatePlaceholder(c,i),a(i)),mi("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:o,direction:"inbound",maConn:e,upgradedConn:n,Muxer:s,remotePeer:i})}async upgradeOutbound(e){let r=e.remoteAddr.getPeerId();if(!r)throw Xh(new Error("outbound connection must have a peer id"),Qh.ERR_INVALID_MULTIADDR);let i=MQe.createFromB58String(r),n,s,o,a,c,u,l;if(this.metrics){({setTarget:u,proxy:l}=tge());let d=(Math.random()*1e9).toString(36)+Date.now();u({toB58String:()=>d}),e=this.metrics.trackStream({stream:e,remotePeer:l})}mi("Starting the outbound connection upgrade");let h=e;this.protector&&(h=await this.protector.protect(e));try{({conn:n,remotePeer:s,protocol:a}=await this._encryptOutbound(this.localPeer,h,i,this.cryptos)),this.muxers.size?{stream:o,Muxer:c}=await this._multiplexOutbound(n,this.muxers):o=n}catch(d){throw mi.error("Failed to upgrade outbound connection",d),await e.close(d),d}return this.metrics&&(this.metrics.updatePlaceholder(l,s),u(s)),mi("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:a,direction:"outbound",maConn:e,upgradedConn:o,Muxer:c,remotePeer:s})}_createConnection({cryptoProtocol:e,direction:r,maConn:i,upgradedConn:n,Muxer:s,remotePeer:o}){let a,c,u;s&&(a=new s({onStream:async d=>{if(!u)return;let p=new E1.Listener(d);try{let{stream:y,protocol:m}=await p.handle(Array.from(this.protocols.keys()));mi("%s: incoming stream opened on %s",r,m),this.metrics&&this.metrics.trackStream({stream:y,remotePeer:o,protocol:m}),u.addStream(d,{protocol:m}),this._onStream({connection:u,stream:{...d,...y},protocol:m})}catch(y){mi.error(y)}},onStreamEnd:d=>{u.removeStream(d.id)}}),c=async d=>{mi("%s: starting new stream on %s",r,d);let p=a.newStream(),y=new E1.Dialer(p);try{let{stream:m,protocol:w}=await y.select(d);return this.metrics&&this.metrics.trackStream({stream:m,remotePeer:o,protocol:w}),{stream:{...p,...m},protocol:w}}catch(m){throw mi.error("could not create new stream",m),Xh(m,Qh.ERR_UNSUPPORTED_PROTOCOL)}},jQe(n,a,n).catch(mi.error));let l=i.timeline;i.timeline=new Proxy(l,{set:(...d)=>(u&&d[1]==="close"&&d[2]&&!l.close&&(async()=>{try{u.stat.status==="open"&&await u.close()}catch(p){mi.error(p)}finally{this.onConnectionEnd(u)}})(),Reflect.set(...d))}),i.timeline.upgraded=Date.now();let h=()=>{throw Xh(new Error("connection is not multiplexed"),Qh.ERR_CONNECTION_NOT_MULTIPLEXED)};return u=new LQe({localAddr:i.localAddr,remoteAddr:i.remoteAddr,localPeer:this.localPeer,remotePeer:o,stat:{direction:r,timeline:i.timeline,multiplexer:s&&s.multicodec,encryption:e},newStream:c||h,getStreams:()=>a?a.streams:h(),close:async()=>{await i.close(),a&&a.streams.map(d=>d.abort())}}),this.onConnection(u),u}_onStream({connection:e,stream:r,protocol:i}){this.protocols.get(i)({connection:e,stream:r,protocol:i})}async _encryptInbound(e,r,i){let n=new E1.Listener(r),s=Array.from(i.keys());mi("handling inbound crypto protocol selection",s);try{let{stream:o,protocol:a}=await n.handle(s),c=i.get(a);if(mi("encrypting inbound connection..."),!c)throw new Error(`no crypto module found for ${a}`);return{...await c.secureInbound(e,o),protocol:a}}catch(o){throw Xh(o,Qh.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,r,i,n){let s=new E1.Dialer(r),o=Array.from(n.keys());mi("selecting outbound crypto protocol",o);try{let{stream:a,protocol:c}=await s.select(o),u=n.get(c);if(mi("encrypting outbound connection to %j",i),!u)throw new Error(`no crypto module found for ${c}`);return{...await u.secureOutbound(e,a,i),protocol:c}}catch(a){throw Xh(a,Qh.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,r){let i=new E1.Dialer(e),n=Array.from(r.keys());mi("outbound selecting muxer %s",n);try{let{stream:s,protocol:o}=await i.select(n);mi("%s selected as muxer protocol",o);let a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Xh(s,Qh.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,r){let i=new E1.Listener(e),n=Array.from(r.keys());mi("inbound handling muxers %s",n);try{let{stream:s,protocol:o}=await i.handle(n),a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Xh(s,Qh.ERR_MUXER_UNAVAILABLE)}}};ige.exports=rge});var Pm=g((Okt,age)=>{f();"use strict";var GP=ur(),sge=Je(),{codes:WP}=lr(),qQe=t=>t,oge=class{constructor({peerStore:e,eventName:r,eventProperty:i,eventTransformer:n=qQe}){this._ps=e,this.eventName=r,this.eventProperty=i,this.eventTransformer=n,this.data=new Map}set(e,r){throw GP(new Error("set must be implemented by the subclass"),WP.ERR_NOT_IMPLEMENTED)}_setData(e,r,{emit:i=!0}={}){let n=e.toB58String();this.data.set(n,r),i&&this._emit(e,r)}_emit(e,r){this._ps.emit(this.eventName,{peerId:e,[this.eventProperty]:this.eventTransformer(r)})}get(e){if(!sge.isPeerId(e))throw GP(new Error("peerId must be an instance of peer-id"),WP.ERR_INVALID_PARAMETERS);let r=this.data.get(e.toB58String());return r?[...r]:void 0}delete(e){if(!sge.isPeerId(e))throw GP(new Error("peerId must be an instance of peer-id"),WP.ERR_INVALID_PARAMETERS);return this.data.delete(e.toB58String())?(this._emit(e,[]),!0):!1}};age.exports=oge});var fge=g((kkt,lge)=>{f();"use strict";var cge=ce(),Go=Object.assign(cge("libp2p:peer-store:address-book"),{error:cge("libp2p:peer-store:address-book:err")}),S1=ur(),{Multiaddr:UQe}=ct(),e_=Je(),FQe=Pm(),KQe=jw(),{codes:{ERR_INVALID_PARAMETERS:A1}}=lr(),VQe=Ng(),uge=class extends FQe{constructor(e){super({peerStore:e,eventName:"change:multiaddrs",eventProperty:"multiaddrs",eventTransformer:r=>r.addresses?r.addresses.map(i=>i.multiaddr):[]});this.data=new Map}consumePeerRecord(e){let r;try{r=KQe.createFromProtobuf(e.payload)}catch(c){return Go.error("invalid peer record received"),!1}if(!r.peerId.equals(e.peerId))return Go("signing key does not match PeerId in the PeerRecord"),!1;if(!r.multiaddrs||!r.multiaddrs.length)return!1;let i=r.peerId,n=i.toB58String(),o=(this.data.get(n)||{record:void 0}).record;if(o&&o.seqNumber>=r.seqNumber)return!1;let a=this._toAddresses(r.multiaddrs,!0);return this._setData(i,{addresses:a,record:{raw:e.marshal(),seqNumber:r.seqNumber}}),Go(`stored provided peer record for ${n}`),!0}getRawEnvelope(e){let r=this.data.get(e.toB58String());if(!(!r||!r.record||!r.record.raw))return r.record.raw}getPeerRecord(e){let r=this.getRawEnvelope(e);if(!!r)return VQe.createFromProtobuf(r)}set(e,r){if(!e_.isPeerId(e))throw Go.error("peerId must be an instance of peer-id to store data"),S1(new Error("peerId must be an instance of peer-id"),A1);let i=this._toAddresses(r);if(!i.length)return this;let n=e.toB58String(),s=this.data.get(n);return s&&s.addresses&&s.addresses.length===i.length&&s.addresses.filter(a=>i.some(c=>a.multiaddr.equals(c.multiaddr))).length===s.addresses.length?(Go(`the addresses provided to store are equal to the already stored for ${n}`),this):(this._setData(e,{addresses:i,record:s&&s.record}),Go(`stored provided multiaddrs for ${n}`),s||this._ps.emit("peer",e),this)}add(e,r){if(!e_.isPeerId(e))throw Go.error("peerId must be an instance of peer-id to store data"),S1(new Error("peerId must be an instance of peer-id"),A1);let i=this._toAddresses(r),n=e.toB58String();if(!i.length)return this;let s=this.data.get(n);return s&&s.addresses&&(s.addresses.forEach(o=>{i.find(a=>a.multiaddr.equals(o.multiaddr))||i.push(o)}),s.addresses.length===i.length)?(Go(`the addresses provided to store are already stored for ${n}`),this):(this._setData(e,{addresses:i,record:s&&s.record}),Go(`added provided multiaddrs for ${n}`),s&&s.addresses||this._ps.emit("peer",e),this)}get(e){if(!e_.isPeerId(e))throw S1(new Error("peerId must be an instance of peer-id"),A1);let r=this.data.get(e.toB58String());return r&&r.addresses?[...r.addresses]:void 0}_toAddresses(e,r=!1){if(!e)throw Go.error("multiaddrs must be provided to store data"),S1(new Error("multiaddrs must be provided"),A1);let i=[];return e.forEach(n=>{if(!UQe.isMultiaddr(n))throw Go.error(`multiaddr ${n} must be an instance of multiaddr`),S1(new Error(`multiaddr ${n} must be an instance of multiaddr`),A1);i.find(s=>s.multiaddr.equals(n))||i.push({multiaddr:n,isCertified:r})}),i}getMultiaddrsForPeer(e,r=i=>i){if(!e_.isPeerId(e))throw S1(new Error("peerId must be an instance of peer-id"),A1);let i=this.data.get(e.toB58String());if(!(!i||!i.addresses))return r(i.addresses||[]).map(n=>{let s=n.multiaddr,o=s.getPeerId();return o&&o===e.toB58String()?s:s.encapsulate(`/p2p/${e.toB58String()}`)})}};lge.exports=uge});var wge=g((Dkt,bge)=>{f();"use strict";var hge=ce(),dge=Object.assign(hge("libp2p:peer-store:key-book"),{error:hge("libp2p:peer-store:key-book:err")}),pge=ur(),yge=Je(),zQe=Pm(),{codes:{ERR_INVALID_PARAMETERS:gge}}=lr(),mge=class extends zQe{constructor(e){super({peerStore:e,eventName:"change:pubkey",eventProperty:"pubkey",eventTransformer:r=>r.pubKey});this.data=new Map}set(e,r){if(!yge.isPeerId(e))throw dge.error("peerId must be an instance of peer-id to store data"),pge(new Error("peerId must be an instance of peer-id"),gge);let i=e.toB58String();return!this.data.get(i)&&r&&(e.pubKey=r,this._setData(e,e),dge(`stored provided public key for ${i}`)),this}get(e){if(!yge.isPeerId(e))throw pge(new Error("peerId must be an instance of peer-id"),gge);let r=this.data.get(e.toB58String());return r?r.pubKey:void 0}};bge.exports=mge});var Sge=g((Nkt,Ege)=>{f();"use strict";var _ge=ce(),YP=Object.assign(_ge("libp2p:peer-store:proto-book"),{error:_ge("libp2p:peer-store:proto-book:err")}),x1=ur(),{equals:HQe}=(qi(),Zn),Cm=Je(),$Qe=Pm(),{codes:{ERR_INVALID_PARAMETERS:R1}}=lr(),vge=class extends $Qe{constructor(e){super({peerStore:e,eventName:"change:metadata",eventProperty:"metadata"});this.data=new Map}set(e,r,i){if(!Cm.isPeerId(e))throw YP.error("peerId must be an instance of peer-id to store data"),x1(new Error("peerId must be an instance of peer-id"),R1);if(typeof r!="string"||!(i instanceof Uint8Array))throw YP.error("valid key and value must be provided to store data"),x1(new Error("valid key and value must be provided"),R1);return this._setValue(e,r,i),this}_setValue(e,r,i,{emit:n=!0}={}){let s=e.toB58String(),o=this.data.get(s)||new Map,a=o.get(r);if(a&&HQe(i,a)){YP(`the metadata provided to store is equal to the already stored for ${s} on ${r}`);return}o.set(r,i),this.data.set(s,o),n&&this._emit(e,r)}get(e){if(!Cm.isPeerId(e))throw x1(new Error("peerId must be an instance of peer-id"),R1);return this.data.get(e.toB58String())}getValue(e,r){if(!Cm.isPeerId(e))throw x1(new Error("peerId must be an instance of peer-id"),R1);let i=this.data.get(e.toB58String());return i&&i.get(r)}delete(e){if(!Cm.isPeerId(e))throw x1(new Error("peerId must be an instance of peer-id"),R1);return this.data.delete(e.toB58String())?(this._emit(e),!0):!1}deleteValue(e,r){if(!Cm.isPeerId(e))throw x1(new Error("peerId must be an instance of peer-id"),R1);let i=this.data.get(e.toB58String());return!i||!i.delete(r)?!1:(this._emit(e,r),!0)}};Ege.exports=vge});var Ige=g((Bkt,Rge)=>{f();"use strict";var Age=ce(),Wo=Object.assign(Age("libp2p:peer-store:proto-book"),{error:Age("libp2p:peer-store:proto-book:err")}),I1=ur(),XP=Je(),GQe=Pm(),{codes:{ERR_INVALID_PARAMETERS:T1}}=lr(),xge=class extends GQe{constructor(e){super({peerStore:e,eventName:"change:protocols",eventProperty:"protocols",eventTransformer:r=>Array.from(r)});this.data=new Map}set(e,r){if(!XP.isPeerId(e))throw Wo.error("peerId must be an instance of peer-id to store data"),I1(new Error("peerId must be an instance of peer-id"),T1);if(!r)throw Wo.error("protocols must be provided to store data"),I1(new Error("protocols must be provided"),T1);let i=e.toB58String(),n=this.data.get(i),s=new Set(r);return n&&((a,c)=>a.size===c.size&&[...a].every(u=>c.has(u)))(n,s)?(Wo(`the protocols provided to store are equal to the already stored for ${i}`),this):(this._setData(e,s),Wo(`stored provided protocols for ${i}`),this)}add(e,r){if(!XP.isPeerId(e))throw Wo.error("peerId must be an instance of peer-id to store data"),I1(new Error("peerId must be an instance of peer-id"),T1);if(!r)throw Wo.error("protocols must be provided to store data"),I1(new Error("protocols must be provided"),T1);let i=e.toB58String(),n=this.data.get(i)||new Set,s=new Set([...n,...r]);return n.size===s.size?(Wo(`the protocols provided to store are already stored for ${i}`),this):(this._setData(e,s),Wo(`added provided protocols for ${i}`),this)}remove(e,r){if(!XP.isPeerId(e))throw Wo.error("peerId must be an instance of peer-id to store data"),I1(new Error("peerId must be an instance of peer-id"),T1);if(!r)throw Wo.error("protocols must be provided to store data"),I1(new Error("protocols must be provided"),T1);let i=e.toB58String(),n=this.data.get(i);if(n){let s=new Set([...n].filter(o=>!r.includes(o)));if(n.size===s.size)return this;this._setData(e,s),Wo(`removed provided protocols for ${i}`)}return this}};Rge.exports=xge});var QP=g((Lkt,Cge)=>{f();"use strict";var WQe=ur(),{EventEmitter:YQe}=Wt(),Tge=Je(),XQe=fge(),QQe=wge(),ZQe=Sge(),JQe=Ige(),{codes:{ERR_INVALID_PARAMETERS:eZe}}=lr(),Pge=class extends YQe{constructor({peerId:e}){super();this._peerId=e,this.addressBook=new XQe(this),this.keyBook=new QQe(this),this.metadataBook=new ZQe(this),this.protoBook=new JQe(this)}start(){}stop(){}get peers(){let e=new Set([...this.addressBook.data.keys(),...this.keyBook.data.keys(),...this.protoBook.data.keys(),...this.metadataBook.data.keys()]);this._peerId&&e.delete(this._peerId.toB58String());let r=new Map;return e.forEach(i=>{r.set(i,this.get(Tge.createFromB58String(i)))}),r}delete(e){let r=this.addressBook.delete(e),i=this.keyBook.delete(e),n=this.protoBook.delete(e),s=this.metadataBook.delete(e);return r||i||n||s}get(e){if(!Tge.isPeerId(e))throw WQe(new Error("peerId must be an instance of peer-id"),eZe);let r=this.keyBook.data.get(e.toB58String()),i=this.addressBook.get(e),n=this.metadataBook.get(e),s=this.protoBook.get(e);if(!(!r&&!i&&!n&&!s))return{id:r||e,addresses:i||[],protocols:s||[],metadata:n}}};Cge.exports=Pge});var kge=g((Mkt,Oge)=>{f();"use strict";function tZe(t,e,r){let i=new t(e,r);i._subscribeAdapter=i.subscribe,i._unsubscribeAdapter=i.unsubscribe;function n(o,a){a&&i.on(o,a),i._subscribeAdapter(o)}function s(o,a){a?i.removeListener(o,a):i.removeAllListeners(o),i.listenerCount(o)===0&&i._unsubscribeAdapter(o)}return i.subscribe=n,i.unsubscribe=s,i}Oge.exports=tZe});var Dge=g((jkt,P1)=>{f();"use strict";P1.exports.NAMESPACE_COMMON="/peers/";P1.exports.NAMESPACE_ADDRESS="/peers/addrs/";P1.exports.NAMESPACE_KEYS="/peers/keys/";P1.exports.NAMESPACE_METADATA="/peers/metadata/";P1.exports.NAMESPACE_PROTOCOL="/peers/protos/"});var Bge=g((qkt,Nge)=>{f();"use strict";var Wl=Si(),C1=Wl.Reader,ZP=Wl.Writer,Hr=Wl.util,bi=Wl.roots["libp2p-address-book"]||(Wl.roots["libp2p-address-book"]={});bi.Addresses=function(){function t(e){if(this.addrs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.addrs=Hr.emptyArray,t.prototype.certifiedRecord=null,t.encode=function(r,i){if(i||(i=ZP.create()),r.addrs!=null&&r.addrs.length)for(var n=0;n<r.addrs.length;++n)bi.Addresses.Address.encode(r.addrs[n],i.uint32(10).fork()).ldelim();return r.certifiedRecord!=null&&Object.hasOwnProperty.call(r,"certifiedRecord")&&bi.Addresses.CertifiedRecord.encode(r.certifiedRecord,i.uint32(18).fork()).ldelim(),i},t.decode=function(r,i){r instanceof C1||(r=C1.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new bi.Addresses;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.addrs&&s.addrs.length||(s.addrs=[]),s.addrs.push(bi.Addresses.Address.decode(r,r.uint32()));break;case 2:s.certifiedRecord=bi.Addresses.CertifiedRecord.decode(r,r.uint32());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof bi.Addresses)return r;var i=new bi.Addresses;if(r.addrs){if(!Array.isArray(r.addrs))throw TypeError(".Addresses.addrs: array expected");i.addrs=[];for(var n=0;n<r.addrs.length;++n){if(typeof r.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");i.addrs[n]=bi.Addresses.Address.fromObject(r.addrs[n])}}if(r.certifiedRecord!=null){if(typeof r.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");i.certifiedRecord=bi.Addresses.CertifiedRecord.fromObject(r.certifiedRecord)}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.addrs=[]),i.defaults&&(n.certifiedRecord=null),r.addrs&&r.addrs.length){n.addrs=[];for(var s=0;s<r.addrs.length;++s)n.addrs[s]=bi.Addresses.Address.toObject(r.addrs[s],i)}return r.certifiedRecord!=null&&r.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=bi.Addresses.CertifiedRecord.toObject(r.certifiedRecord,i)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Wl.util.toJSONOptions)},t.Address=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.multiaddr=Hr.newBuffer([]),e.prototype.isCertified=!1,e.encode=function(i,n){return n||(n=ZP.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&n.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&n.uint32(16).bool(i.isCertified),n},e.decode=function(i,n){i instanceof C1||(i=C1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new bi.Addresses.Address;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.multiaddr=i.bytes();break;case 2:o.isCertified=i.bool();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof bi.Addresses.Address)return i;var n=new bi.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?Hr.base64.decode(i.multiaddr,n.multiaddr=Hr.newBuffer(Hr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(n.multiaddr=i.multiaddr)),i.isCertified!=null&&(n.isCertified=Boolean(i.isCertified)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=Hr.newBuffer(s.multiaddr))),s.isCertified=!1),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?Hr.base64.encode(i.multiaddr,0,i.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(s.isCertified=i.isCertified),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Wl.util.toJSONOptions)},e}(),t.CertifiedRecord=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.seq=Hr.Long?Hr.Long.fromBits(0,0,!0):0,e.prototype.raw=Hr.newBuffer([]),e.encode=function(i,n){return n||(n=ZP.create()),i.seq!=null&&Object.hasOwnProperty.call(i,"seq")&&n.uint32(8).uint64(i.seq),i.raw!=null&&Object.hasOwnProperty.call(i,"raw")&&n.uint32(18).bytes(i.raw),n},e.decode=function(i,n){i instanceof C1||(i=C1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new bi.Addresses.CertifiedRecord;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.seq=i.uint64();break;case 2:o.raw=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof bi.Addresses.CertifiedRecord)return i;var n=new bi.Addresses.CertifiedRecord;return i.seq!=null&&(Hr.Long?(n.seq=Hr.Long.fromValue(i.seq)).unsigned=!0:typeof i.seq=="string"?n.seq=parseInt(i.seq,10):typeof i.seq=="number"?n.seq=i.seq:typeof i.seq=="object"&&(n.seq=new Hr.LongBits(i.seq.low>>>0,i.seq.high>>>0).toNumber(!0))),i.raw!=null&&(typeof i.raw=="string"?Hr.base64.decode(i.raw,n.raw=Hr.newBuffer(Hr.base64.length(i.raw)),0):i.raw.length&&(n.raw=i.raw)),n},e.toObject=function(i,n){n||(n={});var s={};if(n.defaults){if(Hr.Long){var o=new Hr.Long(0,0,!0);s.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else s.seq=n.longs===String?"0":0;n.bytes===String?s.raw="":(s.raw=[],n.bytes!==Array&&(s.raw=Hr.newBuffer(s.raw)))}return i.seq!=null&&i.hasOwnProperty("seq")&&(typeof i.seq=="number"?s.seq=n.longs===String?String(i.seq):i.seq:s.seq=n.longs===String?Hr.Long.prototype.toString.call(i.seq):n.longs===Number?new Hr.LongBits(i.seq.low>>>0,i.seq.high>>>0).toNumber(!0):i.seq),i.raw!=null&&i.hasOwnProperty("raw")&&(s.raw=n.bytes===String?Hr.base64.encode(i.raw,0,i.raw.length):n.bytes===Array?Array.prototype.slice.call(i.raw):i.raw),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Wl.util.toJSONOptions)},e}(),t}();Nge.exports=bi});var jge=g((Ukt,Mge)=>{f();"use strict";var O1=Si(),Lge=O1.Reader,rZe=O1.Writer,iZe=O1.util,Om=O1.roots["libp2p-proto-book"]||(O1.roots["libp2p-proto-book"]={});Om.Protocols=function(){function t(e){if(this.protocols=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.protocols=iZe.emptyArray,t.encode=function(r,i){if(i||(i=rZe.create()),r.protocols!=null&&r.protocols.length)for(var n=0;n<r.protocols.length;++n)i.uint32(10).string(r.protocols[n]);return i},t.decode=function(r,i){r instanceof Lge||(r=Lge.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Om.Protocols;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Om.Protocols)return r;var i=new Om.Protocols;if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Protocols.protocols: array expected");i.protocols=[];for(var n=0;n<r.protocols.length;++n)i.protocols[n]=String(r.protocols[n])}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.protocols=[]),r.protocols&&r.protocols.length){n.protocols=[];for(var s=0;s<r.protocols.length;++s)n.protocols[s]=r.protocols[s]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,O1.util.toJSONOptions)},t}();Mge.exports=Om});var zge=g((Fkt,Vge)=>{f();"use strict";var qge=ce(),Ni=Object.assign(qge("libp2p:persistent-peer-store"),{error:qge("libp2p:persistent-peer-store:err")}),{Key:t_}=(Ar(),qd),{Multiaddr:nZe}=ct(),JP=Je(),{base32:sZe}=(Mi(),dc),oZe=QP(),{NAMESPACE_ADDRESS:aZe,NAMESPACE_COMMON:cZe,NAMESPACE_KEYS:uZe,NAMESPACE_METADATA:lZe,NAMESPACE_PROTOCOL:fZe}=Dge(),{Addresses:Uge}=Bge(),{Protocols:Fge}=jge(),Kge=class extends oZe{constructor({peerId:e,datastore:r,threshold:i=5}){super({peerId:e});this._datastore=r,this._dirtyPeers=new Set,this._dirtyMetadata=new Map,this.threshold=i,this._addDirtyPeer=this._addDirtyPeer.bind(this)}async start(){Ni("PeerStore is starting"),this.on("change:protocols",this._addDirtyPeer),this.on("change:multiaddrs",this._addDirtyPeer),this.on("change:pubkey",this._addDirtyPeerKey),this.on("change:metadata",this._addDirtyPeerMetadata);for await(let e of this._datastore.query({prefix:cZe}))await this._processDatastoreEntry(e);Ni("PeerStore started")}async stop(){Ni("PeerStore is stopping"),this.removeAllListeners(),await this._commitData(),Ni("PeerStore stopped")}_addDirtyPeer({peerId:e}){let r=e.toB58String();Ni("add dirty peer",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(i=>{Ni.error("error committing data",i)})}_addDirtyPeerKey({peerId:e}){if(e.hasInlinePublicKey())return;let r=e.toB58String();Ni("add dirty peer key",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(i=>{Ni.error("error committing data",i)})}_addDirtyPeerMetadata({peerId:e,metadata:r}){let i=e.toB58String();Ni("add dirty metadata peer",i),this._dirtyPeers.add(i);let n=this._dirtyMetadata.get(i)||new Set;n.add(r),this._dirtyMetadata.set(i,n),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(s=>{Ni.error("error committing data",s)})}async _commitData(){let e=Array.from(this._dirtyPeers);if(!e.length)return;this._dirtyPeers.clear(),Ni("create batch commit");let r=this._datastore.batch();for(let i of e){let n=this.keyBook.data.get(i)||JP.createFromB58String(i);this._batchAddressBook(n,r),!n.hasInlinePublicKey()&&this._batchKeyBook(n,r),this._batchMetadataBook(n,r),this._batchProtoBook(n,r)}await r.commit(),Ni("batch committed")}_batchAddressBook(e,r){let i=e.toString(),n=new t_(`${aZe}${i}`),s=this.addressBook.data.get(e.toB58String());try{if(!s){r.delete(n);return}let o=Uge.encode({addrs:s.addresses.map(a=>({multiaddr:a.multiaddr.bytes,isCertified:a.isCertified})),certifiedRecord:s.record?{seq:s.record.seqNumber,raw:s.record.raw}:void 0}).finish();r.put(n,o)}catch(o){Ni.error(o)}}_batchKeyBook(e,r){let i=e.toString(),n=new t_(`${uZe}${i}`);try{if(!e.pubKey){r.delete(n);return}let s=e.marshalPubKey();r.put(n,s)}catch(s){Ni.error(s)}}_batchMetadataBook(e,r){let i=e.toString(),n=this._dirtyMetadata.get(e.toB58String())||[];try{n.forEach(s=>{let o=new t_(`${lZe}${i}/${s}`),a=this.metadataBook.getValue(e,s);a?r.put(o,a):r.delete(o)})}catch(s){Ni.error(s)}}_batchProtoBook(e,r){let i=e.toString(),n=new t_(`${fZe}${i}`),s=this.protoBook.get(e);try{if(!s){r.delete(n);return}let o=Fge.encode({protocols:s}).finish();r.put(n,o)}catch(o){Ni.error(o)}}async _processDatastoreEntry({key:e,value:r}){try{let i=e.toString().split("/"),n=JP.createFromBytes(sZe.decode(i[3])),s;switch(i[2]){case"addrs":s=Uge.decode(r),this.addressBook._setData(n,{addresses:s.addrs.map(o=>({multiaddr:new nZe(o.multiaddr),isCertified:Boolean(o.isCertified)})),record:s.certifiedRecord?{raw:s.certifiedRecord.raw,seqNumber:s.certifiedRecord.seq}:void 0},{emit:!1});break;case"keys":s=await JP.createFromPubKey(r),this.keyBook._setData(s,s,{emit:!1});break;case"metadata":this.metadataBook._setValue(n,i[4],r,{emit:!1});break;case"protos":s=Fge.decode(r),this.protoBook._setData(n,new Set(s.protocols),{emit:!1});break;default:Ni("invalid data persisted for: ",e.toString())}}catch(i){Ni.error(i)}}};Vge.exports=Kge});var Wge=g((Kkt,Gge)=>{f();"use strict";var Hge=ce(),hZe=Object.assign(Hge("libp2p:registrar"),{error:Hge("libp2p:registrar:err")}),dZe=ur(),{codes:{ERR_INVALID_PARAMETERS:pZe}}=lr(),yZe=AR(),$ge=class{constructor({peerStore:e,connectionManager:r}){this.peerStore=e,this.connectionManager=r,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(e){this._handle=e}getConnection(e){return this.connectionManager.get(e)}register(e){if(!yZe.isTopology(e))throw hZe.error("topology must be an instance of interfaces/topology"),dZe(new Error("topology must be an instance of interfaces/topology"),pZe);let r=(Math.random()*1e9).toString(36)+Date.now();return this.topologies.set(r,e),e.registrar=this,r}unregister(e){return this.topologies.delete(e)}_onDisconnect(e){for(let[,r]of this.topologies)r.disconnect(e.remotePeer)}};Gge.exports=$ge});var Xge=g((Vkt,Yge)=>{f();"use strict";Yge.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}});var eme=g((r_,Jge)=>{f();"use strict";var Qge=ce(),gZe=Object.assign(Qge("libp2p:ping"),{error:Qge("libp2p:ping:err")}),mZe=ur(),{codes:bZe}=lr(),wZe=Ic(),{pipe:Zge}=vr(),{toBuffer:_Ze}=Q8(),{collect:vZe,take:EZe}=Ww(),{equals:SZe}=(qi(),Zn),{PROTOCOL_NAME:eC,PING_LENGTH:AZe,PROTOCOL_VERSION:tC}=Xge();async function xZe(t,e){let r=`/${t._config.protocolPrefix}/${eC}/${tC}`;gZe("dialing %s to %s",r,e.toB58String?e.toB58String():e);let i=await t.dial(e),{stream:n}=await i.newStream(r),s=Date.now(),o=wZe.randomBytes(AZe),[a]=await Zge([o],n,u=>EZe(1,u),_Ze,vZe),c=Date.now();if(!SZe(o,a))throw mZe(new Error("Received wrong ping ack"),bZe.ERR_WRONG_PING_ACK);return c-s}function RZe(t){t.handle(`/${t._config.protocolPrefix}/${eC}/${tC}`,({stream:e})=>Zge(e,e))}function IZe(t){t.unhandle(`/${t._config.protocolPrefix}/${eC}/${tC}`)}r_=Jge.exports=xZe;r_.mount=RZe;r_.unmount=IZe});var ime=g((zkt,rme)=>{f();"use strict";var k1=Si(),tme=k1.Reader,TZe=k1.Writer,Dr=k1.util,km=k1.roots["libp2p-identify"]||(k1.roots["libp2p-identify"]={});km.Identify=function(){function t(e){if(this.listenAddrs=[],this.protocols=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.protocolVersion="",t.prototype.agentVersion="",t.prototype.publicKey=Dr.newBuffer([]),t.prototype.listenAddrs=Dr.emptyArray,t.prototype.observedAddr=Dr.newBuffer([]),t.prototype.protocols=Dr.emptyArray,t.prototype.signedPeerRecord=Dr.newBuffer([]),t.encode=function(r,i){if(i||(i=TZe.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.listenAddrs!=null&&r.listenAddrs.length)for(var n=0;n<r.listenAddrs.length;++n)i.uint32(18).bytes(r.listenAddrs[n]);if(r.protocols!=null&&r.protocols.length)for(var n=0;n<r.protocols.length;++n)i.uint32(26).string(r.protocols[n]);return r.observedAddr!=null&&Object.hasOwnProperty.call(r,"observedAddr")&&i.uint32(34).bytes(r.observedAddr),r.protocolVersion!=null&&Object.hasOwnProperty.call(r,"protocolVersion")&&i.uint32(42).string(r.protocolVersion),r.agentVersion!=null&&Object.hasOwnProperty.call(r,"agentVersion")&&i.uint32(50).string(r.agentVersion),r.signedPeerRecord!=null&&Object.hasOwnProperty.call(r,"signedPeerRecord")&&i.uint32(66).bytes(r.signedPeerRecord),i},t.decode=function(r,i){r instanceof tme||(r=tme.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new km.Identify;r.pos<n;){var o=r.uint32();switch(o>>>3){case 5:s.protocolVersion=r.string();break;case 6:s.agentVersion=r.string();break;case 1:s.publicKey=r.bytes();break;case 2:s.listenAddrs&&s.listenAddrs.length||(s.listenAddrs=[]),s.listenAddrs.push(r.bytes());break;case 4:s.observedAddr=r.bytes();break;case 3:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;case 8:s.signedPeerRecord=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof km.Identify)return r;var i=new km.Identify;if(r.protocolVersion!=null&&(i.protocolVersion=String(r.protocolVersion)),r.agentVersion!=null&&(i.agentVersion=String(r.agentVersion)),r.publicKey!=null&&(typeof r.publicKey=="string"?Dr.base64.decode(r.publicKey,i.publicKey=Dr.newBuffer(Dr.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.listenAddrs){if(!Array.isArray(r.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");i.listenAddrs=[];for(var n=0;n<r.listenAddrs.length;++n)typeof r.listenAddrs[n]=="string"?Dr.base64.decode(r.listenAddrs[n],i.listenAddrs[n]=Dr.newBuffer(Dr.base64.length(r.listenAddrs[n])),0):r.listenAddrs[n].length&&(i.listenAddrs[n]=r.listenAddrs[n])}if(r.observedAddr!=null&&(typeof r.observedAddr=="string"?Dr.base64.decode(r.observedAddr,i.observedAddr=Dr.newBuffer(Dr.base64.length(r.observedAddr)),0):r.observedAddr.length&&(i.observedAddr=r.observedAddr)),r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Identify.protocols: array expected");i.protocols=[];for(var n=0;n<r.protocols.length;++n)i.protocols[n]=String(r.protocols[n])}return r.signedPeerRecord!=null&&(typeof r.signedPeerRecord=="string"?Dr.base64.decode(r.signedPeerRecord,i.signedPeerRecord=Dr.newBuffer(Dr.base64.length(r.signedPeerRecord)),0):r.signedPeerRecord.length&&(i.signedPeerRecord=r.signedPeerRecord)),i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.listenAddrs=[],n.protocols=[]),i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=Dr.newBuffer(n.publicKey))),i.bytes===String?n.observedAddr="":(n.observedAddr=[],i.bytes!==Array&&(n.observedAddr=Dr.newBuffer(n.observedAddr))),n.protocolVersion="",n.agentVersion="",i.bytes===String?n.signedPeerRecord="":(n.signedPeerRecord=[],i.bytes!==Array&&(n.signedPeerRecord=Dr.newBuffer(n.signedPeerRecord)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?Dr.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.listenAddrs&&r.listenAddrs.length){n.listenAddrs=[];for(var s=0;s<r.listenAddrs.length;++s)n.listenAddrs[s]=i.bytes===String?Dr.base64.encode(r.listenAddrs[s],0,r.listenAddrs[s].length):i.bytes===Array?Array.prototype.slice.call(r.listenAddrs[s]):r.listenAddrs[s]}if(r.protocols&&r.protocols.length){n.protocols=[];for(var s=0;s<r.protocols.length;++s)n.protocols[s]=r.protocols[s]}return r.observedAddr!=null&&r.hasOwnProperty("observedAddr")&&(n.observedAddr=i.bytes===String?Dr.base64.encode(r.observedAddr,0,r.observedAddr.length):i.bytes===Array?Array.prototype.slice.call(r.observedAddr):r.observedAddr),r.protocolVersion!=null&&r.hasOwnProperty("protocolVersion")&&(n.protocolVersion=r.protocolVersion),r.agentVersion!=null&&r.hasOwnProperty("agentVersion")&&(n.agentVersion=r.agentVersion),r.signedPeerRecord!=null&&r.hasOwnProperty("signedPeerRecord")&&(n.signedPeerRecord=i.bytes===String?Dr.base64.encode(r.signedPeerRecord,0,r.signedPeerRecord.length):i.bytes===Array?Array.prototype.slice.call(r.signedPeerRecord):r.signedPeerRecord),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,k1.util.toJSONOptions)},t}();rme.exports=km});var hme=g((Hkt,fme)=>{f();"use strict";var nme=ce(),ic=Object.assign(nme("libp2p:identify"),{error:nme("libp2p:identify:err")}),rC=ur(),i_=qo(),{pipe:n_}=vr(),{collect:sme,take:ome,consume:ame}=Ww(),{fromString:D1}=(ht(),ri),PZe=Je(),{Multiaddr:iC}=ct(),{toBuffer:cme}=Q8(),Dm=ime(),ume=Ng(),lme=jw(),{MULTICODEC_IDENTIFY:CZe,MULTICODEC_IDENTIFY_PUSH:OZe,IDENTIFY_PROTOCOL_VERSION:kZe,MULTICODEC_IDENTIFY_PROTOCOL_NAME:DZe,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:NZe,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:BZe,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:LZe}=iP(),{codes:nC}=lr(),Zh=class{static getProtocolStr(e){return{identifyProtocolStr:`/${e._config.protocolPrefix}/${DZe}/${BZe}`,identifyPushProtocolStr:`/${e._config.protocolPrefix}/${NZe}/${LZe}`}}constructor({libp2p:e}){this._libp2p=e,this.peerStore=e.peerStore,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.peerId=e.peerId,this.handleMessage=this.handleMessage.bind(this);let r=Zh.getProtocolStr(e);this.identifyProtocolStr=r.identifyProtocolStr,this.identifyPushProtocolStr=r.identifyPushProtocolStr,this._host={protocolVersion:`${e._config.protocolPrefix}/${kZe}`,...e._options.host},this.peerStore.metadataBook.set(this.peerId,"AgentVersion",D1(this._host.agentVersion)),this.peerStore.metadataBook.set(this.peerId,"ProtocolVersion",D1(this._host.protocolVersion)),this.connectionManager.on("peer:connect",i=>{this.identify(i).catch(ic.error)}),this.peerStore.on("change:multiaddrs",({peerId:i})=>{i.toString()===this.peerId.toString()&&this.pushToPeerStore()}),this.peerStore.on("change:protocols",({peerId:i})=>{i.toString()===this.peerId.toString()&&this.pushToPeerStore()})}async push(e){let r=await this.peerStore.addressBook.getRawEnvelope(this.peerId),i=this._libp2p.multiaddrs.map(o=>o.bytes),n=this.peerStore.protoBook.get(this.peerId)||[],s=e.map(async o=>{try{let{stream:a}=await o.newStream(this.identifyPushProtocolStr);await n_([Dm.Identify.encode({listenAddrs:i,signedPeerRecord:r,protocols:n}).finish()],i_.encode(),a,ame)}catch(a){ic.error("could not push identify update to peer",a)}});return Promise.all(s)}pushToPeerStore(){if(!this._libp2p.isStarted())return;let e=[],r;for(let i of this.peerStore.peers.values())i.protocols.includes(this.identifyPushProtocolStr)&&(r=this.connectionManager.get(i.id))&&e.push(r);this.push(e)}async identify(e){let{stream:r}=await e.newStream(this.identifyProtocolStr),[i]=await n_([],r,i_.decode(),ome(1),cme,sme);if(!i)throw rC(new Error("No data could be retrieved"),nC.ERR_CONNECTION_ENDED);let n;try{n=Dm.Identify.decode(i)}catch(d){throw rC(d,nC.ERR_INVALID_MESSAGE)}let{publicKey:s,listenAddrs:o,protocols:a,observedAddr:c,signedPeerRecord:u}=n,l=await PZe.createFromPubKey(s);if(e.remotePeer.toB58String()!==l.toB58String())throw rC(new Error("identified peer does not match the expected peer"),nC.ERR_INVALID_PEER);let h=Zh.getCleanMultiaddr(c);try{let d=await ume.openAndCertify(u,lme.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(d)){this.peerStore.protoBook.set(l,a),this.peerStore.metadataBook.set(l,"AgentVersion",D1(n.agentVersion)),this.peerStore.metadataBook.set(l,"ProtocolVersion",D1(n.protocolVersion));return}}catch(d){ic("received invalid envelope, discard it and fallback to listenAddrs is available",d)}try{this.peerStore.addressBook.set(l,o.map(d=>new iC(d)))}catch(d){ic.error("received invalid addrs",d)}this.peerStore.protoBook.set(l,a),this.peerStore.metadataBook.set(l,"AgentVersion",D1(n.agentVersion)),this.peerStore.metadataBook.set(l,"ProtocolVersion",D1(n.protocolVersion)),ic("received observed address of %s",h)}handleMessage({connection:e,stream:r,protocol:i}){switch(i){case this.identifyProtocolStr:return this._handleIdentify({connection:e,stream:r});case this.identifyPushProtocolStr:return this._handlePush({connection:e,stream:r});default:ic.error("cannot handle unknown protocol %s",i)}}async _handleIdentify({connection:e,stream:r}){let i=new Uint8Array(0);this.peerId.pubKey&&(i=this.peerId.pubKey.bytes);let n=await this.peerStore.addressBook.getRawEnvelope(this.peerId),s=this.peerStore.protoBook.get(this.peerId)||[],o=Dm.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:i,listenAddrs:this._libp2p.multiaddrs.map(a=>a.bytes),signedPeerRecord:n,observedAddr:e.remoteAddr.bytes,protocols:s}).finish();try{await n_([o],i_.encode(),r,ame)}catch(a){ic.error("could not respond to identify request",a)}}async _handlePush({connection:e,stream:r}){let i;try{let[s]=await n_([],r,i_.decode(),ome(1),cme,sme);i=Dm.Identify.decode(s)}catch(s){return ic.error("received invalid message",s)}let n=e.remotePeer;try{let s=await ume.openAndCertify(i.signedPeerRecord,lme.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(s)){this.peerStore.protoBook.set(n,i.protocols);return}}catch(s){ic("received invalid envelope, discard it and fallback to listenAddrs is available",s)}try{this.peerStore.addressBook.set(n,i.listenAddrs.map(s=>new iC(s)))}catch(s){ic.error("received invalid addrs",s)}this.peerStore.protoBook.set(n,i.protocols)}static getCleanMultiaddr(e){if(e&&e.length>0)try{return new iC(e)}catch(r){return null}return null}},MZe={IDENTIFY:CZe,IDENTIFY_PUSH:OZe};Zh.multicodecs=MZe;Zh.Messsage=Dm;fme.exports=Zh});var dme=g(()=>{f()});var pme=g(sC=>{f();"use strict";Object.defineProperty(sC,"__esModule",{value:!0}),sC.promisify=s_;var jZe="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function s_(t){if(typeof t!="function")throw new TypeError("Argument to promisify must be a function");var e=t[jZe],r=s_.Promise||Promise;if(typeof r!="function")throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var i=this,n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];return new r(function(a,c){s.push(function(u){if(u)return c(u);for(var l=arguments.length,h=Array(1<l?l-1:0),d=1;d<l;d++)h[d-1]=arguments[d];if(h.length===1||!e)return a(h[0]);var p={};h.forEach(function(y,m){var w=e[m];w&&(p[w]=y)}),a(p)}),t.apply(i,s)})}}s_.argumentNames="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__",s_.Promise=void 0});var gme=g((Ykt,yme)=>{f();"use strict";var qZe=D_(),o_=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Nm=qZe(),UZe=o_&&!Nm,FZe=Nm&&!o_,KZe=Nm&&o_,VZe=typeof ps=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!Nm,zZe=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,HZe=typeof process!="undefined"&&typeof process.env!="undefined"&&!1;yme.exports={isTest:HZe,isElectron:Nm,isElectronMain:FZe,isElectronRenderer:KZe,isNode:VZe,isBrowser:UZe,isWebWorker:zZe,isEnvWithDom:o_}});var bme=g((Xkt,mme)=>{f();function uo(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}mme.exports=uo;uo.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};uo.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};uo.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0};uo.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};uo.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};uo.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};uo.prototype.start=uo.prototype.try;uo.prototype.errors=function(){return this._errors};uo.prototype.attempts=function(){return this._attempts};uo.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,i=0;i<this._errors.length;i++){var n=this._errors[i],s=n.message,o=(t[s]||0)+1;t[s]=o,o>=r&&(e=n,r=o)}return e}});var wme=g(Jh=>{f();var $Ze=bme();Jh.operation=function(t){var e=Jh.timeouts(t);return new $Ze(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};Jh.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],n=0;n<e.retries;n++)i.push(this.createTimeout(n,e));return t&&t.forever&&!i.length&&i.push(this.createTimeout(n,e)),i.sort(function(s,o){return s-o}),i};Jh.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,i=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return i=Math.min(i,e.maxTimeout),i};Jh.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var i in t)typeof t[i]=="function"&&r.push(i)}for(var n=0;n<r.length;n++){var s=r[n],o=t[s];t[s]=function(c){var u=Jh.operation(e),l=Array.prototype.slice.call(arguments,1),h=l.pop();l.push(function(d){u.retry(d)||(d&&(arguments[0]=u.mainError()),h.apply(this,arguments))}),u.attempt(function(){c.apply(t,l)})}.bind(t,o),t[s].options=e}}});var vme=g((Zkt,_me)=>{f();_me.exports=wme()});var Sme=g((Jkt,a_)=>{f();"use strict";var GZe=vme(),WZe=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],oC=class extends Error{constructor(e){super();e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},YZe=(t,e,r)=>{let i=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=i,t},XZe=t=>WZe.includes(t),Eme=(t,e)=>new Promise((r,i)=>{e={onFailedAttempt:()=>{},retries:10,...e};let n=GZe.operation(e);n.attempt(async s=>{try{r(await t(s))}catch(o){if(!(o instanceof Error)){i(new TypeError(`Non-error was thrown: "${o}". You should only throw errors.`));return}if(o instanceof oC)n.stop(),i(o.originalError);else if(o instanceof TypeError&&!XZe(o.message))n.stop(),i(o);else{YZe(o,s,e);try{await e.onFailedAttempt(o)}catch(a){i(a);return}n.retry(o)||i(n.mainError())}}})});a_.exports=Eme;a_.exports.default=Eme;a_.exports.AbortError=oC});var xme=g((eDt,Ame)=>{f();"use strict";function QZe(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}Ame.exports=QZe});var Ime=g((tDt,Rme)=>{f();"use strict";var ZZe=xme();function JZe(t){let{address:e}=t.nodeAddress();return ZZe(e)}Rme.exports=JZe});var Dme=g((rDt,kme)=>{f();"use strict";var eJe=dme(),Tme=ce(),{promisify:aC}=pme(),{Multiaddr:tJe}=ct(),N1=Object.assign(Tme("libp2p:nat"),{error:Tme("libp2p:nat:err")}),{isBrowser:Pme}=gme(),cC=Sme(),rJe=bw(),Cme=rP(),iJe=ur(),{codes:{ERR_INVALID_PARAMETERS:nJe}}=lr(),sJe=Ime(),uC=7200;function oJe(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}var Ome=class{constructor({peerId:e,addressManager:r,transportManager:i,...n}){if(this._peerId=e,this._addressManager=r,this._transportManager=i,this._enabled=n.enabled,this._externalIp=n.externalIp,this._options={description:n.description||`${Cme.name}@${Cme.version} ${this._peerId}`,ttl:n.ttl||uC,autoUpdate:n.keepAlive||!0,gateway:n.gateway,enablePMP:Boolean(n.pmp&&n.pmp.enabled)},this._options.ttl<uC)throw iJe(new Error(`NatManager ttl should be at least ${uC} seconds`),nJe)}start(){Pme||!this._enabled||this._start().catch(e=>{N1.error(e)})}async _start(){let e=this._transportManager.getAddrs();for(let r of e){let{family:i,host:n,port:s,transport:o}=r.toOptions();if(!r.isThinWaistAddress()||o!=="tcp"||sJe(r)||i!==4)continue;let a=this._getClient(),c=this._externalIp||await a.externalIp();if(rJe(c))throw new Error(`${c} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);let u=oJe();N1(`opening uPnP connection from ${c}:${u} to ${n}:${s}`),await a.map({publicPort:u,privatePort:s,protocol:o.toUpperCase()}),this._addressManager.addObservedAddr(tJe.fromNodeAddress({family:4,address:c,port:u},o))}}_getClient(){if(this._client)return this._client;let e=new eJe(this._options),r=aC(e.map.bind(e)),i=aC(e.destroy.bind(e)),n=aC(e.externalIp.bind(e));return this._client={map:(...s)=>cC(()=>r(...s),{onFailedAttempt:N1.error,unref:!0}),destroy:(...s)=>cC(()=>i(...s),{onFailedAttempt:N1.error,unref:!0}),externalIp:(...s)=>cC(()=>n(...s),{onFailedAttempt:N1.error,unref:!0})},this._client}async stop(){if(!(Pme||!this._client))try{await this._client.destroy(),this._client=null}catch(e){N1.error(e)}}};kme.exports=Ome});var qme=g((iDt,jme)=>{f();"use strict";var Nme=ce(),fs=Object.assign(Nme("libp2p"),{error:Nme("libp2p:err")}),{EventEmitter:aJe}=Wt(),lC=ur(),cJe=Je(),{Multiaddr:uJe}=ct(),lJe=Qpe(),fJe=i0e(),fC=tP(),{validate:hJe}=Q0e(),{codes:c_,messages:dJe}=lr(),pJe=e1e(),yJe=d1e(),gJe=b1e(),Bme=G1e(),mJe=o2e(),bJe=A2e(),Lme=lye(),wJe=Aye(),_Je=fP(),vJe=nge(),EJe=QP(),SJe=kge(),AJe=zge(),xJe=Wge(),u_=eme(),Mme=hme(),RJe=Dme(),{updateSelfPeerRecord:IJe}=uP(),Bm=class extends aJe{static async create(e){if(e.peerId)return new Bm(e);let r=await cJe.create();return e.peerId=r,new Bm(e)}constructor(e){super();if(this._options=hJe(e),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this.peerStore=this.datastore&&this._options.peerStore.persistence?new AJe({peerId:this.peerId,datastore:this.datastore,...this._options.peerStore}):new EJe({peerId:this.peerId}),this.addresses=this._options.addresses,this.addressManager=new pJe(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",()=>{IJe(this).catch(i=>{fs.error("Error updating self peer record",i)})}),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new yJe(this,{...this._options.connectionManager}),this._autodialler=new gJe(this,{enabled:this._config.peerDiscovery.autoDial,minConnections:this._options.connectionManager.minConnections,autoDialInterval:this._options.connectionManager.autoDialInterval}),this._options.metrics.enabled){let i=new wJe({...this._options.metrics});this.metrics=i}if(this._options.keychain&&this._options.keychain.datastore){fs("creating keychain");let i=Lme.generateOptions();this.keychain=new Lme(this._options.keychain.datastore,{...i,...this._options.keychain}),fs("keychain constructed")}if(this.upgrader=new vJe({localPeer:this.peerId,metrics:this.metrics,onConnection:i=>this.connectionManager.onConnect(i),onConnectionEnd:i=>this.connectionManager.onDisconnect(i)}),this.transportManager=new _Je({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new RJe({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager,...this._options.config.nat}),this.registrar=new xJe({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw lC(new Error(dJe.CONN_ENCRYPTION_REQUIRED),c_.CONN_ENCRYPTION_REQUIRED);if(this._modules.connEncryption.forEach(i=>{this.upgrader.cryptos.set(i.protocol,i)}),this.dialer=new bJe({transportManager:this.transportManager,peerStore:this.peerStore,metrics:this.metrics,...this._options.dialer}),this._modules.transport.forEach(i=>{let n=i.prototype[Symbol.toStringTag],s=this._config.transport[n];this.transportManager.add(n,i,s)}),this._config.relay.enabled&&(this.transportManager.add(Bme.prototype[Symbol.toStringTag],Bme),this.relay=new mJe(this)),this._modules.streamMuxer&&(this._modules.streamMuxer.forEach(n=>{this.upgrader.muxers.set(n.multicodec,n)}),this.identifyService=new Mme({libp2p:this}),this.handle(Object.values(Mme.getProtocolStr(this)),this.identifyService.handleMessage)),this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(globalThis.process!==void 0&&globalThis.process.env&&globalThis.process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){let i=this._modules.dht;this._dht=i.create({libp2p:this,...this._config.dht})}if(this._modules.pubsub){let i=this._modules.pubsub;this.pubsub=SJe(i,this,this._config.pubsub)}this.peerRouting=new lJe(this),this.contentRouting=new fJe(this),u_.mount(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this)}emit(e,...r){return e==="error"&&!this._events.error?(fs.error(r),!1):super.emit(e,...r)}async start(){fs("libp2p is starting");try{await this._onStarting(),await this._onDidStart(),fs("libp2p has started")}catch(e){throw this.emit("error",e),fs.error("An error occurred starting libp2p",e),await this.stop(),e}}async stop(){fs("libp2p is stopping");try{this._isStarted=!1,this.relay&&this.relay.stop(),this.peerRouting.stop(),this._autodialler.stop(),await(this._dht&&this._dht.stop());for(let e of this._discovery.values())e.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),e=>e.stop())),this._discovery=new Map,await this.peerStore.stop(),await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),u_.unmount(this),this.dialer.destroy()}catch(e){e&&(fs.error(e),this.emit("error",e))}fs("libp2p has stopped")}async loadKeychain(){if(!!this.keychain)try{await this.keychain.findKeyByName("self")}catch(e){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(e,r){return this._dial(e,r)}async dialProtocol(e,r,i){if(!r||!r.length)throw lC(new Error("no protocols were provided to open a stream"),c_.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this._dial(e,i)).newStream(r)}async _dial(e,r){let{id:i,multiaddrs:n}=fC(e);if(i.equals(this.peerId))throw lC(new Error("Cannot dial self"),c_.ERR_DIALED_SELF);let s=this.connectionManager.get(i);return s?n&&this.peerStore.addressBook.add(i,n):s=await this.dialer.connectToPeer(e,r),s}get multiaddrs(){let e=this.addressManager.getAnnounceAddrs().map(n=>n.toString());e.length||(e=this.transportManager.getAddrs().map(n=>n.toString())),e=e.concat(this.addressManager.getObservedAddrs().map(n=>n.toString()));let r=this._options.addresses.announceFilter,i=new Set(e);return r(Array.from(i).map(n=>new uJe(n)))}async hangUp(e){let{id:r}=fC(e),i=this.connectionManager.connections.get(r.toB58String());!i||await Promise.all(i.map(n=>n.close()))}ping(e){let{id:r,multiaddrs:i}=fC(e);return i?u_(this,i[0]):u_(this,r)}handle(e,r){e=Array.isArray(e)?e:[e],e.forEach(i=>{this.upgrader.protocols.set(i,r)}),this.peerStore.protoBook.add(this.peerId,e)}unhandle(e){e=Array.isArray(e)?e:[e],e.forEach(r=>{this.upgrader.protocols.delete(r)}),this.peerStore.protoBook.remove(this.peerId,e)}async _onStarting(){let e=this.addressManager.getListenAddrs();await this.transportManager.listen(e),this.natManager.start(),await this.peerStore.start(),this._config.pubsub.enabled&&this.pubsub&&this.pubsub.start(),this._config.dht.enabled&&(this._dht&&await this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",e=>{this.emit("peer:discovery",e),this._maybeConnect(e)});for(let e of this.peerStore.peers.values())this.emit("peer:discovery",e.id);this.connectionManager.start(),this._autodialler.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(e){if(e.id.toB58String()===this.peerId.toB58String()){fs.error(new Error(c_.ERR_DISCOVERED_SELF));return}e.multiaddrs&&this.peerStore.addressBook.add(e.id,e.multiaddrs),e.protocols&&this.peerStore.protoBook.set(e.id,e.protocols)}async _maybeConnect(e){if(this._config.peerDiscovery.autoDial===!0&&!this.connectionManager.get(e)&&(this._options.connectionManager.minConnections||0)>this.connectionManager.size){fs("connecting to discovered peer %s",e.toB58String());try{await this.dialer.connectToPeer(e)}catch(i){fs.error(`could not connect to discovered peer ${e.toB58String()} with ${i}`)}}}async _setupPeerDiscovery(){let e=r=>{let i={enabled:!0};if(r.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[r.tag]&&(i={...i,...this._config.peerDiscovery[r.tag]}),i.enabled&&!this._discovery.has(r.tag)){let n;typeof r=="function"?n=new r(Object.assign({},i,{peerId:this.peerId,libp2p:this})):n=r,n.on("peer",this._onDiscoveryPeer),this._discovery.set(r.tag,n)}};for(let r of this._modules.peerDiscovery||[])e(r);for(let r of this.transportManager.getTransports())r.discovery&&e(r.discovery);await Promise.all(Array.from(this._discovery.values(),r=>r.start()))}};jme.exports=Bm});var Jme=g((vDt,Zme)=>{f();Zme.exports=Qme;var Xme=128,LJe=127,MJe=~LJe,jJe=Math.pow(2,31);function Qme(t,e,r){e=e||[],r=r||0;for(var i=r;t>=jJe;)e[r++]=t&255|Xme,t/=128;for(;t&MJe;)e[r++]=t&255|Xme,t>>>=7;return e[r]=t|0,Qme.bytes=r-i+1,e}});var r3e=g((EDt,t3e)=>{f();t3e.exports=hC;var qJe=128,e3e=127;function hC(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o)throw hC.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&e3e)<<i:(s&e3e)*Math.pow(2,i),i+=7}while(s>=qJe);return hC.bytes=n-e,r}});var n3e=g((SDt,i3e)=>{f();var UJe=Math.pow(2,7),FJe=Math.pow(2,14),KJe=Math.pow(2,21),VJe=Math.pow(2,28),zJe=Math.pow(2,35),HJe=Math.pow(2,42),$Je=Math.pow(2,49),GJe=Math.pow(2,56),WJe=Math.pow(2,63);i3e.exports=function(t){return t<UJe?1:t<FJe?2:t<KJe?3:t<VJe?4:t<zJe?5:t<HJe?6:t<$Je?7:t<GJe?8:t<WJe?9:10}});var o3e=g((ADt,s3e)=>{f();s3e.exports={encode:Jme(),decode:r3e(),encodingLength:n3e()}});var u3e=g((xDt,c3e)=>{f();"use strict";var a3e=o3e();c3e.exports=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");let e=[];for(;t.length>0;){let r=a3e.decode(t);e.push(r),t=t.slice(a3e.decode.bytes)}return e}});var p3e=g((UDt,d3e)=>{f();"use strict";function h3e(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function ZJe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return h3e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),h3e(new n,r)}}d3e.exports=ZJe});var S3e=g((ZDt,E3e)=>{f();E3e.exports=JJe;function JJe(t,e,r){var i=null,n=null,s=function(){i&&(clearTimeout(i),n=null,i=null)},o=function(){var c=n;s(),c&&c()},a=function(){if(!e)return t.apply(this,arguments);var c=this,u=arguments,l=r&&!i;if(s(),n=function(){t.apply(c,u)},i=setTimeout(function(){if(i=null,!l){var h=n;return n=null,h()}},e),l)return n()};return a.cancel=s,a.flush=o,a}});var U3e=g((GNt,q3e)=>{f();"use strict";function j3e(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function oet(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return j3e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),j3e(new n,r)}}q3e.exports=oet});var Aet={};kt(Aet,{CID:()=>met,PeerId:()=>wet,create:()=>pet,crypto:()=>yet,globSource:()=>_et,isIPFS:()=>get,multiaddr:()=>bet,path:()=>Eet,urlSource:()=>vet});f();f();f();f();var SO=A(du()),Rt=SO.default;var s4e=A(K1()),o4e=A(ce()),jC=A(_t());f();var a3=A(DO());f();var lc=A(Si()),dd=lc.default.Reader,W_=lc.default.Writer,Xe=lc.default.util,Li=lc.default.roots["ipfs-unixfs"]||(lc.default.roots["ipfs-unixfs"]={}),Ck=Li.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Xe.newBuffer([]),t.prototype.filesize=Xe.Long?Xe.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=Xe.emptyArray,t.prototype.hashType=Xe.Long?Xe.Long.fromBits(0,0,!0):0,t.prototype.fanout=Xe.Long?Xe.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,i){if(i||(i=W_.create()),i.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&i.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&i.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var n=0;n<r.blocksizes.length;++n)i.uint32(32).uint64(r.blocksizes[n]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&i.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&i.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&i.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&Li.UnixTime.encode(r.mtime,i.uint32(66).fork()).ldelim(),i},t.decode=function(r,i){r instanceof dd||(r=dd.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Li.Data;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(o&7)==2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=Li.UnixTime.decode(r,r.uint32());break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Xe.ProtocolError("missing required 'Type'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Li.Data)return r;var i=new Li.Data;switch(r.Type){case"Raw":case 0:i.Type=0;break;case"Directory":case 1:i.Type=1;break;case"File":case 2:i.Type=2;break;case"Metadata":case 3:i.Type=3;break;case"Symlink":case 4:i.Type=4;break;case"HAMTShard":case 5:i.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?Xe.base64.decode(r.Data,i.Data=Xe.newBuffer(Xe.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),r.filesize!=null&&(Xe.Long?(i.filesize=Xe.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?i.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?i.filesize=r.filesize:typeof r.filesize=="object"&&(i.filesize=new Xe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");i.blocksizes=[];for(var n=0;n<r.blocksizes.length;++n)Xe.Long?(i.blocksizes[n]=Xe.Long.fromValue(r.blocksizes[n])).unsigned=!0:typeof r.blocksizes[n]=="string"?i.blocksizes[n]=parseInt(r.blocksizes[n],10):typeof r.blocksizes[n]=="number"?i.blocksizes[n]=r.blocksizes[n]:typeof r.blocksizes[n]=="object"&&(i.blocksizes[n]=new Xe.LongBits(r.blocksizes[n].low>>>0,r.blocksizes[n].high>>>0).toNumber(!0))}if(r.hashType!=null&&(Xe.Long?(i.hashType=Xe.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?i.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?i.hashType=r.hashType:typeof r.hashType=="object"&&(i.hashType=new Xe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(Xe.Long?(i.fanout=Xe.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?i.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?i.fanout=r.fanout:typeof r.fanout=="object"&&(i.fanout=new Xe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(i.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");i.mtime=Li.UnixTime.fromObject(r.mtime)}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.blocksizes=[]),i.defaults){if(n.Type=i.enums===String?"Raw":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Xe.newBuffer(n.Data))),Xe.Long){var s=new Xe.Long(0,0,!0);n.filesize=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.filesize=i.longs===String?"0":0;if(Xe.Long){var s=new Xe.Long(0,0,!0);n.hashType=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.hashType=i.longs===String?"0":0;if(Xe.Long){var s=new Xe.Long(0,0,!0);n.fanout=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.fanout=i.longs===String?"0":0;n.mode=0,n.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Li.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Xe.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?n.filesize=i.longs===String?String(r.filesize):r.filesize:n.filesize=i.longs===String?Xe.Long.prototype.toString.call(r.filesize):i.longs===Number?new Xe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)typeof r.blocksizes[o]=="number"?n.blocksizes[o]=i.longs===String?String(r.blocksizes[o]):r.blocksizes[o]:n.blocksizes[o]=i.longs===String?Xe.Long.prototype.toString.call(r.blocksizes[o]):i.longs===Number?new Xe.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0):r.blocksizes[o]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?n.hashType=i.longs===String?String(r.hashType):r.hashType:n.hashType=i.longs===String?Xe.Long.prototype.toString.call(r.hashType):i.longs===Number?new Xe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?n.fanout=i.longs===String?String(r.fanout):r.fanout:n.fanout=i.longs===String?Xe.Long.prototype.toString.call(r.fanout):i.longs===Number?new Xe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(n.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(n.mtime=Li.UnixTime.toObject(r.mtime,i)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,lc.default.util.toJSONOptions)},t.DataType=function(){let e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})(),itt=Li.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Seconds=Xe.Long?Xe.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,i){return i||(i=W_.create()),i.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&i.uint32(21).fixed32(r.FractionalNanoseconds),i},t.decode=function(r,i){r instanceof dd||(r=dd.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Li.UnixTime;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Seconds"))throw Xe.ProtocolError("missing required 'Seconds'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Li.UnixTime)return r;var i=new Li.UnixTime;return r.Seconds!=null&&(Xe.Long?(i.Seconds=Xe.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?i.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?i.Seconds=r.Seconds:typeof r.Seconds=="object"&&(i.Seconds=new Xe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(i.FractionalNanoseconds=r.FractionalNanoseconds>>>0),i},t.toObject=function(r,i){i||(i={});var n={};if(i.defaults){if(Xe.Long){var s=new Xe.Long(0,0,!1);n.Seconds=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.Seconds=i.longs===String?"0":0;n.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?n.Seconds=i.longs===String?String(r.Seconds):r.Seconds:n.Seconds=i.longs===String?Xe.Long.prototype.toString.call(r.Seconds):i.longs===Number?new Xe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=r.FractionalNanoseconds),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,lc.default.util.toJSONOptions)},t})(),ntt=Li.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.MimeType="",t.encode=function(r,i){return i||(i=W_.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&i.uint32(10).string(r.MimeType),i},t.decode=function(r,i){r instanceof dd||(r=dd.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Li.Metadata;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Li.Metadata)return r;var i=new Li.Metadata;return r.MimeType!=null&&(i.MimeType=String(r.MimeType)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(n.MimeType=r.MimeType),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,lc.default.util.toJSONOptions)},t})();var fc=Ck,Ok=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],qbe=["directory","hamt-sharded-directory"],kk=parseInt("0644",8),Dk=parseInt("0755",8);function hc(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function mu(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),i=Math.floor(r/1e3);e={secs:i,nsecs:(r-i*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,a3.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var at=class{static unmarshal(e){let r=fc.decode(e),i=fc.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),n=new at({type:Ok[i.Type],data:i.Data,blockSizes:i.blocksizes,mode:i.mode,mtime:i.mtime?{secs:i.mtime.Seconds,nsecs:i.mtime.FractionalNanoseconds}:void 0});return n._originalMode=i.mode||0,n}constructor(e={type:"file"}){let{type:r,data:i,blockSizes:n,hashType:s,fanout:o,mtime:a,mode:c}=e;if(r&&!Ok.includes(r))throw(0,a3.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r||"file",this.data=i,this.hashType=s,this.fanout=o,this.blockSizes=n||[],this._originalMode=0,this.mode=hc(c),a&&(this.mtime=mu(a),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?Dk:kk;let r=hc(e);r!==void 0&&(this._mode=r)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&qbe.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(r=>{e+=r}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=fc.DataType.Raw;break;case"directory":e=fc.DataType.Directory;break;case"file":e=fc.DataType.File;break;case"metadata":e=fc.DataType.Metadata;break;case"symlink":e=fc.DataType.Symlink;break;case"hamt-sharded-directory":e=fc.DataType.HAMTShard;break;default:throw(0,a3.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let r=this.data;(!this.data||!this.data.length)&&(r=void 0);let i;this.mode!=null&&(i=this._originalMode&4294963200|(hc(this.mode)||0),i===kk&&!this.isDirectory()&&(i=void 0),i===Dk&&this.isDirectory()&&(i=void 0));let n;if(this.mtime!=null){let o=mu(this.mtime);o&&(n={Seconds:o.secs,FractionalNanoseconds:o.nsecs},n.FractionalNanoseconds===0&&delete n.FractionalNanoseconds)}let s={Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:i,mtime:n};return fc.encode(s).finish()}};var un={};kt(un,{code:()=>gt,createLink:()=>nD,createNode:()=>iD,decode:()=>Ct,encode:()=>st,name:()=>L5e,prepare:()=>Ai,validate:()=>nv});f();ye();f();var R5e=new TextDecoder;function rv(t,e){let r=0;for(let i=0;;i+=7){if(i>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let n=t[e++];if(r+=i<28?(n&127)<<i:(n&127)*2**i,n<128)break}return[r,e]}function h3(t,e){let r;[r,e]=rv(t,e);let i=e+r;if(r<0||i<0)throw new Error("protobuf: invalid length");if(i>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,i),i]}function Yk(t,e){let r;return[r,e]=rv(t,e),[r&7,r>>3,e]}function I5e(t){let e={},r=t.length,i=0;for(;i<r;){let n,s;if([n,s,i]=Yk(t,i),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,i]=h3(t,i)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,i]=h3(t,i),e.Name=R5e.decode(o)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(n!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[e.Tsize,i]=rv(t,i)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(i>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Xk(t){let e=t.length,r=0,i,n=!1,s;for(;r<e;){let a,c;if([a,c,r]=Yk(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=h3(t,r),i&&(n=!0)}else if(c===2){if(n)throw new Error("protobuf: (PBNode) duplicate Links section");i||(i=[]);let u;[u,r]=h3(t,r),i.push(I5e(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let o={};return s&&(o.Data=s),o.Links=i||[],o}f();var Qk=new TextEncoder,Zk=2**32,T5e=2**31;function P5e(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=X1(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let i=Qk.encode(t.Name);r-=i.length,e.set(i,r),r=X1(e,r,i.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=X1(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function Jk(t){let e=O5e(t),r=new Uint8Array(e),i=e;if(t.Data&&(i-=t.Data.length,r.set(t.Data,i),i=X1(r,i,t.Data.length)-1,r[i]=10),t.Links)for(let n=t.Links.length-1;n>=0;n--){let s=P5e(t.Links[n],r.subarray(0,i));i-=s,i=X1(r,i,s)-1,r[i]=18}return r}function C5e(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+wd(r)}if(typeof t.Name=="string"){let r=Qk.encode(t.Name).length;e+=1+r+wd(r)}return typeof t.Tsize=="number"&&(e+=1+wd(t.Tsize)),e}function O5e(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+wd(r)}if(t.Links)for(let r of t.Links){let i=C5e(r);e+=1+i+wd(i)}return e}function X1(t,e,r){e-=wd(r);let i=e;for(;r>=T5e;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,i}function wd(t){return t%2==0&&t++,Math.floor((k5e(t)+6)/7)}function k5e(t){let e=0;return t>=Zk&&(t=Math.floor(t/Zk),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+D5e[t]}var D5e=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];f();ye();var N5e=["Data","Links"],B5e=["Hash","Name","Tsize"],iv=new TextEncoder;function eD(t,e){if(t===e)return 0;let r=t.Name?iv.encode(t.Name):[],i=e.Name?iv.encode(e.Name):[],n=r.length,s=i.length;for(let o=0,a=Math.min(n,s);o<a;++o)if(r[o]!==i[o]){n=r[o],s=i[o];break}return n<s?-1:s<n?1:0}function tD(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function rD(t){if(typeof t.asCID=="object"){let r=q.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=q.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=q.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=q.decode(t.Hash)))}catch(i){throw new TypeError(`Invalid DAG-PB form: ${i.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function Ai(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=iv.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(rD),e.Links.sort(eD);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function nv(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!tD(t,N5e))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!tD(r,B5e))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&eD(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function iD(t,e=[]){return Ai({Data:t,Links:e})}function nD(t,e,r){return rD({Hash:r,Name:t,Tsize:e})}var L5e="dag-pb",gt=112;function st(t){nv(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let i={};return r.Hash&&(i.Hash=r.Hash.bytes),r.Name!==void 0&&(i.Name=r.Name),r.Tsize!==void 0&&(i.Tsize=r.Tsize),i})),t.Data&&(e.Data=t.Data),Jk(e)}function Ct(t){let e=Xk(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(i=>{let n={};try{n.Hash=q.decode(i.Hash)}catch(s){}if(!n.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(n.Name=i.Name),i.Tsize!==void 0&&(n.Tsize=i.Tsize),n})),r}var n2={};kt(n2,{code:()=>pv,decode:()=>gv,encode:()=>yv,name:()=>a8e});f();f();f();f();var M5e=["string","number","bigint","symbol"],j5e=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function sD(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(M5e.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(q5e(t))return"Buffer";let r=U5e(t);return r||"Object"}function q5e(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function U5e(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(j5e.includes(e))return e}f();var Y=class{constructor(e,r,i){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Y.uint=new Y(0,"uint",!0);Y.negint=new Y(1,"negint",!0);Y.bytes=new Y(2,"bytes",!0);Y.string=new Y(3,"string",!0);Y.array=new Y(4,"array",!1);Y.map=new Y(5,"map",!1);Y.tag=new Y(6,"tag",!1);Y.float=new Y(7,"float",!0);Y.false=new Y(7,"false",!0);Y.true=new Y(7,"true",!0);Y.null=new Y(7,"null",!0);Y.undefined=new Y(7,"undefined",!0);Y.break=new Y(7,"break",!0);var he=class{constructor(e,r,i){this.type=e,this.value=r,this.encodedLength=i,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}};f();f();var _d=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",F5e=new TextDecoder,K5e=new TextEncoder;function d3(t){return _d&&globalThis.Buffer.isBuffer(t)}function Q1(t){return t instanceof Uint8Array?d3(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var oD=_d?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):fD(t,e,r):(t,e,r)=>r-e>64?F5e.decode(t.subarray(e,r)):fD(t,e,r),p3=_d?t=>t.length>64?globalThis.Buffer.from(t):lD(t):t=>t.length>64?K5e.encode(t):lD(t),ia=t=>Uint8Array.from(t),y3=_d?(t,e,r)=>d3(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),aD=_d?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Q1(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),i=0;for(let n of t)i+n.length>r.length&&(n=n.subarray(0,r.length-i)),r.set(n,i),i+=n.length;return r},cD=_d?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function uD(t,e){if(d3(t)&&d3(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function lD(t,e=1/0){let r,i=t.length,n=null,s=[];for(let o=0;o<i;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function fD(t,e,r){let i=[];for(;e<r;){let n=t[e],s=null,o=n>239?4:n>223?3:n>191?2:1;if(e+o<=r){let a,c,u,l;switch(o){case 1:n<128&&(s=n);break;case 2:a=t[e+1],(a&192)==128&&(l=(n&31)<<6|a&63,l>127&&(s=l));break;case 3:a=t[e+1],c=t[e+2],(a&192)==128&&(c&192)==128&&(l=(n&15)<<12|(a&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:a=t[e+1],c=t[e+2],u=t[e+3],(a&192)==128&&(c&192)==128&&(u&192)==128&&(l=(n&15)<<18|(a&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),e+=o}return sv(i)}var hD=4096;function sv(t){let e=t.length;if(e<=hD)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=hD));return r}var V5e=256,g3=class{constructor(e=V5e){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let n=r.length-(this.maxCursor-this.cursor)-1;r.set(e,n)}else{if(r){let n=r.length-(this.maxCursor-this.cursor)-1;n<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=cD(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let i=this.chunks[0];e&&this.cursor>i.length/2?(r=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=y3(i,0,this.cursor)}else r=aD(this.chunks,this.cursor);return e&&this.reset(),r}};f();var qe="CBOR decode error:",pc="CBOR encode error:",Z1=[];Z1[23]=1;Z1[24]=2;Z1[25]=3;Z1[26]=5;Z1[27]=9;function yc(t,e,r){if(t.length-e<r)throw new Error(`${qe} not enough data for type`)}f();f();var xi=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Gn(t,e,r){yc(t,e,1);let i=t[e];if(r.strict===!0&&i<xi[0])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);return i}function Wn(t,e,r){yc(t,e,2);let i=t[e]<<8|t[e+1];if(r.strict===!0&&i<xi[1])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);return i}function Yn(t,e,r){yc(t,e,4);let i=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&i<xi[2])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);return i}function Xn(t,e,r){yc(t,e,8);let i=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],n=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(i)<<BigInt(32))+BigInt(n);if(r.strict===!0&&s<xi[3])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${qe} integers outside of the safe integer range are not supported`)}function dD(t,e,r,i){return new he(Y.uint,Gn(t,e+1,i),2)}function pD(t,e,r,i){return new he(Y.uint,Wn(t,e+1,i),3)}function yD(t,e,r,i){return new he(Y.uint,Yn(t,e+1,i),5)}function gD(t,e,r,i){return new he(Y.uint,Xn(t,e+1,i),9)}function bs(t,e){return Tn(t,0,e.value)}function Tn(t,e,r){if(r<xi[0]){let i=Number(r);t.push([e|i])}else if(r<xi[1]){let i=Number(r);t.push([e|24,i])}else if(r<xi[2]){let i=Number(r);t.push([e|25,i>>>8,i&255])}else if(r<xi[3]){let i=Number(r);t.push([e|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{let i=BigInt(r);if(i<xi[4]){let n=[e|27,0,0,0,0,0,0,0],s=Number(i&BigInt(4294967295)),o=Number(i>>BigInt(32)&BigInt(4294967295));n[8]=s&255,s=s>>8,n[7]=s&255,s=s>>8,n[6]=s&255,s=s>>8,n[5]=s&255,n[4]=o&255,o=o>>8,n[3]=o&255,o=o>>8,n[2]=o&255,o=o>>8,n[1]=o&255,t.push(n)}else throw new Error(`${qe} encountered BigInt larger than allowable range`)}}bs.encodedSize=function(e){return Tn.encodedSize(e.value)};Tn.encodedSize=function(e){return e<xi[0]?1:e<xi[1]?2:e<xi[2]?3:e<xi[3]?5:9};bs.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};f();function mD(t,e,r,i){return new he(Y.negint,-1-Gn(t,e+1,i),2)}function bD(t,e,r,i){return new he(Y.negint,-1-Wn(t,e+1,i),3)}function wD(t,e,r,i){return new he(Y.negint,-1-Yn(t,e+1,i),5)}var ov=BigInt(-1),_D=BigInt(1);function vD(t,e,r,i){let n=Xn(t,e+1,i);if(typeof n!="bigint"){let s=-1-n;if(s>=Number.MIN_SAFE_INTEGER)return new he(Y.negint,s,9)}if(i.allowBigInt!==!0)throw new Error(`${qe} integers outside of the safe integer range are not supported`);return new he(Y.negint,ov-BigInt(n),9)}function m3(t,e){let r=e.value,i=typeof r=="bigint"?r*ov-_D:r*-1-1;Tn(t,e.type.majorEncoded,i)}m3.encodedSize=function(e){let r=e.value,i=typeof r=="bigint"?r*ov-_D:r*-1-1;return i<xi[0]?1:i<xi[1]?2:i<xi[2]?3:i<xi[3]?5:9};m3.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};f();function J1(t,e,r,i){yc(t,e,r+i);let n=y3(t,e+r,e+r+i);return new he(Y.bytes,n,r+i)}function ED(t,e,r,i){return J1(t,e,1,r)}function SD(t,e,r,i){return J1(t,e,2,Gn(t,e+1,i))}function AD(t,e,r,i){return J1(t,e,3,Wn(t,e+1,i))}function xD(t,e,r,i){return J1(t,e,5,Yn(t,e+1,i))}function RD(t,e,r,i){let n=Xn(t,e+1,i);if(typeof n=="bigint")throw new Error(`${qe} 64-bit integer bytes lengths not supported`);return J1(t,e,9,n)}function b3(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Y.string?p3(t.value):t.value),t.encodedBytes}function vd(t,e){let r=b3(e);Tn(t,e.type.majorEncoded,r.length),t.push(r)}vd.encodedSize=function(e){let r=b3(e);return Tn.encodedSize(r.length)+r.length};vd.compareTokens=function(e,r){return z5e(b3(e),b3(r))};function z5e(t,e){return t.length<e.length?-1:t.length>e.length?1:uD(t,e)}f();function e2(t,e,r,i){let n=r+i;return yc(t,e,n),new he(Y.string,oD(t,e+r,e+n),n)}function ID(t,e,r,i){return e2(t,e,1,r)}function TD(t,e,r,i){return e2(t,e,2,Gn(t,e+1,i))}function PD(t,e,r,i){return e2(t,e,3,Wn(t,e+1,i))}function CD(t,e,r,i){return e2(t,e,5,Yn(t,e+1,i))}function OD(t,e,r,i){let n=Xn(t,e+1,i);if(typeof n=="bigint")throw new Error(`${qe} 64-bit integer string lengths not supported`);return e2(t,e,9,n)}var kD=vd;f();function Ed(t,e,r,i){return new he(Y.array,i,r)}function DD(t,e,r,i){return Ed(t,e,1,r)}function ND(t,e,r,i){return Ed(t,e,2,Gn(t,e+1,i))}function BD(t,e,r,i){return Ed(t,e,3,Wn(t,e+1,i))}function LD(t,e,r,i){return Ed(t,e,5,Yn(t,e+1,i))}function MD(t,e,r,i){let n=Xn(t,e+1,i);if(typeof n=="bigint")throw new Error(`${qe} 64-bit integer array lengths not supported`);return Ed(t,e,9,n)}function jD(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${qe} indefinite length items not allowed`);return Ed(t,e,1,1/0)}function av(t,e){Tn(t,Y.array.majorEncoded,e.value)}av.compareTokens=bs.compareTokens;f();function Sd(t,e,r,i){return new he(Y.map,i,r)}function qD(t,e,r,i){return Sd(t,e,1,r)}function UD(t,e,r,i){return Sd(t,e,2,Gn(t,e+1,i))}function FD(t,e,r,i){return Sd(t,e,3,Wn(t,e+1,i))}function KD(t,e,r,i){return Sd(t,e,5,Yn(t,e+1,i))}function VD(t,e,r,i){let n=Xn(t,e+1,i);if(typeof n=="bigint")throw new Error(`${qe} 64-bit integer map lengths not supported`);return Sd(t,e,9,n)}function zD(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${qe} indefinite length items not allowed`);return Sd(t,e,1,1/0)}function cv(t,e){Tn(t,Y.map.majorEncoded,e.value)}cv.compareTokens=bs.compareTokens;f();function HD(t,e,r,i){return new he(Y.tag,r,1)}function $D(t,e,r,i){return new he(Y.tag,Gn(t,e+1,i),2)}function GD(t,e,r,i){return new he(Y.tag,Wn(t,e+1,i),3)}function WD(t,e,r,i){return new he(Y.tag,Yn(t,e+1,i),5)}function YD(t,e,r,i){return new he(Y.tag,Xn(t,e+1,i),9)}function uv(t,e){Tn(t,Y.tag.majorEncoded,e.value)}uv.compareTokens=bs.compareTokens;f();var H5e=20,$5e=21,G5e=22,W5e=23;function XD(t,e,r,i){if(i.allowUndefined===!1)throw new Error(`${qe} undefined values are not supported`);return i.coerceUndefinedToNull===!0?new he(Y.null,null,1):new he(Y.undefined,void 0,1)}function QD(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${qe} indefinite length items not allowed`);return new he(Y.break,void 0,1)}function lv(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${qe} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${qe} Infinity values are not supported`)}return new he(Y.float,t,e)}function ZD(t,e,r,i){return lv(fv(t,e+1),3,i)}function JD(t,e,r,i){return lv(hv(t,e+1),5,i)}function eN(t,e,r,i){return lv(nN(t,e+1),9,i)}function w3(t,e,r){let i=e.value;if(i===!1)t.push([Y.float.majorEncoded|H5e]);else if(i===!0)t.push([Y.float.majorEncoded|$5e]);else if(i===null)t.push([Y.float.majorEncoded|G5e]);else if(i===void 0)t.push([Y.float.majorEncoded|W5e]);else{let n,s=!1;(!r||r.float64!==!0)&&(rN(i),n=fv(bo,1),i===n||Number.isNaN(i)?(bo[0]=249,t.push(bo.slice(0,3)),s=!0):(iN(i),n=hv(bo,1),i===n&&(bo[0]=250,t.push(bo.slice(0,5)),s=!0))),s||(Y5e(i),n=nN(bo,1),bo[0]=251,t.push(bo.slice(0,9)))}}w3.encodedSize=function(e,r){let i=e.value;if(i===!1||i===!0||i===null||i===void 0)return 1;let n;if(!r||r.float64!==!0){if(rN(i),n=fv(bo,1),i===n||Number.isNaN(i))return 3;if(iN(i),n=hv(bo,1),i===n)return 5}return 9};var tN=new ArrayBuffer(9),ws=new DataView(tN,1),bo=new Uint8Array(tN,0);function rN(t){if(t===1/0)ws.setUint16(0,31744,!1);else if(t===-1/0)ws.setUint16(0,64512,!1);else if(Number.isNaN(t))ws.setUint16(0,32256,!1);else{ws.setFloat32(0,t);let e=ws.getUint32(0),r=(e&2139095040)>>23,i=e&8388607;if(r===255)ws.setUint16(0,31744,!1);else if(r===0)ws.setUint16(0,(t&2147483648)>>16|i>>13,!1);else{let n=r-127;n<-24?ws.setUint16(0,0):n<-14?ws.setUint16(0,(e&2147483648)>>16|1<<24+n,!1):ws.setUint16(0,(e&2147483648)>>16|n+15<<10|i>>13,!1)}}}function fv(t,e){if(t.length-e<2)throw new Error(`${qe} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let i=r>>10&31,n=r&1023,s;return i===0?s=n*2**-24:i!==31?s=(n+1024)*2**(i-25):s=n===0?1/0:NaN,r&32768?-s:s}function iN(t){ws.setFloat32(0,t,!1)}function hv(t,e){if(t.length-e<4)throw new Error(`${qe} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Y5e(t){ws.setFloat64(0,t,!1)}function nN(t,e){if(t.length-e<8)throw new Error(`${qe} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}w3.compareTokens=bs.compareTokens;function Kt(t,e,r){throw new Error(`${qe} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function _3(t){return()=>{throw new Error(`${qe} ${t}`)}}var xe=[];for(let t=0;t<=23;t++)xe[t]=Kt;xe[24]=dD;xe[25]=pD;xe[26]=yD;xe[27]=gD;xe[28]=Kt;xe[29]=Kt;xe[30]=Kt;xe[31]=Kt;for(let t=32;t<=55;t++)xe[t]=Kt;xe[56]=mD;xe[57]=bD;xe[58]=wD;xe[59]=vD;xe[60]=Kt;xe[61]=Kt;xe[62]=Kt;xe[63]=Kt;for(let t=64;t<=87;t++)xe[t]=ED;xe[88]=SD;xe[89]=AD;xe[90]=xD;xe[91]=RD;xe[92]=Kt;xe[93]=Kt;xe[94]=Kt;xe[95]=_3("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)xe[t]=ID;xe[120]=TD;xe[121]=PD;xe[122]=CD;xe[123]=OD;xe[124]=Kt;xe[125]=Kt;xe[126]=Kt;xe[127]=_3("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)xe[t]=DD;xe[152]=ND;xe[153]=BD;xe[154]=LD;xe[155]=MD;xe[156]=Kt;xe[157]=Kt;xe[158]=Kt;xe[159]=jD;for(let t=160;t<=183;t++)xe[t]=qD;xe[184]=UD;xe[185]=FD;xe[186]=KD;xe[187]=VD;xe[188]=Kt;xe[189]=Kt;xe[190]=Kt;xe[191]=zD;for(let t=192;t<=215;t++)xe[t]=HD;xe[216]=$D;xe[217]=GD;xe[218]=WD;xe[219]=YD;xe[220]=Kt;xe[221]=Kt;xe[222]=Kt;xe[223]=Kt;for(let t=224;t<=243;t++)xe[t]=_3("simple values are not supported");xe[244]=Kt;xe[245]=Kt;xe[246]=Kt;xe[247]=XD;xe[248]=_3("simple values are not supported");xe[249]=ZD;xe[250]=JD;xe[251]=eN;xe[252]=Kt;xe[253]=Kt;xe[254]=Kt;xe[255]=QD;var wo=[];for(let t=0;t<24;t++)wo[t]=new he(Y.uint,t,1);for(let t=-1;t>=-24;t--)wo[31-t]=new he(Y.negint,t,1);wo[64]=new he(Y.bytes,new Uint8Array(0),1);wo[96]=new he(Y.string,"",1);wo[128]=new he(Y.array,0,1);wo[160]=new he(Y.map,0,1);wo[244]=new he(Y.false,!1,1);wo[245]=new he(Y.true,!0,1);wo[246]=new he(Y.null,null,1);function sN(t){switch(t.type){case Y.false:return ia([244]);case Y.true:return ia([245]);case Y.null:return ia([246]);case Y.bytes:return t.value.length?void 0:ia([64]);case Y.string:return t.value===""?ia([96]):void 0;case Y.array:return t.value===0?ia([128]):void 0;case Y.map:return t.value===0?ia([160]):void 0;case Y.uint:return t.value<24?ia([Number(t.value)]):void 0;case Y.negint:if(t.value>=-24)return ia([31-Number(t.value)])}}var X5e={float64:!1,mapSorter:Z5e,quickEncodeToken:sN},na=[];na[Y.uint.major]=bs;na[Y.negint.major]=m3;na[Y.bytes.major]=vd;na[Y.string.major]=kD;na[Y.array.major]=av;na[Y.map.major]=cv;na[Y.tag.major]=uv;na[Y.float.major]=w3;var oN=new g3,t2=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${pc} object contains circular references`);return new t2(r,e)}},vu={null:new he(Y.null,null),undefined:new he(Y.undefined,void 0),true:new he(Y.true,!0),false:new he(Y.false,!1),emptyArray:new he(Y.array,0),emptyMap:new he(Y.map,0)},Eu={number(t,e,r,i){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new he(Y.float,t):t>=0?new he(Y.uint,t):new he(Y.negint,t)},bigint(t,e,r,i){return t>=BigInt(0)?new he(Y.uint,t):new he(Y.negint,t)},Uint8Array(t,e,r,i){return new he(Y.bytes,t)},string(t,e,r,i){return new he(Y.string,t)},boolean(t,e,r,i){return t?vu.true:vu.false},null(t,e,r,i){return vu.null},undefined(t,e,r,i){return vu.undefined},ArrayBuffer(t,e,r,i){return new he(Y.bytes,new Uint8Array(t))},DataView(t,e,r,i){return new he(Y.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,i){if(!t.length)return r.addBreakTokens===!0?[vu.emptyArray,new he(Y.break)]:vu.emptyArray;i=t2.createCheck(i,t);let n=[],s=0;for(let o of t)n[s++]=v3(o,r,i);return r.addBreakTokens?[new he(Y.array,t.length),n,new he(Y.break)]:[new he(Y.array,t.length),n]},Object(t,e,r,i){let n=e!=="Object",s=n?t.keys():Object.keys(t),o=n?t.size:s.length;if(!o)return r.addBreakTokens===!0?[vu.emptyMap,new he(Y.break)]:vu.emptyMap;i=t2.createCheck(i,t);let a=[],c=0;for(let u of s)a[c++]=[v3(u,r,i),v3(n?t.get(u):t[u],r,i)];return Q5e(a,r),r.addBreakTokens?[new he(Y.map,o),a,new he(Y.break)]:[new he(Y.map,o),a]}};Eu.Map=Eu.Object;Eu.Buffer=Eu.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Eu[`${t}Array`]=Eu.DataView;function v3(t,e={},r){let i=sD(t),n=e&&e.typeEncoders&&e.typeEncoders[i]||Eu[i];if(typeof n=="function"){let o=n(t,i,e,r);if(o!=null)return o}let s=Eu[i];if(!s)throw new Error(`${pc} unsupported type: ${i}`);return s(t,i,e,r)}function Q5e(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Z5e(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],i=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==i.type)return r.type.compare(i.type);let n=r.type.major,s=na[n].compareTokens(r,i);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function aN(t,e,r,i){if(Array.isArray(e))for(let n of e)aN(t,n,r,i);else r[e.type.major](t,e,i)}function dv(t,e,r){let i=v3(t,r);if(!Array.isArray(i)&&r.quickEncodeToken){let n=r.quickEncodeToken(i);if(n)return n;let s=e[i.type.major];if(s.encodedSize){let o=s.encodedSize(i,r),a=new g3(o);if(s(a,i,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return Q1(a.chunks[0])}}return aN(oN,i,e,r),oN.toBytes(!0)}function _s(t,e){return e=Object.assign({},X5e,e),dv(t,na,e)}f();var J5e={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},cN=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=wo[e];if(r===void 0){let i=xe[e];if(!i)throw new Error(`${qe} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let n=e&31;r=i(this.data,this.pos,n,this.options)}return this.pos+=r.encodedLength,r}},r2=Symbol.for("DONE"),E3=Symbol.for("BREAK");function e8e(t,e,r){let i=[];for(let n=0;n<t.value;n++){let s=i2(e,r);if(s===E3){if(t.value===1/0)break;throw new Error(`${qe} got unexpected break to lengthed array`)}if(s===r2)throw new Error(`${qe} found array but not enough entries (got ${n}, expected ${t.value})`);i[n]=s}return i}function t8e(t,e,r){let i=r.useMaps===!0,n=i?void 0:{},s=i?new Map:void 0;for(let o=0;o<t.value;o++){let a=i2(e,r);if(a===E3){if(t.value===1/0)break;throw new Error(`${qe} got unexpected break to lengthed map`)}if(a===r2)throw new Error(`${qe} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(i!==!0&&typeof a!="string")throw new Error(`${qe} non-string keys not supported (got ${typeof a})`);let c=i2(e,r);if(c===r2)throw new Error(`${qe} found map but not enough entries (got ${o} [no value], expected ${t.value})`);i?s.set(a,c):n[a]=c}return i?s:n}function i2(t,e){if(t.done())return r2;let r=t.next();if(r.type===Y.break)return E3;if(r.type.terminal)return r.value;if(r.type===Y.array)return e8e(r,t,e);if(r.type===Y.map)return t8e(r,t,e);if(r.type===Y.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let i=i2(t,e);return e.tags[r.value](i)}throw new Error(`${qe} tag not supported (${r.value})`)}throw new Error("unsupported")}function Ri(t,e){if(!(t instanceof Uint8Array))throw new Error(`${qe} data to decode must be a Uint8Array`);e=Object.assign({},J5e,e);let r=e.tokenizer||new cN(t,e),i=i2(r,e);if(i===r2)throw new Error(`${qe} did not find any content to decode`);if(i===E3)throw new Error(`${qe} got unexpected break`);if(!r.done())throw new Error(`${qe} too many terminals, data makes no sense`);return i}ye();var uN=42;function r8e(t){if(t.asCID!==t)return null;let e=q.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new he(Y.tag,uN),new he(Y.bytes,r)]}function i8e(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function n8e(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var s8e={float64:!0,typeEncoders:{Object:r8e,undefined:i8e,number:n8e}};function o8e(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return q.decode(t.subarray(1))}var lN={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};lN.tags[uN]=o8e;var a8e="dag-cbor",pv=113,yv=t=>_s(t,s8e),gv=t=>Ri(t,lN);var a2={};kt(a2,{code:()=>_v,decode:()=>b8e,encode:()=>m8e,name:()=>g8e});f();Ad();nf();f();f();var dN=class extends Array{constructor(){super();this.inRecursive=[]}prefix(e){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===Y.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===Y.map&&(r.elements++,r.elements!==1&&(r.elements%2==1?e.push([44]):e.push([58]))))}[Y.uint.major](e,r){this.prefix(e);let i=String(r.value),n=[];for(let s=0;s<i.length;s++)n[s]=i.charCodeAt(s);e.push(n)}[Y.negint.major](e,r){this[Y.uint.major](e,r)}[Y.bytes.major](e,r){throw new Error(`${pc} unsupported type: Uint8Array`)}[Y.string.major](e,r){this.prefix(e);let i=p3(JSON.stringify(r.value));e.push(i.length>32?Q1(i):i)}[Y.array.major](e,r){this.prefix(e),this.inRecursive.push({type:Y.array,elements:0}),e.push([91])}[Y.map.major](e,r){this.prefix(e),this.inRecursive.push({type:Y.map,elements:0}),e.push([123])}[Y.tag.major](e,r){}[Y.float.major](e,r){if(r.type.name==="break"){let o=this.inRecursive.pop();if(o){if(o.type===Y.array)e.push([93]);else if(o.type===Y.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${pc} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}let i=String(r.value),n=[],s=!1;for(let o=0;o<i.length;o++)n[o]=i.charCodeAt(o),!s&&(n[o]===46||n[o]===101||n[o]===69)&&(s=!0);s||(n.push(46),n.push(48)),e.push(n)}};function l8e(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${pc} complex map keys are not supported`);let r=t[0],i=e[0];if(r.type!==Y.string||i.type!==Y.string)throw new Error(`${pc} non-string map keys are not supported`);if(r<i)return-1;if(r>i)return 1;throw new Error(`${pc} unexpected duplicate map keys, this is not supported`)}var f8e={addBreakTokens:!0,mapSorter:l8e};function mv(t,e){return e=Object.assign({},f8e,e),dv(t,new dN,e)}f();var o2=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${qe} unexpected end of input at position ${this.pos}`);for(let r=0;r<e.length;r++)if(this.data[this.pos++]!==e[r])throw new Error(`${qe} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this.pos,r=!1,i=!1,n=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,i=!0;else return new he(Y.uint,0,this.pos-e);if(n([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===e+1)throw new Error(`${qe} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(i)throw new Error(`${qe} unexpected token at position ${this.pos}`);i=!0,this.pos++,n([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(i=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,n([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),o=parseFloat(s);return i?new he(Y.float,o,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(o)?new he(o>=0?Y.uint:Y.negint,o,this.pos-e):new he(o>=0?Y.uint:Y.negint,BigInt(s),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${qe} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let s=this.pos,o=0;s<this.data.length&&o<65536;s++,o++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this.pos,s));return this.pos=s+1,new he(Y.string,c,o)}}let e=this.pos,r=[],i=()=>{if(this.pos+4>=this.data.length)throw new Error(`${qe} unexpected end of unicode escape sequence at position ${this.pos}`);let s=0;for(let o=0;o<4;o++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${qe} unexpected unicode escape character at position ${this.pos}`);s=s*16+a,this.pos++}return s},n=()=>{let s=this.ch(),o=null,a=s>239?4:s>223?3:s>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${qe} unexpected unicode sequence at position ${this.pos}`);let c,u,l,h;switch(a){case 1:s<128&&(o=s);break;case 2:c=this.data[this.pos+1],(c&192)==128&&(h=(s&31)<<6|c&63,h>127&&(o=h));break;case 3:c=this.data[this.pos+1],u=this.data[this.pos+2],(c&192)==128&&(u&192)==128&&(h=(s&15)<<12|(c&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=this.data[this.pos+1],u=this.data[this.pos+2],l=this.data[this.pos+3],(c&192)==128&&(u&192)==128&&(l&192)==128&&(h=(s&15)<<18|(c&63)<<12|(u&63)<<6|l&63,h>65535&&h<1114112&&(o=h))}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),this.pos+=a};for(;!this.done();){let s=this.ch(),o;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${qe} unexpected string termination at position ${this.pos}`);switch(o=this.ch(),this.pos++,o){case 34:case 39:case 92:case 47:r.push(o);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(i());break;default:throw new Error(`${qe} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new he(Y.string,sv(r),this.pos-e);default:if(s<32)throw new Error(`${qe} invalid control character at position ${this.pos}`);s<128?(r.push(s),this.pos++):n()}}throw new Error(`${qe} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new he(Y.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new he(Y.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new he(Y.null,null,4);case 102:return this.expect([102,97,108,115,101]),new he(Y.false,!1,5);case 116:return this.expect([116,114,117,101]),new he(Y.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${qe} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new he(Y.break,void 0,1);if(this.ch()!==44)throw new Error(`${qe} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new he(Y.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new he(Y.break,void 0,1);if(this.ch()!==44)throw new Error(`${qe} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new he(Y.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${qe} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${qe} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function bv(t,e){return e=Object.assign({tokenizer:new o2(t,e)},e),Ri(t,e)}function h8e(t){if(t.asCID!==t)return null;let e=q.asCID(t);if(!e)return null;let r=e.toString();return[new he(Y.map,1/0,1),new he(Y.string,"/",1),new he(Y.string,r,r.length),new he(Y.break,void 0,1)]}function pN(t){let e=S3.encode(t).slice(1);return[new he(Y.map,1/0,1),new he(Y.string,"/",1),new he(Y.map,1/0,1),new he(Y.string,"bytes",5),new he(Y.string,e,e.length),new he(Y.break,void 0,1),new he(Y.break,void 0,1)]}function d8e(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function p8e(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var y8e={typeEncoders:{Object:h8e,Uint8Array:pN,Buffer:pN,undefined:d8e,number:p8e}},yN=class extends o2{constructor(e,r){super(e,r);this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===Y.map){let r=this._next();if(r.type===Y.string&&r.value==="/"){let i=this._next();if(i.type===Y.string){if(this._next().type!==Y.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(i),new he(Y.tag,42,0)}if(i.type===Y.map){let n=this._next();if(n.type===Y.string&&n.value==="bytes"){let s=this._next();if(s.type===Y.string){for(let a=0;a<2;a++)if(this._next().type!==Y.break)throw new Error("Invalid encoded Bytes form");let o=S3.decode(`m${s.value}`);return new he(Y.bytes,o,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(n)}this.tokenBuffer.push(i)}this.tokenBuffer.push(r)}return e}},wv={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};wv.tags[42]=q.parse;var g8e="dag-json",_v=297,m8e=t=>mv(t,y8e),b8e=t=>{let e=Object.assign(wv,{tokenizer:new yN(t,wv)});return bv(t,e)};gc();P3();f();function vN(){}f();var Au=class extends Error{constructor(e="not initialized"){super(e);this.name="NotInitializedError",this.code=Au.code}};Au.code="ERR_NOT_INITIALIZED";var EN=class extends Error{constructor(e="cannot initialize an initializing node"){super(e);this.name="AlreadyInitializingError",this.code=sa.code}};EN.code="ERR_ALREADY_INITIALIZING";var sa=class extends Error{constructor(e="cannot re-initialize an initialized node"){super(e);this.name="AlreadyInitializedError",this.code=sa.code}};sa.code="ERR_ALREADY_INITIALIZED";var xu=class extends Error{constructor(e="not started"){super(e);this.name="NotStartedError",this.code=xu.code}};xu.code="ERR_NOT_STARTED";var Id=class extends Error{constructor(e="cannot start, already startin"){super(e);this.name="AlreadyStartingError",this.code=Id.code}};Id.code="ERR_ALREADY_STARTING";var Td=class extends Error{constructor(e="cannot start, already started"){super(e);this.name="AlreadyStartedError",this.code=Td.code}};Td.code="ERR_ALREADY_STARTED";var oa=class extends Error{constructor(e="not enabled"){super(e);this.name="NotEnabledError",this.code=oa.code}};oa.code="ERR_NOT_ENABLED";ht();f();f();f();var fL=A(jd());ye();Ar();var W3=A(_t());f();var oL=A(ca()),aL=A(Eo());f();var Xwe=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;mt.nanosecond=mt.ns=1/1e6;mt.\u00B5s=mt.\u03BCs=mt.us=mt.microsecond=1/1e3;mt.millisecond=mt.ms=mt[""]=1;mt.second=mt.sec=mt.s=mt.ms*1e3;mt.minute=mt.min=mt.m=mt.s*60;mt.hour=mt.hr=mt.h=mt.m*60;mt.day=mt.d=mt.h*24;mt.week=mt.wk=mt.w=mt.d*7;mt.month=mt.b=mt.d*(365.25/12);mt.year=mt.yr=mt.y=mt.d*365.25;function mt(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(Xwe,function(i,n,s){s=sL(s),s&&(r=(r||0)+parseFloat(n,10)*s)}),r&&r/(sL(e)||1)}function sL(t){return mt[t]||mt[t.toLowerCase().replace(/s$/,"")]}var Tu=mt;f();var Pu=class extends Error{constructor(e="request timed out"){super(e);this.name="TimeoutError",this.code=Pu.code}};Pu.code="ERR_TIMEOUT";function Q(t,e){return(...r)=>{let i=r[e??r.length-1];if(!i||!i.timeout)return t(...r);let n=typeof i.timeout=="string"?Tu(i.timeout):i.timeout,s=new oL.TimeoutController(n);i.signal=(0,aL.anySignal)([i.signal,s.signal]);let o=t(...r),a=new Promise((l,h)=>{s.signal.addEventListener("abort",()=>{h(new Pu)})}),c=Date.now(),u=()=>{if(s.signal.aborted)throw new Pu;if(Date.now()-c>n)throw s.abort(),new Pu};return o[Symbol.asyncIterator]?async function*(){let l=o[Symbol.asyncIterator]();try{for(;;){let{value:h,done:d}=await Promise.race([l.next(),a]);if(d)break;u(),yield h}}catch(h){throw u(),h}finally{s.clear(),l.return&&l.return()}}():(async()=>{try{let l=await Promise.race([o,a]);return u(),l}catch(l){throw u(),l}finally{s.clear()}})()}}f();ye();var s7=A(cf()),lL="/ipfs/";function bc(t){if(t instanceof Uint8Array)try{t=q.decode(t)}catch(n){throw(0,s7.default)(n,"ERR_INVALID_CID")}let e=q.asCID(t);if(e)return{cid:e,path:void 0};t=t.toString(),t.startsWith(lL)&&(t=t.substring(lL.length));let r=t.split("/"),i;try{e=q.parse(r.shift()||"")}catch(n){throw(0,s7.default)(n,"ERR_INVALID_CID")}return r.length&&(i=`/${r.join("/")}`),{cid:e,path:i}}var Zwe="ERR_BAD_PATH",Y3="This command must be run in online mode. Try running 'ipfs daemon' first.",v2=new Te("/local/filesroot"),E2=262144;var hL=t=>{if(q.asCID(t))return`/ipfs/${t}`;let r=t.toString();try{return`/ipfs/${q.parse(r)}`}catch{}if(fL.default.path(r))return r;throw(0,W3.default)(new Error(`invalid path: ${t}`),Zwe)},Ud=t=>t instanceof Uint8Array?q.decode(t).toString():(t=t.toString(),t.indexOf("/ipfs/")===0&&(t=t.substring("/ipfs/".length)),t.charAt(t.length-1)==="/"&&(t=t.substring(0,t.length-1)),t),Cu=async function(t,e,r,i={}){let{cid:n,path:s}=bc(r);s&&(i.path=s);let o=n,a=i.path||"";if(a.startsWith("/")&&(a=a.substring(1)),i.path)try{for await(let{value:c,remainderPath:u}of Ou(n,i.path,e,t,{signal:i.signal})){if(!q.asCID(c))break;a=u,o=c}}catch(c){throw c.message.startsWith("Object has no property")&&(c.message=`no link named "${a.split("/")[0]}" under ${o}`,c.code="ERR_NO_LINK"),c}return{cid:o,remainderPath:a||""}},o7=t=>{if(t.type!=="file"&&t.type!=="directory"&&t.type!=="raw")throw new Error(`Unknown node type '${t.type}'`);let e={cid:t.cid,path:t.path,name:t.name,size:t.size,type:"file"};return t.type==="directory"&&(e.type="dir"),t.type==="file"&&(e.size=t.unixfs.fileSize()),(t.type==="file"||t.type==="directory")&&(e.mode=t.unixfs.mode,t.unixfs.mtime!==void 0&&(e.mtime=t.unixfs.mtime)),e},dL=Q(async(t,e)=>await t),Ou=async function*(t,e,r,i,n){let s=async u=>{let l=await r.getCodec(u.code),h=await i.blocks.get(u,n);return l.decode(h)},o=e.split("/").filter(Boolean),a=await s(t),c=t;for(;o.length;){let u=o.shift();if(!u)throw(0,W3.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(t.code===gt&&Array.isArray(a.Links)){let l=a.Links.find(h=>h.Name===u);if(l){yield{value:l.Hash,remainderPath:o.join("/")},a=await s(l.Hash),c=l.Hash;continue}}if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:o.join("/")};else throw(0,W3.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");q.asCID(a)&&(c=a,a=await s(a))}yield{value:a,remainderPath:""}};var fn=class{static create({start:e,stop:r}){return new fn(e,r)}static async start(e,r){let{state:i,activate:n}=e;switch(i.status){case"stopped":try{let s=n(r);e.state={status:"starting",ready:s};let o=await s;return e.state={status:"started",value:o},o}catch(s){throw e.state={status:"stopped"},s}case"starting":throw new Id;case"started":throw new Td;case"stopping":return await i.ready,await fn.start(e,r);default:return fn.panic(e)}}static async stop(e){let{state:r,deactivate:i}=e;switch(r.status){case"stopped":break;case"starting":{try{await r.ready}catch(n){}return await fn.stop(e)}case"stopping":return await r.ready;case"started":{i&&await i(r.value),e.state={status:"stopped"};break}default:fn.panic(r)}}static try({state:e}){switch(e.status){case"started":return e.value;default:return null}}static async use({state:e},r){switch(e.status){case"started":return e.value;case"starting":return await dL(e.ready,r);default:throw new xu}}static panic({state:e}){let r=JSON.stringify({status:e.status});throw RangeError(`Service in invalid state ${r}, should never happen if you see this please report a bug`)}constructor(e,r){this.activate=e,this.deactivate=r,this.state={status:"stopped"}}async use(e){return await fn.use(this,e)}try(){return fn.try(this)}};function pL({network:t,preload:e,peerId:r,keychain:i,repo:n,ipns:s,mfsPreload:o,print:a,hashers:c,options:u}){return async()=>{let{libp2p:h}=await fn.start(t,{peerId:r,repo:n,print:a,hashers:c,options:u});await Promise.all([s.startOnline({keychain:i,libp2p:h,peerId:r,repo:n}),e.start(),o.start()])}}f();function yL({network:t,preload:e,ipns:r,repo:i,mfsPreload:n}){return async()=>{await Promise.all([e.stop(),r.stop(),n.stop(),fn.stop(t),i.close()])}}f();f();f();var mL=A(Fd()),a7=class{constructor(e){this.lru=(0,mL.default)(e)}get(e){let r=this.lru.get(e);if(r){if(r.expire&&r.expire<Date.now()){this.lru.remove(e);return}return r.value}}set(e,r,i){this.lru.set(e,{value:r,expire:Date.now()+i})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}};var e4=A(So()),HL=A(Vd()),w7=new a7(1e3),T_e=60*1e3,P_e=e4.default.default?e4.default.default:e4.default,C_e=new P_e({concurrency:4}),$L=t=>{if(t.Path)return t.Path;throw new Error(t.Message)};async function GL(t,e){return(async(i,n={})=>{let s=new URLSearchParams(n);s.set("arg",i);let o=s.toString();if(!n.nocache&&w7.has(o)){let c=w7.get(o);return $L(c)}let a=await C_e.add(async()=>{let c=await HL.default.get("https://ipfs.io/api/v0/dns",{searchParams:s}),u=new URL(c.url).search.slice(1),l=await c.json();return w7.set(u,l,T_e),l});return $L(a)})(t,e)}function O_e(t){return t.endsWith(".eth")&&(t=t.replace(/.eth$/,".eth.link")),t}function WL(){return Q(async(e,r={recursive:!0})=>{if(typeof e!="string")throw new Error("Invalid arguments, domain must be a string");return e=O_e(e),GL(e,r)})}f();function YL({network:t}){return()=>{let e=t.try();return e!=null&&Boolean(e.libp2p.isStarted())}}f();var fE=A(jd());ye();var iU=A(Je());function nU({repo:t,codecs:e,bases:r,name:i}){async function n(s,o={}){if(!fE.default.path(s))throw new Error("invalid argument "+s);if(fE.default.ipnsPath(s))for await(let w of i.resolve(s,o))s=w;let[,a,c,...u]=s.split("/"),l=o.cidBase?await r.getBase(o.cidBase):void 0,h=X9e(c);if(u.length===0){let w=l?l.encoder.encode(h):c;return`/${a}/${w}`}let d=q.decode(h);s=u.join("/");let p=Ou(d,s,e,t,o),y=d,m=s;for await(let w of p)q.asCID(w.value)&&(y=w.value,m=w.remainderPath);return`/ipfs/${y.toString(l&&l.encoder)}${m?"/"+m:""}`}return Q(n)}function X9e(t){try{return iU.default.parse(t).toBytes()}catch{return q.parse(t).bytes}}f();f();var oU=A(kn());ye();function aU({addAll:t}){return(e,r={})=>{let i,n=q.asCID(e);return n?i=t([{cid:n,...r}],r):i=t([{path:e.toString(),...r}],r),(0,oU.default)(i)}}f();f();var np=A(cf());ye();async function*va(t){if(t==null)throw(0,np.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");let e=q.asCID(t);if(e){yield Ro({cid:e});return}if(t instanceof String||typeof t=="string"){yield Ro({path:t});return}if(t.cid!=null||t.path!=null)return yield Ro(t);if(Symbol.iterator in t){let r=t[Symbol.iterator](),i=r.next();if(i.done)return r;if(q.asCID(i.value)||i.value instanceof String||typeof i.value=="string"){yield Ro({cid:i.value});for(let n of r)yield Ro({cid:n});return}if(i.value.cid!=null||i.value.path!=null){yield Ro(i.value);for(let n of r)yield Ro(n);return}throw(0,np.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){let r=t[Symbol.asyncIterator](),i=await r.next();if(i.done)return r;if(q.asCID(i.value)||i.value instanceof String||typeof i.value=="string"){yield Ro({cid:i.value});for await(let n of r)yield Ro({cid:n});return}if(i.value.cid!=null||i.value.path!=null){yield Ro(i.value);for await(let n of r)yield Ro(n);return}throw(0,np.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw(0,np.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}function Ro(t){let e=t.cid||`${t.path}`;if(!e)throw(0,np.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}f();var It={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function cU({repo:t,codecs:e}){async function*r(i,n={}){let s=async function*(){for await(let{path:c,recursive:u,metadata:l}of va(i)){let{cid:h}=await Cu(t,e,c),{reason:d}=await t.pins.isPinnedWithType(h,[It.recursive,It.direct]);if(d==="recursive"&&!u)throw new Error(`${h} already pinned recursively`);u?await t.pins.pinRecursively(h,{metadata:l}):await t.pins.pinDirectly(h,{metadata:l}),yield h}};if(!Boolean(n.lock)){yield*s();return}let a=await t.gcLock.readLock();try{yield*s()}finally{a()}}return Q(r)}f();var hE=A(_t());function Y2(t,e,r){let i={type:t,cid:e};return r&&(i.metadata=r),i}function uU({repo:t,codecs:e}){async function*r(i={}){let n=It.all;if(i.type&&(n=i.type,!Object.keys(It).includes(n)))throw(0,hE.default)(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(i.paths){let s=!1;for await(let{path:o}of va(i.paths)){let{cid:a}=await Cu(t,e,o),{reason:c,pinned:u,parent:l,metadata:h}=await t.pins.isPinnedWithType(a,n);if(!u)throw(0,hE.default)(new Error(`path '${o}' is not pinned`),"ERR_NOT_PINNED");switch(c){case It.direct:case It.recursive:s=!0,yield Y2(c,a,h);break;default:s=!0,yield Y2(`${It.indirect} through ${l}`,a,h)}}if(!s)throw new Error("No match found");return}if(n===It.recursive||n===It.all)for await(let{cid:s,metadata:o}of t.pins.recursiveKeys())yield Y2(It.recursive,s,o);if(n===It.indirect||n===It.all)for await(let s of t.pins.indirectKeys(i))yield Y2(It.indirect,s);if(n===It.direct||n===It.all)for await(let{cid:s,metadata:o}of t.pins.directKeys())yield Y2(It.direct,s,o)}return Q(r)}f();var lU=A(kn());function fU({rmAll:t}){async function e(r,i={}){let n=await(0,lU.default)(t([{path:r,...i}],i));if(!n)throw new Error("CID expected");return n}return e}f();function hU({repo:t,codecs:e}){async function*r(i,n={}){let s=await t.gcLock.readLock();try{for await(let{path:o,recursive:a}of va(i)){let{cid:c}=await Cu(t,e,o),{pinned:u,reason:l}=await t.pins.isPinnedWithType(c,It.all);if(!u)throw new Error(`${c} is not pinned`);switch(l){case It.recursive:if(!a)throw new Error(`${c} is pinned recursively`);await t.pins.unpin(c),yield c;break;case It.direct:await t.pins.unpin(c),yield c;break;default:throw new Error(`${c} is pinned indirectly under ${l}`)}}}finally{s()}}return Q(r)}var dE=class{constructor({codecs:e,repo:r}){let i=cU({codecs:e,repo:r});this.addAll=i,this.add=aU({addAll:i});let n=hU({codecs:e,repo:r});this.rmAll=n,this.rm=fU({rmAll:n}),this.ls=uU({codecs:e,repo:r}),this.remote={add:(s,o={})=>Promise.reject(new Error("Not implemented")),ls:async function*(s,o={}){return Promise.reject(new Error("Not implemented"))},rm:(s,o={})=>Promise.reject(new Error("Not implemented")),rmAll:(s,o={})=>Promise.reject(new Error("Not implemented")),service:{add:(s,o)=>Promise.reject(new Error("Not implemented")),rm:(s,o={})=>Promise.reject(new Error("Not implemented")),ls:(s={})=>Promise.reject(new Error("Not implemented"))}}}};f();f();var lF=A(Je()),fF=A(_t()),kE=A(ce());f();var ry=A(Je());Ar();Ds();var ts=A(_t()),xE=A(ce());Qe();qi();f();var QU=A(gU());Ar();var V4=A(Ic()),z4=A(Je());Gi();gc();var di=A(OU());Mi();ht();Qe();Wi();qi();var wE=A(KU()),_E=A(ce());f();var vf=A(Si()),VU=vf.default.Reader,fSe=vf.default.Writer,We=vf.default.util,J2=vf.default.roots["ipfs-ipns"]||(vf.default.roots["ipfs-ipns"]={}),lp=J2.IpnsEntry=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.value=We.newBuffer([]),t.prototype.signature=We.newBuffer([]),t.prototype.validityType=0,t.prototype.validity=We.newBuffer([]),t.prototype.sequence=We.Long?We.Long.fromBits(0,0,!0):0,t.prototype.ttl=We.Long?We.Long.fromBits(0,0,!0):0,t.prototype.pubKey=We.newBuffer([]),t.prototype.signatureV2=We.newBuffer([]),t.prototype.data=We.newBuffer([]),t.encode=function(r,i){return i||(i=fSe.create()),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&i.uint32(10).bytes(r.value),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(18).bytes(r.signature),r.validityType!=null&&Object.hasOwnProperty.call(r,"validityType")&&i.uint32(24).int32(r.validityType),r.validity!=null&&Object.hasOwnProperty.call(r,"validity")&&i.uint32(34).bytes(r.validity),r.sequence!=null&&Object.hasOwnProperty.call(r,"sequence")&&i.uint32(40).uint64(r.sequence),r.ttl!=null&&Object.hasOwnProperty.call(r,"ttl")&&i.uint32(48).uint64(r.ttl),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(58).bytes(r.pubKey),r.signatureV2!=null&&Object.hasOwnProperty.call(r,"signatureV2")&&i.uint32(66).bytes(r.signatureV2),r.data!=null&&Object.hasOwnProperty.call(r,"data")&&i.uint32(74).bytes(r.data),i},t.decode=function(r,i){r instanceof VU||(r=VU.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new J2.IpnsEntry;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.value=r.bytes();break;case 2:s.signature=r.bytes();break;case 3:s.validityType=r.int32();break;case 4:s.validity=r.bytes();break;case 5:s.sequence=r.uint64();break;case 6:s.ttl=r.uint64();break;case 7:s.pubKey=r.bytes();break;case 8:s.signatureV2=r.bytes();break;case 9:s.data=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof J2.IpnsEntry)return r;var i=new J2.IpnsEntry;switch(r.value!=null&&(typeof r.value=="string"?We.base64.decode(r.value,i.value=We.newBuffer(We.base64.length(r.value)),0):r.value.length&&(i.value=r.value)),r.signature!=null&&(typeof r.signature=="string"?We.base64.decode(r.signature,i.signature=We.newBuffer(We.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),r.validityType){case"EOL":case 0:i.validityType=0;break}return r.validity!=null&&(typeof r.validity=="string"?We.base64.decode(r.validity,i.validity=We.newBuffer(We.base64.length(r.validity)),0):r.validity.length&&(i.validity=r.validity)),r.sequence!=null&&(We.Long?(i.sequence=We.Long.fromValue(r.sequence)).unsigned=!0:typeof r.sequence=="string"?i.sequence=parseInt(r.sequence,10):typeof r.sequence=="number"?i.sequence=r.sequence:typeof r.sequence=="object"&&(i.sequence=new We.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0))),r.ttl!=null&&(We.Long?(i.ttl=We.Long.fromValue(r.ttl)).unsigned=!0:typeof r.ttl=="string"?i.ttl=parseInt(r.ttl,10):typeof r.ttl=="number"?i.ttl=r.ttl:typeof r.ttl=="object"&&(i.ttl=new We.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0))),r.pubKey!=null&&(typeof r.pubKey=="string"?We.base64.decode(r.pubKey,i.pubKey=We.newBuffer(We.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.signatureV2!=null&&(typeof r.signatureV2=="string"?We.base64.decode(r.signatureV2,i.signatureV2=We.newBuffer(We.base64.length(r.signatureV2)),0):r.signatureV2.length&&(i.signatureV2=r.signatureV2)),r.data!=null&&(typeof r.data=="string"?We.base64.decode(r.data,i.data=We.newBuffer(We.base64.length(r.data)),0):r.data.length&&(i.data=r.data)),i},t.toObject=function(r,i){i||(i={});var n={};if(i.defaults){if(i.bytes===String?n.value="":(n.value=[],i.bytes!==Array&&(n.value=We.newBuffer(n.value))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=We.newBuffer(n.signature))),n.validityType=i.enums===String?"EOL":0,i.bytes===String?n.validity="":(n.validity=[],i.bytes!==Array&&(n.validity=We.newBuffer(n.validity))),We.Long){var s=new We.Long(0,0,!0);n.sequence=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.sequence=i.longs===String?"0":0;if(We.Long){var s=new We.Long(0,0,!0);n.ttl=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.ttl=i.longs===String?"0":0;i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=We.newBuffer(n.pubKey))),i.bytes===String?n.signatureV2="":(n.signatureV2=[],i.bytes!==Array&&(n.signatureV2=We.newBuffer(n.signatureV2))),i.bytes===String?n.data="":(n.data=[],i.bytes!==Array&&(n.data=We.newBuffer(n.data)))}return r.value!=null&&r.hasOwnProperty("value")&&(n.value=i.bytes===String?We.base64.encode(r.value,0,r.value.length):i.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?We.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),r.validityType!=null&&r.hasOwnProperty("validityType")&&(n.validityType=i.enums===String?J2.IpnsEntry.ValidityType[r.validityType]:r.validityType),r.validity!=null&&r.hasOwnProperty("validity")&&(n.validity=i.bytes===String?We.base64.encode(r.validity,0,r.validity.length):i.bytes===Array?Array.prototype.slice.call(r.validity):r.validity),r.sequence!=null&&r.hasOwnProperty("sequence")&&(typeof r.sequence=="number"?n.sequence=i.longs===String?String(r.sequence):r.sequence:n.sequence=i.longs===String?We.Long.prototype.toString.call(r.sequence):i.longs===Number?new We.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0):r.sequence),r.ttl!=null&&r.hasOwnProperty("ttl")&&(typeof r.ttl=="number"?n.ttl=i.longs===String?String(r.ttl):r.ttl:n.ttl=i.longs===String?We.Long.prototype.toString.call(r.ttl):i.longs===Number?new We.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0):r.ttl),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?We.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.signatureV2!=null&&r.hasOwnProperty("signatureV2")&&(n.signatureV2=i.bytes===String?We.base64.encode(r.signatureV2,0,r.signatureV2.length):i.bytes===Array?Array.prototype.slice.call(r.signatureV2):r.signatureV2),r.data!=null&&r.hasOwnProperty("data")&&(n.data=i.bytes===String?We.base64.encode(r.data,0,r.data.length):i.bytes===Array?Array.prototype.slice.call(r.data):r.data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,vf.default.util.toJSONOptions)},t.ValidityType=function(){let e={},r=Object.create(e);return r[e[0]="EOL"]=0,r}(),t})();f();function F4(t){let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(!r)throw new Error("Invalid format");let i=parseInt(r[1],10),n=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(i,n,s,o,a,c,u))}f();var zU="ERR_IPNS_EXPIRED_RECORD",bE="ERR_UNRECOGNIZED_VALIDITY",HU="ERR_SIGNATURE_CREATION",Ef="ERR_SIGNATURE_VERIFICATION",$U="ERR_UNRECOGNIZED_FORMAT",GU="ERR_PEER_ID_FROM_PUBLIC_KEY",WU="ERR_PUBLIC_KEY_FROM_ID",K4="ERR_UNDEFINED_PARAMETER",YU="ERR_INVALID_RECORD_DATA",XU="ERR_INVALID_EMBEDDED_KEY";var es=Object.assign((0,_E.default)("jsipns"),{error:(0,_E.default)("jsipns:error")}),hSe=Qn.code,dSe=Ye("/ipns/"),ey="/ipns/",H4=ey.length,ZU=(t,e,r,i)=>{let n=new QU.default(Date.now()+Number(i)),s=lp.ValidityType.EOL,[o,a]=i.toString().split("."),c=BigInt(o)*BigInt(1e5)+BigInt(a||0);return pSe(t,e,r,s,n,c)};var pSe=async(t,e,r,i,n,s)=>{r=BigInt(r);let o=Ye(n.toString()),a=await mSe(t,e,i,o),c=ySe(e,o,i,r,s),u=tF(c),l=await t.sign(u),h={value:e,signature:a,validityType:i,validity:o,sequence:r,ttl:s,signatureV2:l,data:c};return es(`ipns entry for ${e} created`),h},ySe=(t,e,r,i,n)=>_s({Value:t,Validity:e,ValidityType:r,Sequence:i,TTL:n}),vE=async(t,e)=>{let{value:r,validityType:i,validity:n}=e,s,o;e.signatureV2&&e.data?(o=e.signatureV2,s=tF(e.data),gSe(e)):(o=e.signature,s=eF(r,i,n));let a;try{a=await t.verify(s,o)}catch(c){a=!1}if(!a)throw es.error("record signature verification failed"),(0,di.default)(new Error("record signature verification failed"),Ef);if(i===lp.ValidityType.EOL){let c;try{c=F4(He(n))}catch(u){throw es.error("unrecognized validity format (not an rfc3339 format)"),(0,di.default)(new Error("unrecognized validity format (not an rfc3339 format)"),$U)}if(c.getTime()<Date.now())throw es.error("record has expired"),(0,di.default)(new Error("record has expired"),zU)}else if(i)throw es.error("unrecognized validity type"),(0,di.default)(new Error("unrecognized validity type"),bE);es(`ipns entry for ${r} is valid`)},gSe=t=>{if(!t.data)throw(0,di.default)(new Error("Record data is missing"),YU);let e=Ri(t.data);if(Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),!aa(e.Value,t.value))throw(0,di.default)(new Error('Field "value" did not match between protobuf and CBOR'),Ef);if(!aa(e.Validity,t.validity))throw(0,di.default)(new Error('Field "validity" did not match between protobuf and CBOR'),Ef);if(e.ValidityType!==t.validityType)throw(0,di.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),Ef);if(e.Sequence!==t.sequence)throw(0,di.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),Ef);if(e.TTL!==t.ttl)throw(0,di.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),Ef)},JU=async(t,e)=>{if(!t||!t.bytes||!e){let n=new Error("one or more of the provided parameters are not defined");throw es.error(n),(0,di.default)(n,K4)}let r;try{r=await z4.default.createFromPubKey(t.bytes)}catch(n){throw(0,di.default)(n,GU)}let i;try{i=wSe(r)}catch(n){throw es.error(n),(0,di.default)(n,WU)}if(i)return null;try{e.pubKey=V4.default.keys.marshalPublicKey(t)}catch(n){throw es.error(n),n}return e},EE=async(t,e)=>{if(!e||!t){let i=new Error("one or more of the provided parameters are not defined");throw es.error(i),(0,di.default)(i,K4)}let r;if(e.pubKey){try{r=V4.default.keys.unmarshalPublicKey(e.pubKey)}catch(n){throw es.error(n),n}if(!(await z4.default.createFromPubKey(e.pubKey)).equals(t))throw(0,di.default)(new Error("Embedded public key did not match PeerID"),XU)}else t.pubKey&&(r=t.pubKey);if(r)return r;throw(0,di.default)(new Error("no public key is available"),K4)},SE=t=>ev.encode(t).slice(1),ty=t=>new Te(`/ipns/${SE(t)}`),Sf=t=>{let e=Ye("/pk/"),r=Ye("/ipns/");return{routingPubKey:new Te(ji([e,t]),!1),pkKey:new Te(SE(ji([e,t]))),routingKey:new Te(ji([r,t]),!1),ipnsKey:new Te(SE(ji([r,t])))}},mSe=(t,e,r,i)=>{try{let n=eF(e,r,i);return t.sign(n)}catch(n){throw es.error("record signature creation failed"),(0,di.default)(new Error("record signature creation failed: "+n.message),HU)}},bSe=t=>{if(t.toString()==="0")return"EOL";let e=new Error(`unrecognized validity type ${t.toString()}`);throw es.error(e),(0,di.default)(e,bE)},eF=(t,e,r)=>{let i=Ye(bSe(e));return ji([t,r,i])},tF=t=>{let e=Ye("ipns-signature:");return ji([e,t])},wSe=t=>{let e=Wr(t.id);return e.code!==hSe?null:V4.default.keys.unmarshalPublicKey(e.digest)},AE=t=>lp.encode({...t,sequence:wE.default.fromString(t.sequence.toString()),ttl:t.ttl==null?void 0:wE.default.fromString(t.ttl.toString())}).finish(),Tc=t=>{let e=lp.decode(t),r=lp.toObject(e,{defaults:!1,arrays:!0,objects:!1});return{value:r.value,signature:r.signature,validityType:r.validityType,validity:r.validity,sequence:Object.hasOwnProperty.call(r,"sequence")?BigInt(`${r.sequence}`):0,pubKey:r.pubKey,ttl:Object.hasOwnProperty.call(r,"ttl")?BigInt(`${r.ttl}`):void 0,signatureV2:r.signatureV2,data:r.data}},Af={validate:async(t,e)=>{let r=Tc(t),i=e.slice(dSe.length),n=z4.default.createFromBytes(i),s=await EE(n,r);await vE(s,r)},select:(t,e)=>{let r=Tc(t),i=Tc(e);if(r.signatureV2&&!i.signatureV2)return 0;if(i.signatureV2&&!r.signatureV2)return 1;if(r.sequence>i.sequence)return 0;if(r.sequence<i.sequence)return 1;let n=F4(He(r.validity));return F4(He(i.validity)).getTime()>n.getTime()?1:0}};var Bn=Object.assign((0,xE.default)("ipfs:ipns:publisher"),{error:(0,xE.default)("ipfs:ipns:publisher:error")}),rF=ni().code,iF=60*60*1e3,fp=class{constructor(e,r){this._routing=e,this._datastore=r}async publishWithEOL(e,r,i){if(!e||!e.bytes)throw(0,ts.default)(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");let n=await ry.default.createFromPrivKey(e.bytes),s=await this._updateOrCreateRecord(e,r,i,n);return this._putRecordToRouting(s,n)}publish(e,r){return this.publishWithEOL(e,r,iF)}async _putRecordToRouting(e,r){if(!ry.default.isPeerId(r)){let o="peerId received is not valid";throw Bn.error(o),(0,ts.default)(new Error(o),"ERR_INVALID_PEER_ID")}let i=r.pubKey,n=await JU(i,e),s=Sf(r.toBytes());return await this._publishEntry(s.routingKey,n||e),n||e}async _publishEntry(e,r){let i=Te.asKey(e);if(!i){let s="datastore key does not have a valid format";throw Bn.error(s),(0,ts.default)(new Error(s),"ERR_INVALID_DATASTORE_KEY")}let n;try{n=AE(r)}catch(s){throw Bn.error(s),s}try{let s=await this._routing.put(i.uint8Array(),n);return Bn(`ipns record for ${He(i.uint8Array(),"base32")} was stored in the routing`),s}catch(s){let o=`ipns record for ${He(i.uint8Array(),"base32")} could not be stored in the routing`;throw Bn.error(o),Bn.error(s),(0,ts.default)(new Error(o),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,r={}){if(!ry.default.isPeerId(e)){let n="peerId received is not valid";throw Bn.error(n),(0,ts.default)(new Error(n),"ERR_INVALID_PEER_ID")}let i=r.checkRouting!==!1;try{let n=await this._datastore.get(ty(e.id));return this._unmarshalData(n)}catch(n){if(n.code!==rF){let s=`unexpected error getting the ipns record ${e.id} from datastore`;throw Bn.error(s),(0,ts.default)(new Error(s),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!i)throw(0,ts.default)(n,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{let s=Sf(e.toBytes()),o=await this._routing.get(s.routingKey.uint8Array());return this._unmarshalData(o)}catch(s){throw Bn.error(s),s}}}_unmarshalData(e){try{return Tc(e)}catch(r){throw(0,ts.default)(r,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,r,i,n){if(!ry.default.isPeerId(n)){let u="peerId received is not valid";throw Bn.error(u),(0,ts.default)(new Error(u),"ERR_INVALID_PEER_ID")}let s={checkRouting:!0},o;try{o=await this._getPublished(n,s)}catch(u){if(u.code!==rF){let l=`unexpected error when determining the last published IPNS record for ${n.id} ${u.stack}`;throw Bn.error(l),(0,ts.default)(new Error(l),"ERR_DETERMINING_PUBLISHED_RECORD")}}let a=0n;o&&o.sequence!==void 0&&(a=aa(o.value,r)?BigInt(o.sequence):BigInt(o.sequence)+BigInt(1));let c;try{c=await ZU(e,r,a,i)}catch(u){let l=`ipns record for ${r} could not be created`;throw Bn.error(u),(0,ts.default)(new Error(l),"ERR_CREATING_IPNS_RECORD")}try{let u=AE(c);return await this._datastore.put(ty(n.id),u),Bn(`ipns record for ${He(r,"base32")} was stored in the datastore`),c}catch(u){let l=`ipns record for ${r} could not be stored in the datastore`;throw Bn.error(l),(0,ts.default)(new Error(l),"ERR_STORING_IN_DATASTORE")}}};fp.defaultRecordLifetime=iF;f();var nF=A(Ic()),RE=A(Je()),$u=A(_t()),IE=A(ce()),$4=Object.assign((0,IE.default)("ipfs:ipns:republisher"),{error:(0,IE.default)("ipfs:ipns:republisher:error")}),sF=60*1e3,oF=60*sF,_Se=4*oF,vSe=24*oF,TE=class{constructor(e,r,i,n,s={pass:""}){this._publisher=e,this._datastore=r,this._peerId=i,this._keychain=n,this._options=s,this._republishHandle=null}async start(){if(this._republishHandle)throw(0,$u.default)(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");let e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:s=>{e._timeoutId=setTimeout(async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(s)}catch(o){$4.error(o)}},s())},cancel:async()=>{e._timeoutId!=null&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{privKey:r}=this._peerId,{pass:i}=this._options,n=!0;e._task=()=>this._republishEntries(r,i),e.runPeriodically(()=>n?(n=!1,this._options.initialBroadcastInterval||sF):this._options.broadcastInterval||_Se),this._republishHandle=e}async stop(){let e=this._republishHandle;if(!e)throw(0,$u.default)(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,r){try{await this._republishEntry(e)}catch(i){let n="cannot republish entry for the node's private key";$4.error(n);return}if(r)try{let i=await this._keychain.listKeys();for(let n of i){if(n.name==="self")continue;let s=await this._keychain.exportKey(n.name,r),o=await nF.default.keys.import(s,r);await this._republishEntry(o)}}catch(i){$4.error(i)}}async _republishEntry(e){if(!e||!e.bytes)throw(0,$u.default)(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");try{let r=await RE.default.createFromPrivKey(e.bytes),i=await this._getPreviousValue(r);await this._publisher.publishWithEOL(e,i,vSe)}catch(r){if(r.code==="ERR_NO_ENTRY_FOUND")return;throw r}}async _getPreviousValue(e){if(!RE.default.isPeerId(e))throw(0,$u.default)(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{let r=await this._datastore.get(ty(e.id));if(!(r instanceof Uint8Array))throw(0,$u.default)(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return Tc(r).value}catch(i){throw $4.error(i),(0,$u.default)(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(r){throw r&&r.notFound?(0,$u.default)(new Error(`no previous entry for record with id: ${e.id}`),"ERR_NO_ENTRY_FOUND"):r}}};f();var aF=A(Je()),xf=A(_t()),PE=A(ce());Qe();Ds();var G4=Object.assign((0,PE.default)("ipfs:ipns:resolver"),{error:(0,PE.default)("ipfs:ipns:resolver:error")}),ESe=ni().code,cF=32,CE=class{constructor(e){this._routing=e}async resolve(e,r={}){if(typeof e!="string")throw(0,xf.default)(new Error("invalid name"),"ERR_INVALID_NAME");let i=r.recursive&&r.recursive.toString()==="true",n=e.split("/");if(n.length!==3||n[0]!=="")throw(0,xf.default)(new Error("invalid name"),"ERR_INVALID_NAME");let s=n[2],o=1/0;i&&(o=cF);let a=await this.resolver(s,o);return G4(`${e} was locally resolved correctly`),a}async resolver(e,r){if(r===0){let s=`could not resolve name (recursion limit of ${cF} exceeded)`;throw G4.error(s),(0,xf.default)(new Error(s),"ERR_RESOLVE_RECURSION_LIMIT")}let i=await this._resolveName(e),n=i.split("/");return n[1]==="ipfs"||!r?i:this.resolver(n[2],r-1)}async _resolveName(e){let r=aF.default.parse(e),{routingKey:i}=Sf(r.toBytes()),n;try{n=await this._routing.get(i.uint8Array())}catch(o){throw G4.error("could not get record from routing",o),o.code===ESe?(0,xf.default)(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND"):(0,xf.default)(new Error(`unexpected error getting the ipns record ${r.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let s;try{s=Tc(n)}catch(o){throw G4.error("could not unmarshal record",o),(0,xf.default)(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_RECORD_RECEIVED")}return this._validateRecord(r,s)}async _validateRecord(e,r){let i=await EE(e,r);return await vE(i,r),He(r.value)}};f();var uF=A(Fd()),OE=class{constructor(e){this.lru=(0,uF.default)(e)}get(e){let r=this.lru.get(e);if(r){if(r.expire&&r.expire<Date.now()){this.lru.remove(e);return}return r.value}}set(e,r,i){this.lru.set(e,{value:r,expire:Date.now()+i})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}};Qe();var iy=Object.assign((0,kE.default)("ipfs:ipns"),{error:(0,kE.default)("ipfs:ipns:error")}),hF=60*1e3,W4=class{constructor(e,r,i,n,s){this.publisher=new fp(e,r),this.republisher=new TE(this.publisher,r,i,n,s),this.resolver=new CE(e),this.cache=new OE(1e3),this.routing=e}async publish(e,r,i=fp.defaultRecordLifetime){try{let n=await(0,lF.createFromPrivKey)(e.bytes);await this.publisher.publishWithEOL(e,r,i),iy(`IPNS value ${He(r,"base32")} was published correctly`);let s=n.toB58String(),o=parseFloat(i),a=o<hF?o:hF;return this.cache.set(s,r,a),iy(`IPNS value ${He(r,"base32")} was cached correctly`),{name:s,value:r}}catch(n){throw iy.error(n),n}}async resolve(e,r={}){if(typeof e!="string")throw(0,fF.default)(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!r.nocache&&!r.recursive){let i=e.split("/")[2],n=this.cache.get(i);if(n)return n}try{let i=await this.resolver.resolve(e,r);return iy(`IPNS record from ${e} was resolved correctly`),i}catch(i){throw iy.error(i),i}}async initializeKeyspace(e,r){return this.publish(e,r,fp.defaultRecordLifetime)}};f();UE();var c6=A(sy());f();Yr();f();dp();i6();f();var LF=A(r9());Qe();ht();var n6="/record/";function i9(t){return He(t,"base32")}function ly(t){(typeof t=="string"||t instanceof String)&&(t=Ye(t.toString()));let e=He(t,"base64url");return`${n6}${e}`}function MF(t){if(t.substring(0,n6.length)!==n6)throw(0,LF.default)(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");let e=t.substring(n6.length);return Ye(e,"base64url")}qi();var rs=A(r9()),n9=A(ce()),en=Object.assign((0,n9.default)("datastore-pubsub:publisher"),{error:(0,n9.default)("datastore-pubsub:publisher:error")}),s9=class extends Ui{constructor(e,r,i,n,s){super();if(!n)throw(0,rs.default)(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if(typeof n.validate!="function")throw(0,rs.default)(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if(typeof n.select!="function")throw(0,rs.default)(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(s&&typeof s!="function")throw(0,rs.default)(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=r,this._peerId=i,this._validator=n,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this)}async put(e,r){if(!(e instanceof Uint8Array)){let n="datastore key does not have a valid format";throw en.error(n),(0,rs.default)(new Error(n),"ERR_INVALID_DATASTORE_KEY")}if(!(r instanceof Uint8Array)){let n="received value is not a Uint8Array";throw en.error(n),(0,rs.default)(new Error(n),"ERR_INVALID_VALUE_RECEIVED")}let i=ly(e);en(`publish value for topic ${i}`),await this._pubsub.publish(i,r)}async get(e){if(!(e instanceof Uint8Array)){let n="datastore key does not have a valid format";throw en.error(n),(0,rs.default)(new Error(n),"ERR_INVALID_DATASTORE_KEY")}let r=ly(e),i=await this._pubsub.getTopics();if(i&&Array.isArray(i)&&i.indexOf(r)>-1)return this._getLocal(e);try{this._pubsub.on(r,this._onMessage),await this._pubsub.subscribe(r)}catch(n){let s=`cannot subscribe topic ${r}`;throw en.error(s),(0,rs.default)(new Error(s),"ERR_SUBSCRIBING_TOPIC")}return en(`subscribed values for key ${r}`),this._getLocal(e)}unsubscribe(e){let r=ly(e);return this._pubsub.removeListener(r,this._onMessage),this._pubsub.unsubscribe(r)}async _getLocal(e){let r=new Te("/"+i9(e),!1),i;try{i=await this._datastore.get(r)}catch(n){if(n.code!=="ERR_NOT_FOUND"){let o=`unexpected error getting the ipns record for ${r.toString()}`;throw en.error(o),(0,rs.default)(new Error(o),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let s=`local record requested was not found for ${r.toString()}`;throw en.error(s),(0,rs.default)(new Error(s),"ERR_NOT_FOUND")}if(!(i instanceof Uint8Array)){let n="found record that we couldn't convert to a value";throw en.error(n),(0,rs.default)(new Error(n),"ERR_INVALID_RECORD_RECEIVED")}return i}async _onMessage(e){let{data:r,from:i,topicIDs:n}=e,s;try{s=MF(n[0])}catch(o){en.error(o);return}if(en(`message received for topic ${n[0]}`),i===this._peerId.toB58String()){en("message discarded as it is from the same peer");return}if(this._handleSubscriptionKeyFn){let o;try{o=await this._handleSubscriptionKeyFn(s)}catch(a){en.error("message discarded by the subscriptionKeyFn");return}s=o}try{await this._storeIfSubscriptionIsBetter(s,r)}catch(o){en.error(o)}}async _storeIfSubscriptionIsBetter(e,r){let i=!1;try{i=await this._isBetter(e,r)}catch(n){if(n.code!=="ERR_NOT_VALID_RECORD")throw n}i&&await this._storeRecord(e,r)}async _validateRecord(e,r){return this._validator.validate(e,r)}async _selectRecord(e,r){return await this._validator.select(e,r)===0}async _isBetter(e,r){try{await this._validateRecord(r,e)}catch(s){let o="record received through pubsub is not valid";throw en.error(o),(0,rs.default)(new Error(o),"ERR_NOT_VALID_RECORD")}let i=new Te(e),n;try{n=await this._getLocal(i.uint8Array())}catch(s){return!0}return aa(n,r)?!1:this._selectRecord(e,[n,r])}async _storeRecord(e,r){let i=new Te("/"+i9(e),!1);await this._datastore.put(i,r),en(`record for ${ly(e)} was stored in the datastore`)}};ht();Qe();var o9=A(_t()),a9=A(ce()),s6=Object.assign((0,a9.default)("ipfs:ipns:pubsub"),{error:(0,a9.default)("ipfs:ipns:pubsub:error")}),gp=class{constructor(e,r,i){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new s9(e,r,i,Af,this._handleSubscriptionKey)}async put(e,r){try{await this._pubsubDs.put(e,r)}catch(i){throw s6.error(i),i}}async get(e){let r,i;try{r=await this._pubsubDs.get(e)}catch(s){i=s}let n=e.slice(0,H4);if(He(n)===ey){let s=ft.encode(e).substring(1),o=ft.encode(e.slice(H4)).substring(1);this._subscriptions[s]=o,s6(`subscribed to pubsub topic ${s}, id ${o}`)}if(i)throw i;return r}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=He(e,"base58btc"));let r=this._subscriptions[e];if(!r)throw(0,o9.default)(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");let i;try{i=Sf(Ye(r,"base58btc"))}catch(n){throw s6.error(n),n}return i.routingKey.uint8Array()}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map(r=>`${ey}${r}`)}async cancel(e){if(typeof e!="string")throw(0,o9.default)(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(ey)&&(e=e.substring(H4));let r=Object.keys(this._subscriptions).find(n=>this._subscriptions[n]===e);if(!r)return{canceled:!1};let i=Ye(r);return this._pubsubDs.unsubscribe(i),delete this._subscriptions[r],s6(`unsubscribed pubsub ${r}: ${e}`),{canceled:!0}}};f();Ar();var f9=A(Aa()),bp=A(_t()),h9=A(ce());Qe();var d9=Object.assign((0,h9.default)("ipfs:ipns:offline-datastore"),{error:(0,h9.default)("ipfs:ipns:offline-datastore:error")}),dy=class{constructor(e){this._repo=e,this.stores=[]}async put(e,r){if(!(e instanceof Uint8Array))throw(0,bp.default)(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(r instanceof Uint8Array))throw(0,bp.default)(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let i;try{i=this._routingKey(e)}catch(s){throw d9.error(s),(0,bp.default)(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let n=new f9.Record(e,r);return this._repo.datastore.put(i,n.serialize())}async get(e){if(!(e instanceof Uint8Array))throw(0,bp.default)(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let r;try{r=this._routingKey(e)}catch(s){throw d9.error(s),(0,bp.default)(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let i=await this._repo.datastore.get(r),n;try{n=f9.Record.deserialize(i)}catch(s){throw d9.error(s),s}return n.value}_routingKey(e){return new Te("/dht/record/"+He(e,"base32"),!1)}};f();var oK=A(Ln());Ds();var p9=A(ce()),$Se=Object.assign((0,p9.default)("ipfs:ipns:dht-datastore"),{error:(0,p9.default)("ipfs:ipns:dht-datastore:error")}),y9=class{constructor(e){this._dht=e}async put(e,r){try{await(0,oK.default)(this._dht.put(e,r))}catch(i){throw $Se.error(i),i}}async get(e){for await(let r of this._dht.get(e))if(r.name==="VALUE")return r.value;throw ni()}};function aK({libp2p:t,repo:e,peerId:r,options:i}){let n=[],s;if((0,c6.default)(i,"EXPERIMENTAL.ipnsPubsub",!1)){let o=t.pubsub,a=e.datastore;s=new gp(o,a,r),n.push(s)}if((0,c6.default)(i,"offline")||(0,c6.default)(i,"config.Routing.Type","none")==="none"){let o=new dy(e);n.push(o)}else n.push(new y9(t._dht));return new ny(n)}var cK=A(ce()),GSe=(0,cK.default)("ipfs:components:ipns"),g9=class{constructor(e={pass:""}){this.options=e,this.offline=null,this.online=null}getIPNS(){let e=this.online||this.offline;if(e)return e;throw new Au}get routing(){return this.getIPNS().routing}startOffline({repo:e,peerId:r,keychain:i}){if(this.offline!=null)throw new sa;GSe("initializing IPNS keyspace");let n=new dy(e),s=new W4(n,e.datastore,r,i,this.options);this.offline=s}async startOnline({libp2p:e,repo:r,peerId:i,keychain:n}){if(this.online!=null)throw new sa;let s=aK({libp2p:e,repo:r,peerId:i,options:this.options}),o=new W4(s,r.datastore,i,n,this.options);await o.republisher.start(),this.online=o}async stop(){let e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,r,i){return this.getIPNS().publish(e,r,i)}resolve(e,r){return this.getIPNS().resolve(e,r)}initializeKeyspace(e,r){return this.getIPNS().initializeKeyspace(e,r)}};f();f();var m9=A(ce());var hK=A(Ic()),b9=A(_t());ht();Qe();f();var uK=A(jd());var lK=A(Ln());async function fK({ipns:t,repo:e,codecs:r},i,n){if(uK.default.ipnsPath(i))return t.resolve(i);let{cid:s,path:o}=bc(i);await(0,lK.default)(Ou(s,o||"",r,e,n))}var w9=Object.assign((0,m9.default)("ipfs:name:publish"),{error:(0,m9.default)("ipfs:name:publish:error")});function dK({ipns:t,repo:e,codecs:r,peerId:i,isOnline:n,keychain:s}){let o=async c=>{if(c==="self")return i.privKey;try{let u=await s.exportKey(c,"temp");return await hK.default.keys.import(u,"temp")}catch(u){throw w9.error(u),(0,b9.default)(u,"ERR_CANNOT_GET_KEY")}};async function a(c,u={}){let l=u.resolve!==!1,h=u.lifetime||"24h",d=u.key||"self";if(!n())throw(0,b9.default)(new Error(Y3),"OFFLINE_ERROR");try{c=hL(c)}catch(b){throw w9.error(b),b}let p=0;try{p=Tu(h)||0,p=parseFloat(p.toFixed(6))}catch(b){throw w9.error(b),b}let y=await Promise.all([o(d),l?fK({ipns:t,repo:e,codecs:r},c):Promise.resolve()]),m=Ye(c),w=await t.publish(y[0],m,p);return{name:w.name,value:He(w.value)}}return Q(a)}f();var _9=A(ce()),u6=A(_t());ye();Gi();u2();var gK=A(Je()),mK=A(yK());Qe();var YSe=Rt.bind({ignoreUndefined:!0}),XSe=Object.assign((0,_9.default)("ipfs:name:resolve"),{error:(0,_9.default)("ipfs:name:resolve:error")}),bK=(t,e)=>e.length>0?t+"/"+e.join("/"):t;function wK({dns:t,ipns:e,peerId:r,isOnline:i,options:{offline:n}}){async function*s(o,a={}){if(a=YSe({nocache:!1,recursive:!0},a),n&&a&&a.nocache)throw(0,u6.default)(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!i()&&!n)throw(0,u6.default)(new Error(Y3),"OFFLINE_ERROR");o||(o=r.toB58String()),o.startsWith("/ipns/")||(o=`/ipns/${o}`);let[c,u,...l]=o.slice(1).split("/");try{if(u.substring(0,1)==="1"){let d=gK.default.parse(u),p=Wr(d.toBytes());u=q.createV1(114,p).toString(Rd)}else{let d=q.parse(u);d.version===1&&(u=d.toString(Rd))}}catch(d){if((0,mK.default)(u)){yield bK(await t(u,a),l);return}throw XSe.error(d),(0,u6.default)(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}let h=await e.resolve(`/${c}/${u}`,a);yield bK(h instanceof Uint8Array?He(h):h,l)}return Q(s)}f();f();f();var v9=A(_t());function wp(t,e){if(!t||!(e&&e.ipnsPubsub))throw(0,v9.default)(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(t.routing instanceof gp)return t.routing;let r=(t.routing.stores||[]).find(i=>i instanceof gp);if(!r)throw(0,v9.default)(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}function _K({ipns:t,options:e}){let r=e.EXPERIMENTAL;async function i(n,s={}){return wp(t,r).cancel(n,s)}return Q(i)}f();function vK({ipns:t,options:e}){let r=e.EXPERIMENTAL;async function i(n={}){try{return{enabled:Boolean(wp(t,r))}}catch(s){return{enabled:!1}}}return Q(i)}f();function EK({ipns:t,options:e}){let r=e.EXPERIMENTAL;async function i(n={}){return wp(t,r).getSubscriptions(n)}return Q(i)}var E9=class{constructor({ipns:e,options:r}){this.cancel=_K({ipns:e,options:r}),this.state=vK({ipns:e,options:r}),this.subs=EK({ipns:e,options:r})}};var S9=class{constructor({dns:e,ipns:r,repo:i,codecs:n,peerId:s,isOnline:o,keychain:a,options:c}){this.publish=dK({ipns:r,repo:i,codecs:n,peerId:s,isOnline:o,keychain:a}),this.resolve=wK({dns:e,ipns:r,peerId:s,isOnline:o,options:c}),this.pubsub=new E9({ipns:r,options:c})}};f();Ds();ye();var SK=A(ca()),AK=A(Eo()),QSe=ni().code,A9={default:"<dst>",edges:"<src> -> <dst>"};function xK({repo:t,codecs:e,resolve:r,preload:i}){async function*n(s,o={}){if(o.maxDepth===0)return;if(o.edges&&o.format&&o.format!==A9.default)throw new Error("Cannot set edges to true and also specify format");if(o.format=o.edges?A9.edges:o.format,typeof o.maxDepth!="number"&&(o.maxDepth=o.recursive?1/0:1),o.timeout){let l=[new SK.TimeoutController(o.timeout).signal];o.signal&&l.push(o.signal),o.signal=(0,AK.anySignal)(l)}let c=(Array.isArray(s)?s:[s]).map(u=>ZSe(i,u,o));for(let u of c)try{yield*JSe(r,t,e,u,o)}catch(l){yield{ref:"",err:l.message}}}return n}function ZSe(t,e,r){let{cid:i,path:n}=bc(e);return r.preload!==!1&&t(i),`/ipfs/${i}${n||""}`}async function*JSe(t,e,r,i,n){let s=await t(i,n),{cid:o}=bc(s),a=n.maxDepth!=null?n.maxDepth:1/0,c=n.unique||!1;for await(let u of tAe(e,r,o,a,c,n))!u.parent||u.isDuplicate||(yield{ref:eAe(u.parent.cid,u.node.cid,u.node.name,n.format)})}function eAe(t,e,r="",i=A9.default){let n=i.replace(/<src>/g,t.toString());return n=n.replace(/<dst>/g,e.toString()),n=n.replace(/<linkname>/g,r),n}async function*tAe(t,e,r,i,n,s){let o=new Set;async function*a(c,u){let l=u+1;if(!(l>i))try{for await(let h of rAe(t,e,c.cid,s))yield{parent:c,node:h,isDuplicate:n&&o.has(h.cid.toString())},n&&o.add(h.cid.toString()),yield*a(h,l)}catch(h){throw h.code===QSe&&(h.message=`Could not find object with CID: ${c.cid}`),h}}yield*a({cid:r},0)}async function*rAe(t,e,r,i){let n=await t.blocks.get(r,i),o=(await e.getCodec(r.code)).decode(n),a=r.code===gt,c=[];for(let[u,l]of x9(o,c)){if(a){let h=u.match(/^Links\/(\d+)\/Hash$/);if(h){let d=Number(h[1]);if(d<o.Links.length){yield{name:o.Links[d].Name,cid:l};continue}}}yield{name:u,cid:l}}}var x9=function*(t,e){if(t!=null&&!(t instanceof Uint8Array)){for(let[r,i]of Object.entries(t)){let n=[...e,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s],c=q.asCID(o);c?yield[a.join("/"),c]:typeof o=="object"&&(yield*x9(o,a))}else{let s=q.asCID(i);s?yield[n.join("/"),s]:yield*x9(i,n)}}return[]}};f();function RK({repo:t}){async function*e(r={}){for await(let i of t.blocks.queryKeys({},{signal:r.signal}))yield{ref:i.toString()}}return Q(e)}f();f();function IK({network:t}){async function e(r={}){let{bitswap:i}=await t.use(r),n=i.getWantlist();return Array.from(n).map(s=>s[1].cid)}return Q(e)}f();var TK=A(Je());function PK({network:t}){async function e(r,i={}){let{bitswap:n}=await t.use(i),s=n.wantlistForPeer(TK.default.createFromB58String(r));return Array.from(s).map(o=>o[1].cid)}return Q(e)}f();function CK({network:t}){async function e(r,i={}){let{bitswap:n}=await t.use(i);return Array.isArray(r)||(r=[r]),n.unwant(r)}return Q(e)}f();function l6({network:t}){async function e(r={}){let i=(await t.use(r)).bitswap,n=i.stat().snapshot;return{provideBufLen:parseInt(n.providesBufferLength.toString()),blocksReceived:BigInt(n.blocksReceived.toString()),wantlist:Array.from(i.getWantlist()).map(s=>s[1].cid),peers:i.peers().map(s=>s.toB58String()),dupBlksReceived:BigInt(n.dupBlksReceived.toString()),dupDataReceived:BigInt(n.dupDataReceived.toString()),dataReceived:BigInt(n.dataReceived.toString()),blocksSent:BigInt(n.blocksSent.toString()),dataSent:BigInt(n.dataSent.toString())}}return Q(e)}var R9=class{constructor({network:e}){this.wantlist=IK({network:e}),this.wantlistForPeer=PK({network:e}),this.unwant=CK({network:e}),this.stat=l6({network:e})}};f();f();f();var OK=A(af());function f6(t){try{return OK.default.IPFS.matches(t)}catch(e){return!1}}function kK({repo:t}){async function e(r,i={}){if(!f6(r))throw new Error(`${r} is not a valid Multiaddr`);let n=await t.config.getAll(i),s=n.Bootstrap||[];return s.push(r.toString()),n.Bootstrap=Array.from(new Set(s)).sort((o,a)=>o.localeCompare(a)),await t.config.replace(n),{Peers:[r]}}return Q(e)}f();var DK=A(ct());function NK({repo:t}){async function e(r={}){let i=await t.config.getAll(r),n=i.Bootstrap||[];return i.Bootstrap=[],await t.config.replace(i),{Peers:n.map(s=>new DK.Multiaddr(s))}}return Q(e)}f();var BK=A(ct());function LK({repo:t}){async function e(r={}){return{Peers:(await t.config.get("Bootstrap",r)||[]).map(n=>new BK.Multiaddr(n))}}return Q(e)}f();f();var Pc=()=>({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}});var MK=A(ct());function jK({repo:t}){async function e(r={}){let i=await t.config.getAll(r);return i.Bootstrap=Pc().Bootstrap,await t.config.replace(i),{Peers:Pc().Bootstrap.map(n=>new MK.Multiaddr(n))}}return Q(e)}f();function qK({repo:t}){async function e(r,i={}){if(!f6(r))throw new Error(`${r} is not a valid Multiaddr`);let n=await t.config.getAll(i);return n.Bootstrap=(n.Bootstrap||[]).filter(s=>s.toString()!==r.toString()),await t.config.replace(n),{Peers:[r]}}return Q(e)}var I9=class{constructor({repo:e}){this.add=kK({repo:e}),this.list=LK({repo:e}),this.rm=qK({repo:e}),this.clear=NK({repo:e}),this.reset=jK({repo:e})}};f();f();function UK({preload:t,repo:e}){async function r(i,n={}){return n.preload!==!1&&t(i),e.blocks.get(i,n)}return Q(r)}f();ye();function FK({codecs:t,hashers:e,repo:r,preload:i}){async function n(s,o={}){let a=o.pin?await r.gcLock.readLock():null;try{let c=o.version!=null?o.version:0,u=o.format||(c===0?"dag-pb":"raw"),h=await(await e.getHasher(o.mhtype||"sha2-256")).digest(s),d=await t.getCodec(u),p=q.create(c,d.code,h);return await r.blocks.put(p,s,{signal:o.signal}),o.preload!==!1&&i(p),o.pin===!0&&await r.pins.pinRecursively(p,{signal:o.signal}),p}finally{a&&a()}}return Q(n)}f();var eV=A(_t()),tV=A(y6()),rV=A(mn()),iV=A(To()),nV=A(vr());f();ye();function g6(t){return t instanceof Uint8Array?q.decode(t):q.parse(t.toString())}var hAe=8;function sV({repo:t}){async function*e(r,i={}){Array.isArray(r)||(r=[r]);let n=await t.gcLock.writeLock();try{yield*(0,nV.pipe)(r,s=>(0,rV.default)(s,o=>async()=>{o=g6(o);let a={cid:o};try{if(!await t.blocks.has(o))throw(0,eV.default)(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await t.blocks.delete(o)}catch(c){i.force||(c.message=`cannot remove ${o}: ${c.message}`,a.error=c)}return a}),s=>(0,tV.default)(s,{concurrency:hAe}),s=>(0,iV.default)(s,()=>!i.quiet))}finally{n()}}return Q(e)}f();function oV({repo:t,preload:e}){async function r(i,n={}){i=g6(i),n.preload!==!1&&e(i);let s=await t.blocks.get(i);return{cid:i,size:s.length}}return Q(r)}var P9=class{constructor({codecs:e,hashers:r,preload:i,repo:n}){this.get=UK({preload:i,repo:n}),this.put=FK({codecs:e,hashers:r,preload:i,repo:n}),this.rm=sV({repo:n}),this.stat=oV({preload:i,repo:n})}};f();f();var vV=A(kn());f();f();var hV=A(cf());ht();var dV=A(vp()),pV=A(lV()),yV=A(Ep()),gV=A(Rf()),mV=A(mn());f();function js(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function Cc(t){return t.constructor&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function py(t){return typeof t=="object"&&(t.path||t.content)}var Oc=t=>t&&typeof t.getReader=="function";async function*m6(t){yield t}async function b6(t){if(js(t))return m6(C9(t));if(typeof t=="string"||t instanceof String)return m6(C9(t.toString()));if(Cc(t))return(0,pV.default)(t);if(Oc(t)&&(t=(0,dV.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=(0,yV.default)(t),{value:r,done:i}=await e.peek();if(i)return m6(new Uint8Array(0));if(e.push(r),Number.isInteger(r))return m6(Uint8Array.from(await(0,gV.default)(e)));if(js(r)||typeof r=="string"||r instanceof String)return(0,mV.default)(e,C9)}throw(0,hV.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function C9(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):Ye(t.toString())}f();var w6=A(cf()),bV=A(vp()),wV=A(Ep());async function*_V(t,e){if(t==null)throw(0,w6.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield _6(t.toString(),e);return}if(js(t)||Cc(t)){yield _6(t,e);return}if(Oc(t)&&(t=(0,bV.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=(0,wV.default)(t),{value:i,done:n}=await r.peek();if(n){yield{content:[]};return}if(r.push(i),Number.isInteger(i)||js(i)||typeof i=="string"||i instanceof String){yield _6(r,e);return}throw(0,w6.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(py(t)){yield _6(t,e);return}throw(0,w6.default)(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function _6(t,e){let{path:r,mode:i,mtime:n,content:s}=t,o={path:r||"",mode:hc(i),mtime:mu(n)};return s?o.content=await e(s):r||(o.content=await e(t)),o}function v6(t){return _V(t,b6)}function EV({addAll:t}){async function e(r,i={}){let n=await(0,vV.default)(t(v6(r),i));if(n==null)throw Error("Failed to add a file, if you see this please report a bug");return n}return e}f();f();var Uz=A(S6());f();ti();f();s2();Ad();var O9=A(IV());function wAe(t){let e=new Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return new Uint8Array(e)}var _ft=Su({name:"murmur3-32",code:35,encode:t=>wAe(O9.default.x86.hash32(t))}),Of=Su({name:"murmur3-128",code:34,encode:t=>gd.fromHex(O9.default.x64.hash128(t))});async function _Ae(t){return(await Of.encode(t)).slice(0,8).reverse()}var vAe={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Sr,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:17437180132763652,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:_Ae,hamtHashCode:34,hamtBucketBits:8},TV=(t={})=>Rt.bind({ignoreUndefined:!0})(vAe,t);f();f();f();ye();ti();var EAe=async(t,e,r)=>{r.codec||(r.codec=un),r.hasher||(r.hasher=Sr),r.cidVersion===void 0&&(r.cidVersion=1),r.codec===un&&r.hasher!==Sr&&(r.cidVersion=1);let i=await r.hasher.digest(t),n=q.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await e.put(n,t,{signal:r.signal}),n},Po=EAe;var SAe=async(t,e,r)=>{let i=new at({type:"directory",mtime:t.mtime,mode:t.mode}),n=st(Ai({Data:i.marshal()})),s=await Po(n,e,r),o=t.path;return{cid:s,path:o,unixfs:i,size:n.length}},PV=SAe;f();var FV=A(gy());var KV=A(S6());Es();f();var kV=A(Rf());async function xAe(t,e){return e(await(0,kV.default)(t))}var DV=xAe;f();var NV=A(E6());function RAe(t,e,r){return BV(t,e,r)}async function BV(t,e,r){let i=[];for await(let n of(0,NV.default)(t,r.maxChildrenPerNode))i.push(await e(n));return i.length>1?BV(i,e,r):i[0]}var LV=RAe;f();var MV=A(E6());async function IAe(t,e,r){let i=new qV(r.layerRepeat),n=0,s=1,o=i;for await(let a of(0,MV.default)(t,r.maxChildrenPerNode))o.isFull()&&(o!==i&&i.addChild(await o.reduce(e)),n&&n%r.layerRepeat==0&&s++,o=new k9(s,r.layerRepeat,n),n++),o.append(a);return o&&o!==i&&i.addChild(await o.reduce(e)),i.reduce(e)}var jV=IAe,k9=class{constructor(e,r,i=0){this.maxDepth=e,this.layerRepeat=r,this.currentDepth=1,this.iteration=i,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;let e=this._findParent(this.node,this.currentDepth);return e?(this._addNextNodeToParent(e),!1):!0}_addNextNodeToParent(e){this.parent=e;let r={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(r),this.currentDepth=r.depth,this.node=r}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,r){let i=[];return e.children.length&&(i=await Promise.all(e.children.filter(n=>n.data).map(n=>this._reduce(n,r)))),r((e.data||[]).concat(i))}_findParent(e,r){let i=e.parent;if(!(!i||i.depth===0))return i.children.length===i.maxChildren||!i.maxChildren?this._findParent(i,r):i}},qV=class extends k9{constructor(e){super(0,e);this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}};f();Es();async function*TAe(t,e,r){for await(let i of t.content)yield async()=>{r.progress(i.length,t.path);let n,s={codec:un,cidVersion:r.cidVersion,hasher:r.hasher,onlyHash:r.onlyHash};return r.rawLeaves?(s.codec=l2,s.cidVersion=1):(n=new at({type:r.leafType,data:i,mtime:t.mtime,mode:t.mode}),i=st({Data:n.marshal(),Links:[]})),{cid:await Po(i,e,s),unixfs:n,size:i.length}}}var UV=TAe;var PAe={flat:DV,balanced:LV,trickle:jV};async function*CAe(t,e,r){let i=-1,n,s;typeof r.bufferImporter=="function"?s=r.bufferImporter:s=UV;for await(let o of(0,KV.default)(s(t,e,r),r.blockWriteConcurrency)){if(i++,i===0){n=o;continue}else i===1&&n&&(yield n,n=null);yield o}n&&(n.single=!0,yield n)}var OAe=(t,e,r)=>{async function i(n){if(n.length===1&&n[0].single&&r.reduceSingleLeafToSelf){let l=n[0];if(l.cid.code===fi&&(t.mtime!==void 0||t.mode!==void 0)){let h=await e.get(l.cid);l.unixfs=new at({type:"file",mtime:t.mtime,mode:t.mode,data:h}),h=st(Ai({Data:l.unixfs.marshal()})),l.cid=await Po(h,e,{...r,codec:un,hasher:r.hasher,cidVersion:r.cidVersion}),l.size=h.length}return{cid:l.cid,path:t.path,unixfs:l.unixfs,size:l.size}}let s=new at({type:"file",mtime:t.mtime,mode:t.mode}),o=n.filter(l=>l.cid.code===fi&&l.size||l.unixfs&&!l.unixfs.data&&l.unixfs.fileSize()?!0:Boolean(l.unixfs&&l.unixfs.data&&l.unixfs.data.length)).map(l=>l.cid.code===fi?(s.addBlockSize(l.size),{Name:"",Tsize:l.size,Hash:l.cid}):(!l.unixfs||!l.unixfs.data?s.addBlockSize(l.unixfs&&l.unixfs.fileSize()||0):s.addBlockSize(l.unixfs.data.length),{Name:"",Tsize:l.size,Hash:l.cid})),a={Data:s.marshal(),Links:o},c=st(Ai(a));return{cid:await Po(c,e,r),path:t.path,unixfs:s,size:c.length+a.Links.reduce((l,h)=>l+h.Tsize,0)}}return i};function kAe(t,e,r){let i=PAe[r.strategy];if(!i)throw(0,FV.default)(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY");return i(CAe(t,e,r),OAe(t,e,r),r)}var VV=kAe;var U9=A(gy());f();var dz=A(tn()),pz=A(hz()),j9=A(gy());async function*zAe(t,e){let r,i,n;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)n=e.avgChunkSize,r=e.minChunkSize,i=e.maxChunkSize;else if(e.avgChunkSize)n=e.avgChunkSize,r=n/3,i=n+n/2;else throw(0,j9.default)(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(r<16)throw(0,j9.default)(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");i<r&&(i=r),n<r&&(n=r);let s=Math.floor(Math.log2(n));for await(let o of HAe(t,{min:r,max:i,bits:s,window:e.window,polynomial:e.polynomial}))yield o}var yz=zAe;async function*HAe(t,e){let r=await(0,pz.create)(e.bits,e.min,e.max,e.window),i=new dz.default;for await(let n of t){i.append(n);let s=r.fingerprint(n);for(let o=0;o<s.length;o++){let a=s[o],c=i.slice(0,a);i.consume(a),yield c}}i.length&&(yield i.slice(0))}f();var I6=A(tn());async function*$Ae(t,e){let r=new I6.default,i=0,n=!1,s=e.maxChunkSize;for await(let o of t)for(r.append(o),i+=o.length;i>=s;)if(yield r.slice(0,s),n=!0,s===r.length)r=new I6.default,i=0;else{let a=new I6.default;a.append(r.shallowSlice(s)),r=a,i-=s}(!n||i)&&(yield r.slice(0,i))}var gz=$Ae;f();var q9=A(gy());ht();async function*GAe(t){for await(let e of t){if(e.length===void 0)throw(0,q9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof e=="string"||e instanceof String)yield Ye(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else if(e instanceof Uint8Array)yield e;else throw(0,q9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}var mz=GAe;function WAe(t){return Symbol.iterator in t}function YAe(t){return Symbol.asyncIterator in t}function XAe(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(WAe(t))return async function*(){yield*t}();if(YAe(t))return t}catch{throw(0,U9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,U9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*QAe(t,e,r){for await(let i of t)if(i.path&&(i.path.substring(0,2)==="./"&&(r.wrapWithDirectory=!0),i.path=i.path.split("/").filter(n=>n&&n!==".").join("/")),i.content){let n;typeof r.chunker=="function"?n=r.chunker:r.chunker==="rabin"?n=yz:n=gz;let s;typeof r.chunkValidator=="function"?s=r.chunkValidator:s=mz;let o={path:i.path,mtime:i.mtime,mode:i.mode,content:n(s(XAe(i.content),r),r)};yield()=>VV(o,e,r)}else if(i.path){let n={path:i.path,mtime:i.mtime,mode:i.mode};yield()=>PV(n,e,r)}else throw new Error("Import candidate must have content or path or both")}var bz=QAe;f();f();f();var wz=class{constructor(e,r){this.options=r||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,r){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},Xu=wz;var _z=class extends Xu{constructor(e,r){super(e,r);this._children={}}async put(e,r){this.cid=void 0,this.size=void 0,this._children[e]=r}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){let e=Object.keys(this._children);for(let r=0;r<e.length;r++){let i=e[r];yield{key:i,child:this._children[i]}}}async*flush(e){let r=Object.keys(this._children),i=[];for(let u=0;u<r.length;u++){let l=this._children[r[u]];if(l instanceof Xu)for await(let h of l.flush(e))l=h,yield l;l.size!=null&&l.cid&&i.push({Name:r[u],Tsize:l.size,Hash:l.cid})}let n=new at({type:"directory",mtime:this.mtime,mode:this.mode}),s={Data:n.marshal(),Links:i},o=st(Ai(s)),a=await Po(o,e,this.options),c=o.length+s.Links.reduce((u,l)=>u+(l.Tsize==null?0:l.Tsize),0);this.cid=a,this.size=c,yield{cid:a,unixfs:n,path:this.path,size:c}}},_y=_z;f();f();var C6=A(vy()),kz=class extends Xu{constructor(e,r){super(e,r);this._bucket=(0,C6.createHAMT)({hashFn:r.hamtHashFn,bits:r.hamtBucketBits})}async put(e,r){await this._bucket.put(e,r)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}async*flush(e){for await(let r of Nz(this._bucket,e,this,this.options))yield{...r,path:this.path}}},Dz=kz;async function*Nz(t,e,r,i){let n=t._children,s=[],o=0;for(let p=0;p<n.length;p++){let y=n.get(p);if(!y)continue;let m=p.toString(16).toUpperCase().padStart(2,"0");if(y instanceof C6.Bucket){let w;for await(let b of await Nz(y,e,null,i))w=b;if(!w)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:m,Tsize:w.size,Hash:w.cid}),o+=w.size}else if(typeof y.value.flush=="function"){let w=y.value,b;for await(let x of w.flush(e))b=x,yield b;let v=m+y.key;s.push({Name:v,Tsize:b.size,Hash:b.cid}),o+=b.size}else{let w=y.value;if(!w.cid)continue;let b=m+y.key,v=w.size;s.push({Name:b,Tsize:v,Hash:w.cid}),o+=v}}let a=Uint8Array.from(n.bitField().reverse()),c=new at({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:i.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode}),u={Data:c.marshal(),Links:s},l=st(Ai(u)),h=await Po(l,e,i),d=l.length+o;yield{cid:h,unixfs:c,size:d}}async function Bz(t,e,r,i){let n=e;e instanceof _y&&e.directChildrenCount()>=r&&(n=await yxe(e,i));let s=n.parent;if(s){if(n!==e){if(t&&(t.parent=n),!n.parentKey)throw new Error("No parent key found");await s.put(n.parentKey,n)}return Bz(n,s,r,i)}return n}async function yxe(t,e){let r=new Dz({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(let{key:i,child:n}of t.eachChildSeries())await r.put(i,n);return r}var Lz=Bz;f();var gxe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),Mz=gxe;async function mxe(t,e,r){let i=Mz(t.path||""),n=i.length-1,s=e,o="";for(let a=0;a<i.length;a++){let c=i[a];o+=`${o?"/":""}${c}`;let u=a===n;if(s.dirty=!0,s.cid=void 0,s.size=void 0,u)await s.put(c,t),e=await Lz(null,s,r.shardSplitThreshold,r);else{let l=await s.get(c);(!l||!(l instanceof Xu))&&(l=new _y({root:!1,dir:!0,parent:s,parentKey:c,path:o,dirty:!0,flat:!0,mtime:l&&l.unixfs&&l.unixfs.mtime,mode:l&&l.unixfs&&l.unixfs.mode},r)),await s.put(c,l),s=l}}return e}async function*jz(t,e){if(!(t instanceof Xu)){t&&t.unixfs&&t.unixfs.isDirectory()&&(yield t);return}yield*t.flush(e)}async function*bxe(t,e,r){let i=new _y({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(let n of t)!n||(i=await mxe(n,i,r),(!n.unixfs||!n.unixfs.isDirectory())&&(yield n));if(r.wrapWithDirectory)yield*jz(i,e);else for await(let n of i.eachChildSeries())!n||(yield*jz(n.child,e))}var qz=bxe;async function*Sp(t,e,r={}){let i=TV(r),n;typeof r.dagBuilder=="function"?n=r.dagBuilder:n=bz;let s;typeof r.treeBuilder=="function"?s=r.treeBuilder:s=qz;let o;Symbol.asyncIterator in t||Symbol.iterator in t?o=t:o=[t];for await(let a of s((0,Uz.default)(n(o,e,i),i.fileImportConcurrency),e,i))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}f();f();var Ey=A(cf()),Fz=A(vp()),Kz=A(Ep()),K9=A(mn());async function*O6(t,e){if(typeof t=="string"||t instanceof String||js(t)||Cc(t)||t._readableState)throw(0,Ey.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Oc(t)&&(t=(0,Fz.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=(0,Kz.default)(t),{value:i,done:n}=await r.peek();if(n){yield*[];return}if(r.push(i),Number.isInteger(i))throw(0,Ey.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(i._readableState){yield*(0,K9.default)(r,s=>V9({content:s},e));return}if(js(i)){yield V9({content:r},e);return}if(py(i)||i[Symbol.iterator]||i[Symbol.asyncIterator]||Oc(i)||Cc(i)){yield*(0,K9.default)(r,s=>V9(s,e));return}}throw py(t)?(0,Ey.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,Ey.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function V9(t,e){let{path:r,mode:i,mtime:n,content:s}=t,o={path:r||"",mode:hc(i),mtime:mu(n)};return s?o.content=await e(s):r||(o.content=await e(t)),o}function Vz(t){return O6(t,b6)}f();var zz=t=>{if(t)if(t.startsWith("size-")){let e=t.split("-")[1],r=parseInt(e);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}else{if(t.startsWith("rabin"))return{chunker:"rabin",...wxe(t)};throw new Error(`Unrecognized chunker option: ${t}`)}else return{chunker:"fixed"}},wxe=t=>{let e={},r=t.split("-");switch(r.length){case 1:e.avgChunkSize=262144;break;case 2:e.avgChunkSize=k6(r[1],"avg");break;case 4:e.minChunkSize=k6(r[1],"min"),e.avgChunkSize=k6(r[2],"avg"),e.maxChunkSize=k6(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return e},k6=(t,e)=>{let r=parseInt(t);if(isNaN(r))throw new Error(`Chunker parameter ${e} must be an integer`);return r};var Hz=A(vr());var _xe=Rt.bind({ignoreUndefined:!0});function $z({repo:t,preload:e,options:r}){let i=r&&r.sharding;async function*n(s,o={}){let a=_xe({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},o,{...zz(o.chunker)});a.hashAlg&&a.hashAlg!=="sha2-256"&&a.cidVersion!==1&&(a.cidVersion=1),a.trickle&&(a.strategy="trickle"),a.strategy==="trickle"&&(a.leafType="raw",a.reduceSingleLeafToSelf=!1),a.cidVersion>0&&a.rawLeaves===void 0&&(a.rawLeaves=!0),a.hashAlg!==void 0&&a.rawLeaves===void 0&&(a.rawLeaves=!0),delete a.trickle;let c={};if(a.progress){let h=a.progress;a.progress=(d,p)=>{c[p]||(c[p]=0),c[p]+=d,h(c[p],p)}}let u=(0,Hz.pipe)(Vz(s),h=>Sp(h,t.blocks,{...a,pin:!1}),vxe(a),Exe(e,a),Sxe(t,a)),l=await t.gcLock.readLock();try{for await(let h of u)delete c[h.path],yield h}finally{l()}}return Q(n)}function vxe(t){async function*e(r){for await(let i of r){let n=i.cid;t.cidVersion===1&&(n=n.toV1());let s=i.path?i.path:n.toString();t.wrapWithDirectory&&!i.path&&(s=""),yield{path:s,cid:n,size:i.size,mode:i.unixfs&&i.unixfs.mode,mtime:i.unixfs&&i.unixfs.mtime}}}return e}function Exe(t,e){async function*r(i){for await(let n of i)(!n.path||e.wrapWithDirectory?n.path==="":!n.path.includes("/"))&&!e.onlyHash&&e.preload!==!1&&t(n.cid),yield n}return r}function Sxe(t,e){async function*r(i){for await(let n of i){let s=!(n.path&&n.path.includes("/"));(e.pin==null?!0:e.pin)&&s&&!e.onlyHash&&await t.pins.pinRecursively(n.cid),yield n}}return r}f();f();var j6=A(kc());ye();f();var lH=A(kc());f();ye();var xxe=42;function Rxe(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return q.decode(t.subarray(1))}var Yz={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Yz.tags[xxe]=Rxe;var D6=113;var N6=t=>Ri(t,Yz);Es();gc();f();var M6=A(kc());f();var B6=A(vy());var Ixe=async function(t){return(await Of.encode(t)).slice(0,8).reverse()},Txe=(t,e,r)=>Promise.all(t.map(i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===2){let n=parseInt(i.Name,16);return e._putObjectAt(n,new B6.Bucket({hash:r._options.hash,bits:r._options.bits},e,n))}return r.put(i.Name.substring(2),!0)})),Xz=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Pxe=t=>{let e=t.bucket,r=[];for(;e._parent;)r.push(e),e=e._parent;return r.push(e),r.reverse()},Qz=async(t,e,r,i,n)=>{if(!i){let l=(0,B6.createHAMT)({hashFn:Ixe});i={rootBucket:l,hamtDepth:1,lastBucket:l}}await Txe(t.Links,i.lastBucket,i.rootBucket);let s=await i.rootBucket._findNewBucketAndPos(e),o=Xz(s.pos),a=Pxe(s);a.length>i.hamtDepth&&(i.lastBucket=a[i.hamtDepth],o=Xz(i.lastBucket._posAtParent));let c=t.Links.find(l=>{if(l.Name==null)return!1;let h=l.Name.substring(0,2),d=l.Name.substring(2);return!(h!==o||d&&d!==e)});if(!c)return null;if(c.Name!=null&&c.Name.substring(2)===e)return c.Hash;i.hamtDepth++;let u=await r.get(c.Hash,n);return t=Ct(u),Qz(t,e,r,i,n)},Zz=Qz;f();f();function Cxe(t,e,r,i){let n=t.length,s=e+n;return r>=s||i<e?new Uint8Array(0):(i>=e&&i<s&&(t=t.slice(0,i-e)),r>=e&&r<s&&(t=t.slice(r-e)),t)}var kf=Cxe;f();var L6=A(kc()),Oxe=(t,e,r)=>{if(e||(e=0),e<0)throw(0,L6.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>t)throw(0,L6.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!r&&r!==0&&(r=t-e),r<0)throw(0,L6.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+r>t&&(r=t-e),{offset:e,length:r}},Ap=Oxe;var z9=A(kc());Es();async function*Jz(t,e,r,i,n=0,s){if(e instanceof Uint8Array){let c=kf(e,n,r,i);return c.length&&(yield c),n+=c.length,n}if(e.Data==null)throw(0,z9.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let o;try{o=at.unmarshal(e.Data)}catch(c){throw(0,z9.default)(c,"ERR_NOT_UNIXFS")}if(o.data&&o.data.length){let c=kf(o.data,n,r,i);c.length&&(yield c),n+=o.data.length}let a=n;for(let c=0;c<e.Links.length;c++){let u=e.Links[c],l=n+o.blockSizes[c];if(r>=a&&r<l||i>a&&i<=l||r<a&&i>l){let h=await t.get(u.Hash,{signal:s.signal}),d;switch(u.Hash.code){case gt:d=await Ct(h);break;case fi:d=h;break;case D6:d=await N6(h);break;default:throw Error(`Unsupported codec: ${u.Hash.code}`)}for await(let p of Jz(t,d,r,i,n,s))n+=p.length,yield p}n=l,a=l+1}}var kxe=(t,e,r,i,n,s,o)=>{function a(c={}){let u=r.fileSize();if(u===void 0)throw new Error("File was a directory");let{offset:l,length:h}=Ap(u,c.offset,c.length),d=l,p=l+h;return Jz(o,e,d,p,0,c)}return a},H9=kxe;f();var Dxe=(t,e,r,i,n,s,o)=>{async function*a(c={}){let u=c.offset||0,l=c.length||e.Links.length,h=e.Links.slice(u,l);for(let d of h){let p=await n(d.Hash,d.Name||"",`${i}/${d.Name||""}`,[],s+1,o,c);p.entry&&(yield p.entry)}}return a},eH=Dxe;f();var Nxe=(t,e,r,i,n,s,o)=>{function a(c={}){return tH(e,i,n,s,o,c)}return a};async function*tH(t,e,r,i,n,s){let o=t.Links;for(let a of o){let c=a.Name!=null?a.Name.substring(2):null;if(c)yield(await r(a.Hash,c,`${e}/${c}`,[],i+1,n,s)).entry;else{let u=await n.get(a.Hash);t=Ct(u);for await(let l of tH(t,e,r,i,n,s))yield l}}}var rH=Nxe;var Bxe=(t,e)=>{let r=t.Links.find(i=>i.Name===e);return r&&r.Hash},Lxe={raw:H9,file:H9,directory:eH,"hamt-sharded-directory":rH,metadata:(t,e,r,i,n,s,o)=>()=>[],symlink:(t,e,r,i,n,s,o)=>()=>[]},Mxe=async(t,e,r,i,n,s,o,a)=>{let c=await o.get(t,a),u=Ct(c),l,h;if(e||(e=t.toString()),u.Data==null)throw(0,M6.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{l=at.unmarshal(u.Data)}catch(d){throw(0,M6.default)(d,"ERR_NOT_UNIXFS")}if(r||(r=e),i.length){let d;if(l&&l.type==="hamt-sharded-directory"?d=await Zz(u,i[0],o):d=Bxe(u,i[0]),!d)throw(0,M6.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let p=i.shift(),y=`${r}/${p}`;h={cid:d,toResolve:i,name:p||"",path:y}}return{entry:{type:l.isDirectory()?"directory":"file",name:e,path:r,cid:t,content:Lxe[l.type](t,u,l,r,n,s,o),unixfs:l,depth:s,node:u,size:l.fileSize()},next:h}},iH=Mxe;f();var nH=A(kc());var jxe=t=>{async function*e(r={}){let{offset:i,length:n}=Ap(t.length,r.offset,r.length);yield kf(t,0,i,i+n)}return e},qxe=async(t,e,r,i,n,s,o,a)=>{if(i.length)throw(0,nH.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let c=await o.get(t,a);return{entry:{type:"raw",name:e,path:r,cid:t,content:jxe(c),depth:s,size:c.length,node:c}}},sH=qxe;f();ye();var oH=A(kc());var Uxe=async(t,e,r,i,n,s,o,a)=>{let c=await o.get(t),u=N6(c),l=u,h=r;for(;i.length;){let d=i[0];if(d in l){i.shift(),h=`${h}/${d}`;let p=q.asCID(l[d]);if(p)return{entry:{type:"object",name:e,path:r,cid:t,node:c,depth:s,size:c.length,content:async function*(){yield u}},next:{cid:p,name:d,path:h,toResolve:i}};l=l[d]}else throw(0,oH.default)(new Error(`No property named ${d} found in cbor node ${t}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:r,cid:t,node:c,depth:s,size:c.length,content:async function*(){yield u}}}},aH=Uxe;f();var cH=A(kc());Gi();var Fxe=t=>{async function*e(r={}){let{offset:i,length:n}=Ap(t.length,r.offset,r.length);yield kf(t,0,i,i+n)}return e},Kxe=async(t,e,r,i,n,s,o,a)=>{if(i.length)throw(0,cH.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let c=await Wr(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:Fxe(c.digest),depth:s,size:c.digest.length,node:c.digest}}},uH=Kxe;var Vxe={[gt]:iH,[fi]:sH,[D6]:aH,[Qn.code]:uH};function fH(t,e,r,i,n,s,o){let a=Vxe[t.code];if(!a)throw(0,lH.default)(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return a(t,e,r,i,fH,n,s,o)}var hH=fH;var dH=A(kn()),zxe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),Hxe=t=>{if(t instanceof Uint8Array)return{cid:q.decode(t),toResolve:[]};let e=q.asCID(t);if(e)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));let r=zxe(t);return{cid:q.parse(r[0]),toResolve:r.slice(1)}}throw(0,j6.default)(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*$9(t,e,r={}){let{cid:i,toResolve:n}=Hxe(t),s=i.toString(),o=s,a=n.length;for(;;){let c=await hH(i,s,o,n,a,e,r);if(!c.entry&&!c.next)throw(0,j6.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;n=c.next.toResolve,i=c.next.cid,s=c.next.name,o=c.next.path}}async function Fi(t,e,r={}){let i=await(0,dH.default)($9(t,e,r));if(!i)throw(0,j6.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return i}async function*q6(t,e,r={}){let i=await Fi(t,e,r);if(!i)return;if(yield i,i.type==="directory")for await(let s of n(i,r))yield s;async function*n(s,o){for await(let a of s.content(o))yield a,!(a instanceof Uint8Array)&&a.type==="directory"&&(yield*n(a,o))}}ye();function pH({repo:t,preload:e}){async function*r(i,n={}){if(i=Ud(i),n.preload!==!1){let o=i.split("/");e(q.parse(o[0]))}let s=await Fi(i,t.blocks,n);if(s.type==="directory")throw new Error("this dag node is a directory");if(!s.content)throw new Error("this dag node has no content");yield*s.content(n)}return Q(r)}f();var Mp=A(_t());ye();var MS=A(OH()),jS=A(vr()),qS=A(bG()),US=A(mn()),FS=A(_G()),vG=6;function EG({repo:t,preload:e}){async function*r(i,n={}){if(n.compressionLevel!=null&&(n.compressionLevel<-1||n.compressionLevel>9))throw(0,Mp.default)(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(n.preload!==!1){let a;try{a=Ud(i).split("/")}catch(c){throw(0,Mp.default)(c,"ERR_INVALID_PATH")}e(q.parse(a[0]))}let s=q.asCID(i)||i,o=await Fi(s,t.blocks,n);if(o.type==="file"||o.type==="raw"){let a=[];!n.compress||n.archive===!0?a.push([{header:{name:o.path,mode:o.type==="file"&&o.unixfs.mode,mtime:o.type==="file"&&o.unixfs.mtime?new Date(o.unixfs.mtime.secs*1e3):void 0,size:o.size,type:"file"},body:o.content()}],(0,MS.pack)(),c=>(0,US.default)(c,u=>u.slice())):a.push(o.content),n.compress&&a.push(async function*(c){let u=await(0,FS.default)(c);yield qS.default.gzip(u,{level:n.compressionLevel||vG})}),yield*(0,jS.pipe)(...a);return}if(o.type==="directory"){let a=[q6(s,t.blocks,n),async function*(c){for await(let u of c){let l={header:{name:u.path,size:u.size}};if(u.type==="file")l.header.type="file",l.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,l.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0,l.body=u.content();else if(u.type==="raw")l.header.type="file",l.body=u.content();else if(u.type==="directory")l.header.type="directory",l.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,l.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0;else throw(0,Mp.default)(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");yield l}},(0,MS.pack)(),c=>(0,US.default)(c,u=>u.slice())];if(n.compress){if(!n.archive)throw(0,Mp.default)(new Error("file is not regular"),"ERR_INVALID_PATH");n.compress&&a.push(async function*(c){let u=await(0,FS.default)(c);yield qS.default.gzip(u,{level:n.compressionLevel||vG})})}yield*(0,jS.pipe)(...a);return}throw(0,Mp.default)(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS")}return Q(r)}f();var SG=A(_t());ye();function AG({repo:t,preload:e}){async function*r(i,n={}){let s=Ud(i),o=s.split("/");n.preload!==!1&&e(q.parse(o[0]));let a=q.asCID(s)||s,c=await Fi(a,t.blocks,n);if(c.type==="file"){yield o7(c);return}if(c.type==="directory"){for await(let u of c.content())yield o7(u);return}throw(0,SG.default)(new Error(`Unknown UnixFS type ${c.type}`),"ERR_UNKNOWN_UNIXFS_TYPE")}return Q(r)}var KS=class{constructor({preload:e,repo:r,options:i}){let n=$z({preload:e,repo:r,options:i});this.addAll=n,this.add=EV({addAll:n}),this.cat=pH({repo:r,preload:e}),this.get=EG({repo:r,preload:e}),this.ls=AG({repo:r,preload:e})}};f();f();var Kf="0.13.0",xG="7375caa8805298fc671ed4080e1023aafe756151",RG="^0.153.0";function IG({repo:t}){async function e(r={}){let i=await t.version.get();return{version:Kf,commit:xG,repo:`${i}`,"ipfs-core":Kf,"interface-ipfs-core":RG}}return Q(e)}f();var TG=A(ct());Qe();var PG=A(Je());var CG=A(_t());function OG({peerId:t,network:e}){async function r(i={}){let n=e.try();if(!n){if(i.peerId)throw new xu;return{id:t.toB58String(),publicKey:He(t.pubKey.bytes,"base64pad"),addresses:[],agentVersion:`js-ipfs/${Kf}`,protocolVersion:"9000",protocols:[]}}let{libp2p:s}=n,o=i.peerId?PG.default.parse(i.peerId):t,a=await vTe(o,s,i),c=He(a.metadata.get("AgentVersion")||new Uint8Array),u=He(a.metadata.get("ProtocolVersion")||new Uint8Array),l=a.id.toB58String();return{id:l,publicKey:He(a.publicKey.bytes,"base64pad"),addresses:(a.addresses||[]).map(h=>{let d=h.toString();return d.endsWith(`/p2p/${l}`)?d:`${d}/p2p/${l}`}).sort().map(h=>new TG.Multiaddr(h)),agentVersion:c,protocolVersion:u,protocols:(a.protocols||[]).sort()}}return Q(r)}async function vTe(t,e,r){let i=e.peerStore.get(t);i||(i=await ETe(t,e,r));let n=t.pubKey?t.pubKey:e.peerStore.keyBook.get(t);return n||(n=await e._dht.getPublicKey(t,r)),{...i,publicKey:n,metadata:i.metadata||new Map,addresses:i.addresses.map(s=>s.multiaddr)}}async function ETe(t,e,r){for await(let n of e._dht.findPeer(t,r))if(n.name==="FINAL_PEER")break;let i=e.peerStore.get(t);if(!i)throw(0,CG.default)(new Error("Could not find peer"),"ERR_NOT_FOUND");return i}f();var NG=A(ce());f();var Mr=A(VS());var jp={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:t=>((0,Mr.default)(t,"Discovery.MDNS.Enabled",!1),(0,Mr.default)(t,"Discovery.webRTCStar.Enabled",!1),t.Swarm={...t.Swarm||{},DisableNatPortMap:!0},t)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:t=>((0,Mr.default)(t,"Discovery.MDNS.Enabled",!0),(0,Mr.default)(t,"Discovery.webRTCStar.Enabled",!0),(0,Mr.default)(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:t=>{let e=Pc();return(0,Mr.default)(t,"Addresses.API",e.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),(0,Mr.default)(t,"Addresses.Gateway",e.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),(0,Mr.default)(t,"Addresses.Swarm",e.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),(0,Mr.default)(t,"Addresses.Delegates",[]),(0,Mr.default)(t,"Bootstrap",[]),(0,Mr.default)(t,"Discovery.MDNS.Enabled",!1),(0,Mr.default)(t,"Discovery.webRTCStar.Enabled",!1),(0,Mr.default)(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!0}),t}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:t=>{let e=Pc();return(0,Mr.default)(t,"Addresses.API",e.Addresses.API),(0,Mr.default)(t,"Addresses.Gateway",e.Addresses.Gateway),(0,Mr.default)(t,"Addresses.Swarm",e.Addresses.Swarm),(0,Mr.default)(t,"Addresses.Delegates",e.Addresses.Delegates),(0,Mr.default)(t,"Bootstrap",e.Bootstrap),(0,Mr.default)(t,"Discovery.MDNS.Enabled",e.Discovery.MDNS.Enabled),(0,Mr.default)(t,"Discovery.webRTCStar.Enabled",e.Discovery.webRTCStar.Enabled),(0,Mr.default)(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:t=>{let e=t.Swarm||{},r=e.ConnMgr||{};return r.LowWater=20,r.HighWater=40,e.ConnMgr=r,t.Swarm=e,t}},"default-power":{description:'Inverse of "lowpower" profile.',transform:t=>{let e=Pc();return t.Swarm=e.Swarm,t}}};var ATe=(0,NG.default)("ipfs:core:config");function BG({repo:t}){return{getAll:Q(e),get:Q(r),set:Q(i),replace:Q(n),profiles:{apply:Q(s),list:Q(xTe)}};async function e(o={}){return t.config.getAll(o)}async function r(o,a){return o?t.config.get(o,a):Promise.reject(new Error("key argument is required"))}async function i(o,a,c){return t.config.set(o,a,c)}async function n(o,a){return t.config.replace(o,a)}async function s(o,a={dryRun:!1}){let{dryRun:c}=a,u=jp[o];if(!u)throw new Error(`No profile with name '${o}' exists`);try{let l=await t.config.getAll(a),h=JSON.parse(JSON.stringify(l));return h=u.transform(h),c||await t.config.replace(h,a),delete l.Identity.PrivKey,delete h.Identity.PrivKey,{original:l,updated:h}}catch(l){throw ATe(l),new Error(`Could not apply profile '${o}' to config: ${l.message}`)}}}async function xTe(t){return Object.keys(jp).map(e=>({name:e,description:jp[e].description}))}f();f();ye();f();Ad();var ob=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),zS=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(let[r,i]of Object.entries(t)){let n=[...e,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s],c=q.asCID(o);c?yield[a.join("/"),c]:typeof o=="object"&&(yield*zS(o,a))}else{let s=q.asCID(i);s?yield[n.join("/"),s]:yield*zS(i,n)}}},HS=function*(t,e){if(t!=null)for(let[r,i]of Object.entries(t)){let n=[...e,r];if(yield n.join("/"),i!=null&&!(i instanceof Uint8Array)&&typeof i=="object"&&!q.asCID(i))if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s];yield a.join("/"),typeof o=="object"&&!q.asCID(o)&&(yield*HS(o,a))}else yield*HS(i,n)}},RTe=(t,e)=>{let r=t;for(let[i,n]of e.entries()){if(r=r[n],r==null)throw new Error(`Object has no property at ${e.slice(0,i+1).map(o=>`[${JSON.stringify(o)}]`).join("")}`);let s=q.asCID(r);if(s)return{value:s,remaining:e.slice(i+1).join("/")}}return{value:r}},LG=class{constructor({cid:e,bytes:r,value:i}){if(!e||!r||typeof i=="undefined")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:ob(),bytes:ob(),value:ob(),asBlock:ob()})}links(){return zS(this.value,[])}tree(){return HS(this.value,[])}get(e="/"){return RTe(this.value,e.split("/").filter(Boolean))}};var qp=({bytes:t,cid:e,value:r,codec:i})=>{let n=r!==void 0?r:i&&i.decode(t);if(n===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new LG({cid:e,bytes:t,value:n})};Yr();f();ye();f();var $S=A(Cn());function GS(t){let e=yv({version:1,roots:t}),r=$S.default.encode(e.length),i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i}function MG(t){return{async setRoots(e){let r=GS(e);await t.write(r)},async writeBlock(e){let{cid:r,bytes:i}=e;await t.write(new Uint8Array($S.default.encode(r.bytes.length+i.length))),await t.write(r.bytes),i.length&&await t.write(i)},async close(){return t.end()}}}f();function ab(){}function jG(){let t=[],e=null,r=ab,i=!1,n=null,s=ab,o=()=>(e||(e=new Promise(u=>{r=()=>{e=null,r=ab,u()}})),e),a={write(u){t.push(u);let l=o();return s(),l},async end(){i=!0;let u=o();return s(),u}},c={async next(){let u=t.shift();return u?(t.length===0&&r(),{done:!1,value:u}):i?(r(),{done:!0,value:void 0}):(n||(n=new Promise(l=>{s=()=>(n=null,s=ab,l(c.next()))})),n)}};return{writer:a,iterator:c}}f();var sl=A(Cn());ye();Gi();var WS={SHA2_256:18,LENGTH:32,DAG_PB:112};async function cb(t){let e=await t.upTo(8),r=sl.default.decode(e);return t.seek(sl.default.decode.bytes),r}async function YS(t){let e=await cb(t);if(e===0)throw new Error("Invalid CAR header (zero length)");let r=await t.exactly(e);t.seek(e);let i=gv(r);if(i==null||Array.isArray(i)||typeof i!="object")throw new Error("Invalid CAR header format");if(i.version!==1)throw typeof i.version=="string"?new Error(`Invalid CAR version: "${i.version}"`):new Error(`Invalid CAR version: ${i.version}`);if(!Array.isArray(i.roots))throw new Error("Invalid CAR header format");if(Object.keys(i).filter(n=>n!=="roots"&&n!=="version").length)throw new Error("Invalid CAR header format");return i}async function ITe(t){let e=await t.upTo(8);sl.default.decode(e);let r=sl.default.decode.bytes,i=sl.default.decode(e.subarray(sl.default.decode.bytes)),n=sl.default.decode.bytes,s=r+n+i,o=await t.exactly(s);return t.seek(s),o}async function TTe(t){let e=await t.exactly(2);if(e[0]===WS.SHA2_256&&e[1]===WS.LENGTH){let o=await t.exactly(34);t.seek(34);let a=Wr(o);return q.create(0,WS.DAG_PB,a)}let r=await cb(t);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let i=await cb(t),n=await ITe(t),s=Wr(n);return q.create(r,i,s)}async function qG(t){let e=t.pos,r=await cb(t);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=t.pos-e;let i=await TTe(t),n=r-(t.pos-e);return{cid:i,length:r,blockLength:n}}async function PTe(t){let{cid:e,blockLength:r}=await qG(t),i=await t.exactly(r);return t.seek(r),{bytes:i,cid:e}}async function CTe(t){let e=t.pos,{cid:r,length:i,blockLength:n}=await qG(t),s={cid:r,length:i,blockLength:n,offset:e,blockOffset:t.pos};return t.seek(s.blockLength),s}function UG(t){let e=YS(t);return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await PTe(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await CTe(t)}}}function ub(t){let e=0;return{async upTo(r){return t.subarray(e,e+Math.min(r,t.length-e))},async exactly(r){if(r>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+r)},seek(r){e+=r},get pos(){return e}}}function OTe(t){let e=0,r=0,i=0,n=new Uint8Array(0),s=async o=>{r=n.length-i;let a=[n.subarray(i)];for(;r<o;){let u=await t();if(u==null)break;r<0?u.length>r&&a.push(u.subarray(-r)):a.push(u),r+=u.length}n=new Uint8Array(a.reduce((u,l)=>u+l.length,0));let c=0;for(let u of a)n.set(u,c),c+=u.length;i=0};return{async upTo(o){return n.length-i<o&&await s(o),n.subarray(i,i+Math.min(n.length-i,o))},async exactly(o){if(n.length-i<o&&await s(o),n.length-i<o)throw new Error("Unexpected end of data");return n.subarray(i,i+o)},seek(o){e+=o,i+=o},get pos(){return e}}}function FG(t){let e=t[Symbol.asyncIterator]();async function r(){let i=await e.next();return i.done?null:i.value}return OTe(r)}var Up=class{constructor(e,r){this._encoder=r,this._mutex=r.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let r=q.asCID(e.cid);if(!r)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:r,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=kTe(e);let{encoder:r,iterator:i}=KG(),n=new Up(e,r),s=new XS(i);return{writer:n,out:s}}static createAppender(){let{encoder:e,iterator:r}=KG();e.setRoots=()=>Promise.resolve();let i=new Up([],e),n=new XS(r);return{writer:i,out:n}}static async updateRootsInBytes(e,r){let i=ub(e);await YS(i);let n=GS(r);if(i.pos!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${i.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}},XS=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function KG(){let t=jG(),{writer:e,iterator:r}=t;return{encoder:MG(e),iterator:r}}function kTe(t){if(t===void 0)return[];if(!Array.isArray(t)){let r=q.asCID(t);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}let e=[];for(let r of t){let i=q.asCID(r);if(!i)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(i)}return e}var VG=A(ce());Es();Tv();var zG=(0,VG.default)("ipfs:components:dag:import"),DTe=[fi,Rv];function HG({repo:t,preload:e,codecs:r}){async function*i(n,s={}){s.preload!==!1&&e(n);let o=q.asCID(n);if(!o)throw new Error(`Unexpected error converting CID type: ${n}`);zG(`Exporting ${o} as car`);let{writer:a,out:c}=await Up.create([o]),u=null;(async()=>{try{await $G(t,{signal:s.signal,timeout:s.timeout},o,a,r)}catch(l){u=l}finally{a.close()}})();for await(let l of c){if(u)break;yield l}if(u)throw u}return Q(i)}async function $G(t,e,r,i,n,s=new Set){let o=r.toString(ft);if(s.has(o))return;let a=await NTe(t,e,r,n);zG(`Adding block ${r} to car`),await i.put(a),s.add(o);for(let c of a.links)await $G(t,e,c,i,n,s)}async function NTe(t,e,r,i){let n=await t.blocks.get(r,e),s=[],o=await i.getCodec(r.code);if(o)s=[...qp({bytes:n,cid:r,codec:o}).links()].map(c=>c[1]);else if(!DTe.includes(r.code))throw new Error(`Can't decode links in block with codec 0x${r.code.toString(16)} to form complete DAG`);return{cid:r,bytes:n,links:s}}f();var WG=A(Vf()),YG=A(kn());var XG=A(_t());function QG({codecs:t,repo:e,preload:r}){return Q(async function(s,o={}){if(o.preload!==!1&&r(s),o.path){let h=o.localResolve?await(0,WG.default)(Ou(s,o.path,t,e,o)):await(0,YG.default)(Ou(s,o.path,t,e,o));if(!h)throw(0,XG.default)(new Error("Not found"),"ERR_NOT_FOUND");return h}let a=await t.getCodec(s.code),c=await e.blocks.get(s,o);return{value:a.decode(c),remainderPath:""}})}f();f();var QS=class{constructor(e,r,i){this._version=e,this._roots=r,this._iterable=i,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},Fp=class extends QS{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:r,roots:i,iterator:n}=await ZG(e);return new Fp(r,i,n)}static async fromIterable(e){let{version:r,roots:i,iterator:n}=await JG(e);return new Fp(r,i,n)}},lb=class extends QS{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let r=await e.next();return r.done?r:{done:!1,value:r.value.cid}}}}static async fromBytes(e){let{version:r,roots:i,iterator:n}=await ZG(e);return new lb(r,i,n)}static async fromIterable(e){let{version:r,roots:i,iterator:n}=await JG(e);return new lb(r,i,n)}};async function ZG(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return eW(ub(t))}async function JG(t){if(!t||typeof t[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return eW(FG(t))}async function eW(t){let e=UG(t),{version:r,roots:i}=await e.header();return{version:r,roots:i,iterator:e.blocks()}}var tW=A(Ep()),rW=A(Ln()),iW=A(mn()),nW=A(ce()),sW=(0,nW.default)("ipfs:components:dag:import");function oW({repo:t}){async function*e(r,i={}){let n=await t.gcLock.readLock();try{let s={signal:i.signal,timeout:i.timeout},o=(0,tW.default)(r),{value:a,done:c}=await o.peek();if(c)return;a&&o.push(a);let u;a instanceof Uint8Array?u=[o]:u=o;for await(let l of u){let h=await LTe(t,s,l);if(i.pinRoots!==!1)for(let d of h){let p="";try{await t.blocks.has(d)?(sW(`Pinning root ${d}`),await t.pins.pinRecursively(d)):p="blockstore: block not found"}catch(y){p=y.message}yield{root:{cid:d,pinErrorMsg:p}}}}}finally{n()}}return Q(e)}async function LTe(t,e,r){let i=await Fp.fromIterable(r),n=await i.getRoots();return await(0,rW.default)(t.blocks.putMany((0,iW.default)(i,({cid:s,bytes:o})=>(sW(`Import block ${s}`),{key:s,value:o})),{signal:e.signal})),n}f();ye();function aW({repo:t,codecs:e,hashers:r,preload:i}){async function n(s,o={}){let a=o.pin?await t.gcLock.readLock():null;try{let c=await e.getCodec(o.storeCodec||"dag-cbor");if(!c)throw new Error(`Unknown storeCodec ${o.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(o.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");let y=await e.getCodec(o.inputCodec);if(!y)throw new Error(`Unknown inputCodec ${o.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);s=y.decode(s)}let u=o.version!=null?o.version:1,l=await r.getHasher(o.hashAlg||"sha2-256");if(!l)throw new Error(`Unknown hash algorithm ${o.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let h=c.encode(s),d=await l.digest(h),p=q.create(u,c.code,d);return await t.blocks.put(p,h,{signal:o.signal}),o.pin&&await t.pins.pinRecursively(p),o.preload!==!1&&i(p),p}finally{a&&a()}}return Q(n)}f();function cW({repo:t,codecs:e,preload:r}){async function i(n,s={}){let{cid:o}=bc(n);return s.preload!==!1&&r(o),Cu(t,e,n,s)}return Q(i)}var ZS=class{constructor({repo:e,codecs:r,hashers:i,preload:n}){this.export=HG({repo:e,preload:n,codecs:r}),this.get=QG({codecs:r,repo:e,preload:n}),this.import=oW({repo:e}),this.resolve=cW({repo:e,codecs:r,preload:n}),this.put=aW({repo:e,codecs:r,hashers:i,preload:n})}};f();var pW=A(hb()),eA=A(ce()),yW=A(fW()),gW=A(Ii());f();var hW=A(Vd()),JS=A(ce()),db=A(So()),UTe=Object.assign((0,JS.default)("ipfs:preload"),{error:(0,JS.default)("ipfs:preload:error")}),FTe=db.default.default?db.default.default:db.default,KTe=new FTe({concurrency:4});function dW(t,e={}){return UTe(t),KTe.add(async()=>{let i=(await hW.default.post(t,{signal:e.signal})).body.getReader();try{for(;;){let{done:n}=await i.read();if(n)return}}finally{i.releaseLock()}})}var mW=A(Fd()),Fy=Object.assign((0,eA.default)("ipfs:preload"),{error:(0,eA.default)("ipfs:preload:error")});function bW(t={}){if(t.enabled=Boolean(t.enabled),t.addresses=t.addresses||[],t.cache=t.cache||1e3,!t.enabled||!t.addresses.length)return Fy("preload disabled"),Object.assign(()=>{},{start:()=>{},stop:()=>{}});let e=!0,r=[],i=t.addresses.map(pW.default),n=(0,mW.default)(t.cache),s=async o=>{try{if(e)throw new Error(`preload ${o} but preloader is not started`);let a=o.toString();if(n.has(a))return;n.set(a,!0);let c=(0,yW.default)(i),u=!1,l=Date.now();for(let h of c){if(e)throw new Error(`preload aborted for ${a}`);let d;try{d=new gW.AbortController,r=r.concat(d),await dW(`${h}/api/v0/refs?r=true&arg=${encodeURIComponent(a)}`,{signal:d.signal}),u=!0}catch(p){p.type!=="aborted"&&Fy.error(p)}finally{r=r.filter(p=>p!==d)}if(u)break}Fy(`${u?"":"un"}successfully preloaded ${a} in ${Date.now()-l}ms`)}catch(a){Fy.error(a)}};return s.start=()=>{e=!1},s.stop=()=>{e=!0,Fy(`aborting ${r.length} pending preload request(s)`),r.forEach(o=>o.abort()),r=[]},s}f();var tA=A(ce()),pb=Object.assign((0,tA.default)("ipfs:mfs-preload"),{error:(0,tA.default)("ipfs:mfs-preload:error")});function wW({preload:t,files:e,options:r={}}){if(r.interval=r.interval||30*1e3,!r.enabled){pb("MFS preload disabled");let o=async()=>{};return{start:o,stop:o}}let i="",n,s=async()=>{try{let o=await e.stat("/"),a=o.cid.toString();i!==a&&(pb(`preloading updated MFS root ${i} -> ${o.cid}`),await t(o.cid),i=a)}catch(o){pb.error("failed to preload MFS root",o)}finally{n=setTimeout(s,r.interval)}};return{async start(){let o=await e.stat("/");i=o.cid.toString(),pb(`monitoring MFS root ${o.cid}`),n=setTimeout(s,r.interval)},stop(){clearTimeout(n)}}}f();f();var $W=A(aA()),gb;function Vy(t=!1){if(gb)return gb;let e=(0,$W.default)({singleProcess:t});return gb={readLock:r=>async(...i)=>{let n=await e.readLock();try{return await r.apply(null,i)}finally{n()}},writeLock:r=>async(...i)=>{let n=await e.writeLock();try{return await r.apply(null,i)}finally{n()}}},gb}var gA=A(jd());f();f();f();ye();ti();var GW=A(ce()),cA=A(_t());var WW=(0,GW.default)("ipfs:mfs:utils:with-mfs-root");async function Vp(t,e){if(e&&e.signal&&e.signal.aborted)throw(0,cA.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await t.repo.datastore.open();let r;try{let i=await t.repo.datastore.get(v2);r=q.decode(i)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i;WW("Creating new MFS root");let n=st({Data:new at({type:"directory"}).marshal(),Links:[]}),s=await Sr.digest(n);if(r=q.createV0(s),await t.repo.blocks.put(r,n),e&&e.signal&&e.signal.aborted)throw(0,cA.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await t.repo.datastore.put(v2,r.bytes)}return WW(`Loaded MFS root /ipfs/${r}`),r}f();function zp(t=""){return(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}var uA=A(_t());ye();var lA="ipfs",jr=async(t,e,r)=>{let i=await Vp(t,r),n={entryType:"file"},s="";if(q.asCID(e)?s=`/ipfs/${e}`:s=e.toString(),s=s.trim(),s=s.replace(/(\/\/+)/g,"/"),s.endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),!s)throw(0,uA.default)(new Error("paths must not be empty"),"ERR_NO_PATH");if(s.substring(0,1)!=="/")throw(0,uA.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");s.substring(s.length-1)==="/"&&(s=s.substring(0,s.length-1));let o=zp(s);if(o[0]===lA){let c;o.length===2?c=`/${o.join("/")}`:c=`/${o.slice(0,o.length-1).join("/")}`,n={type:"ipfs",depth:o.length-2,entryType:"file",mfsPath:`/${o.join("/")}`,mfsDirectory:c,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}else{let c=`/${lA}/${i}${o.length?"/"+o.join("/"):""}`,u=`/${lA}/${i}/${o.slice(0,o.length-1).join("/")}`;n={type:"mfs",depth:o.length,entryType:"file",mfsDirectory:u,mfsPath:c,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}let a=n.type==="mfs"?n.mfsPath:n.path;try{let c=await Fi(a,t.repo.blocks,r);n.cid=c.cid,n.mfsPath=`/ipfs/${c.path}`,n.entryType=c.type,n.content=c.content,(n.entryType==="file"||n.entryType==="directory")&&(c.type==="file"||c.type==="directory")&&(n.unixfs=c.unixfs)}catch(c){if(c.code!=="ERR_NOT_FOUND")throw c}return n.exists=Boolean(n.cid),n};var YW=A(ce()),XW=A(_t());var ePe=Rt.bind({ignoreUndefined:!0}),tPe=(0,YW.default)("ipfs:mfs:stat"),rPe={withLocal:!1};function cl(t){async function e(r,i={}){i=ePe(rPe,i),tPe(`Fetching stats for ${r}`);let{type:n,cid:s,mfsPath:o}=await jr(t,r,i),a=n==="ipfs"&&s?s:o,c;try{c=await Fi(a,t.repo.blocks)}catch(u){throw u.code==="ERR_NOT_FOUND"?(0,XW.default)(new Error(`${r} does not exist`),"ERR_NOT_FOUND"):u}if(!QW[c.type])throw new Error(`Cannot stat codec ${c.cid.code}`);return QW[c.type](c)}return Q(e)}var QW={raw:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:t=>{let e={cid:t.cid,type:"file",size:t.unixfs.fileSize(),cumulativeSize:st(t.node).length+(t.node.Links||[]).reduce((r,i)=>r+(i.Tsize||0),0),blocks:t.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},directory:t=>{let e={cid:t.cid,type:"directory",size:0,cumulativeSize:st(t.node).length+(t.node.Links||[]).reduce((r,i)=>r+(i.Tsize||0),0),blocks:t.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},object:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})};f();var _Y=A(ce()),Yp=A(_t());f();var ZW=A(ce()),iPe=(0,ZW.default)("ipfs:mfs:utils:to-trail");async function ka(t,e){iPe(`Creating trail for path ${e}`);let r=[];for await(let i of $9(e,t.repo.blocks))r.push({name:i.name,cid:i.cid,size:i.size,type:i.type});return r}f();ye();var sY=A(ce());f();f();ye();ti();var mb=async(t,e,r)=>{r.codec||(r.codec=un),r.hasher||(r.hasher=Sr),r.cidVersion===void 0&&(r.cidVersion=1),r.codec===un&&r.hasher!==Sr&&(r.cidVersion=1);let i=await r.hasher.digest(t),n=q.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await e.put(n,t,{signal:r.signal}),n};var vb=A(vy());f();var bb=Of.code,wb=8;async function _b(t){return(await Of.encode(t)).slice(0,8).reverse()}var JW=class{constructor(e,r){this.options=r||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,r){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},zy=class extends JW{constructor(e,r){super(e,r);this._bucket=(0,vb.createHAMT)({hashFn:_b,bits:wb})}async put(e,r){await this._bucket.put(e,r)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}async*flush(e){yield*eY(this._bucket,e,this,this.options)}};async function*eY(t,e,r,i){let n=t._children,s=[],o=0;for(let p=0;p<n.length;p++){let y=n.get(p);if(!y)continue;let m=p.toString(16).toUpperCase().padStart(2,"0");if(y instanceof vb.Bucket){let w;for await(let b of await eY(y,e,null,i))w=b;if(!w)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:m,Tsize:w.size,Hash:w.cid}),o+=w.size}else if(typeof y.value.flush=="function"){let w=y.value,b;for await(let x of w.flush(e))b=x,yield b;let v=m+y.key;s.push({Name:v,Tsize:b.size,Hash:b.cid}),o+=b.size}else{let w=y.value;if(!w.cid)continue;let b=m+y.key,v=w.size;s.push({Name:b,Tsize:v,Hash:w.cid}),o+=v}}let a=Uint8Array.from(n.bitField().reverse()),u={Data:new at({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:bb,mtime:r&&r.mtime,mode:r&&r.mode}).marshal(),Links:s},l=st(Ai(u)),h=await mb(l,e,i),d=l.length+o;yield{cid:h,node:u,size:d}}f();var Hp=A(vy());var tY=A(ce());var rY=A(kn());ye();var Hy=(0,tY.default)("ipfs:mfs:core:utils:hamt-utils"),$p=async(t,e,r,i)=>{if(!i.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");let n=Uint8Array.from(r._children.bitField().reverse()),s=at.unmarshal(i.parent.Data),o=new at({type:"hamt-sharded-directory",data:n,fanout:r.tableSize(),hashType:bb,mode:s.mode,mtime:s.mtime}),a=await t.hashers.getHasher(i.hashAlg),c={Data:o.marshal(),Links:e.sort((d,p)=>(d.Name||"").localeCompare(p.Name||""))},u=st(c),l=await a.digest(u),h=q.create(i.cidVersion,gt,l);return i.flush&&await t.repo.blocks.put(h,u),{node:c,cid:h,size:e.reduce((d,p)=>d+(p.Tsize||0),u.length)}},fA=async(t,e,r,i,n)=>{let s=new Hp.Bucket({hash:r._options.hash,bits:r._options.bits},i,n);return i._putObjectAt(n,s),await $y(t,e,s,r),s},hA=async t=>{let e=(0,Hp.createHAMT)({hashFn:_b,bits:wb});return await Promise.all(t.map(async r=>{let i=r.Name||"";if(i.length===2){let n=parseInt(i,16),s=new Hp.Bucket({hash:e._options.hash,bits:e._options.bits},e,n);return e._putObjectAt(n,s),Promise.resolve()}return e.put(i.substring(2),{size:r.Tsize,cid:r.Hash})})),e},$y=async(t,e,r,i)=>{await Promise.all(e.map(async n=>{let s=n.Name||"";if(s.length===2){Hy("Populating sub bucket",s);let o=parseInt(s,16),a=await t.repo.blocks.get(n.Hash),c=Ct(a),u=new Hp.Bucket({hash:i._options.hash,bits:i._options.bits},r,o);return r._putObjectAt(o,u),await $y(t,c.Links,u,i),Promise.resolve()}return i.put(s.substring(2),{size:n.Tsize,cid:n.Hash})}))},Hf=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),iY=async(t,e,r)=>{let i=await hA(r.Links),n=await i._findNewBucketAndPos(e),s=[{bucket:n.bucket,prefix:Hf(n.pos)}],o=n.bucket;for(;o!==i;)s.push({bucket:o,prefix:Hf(o._posAtParent)}),o=o._parent;s.reverse(),s[0].node=r;for(let a=0;a<s.length;a++){let c=s[a];if(!c.node)throw new Error("Could not generate HAMT path");let u=c.node.Links.filter(p=>(p.Name||"").substring(0,2)===c.prefix).pop();if(!u){Hy(`Link ${c.prefix}${e} will be added`);continue}if(u.Name===`${c.prefix}${e}`){Hy(`Link ${c.prefix}${e} will be replaced`);continue}Hy(`Found subshard ${c.prefix}`);let l=await t.repo.blocks.get(u.Hash),h=Ct(l);if(!s[a+1]){Hy(`Loaded new subshard ${c.prefix}`),await fA(t,h.Links,i,c.bucket,parseInt(c.prefix,16));let p=await i._findNewBucketAndPos(e);s.push({bucket:p.bucket,prefix:Hf(p.pos),node:h});continue}let d=s[a+1];await $y(t,h.Links,d.bucket,i),d.node=h}return await i.put(e,!0),s.reverse(),{rootBucket:i,path:s}},nY=async(t,e,r={})=>{let i=new zy({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let s=0;s<e.length;s++)await i._bucket.put(e[s].name,{size:e[s].size,cid:e[s].cid});let n=await(0,rY.default)(i.flush(t.repo.blocks));if(!n)throw new Error("Flushing shard yielded no result");return n};var Da=A(_t()),oY=A(kn()),Na=(0,sY.default)("ipfs:mfs:core:utils:add-link");async function Ks(t,e){let r=e.parent;if(e.parentCid){let n=q.asCID(e.parentCid);if(n===null)throw(0,Da.default)(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(n.code!==gt)throw(0,Da.default)(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");Na(`Loading parent node ${n}`);let s=await t.repo.blocks.get(n);r=Ct(s)}if(!r)throw(0,Da.default)(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!e.cid)throw(0,Da.default)(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!e.name)throw(0,Da.default)(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!e.size&&e.size!==0)throw(0,Da.default)(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!r.Data)throw(0,Da.default)(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");let i=at.unmarshal(r.Data);return i.type==="hamt-sharded-directory"?(Na("Adding link to sharded directory"),oPe(t,{...e,parent:r})):r.Links.length>=e.shardSplitThreshold?(Na("Converting directory to sharded directory"),nPe(t,{...e,parent:r,mtime:i.mtime,mode:i.mode})):(Na(`Adding ${e.name} (${e.cid}) to regular directory`),sPe(t,{...e,parent:r}))}var nPe=async(t,e)=>{let r=await nY(t,e.parent.Links.map(i=>({name:i.Name||"",size:i.Tsize||0,cid:i.Hash})).concat({name:e.name,size:e.size,cid:e.cid}),e);return Na(`Converted directory to sharded directory ${r.cid}`),r},sPe=async(t,e)=>{let r=e.parent.Links.filter(u=>u.Name!==e.name);if(r.push({Name:e.name,Tsize:e.size,Hash:e.cid}),!e.parent.Data)throw(0,Da.default)(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");let i=at.unmarshal(e.parent.Data),n;if(i.mtime){let u=Date.now(),l=Math.floor(u/1e3);i.mtime={secs:l,nsecs:(u-l*1e3)*1e3},n=i.marshal()}else n=e.parent.Data;e.parent=Ai({Data:n,Links:r});let s=await t.hashers.getHasher(e.hashAlg),o=st(e.parent),a=await s.digest(o),c=q.create(e.cidVersion,gt,a);return e.flush&&await t.repo.blocks.put(c,o),{node:e.parent,cid:c,size:o.length}},oPe=async(t,e)=>{let{shard:r,path:i}=await aPe(t,e),n=await(0,oY.default)(r.flush(t.repo.blocks));if(!n)throw new Error("No result from flushing shard");let s=await t.repo.blocks.get(n.cid),o=Ct(s),a=e.parent.Links.filter(u=>(u.Name||"").substring(0,2)!==i[0].prefix),c=o.Links.find(u=>(u.Name||"").substring(0,2)===i[0].prefix);if(!c)throw new Error(`No link found with prefix ${i[0].prefix}`);return a.push(c),$p(t,a,i[0].bucket,e)},aPe=async(t,e)=>{let r={name:e.name,cid:e.cid,size:e.size};if(!e.parent.Data)throw(0,Da.default)(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");let i=await hA(e.parent.Links),n=at.unmarshal(e.parent.Data),s=new zy({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:n.mode},e);s._bucket=i,n.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)});let o=await i._findNewBucketAndPos(r.name),a=cPe(o);a[0].node=e.parent;let c=0;for(;c<a.length;){let u=a[c];c++;let l=u.node;if(!l)throw new Error("Segment had no node");let h=l.Links.find(m=>(m.Name||"").substring(0,2)===u.prefix);if(!h){Na(`Link ${u.prefix}${r.name} will be added`),c=a.length;break}if(h.Name===`${u.prefix}${r.name}`){Na(`Link ${u.prefix}${r.name} will be replaced`),c=a.length;break}if((h.Name||"").length>2){Na(`Link ${h.Name} ${h.Hash} will be replaced with a subshard`),c=a.length;break}Na(`Found subshard ${u.prefix}`);let d=await t.repo.blocks.get(h.Hash),p=Ct(d);if(!a[c]){Na(`Loaded new subshard ${u.prefix}`),await fA(t,p.Links,i,u.bucket,parseInt(u.prefix,16));let m=await i._findNewBucketAndPos(r.name);a.push({bucket:m.bucket,prefix:Hf(m.pos),node:p});break}let y=a[c];await $y(t,p.Links,y.bucket,i),y.node=p}return await s._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:s,path:a}},cPe=t=>{let e=[{bucket:t.bucket,prefix:Hf(t.pos)}],r=t.bucket._parent,i=t.bucket._posAtParent;for(;r;)e.push({bucket:r,prefix:Hf(i)}),i=r._posAtParent,r=r._parent;return e.reverse(),e};f();var aY=A(ce());var cY=(0,aY.default)("ipfs:mfs:utils:update-tree"),uPe={shardSplitThreshold:1e3};async function ns(t,e,r){r=Object.assign({},uPe,r),cY("Trail",e),e=e.slice().reverse();let i=0,n;for await(let o of t.repo.blocks.getMany(e.map(a=>a.cid))){let a=Ct(o),c=e[i].cid,u=e[i].name;if(i++,!n){n={cid:c,name:u,size:o.length};continue}let l=await Ks(t,{parent:a,name:n.name,cid:n.cid,size:n.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:r.cidVersion});n={cid:l.cid,name:u,size:l.size}}let{cid:s}=n;return cY(`Final CID ${s}`),s}f();var uY=A(ce());var lY=A(_t()),lPe=(0,uY.default)("ipfs:mfs:utils:update-mfs-root");async function ss(t,e,r){if(r&&r.signal&&r.signal.aborted)throw(0,lY.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return lPe(`New MFS root will be ${e}`),await t.repo.datastore.put(v2,e.bytes),e}ye();var vY=A(vr());var EY=A(kn());f();f();var $f=A(_t()),hY=A(ce());f();ye();async function fY(t,e,r){let i=new at({type:e,mode:r.mode,mtime:r.mtime}),n=await t.hashers.getHasher(r.hashAlg),s={Data:i.marshal(),Links:[]},o=st(s),a=await n.digest(o),c=q.create(r.cidVersion,gt,a);return r.flush&&await t.repo.blocks.put(c,o),{cid:c,node:s}}var fPe=Rt.bind({ignoreUndefined:!0}),dY=(0,hY.default)("ipfs:mfs:mkdir"),hPe={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function Gf(t){async function e(r,i={}){let n=fPe(hPe,i);if(!r)throw new Error("no path given to Mkdir");if(r=r.trim(),r==="/"){if(n.parents)return;throw(0,$f.default)(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if(r.substring(0,1)!=="/")throw(0,$f.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");dY(`Creating ${r}`);let s=zp(r);if(s[0]==="ipfs")throw(0,$f.default)(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let o=await Vp(t,n),a,c=[],u=await fY(t,"directory",n);for(let h=0;h<=s.length;h++){let d=s.slice(0,h),p=`/ipfs/${o}/${d.join("/")}`;try{if(a=await Fi(p,t.repo.blocks),a.type!=="file"&&a.type!=="directory")throw(0,$f.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(h===s.length){if(n.parents)return;throw(0,$f.default)(new Error("file already exists"),"ERR_ALREADY_EXISTS")}c.push({name:a.name,cid:a.cid})}catch(y){if(y.code==="ERR_NOT_FOUND"){if(h<s.length&&!n.parents)throw(0,$f.default)(new Error(`Intermediate directory path ${p} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await dPe(t,d[d.length-1],u,c[c.length-1],c,n)}else throw y}}let l=await ns(t,c,n);await ss(t,l,n)}return Q(e)}var dPe=async(t,e,r,i,n,s)=>{dY(`Adding empty dir called ${e} to ${i.cid}`);let o=await Ks(t,{parent:i.node,parentCid:i.cid,size:0,cid:r.cid,name:e,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});n[n.length-1].cid=o.cid,n.push({name:e,cid:r.cid})};var pY=A(ce()),ul=A(_t());var pPe=Rt.bind({ignoreUndefined:!0}),Eb=(0,pY.default)("ipfs:mfs:cp"),yPe={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function Gp(t){async function e(r,i,n={}){let s=pPe(yPe,n);Array.isArray(r)||(r=[r]);let o=await Promise.all(r.map(d=>jr(t,d,s))),a=await jr(t,i,s);if(!o.length||!a)throw(0,ul.default)(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");let c=o.find(d=>!d.exists);if(c)throw(0,ul.default)(new Error(`${c.path} does not exist`),"ERR_INVALID_PARAMS");let u=yY(a);if(a.exists){if(Eb("Destination exists"),o.length===1&&!u)throw(0,ul.default)(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(Eb("Destination does not exist"),o.length>1){if(!s.parents)throw(0,ul.default)(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Gf(t)(a.path,s),a=await jr(t,a.path,s)}else if(a.parts.length>1){let d=`/${a.parts.slice(0,-1).join("/")}`;try{await cl(t)(d,s)}catch(p){if(p.code!=="ERR_NOT_FOUND")throw p;if(!s.parents)throw(0,ul.default)(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Gf(t)(d,s),a=await jr(t,a.path,s)}}let l=yY(a)?a.mfsPath:a.mfsDirectory,h=await ka(t,l);if(o.length===1){let d=o.pop();if(!d)throw(0,ul.default)(new Error("could not find source"),"ERR_INVALID_PARAMS");let p=u?d.name:a.name;return Eb(`Only one source, copying to destination ${u?"directory":"file"} ${p}`),gPe(t,d,p,h,s)}return Eb("Multiple sources, wrapping in a directory"),mPe(t,o,a,h,s)}return Q(e)}var yY=t=>t.unixfs&&t.unixfs.type&&t.unixfs.type.includes("directory"),gPe=async(t,e,r,i,n)=>{let s=i.pop();if(!s)throw(0,ul.default)(new Error("destination had no parent"),"ERR_INVALID_PARAMS");s=await gY(t,e,r,s,n),i.push(s);let o=await ns(t,i,n);await ss(t,o,n)},mPe=async(t,e,r,i,n)=>{for(let o=0;o<e.length;o++){let a=e[o];r=await gY(t,a,a.name,r,n)}i[i.length-1]=r;let s=await ns(t,i,n);await ss(t,s,n)},gY=async(t,e,r,i,n)=>{let s=await t.repo.blocks.get(e.cid),{node:o,cid:a,size:c}=await Ks(t,{parentCid:i.cid,size:s.length,cid:e.cid,name:r,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});return i.node=o,i.cid=a,i.size=c,i};f();var Gy=A(_t());f();ye();var mY=A(ce());var ll=A(_t()),fl=(0,mY.default)("ipfs:mfs:core:utils:remove-link");async function bY(t,e){let r=e.parent;if(e.parentCid){let n=q.asCID(e.parentCid);if(n===null)throw(0,ll.default)(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");fl(`Loading parent node ${n}`);let s=await t.repo.blocks.get(n);r=Ct(s)}if(!r)throw(0,ll.default)(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!e.name)throw(0,ll.default)(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!r.Data)throw(0,ll.default)(new Error("Parent node had no data"),"ERR_INVALID_NODE");return at.unmarshal(r.Data).type==="hamt-sharded-directory"?(fl(`Removing ${e.name} from sharded directory`),wPe(t,{...e,parent:r})):(fl(`Removing link ${e.name} regular directory`),bPe(t,{...e,parent:r}))}var bPe=async(t,e)=>{e.parent.Links=e.parent.Links.filter(o=>o.Name!==e.name);let r=await st(e.parent),n=await(await t.hashers.getHasher(e.hashAlg)).digest(r),s=q.create(e.cidVersion,gt,n);return await t.repo.blocks.put(s,r),fl(`Updated regular directory ${s}`),{node:e.parent,cid:s}},wPe=async(t,e)=>{let{rootBucket:r,path:i}=await iY(t,e.name,e.parent);await r.del(e.name);let{node:n}=await wY(t,i,e.name,e);return $p(t,n.Links,r,e)},wY=async(t,e,r,i)=>{let n=e.pop();if(!n)throw(0,ll.default)(new Error("Could not find parent"),"EINVALIDPARENT");let{bucket:s,prefix:o,node:a}=n;if(!a)throw(0,ll.default)(new Error("Could not find parent"),"EINVALIDPARENT");let c=a.Links.find(p=>(p.Name||"").substring(0,2)===o);if(!c)throw(0,ll.default)(new Error(`No link found with prefix ${o} for file ${r}`),"ERR_NOT_FOUND");if(c.Name===`${o}${r}`){fl(`Removing existing link ${c.Name}`);let p=a.Links.filter(y=>y.Name!==c.Name);return await s.del(r),$p(t,p,s,i)}fl(`Descending into sub-shard ${c.Name} for ${o}${r}`);let u=await wY(t,e,r,i),l=u.cid,h=u.size,d=o;if(u.node.Links.length===1){fl(`Removing subshard for ${o}`);let p=u.node.Links[0];d=`${o}${(p.Name||"").substring(2)}`,l=p.Hash,h=p.Tsize||0}return fl(`Updating shard ${o} with name ${d}`),_Pe(t,s,a,o,d,h,l,i)},_Pe=(t,e,r,i,n,s,o,a)=>{let c=r.Links.filter(u=>u.Name!==i);return c.push({Name:n,Tsize:s,Hash:o}),$p(t,c,e,a)};var vPe=Rt.bind({ignoreUndefined:!0}),EPe={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function Wp(t){async function e(r,i={}){let n=vPe(EPe,i);Array.isArray(r)||(r=[r]);let s=await Promise.all(r.map(o=>jr(t,o,n)));if(!s.length)throw(0,Gy.default)(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");s.forEach(o=>{if(o.path==="/")throw(0,Gy.default)(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")});for(let o of s)await SPe(t,o.path,n)}return Q(e)}var SPe=async(t,e,r)=>{let i=await jr(t,e,r),n=await ka(t,i.mfsPath),s=n[n.length-1];n.pop();let o=n[n.length-1];if(!o)throw(0,Gy.default)(new Error(`${e} does not exist`),"ERR_NOT_FOUND");if(s.type==="directory"&&!r.recursive)throw(0,Gy.default)(new Error(`${e} is a directory, use -r to remove directories`),"ERR_WAS_DIR");let{cid:a}=await bY(t,{parentCid:o.cid,name:s.name,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold});o.cid=a;let c=await ns(t,n,r);await ss(t,c,r)};var APe=Rt.bind({ignoreUndefined:!0}),xPe=(0,_Y.default)("ipfs:mfs:touch"),SY={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function RPe(t,e,r){let i=0;return(t.includes("x")||t.includes("X")&&(r||e&1||e&8||e&64))&&(i+=1),t.includes("w")&&(i+=2),t.includes("r")&&(i+=4),i}function IPe(t,e){let r=0;return t.includes("u")&&(r+=e<<6),t.includes("g")&&(r+=e<<3),t.includes("o")&&(r+=e),r}function TPe(t,e,r){return e.includes("t")&&(r+=parseInt("1000",8)),e.includes("s")&&(t.includes("u")&&(r+=parseInt("4000",8)),t.includes("g")&&(r+=parseInt("2000",8))),r}function PPe(t,e,r){e||(e=0);let i=t.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!i)throw new Error(`Invalid file mode: ${t}`);let[,n,s,o]=i;(n==="a"||!n)&&(n="ugo");let a=RPe(o,e,r);return a=IPe(n,a),a=TPe(n,o,a),s==="="?(n.includes("u")&&(e=e&parseInt("7077",8),e=e|a),n.includes("g")&&(e=e&parseInt("7707",8),e=e|a),n.includes("o")&&(e=e&parseInt("7770",8),e=e|a),e):s==="+"?a|e:s==="-"?a^e:e}function AY(t,e){if(t instanceof String||typeof t=="string"){let r=`${t}`;r.match(/^\d+$/g)?t=parseInt(r,8):t=0+r.split(",").reduce((i,n)=>PPe(n,i,e.isDirectory()),e.mode||0)}return t}function xY(t){async function e(r,i,n={}){let s=APe(SY,n);xPe(`Fetching stats for ${r}`);let{cid:o,mfsDirectory:a,name:c}=await jr(t,r,s);if(o.code!==gt)throw(0,Yp.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(s.recursive){let F=await(0,vY.pipe)(async function*(){for await(let U of q6(o,t.repo.blocks)){if(U.type!=="file"&&U.type!=="directory")throw(0,Yp.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");U.unixfs.mode=AY(i,U.unixfs);let ie=Ai({Data:U.unixfs.marshal(),Links:U.node.Links});yield{path:U.path,content:ie}}},U=>Sp(U,t.repo.blocks,{...s,pin:!1,dagBuilder:async function*(ie,te,ae){for await(let ue of ie)yield async function(){let De=ue.content,ve=st(De),Ne=await mb(ve,te,ae);if(!De.Data)throw(0,Yp.default)(new Error(`${Ne} had no data`),"ERR_INVALID_NODE");let ee=at.unmarshal(De.Data);return{cid:Ne,size:ve.length,path:ue.path,unixfs:ee}}}}),U=>(0,EY.default)(U));if(!F)throw(0,Yp.default)(new Error(`Could not chmod ${r}`),"ERR_COULD_NOT_CHMOD");await Wp(t)(r,s),await Gp(t)(`/ipfs/${F.cid}`,r,s);return}let u=await t.repo.blocks.get(o),l=Ct(u);if(!l.Data)throw(0,Yp.default)(new Error(`${o} had no data`),"ERR_INVALID_NODE");let h=at.unmarshal(l.Data);h.mode=AY(i,h);let d=st({Data:h.marshal(),Links:l.Links}),p=s.hashAlg||SY.hashAlg,m=await(await t.hashers.getHasher(p)).digest(d),w=q.create(s.cidVersion,gt,m);s.flush&&await t.repo.blocks.put(w,d);let b=await ka(t,a),v=b[b.length-1],x=q.decode(v.cid.bytes),B=await t.repo.blocks.get(x),O=Ct(B),R=await Ks(t,{parent:O,name:c,cid:w,size:d.length,flush:s.flush,hashAlg:p,cidVersion:o.version,shardSplitThreshold:1/0});v.cid=R.cid;let N=await ns(t,b,s);await ss(t,N,s)}return Q(e)}f();var CPe=Rt.bind({ignoreUndefined:!0}),OPe={};function RY(t){async function e(r,i={}){i=CPe(OPe,i);let{cid:n}=await cl(t)(r,i);return n}return Q(e)}f();var kPe=Rt.bind({ignoreUndefined:!0}),DPe={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};function IY(t){async function e(r,i,n={}){let s=kPe(DPe,n);await Gp(t)(r,i,s),await Wp(t)(r,{...s,recursive:!0})}return Q(e)}f();var TY=A(ce()),dA=A(_t());ye();var NPe=Rt.bind({ignoreUndefined:!0}),BPe=(0,TY.default)("ipfs:mfs:touch"),PY={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};function CY(t){async function e(r,i={}){let n=NPe(PY,i);n.mtime=n.mtime||new Date,BPe(`Touching ${r} mtime: ${n.mtime}`);let{cid:s,mfsDirectory:o,name:a,exists:c}=await jr(t,r,n),u=i.hashAlg||PY.hashAlg,l=await t.hashers.getHasher(u),h,d,p=n.cidVersion;if(c){if(s.code!==gt)throw(0,dA.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");p=s.version;let O=await t.repo.blocks.get(s),R=Ct(O);if(!R.Data)throw(0,dA.default)(new Error(`${r} had no data`),"ERR_INVALID_NODE");let N=at.unmarshal(R.Data);N.mtime=n.mtime,h=st({Data:N.marshal(),Links:R.Links});let F=await l.digest(h);d=q.create(n.cidVersion,gt,F),n.flush&&await t.repo.blocks.put(d,h)}else{let O=new at({type:"file",mtime:n.mtime});h=st({Data:O.marshal(),Links:[]});let R=await l.digest(h);d=q.create(n.cidVersion,gt,R),n.flush&&await t.repo.blocks.put(d,h)}let y=await ka(t,o),m=y[y.length-1],w=m.cid,b=await t.repo.blocks.get(w),v=Ct(b),x=await Ks(t,{parent:v,name:a,cid:d,size:h.length,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:p});m.cid=x.cid;let B=await ns(t,y,n);await ss(t,B,n)}return Q(e)}f();var pA=A(_t());var LPe=Rt.bind({ignoreUndefined:!0}),MPe={offset:0,length:1/0};function OY(t){function e(r,i={}){return i=LPe(MPe,i),{[Symbol.asyncIterator]:async function*(){let s=await jr(t,r,i),o=await Fi(s.mfsPath,t.repo.blocks);if(o.type!=="file")throw(0,pA.default)(new Error(`${r} was not a file`),"ERR_NOT_FILE");if(!o.content)throw(0,pA.default)(new Error(`Could not load content stream from ${r}`),"ERR_NO_CONTENT");for await(let a of o.content({offset:i.offset,length:i.length}))yield a}}}return Q(e)}f();var NY=A(ce());f();var yA=A(_t()),kY=A(ce());ht();var Wy=(0,kY.default)("ipfs:mfs:utils:to-async-iterator");function DY(t){if(!t)throw(0,yA.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if((typeof t=="string"||t instanceof String)&&(Wy("Content was a string"),t=Ye(t.toString())),t.length)return Wy("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield t}};if(t[Symbol.asyncIterator])return Wy("Content was an async iterator"),t;if(t[Symbol.iterator])return Wy("Content was an iterator"),t;if(globalThis.Blob&&t instanceof globalThis.Blob){Wy("Content was an HTML5 Blob");let e=0,r={next:()=>e>t.size?{done:!0}:new Promise((i,n)=>{let s=t.slice(e,E2);e+=E2;let o=new globalThis.FileReader,a=c=>{if(o.removeEventListener("loadend",a,!1),c.error)return n(c.error);i({done:!1,value:new Uint8Array(o.result)})};o.addEventListener("loadend",a),o.readAsArrayBuffer(s)})};return{[Symbol.asyncIterator]:()=>r}}throw(0,yA.default)(new Error(`Don't know how to convert ${t} into an async iterator`),"ERR_INVALID_PARAMS")}var Ba=A(_t());var BY=A(kn());var jPe=Rt.bind({ignoreUndefined:!0}),La=(0,NY.default)("ipfs:mfs:write"),qPe={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(t,e)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};function LY(t){async function e(r,i,n={}){let s=jPe(qPe,n),o,a,c;if(La("Reading source, destination and parent"),await Vy().readLock(async()=>{o=await DY(i),a=await jr(t,r,s),c=await jr(t,a.mfsDirectory,s)})(),La("Read source, destination and parent"),!s.parents&&!c.exists)throw(0,Ba.default)(new Error("directory does not exist"),"ERR_NO_EXIST");if(o==null)throw(0,Ba.default)(new Error("could not create source"),"ERR_NO_SOURCE");if(a==null)throw(0,Ba.default)(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!s.create&&!a.exists)throw(0,Ba.default)(new Error("file does not exist"),"ERR_NO_EXIST");if(a.entryType!=="file")throw(0,Ba.default)(new Error("not a file"),"ERR_NOT_A_FILE");return UPe(t,r,o,a,s)}return Q(e)}var UPe=async(t,e,r,i,n)=>{let s=await FPe(t,r,i,n);await Vy().writeLock(async()=>{let o=zp(e),a=o.pop();if(a==null)throw(0,Ba.default)(new Error("source does not exist"),"ERR_NO_EXIST");let c=!1;try{await cl(t)(`/${o.join("/")}`,n),c=!0}catch(w){if(w.code!=="ERR_NOT_FOUND")throw w}c||await Gf(t)(`/${o.join("/")}`,n);let u=await jr(t,e,n),l=await ka(t,u.mfsDirectory),h=l[l.length-1];if(!h)throw(0,Ba.default)(new Error("directory does not exist"),"ERR_NO_EXIST");if(!h.type||!h.type.includes("directory"))throw(0,Ba.default)(new Error(`cannot write to ${h.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");let d=await t.repo.blocks.get(h.cid),p=Ct(d),y=await Ks(t,{parent:p,name:a,cid:s.cid,size:s.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});h.cid=y.cid;let m=await ns(t,l,n);await ss(t,m,n)})()},FPe=async(t,e,r,i)=>{r.exists?La(`Overwriting file ${r.cid} offset ${i.offset} length ${i.length}`):La(`Writing file offset ${i.offset} length ${i.length}`);let n=[];if(i.offset>0)if(r.unixfs){if(La(`Writing first ${i.offset} bytes of original file`),n.push(()=>r.content({offset:0,length:i.offset})),r.unixfs.fileSize()<i.offset){let l=i.offset-r.unixfs.fileSize();La(`Writing zeros for extra ${l} bytes`),n.push(jY(l))}}else La(`Writing zeros for first ${i.offset} bytes`),n.push(jY(i.offset));n.push(MY(e,i.length));let s=VPe(KPe(n),l=>{if(r.unixfs&&!i.truncate){let h=r.unixfs.fileSize();if(h>l)return La(`Writing last ${h-l} of ${h} bytes from original file starting at offset ${l}`),r.content({offset:l});La("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}),o;i.mode!==void 0&&i.mode!==null?o=hc(i.mode):r&&r.unixfs&&(o=r.unixfs.mode);let a;i.mtime!=null?a=mu(i.mtime):r&&r.unixfs&&(a=r.unixfs.mtime);let c=await t.hashers.getHasher(i.hashAlg),u=await(0,BY.default)(Sp([{content:s,mode:o,mtime:a}],t.repo.blocks,{progress:i.progress,hasher:c,cidVersion:i.cidVersion,strategy:i.strategy,rawLeaves:i.rawLeaves,reduceSingleLeafToSelf:i.reduceSingleLeafToSelf,leafType:i.leafType}));if(!u)throw(0,Ba.default)(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return La(`Wrote ${u.cid}`),{cid:u.cid,size:u.size}},MY=(t,e)=>async function*(){let i=0;for await(let n of t){if(i+=n.length,i>e){yield n.slice(0,e-i);return}yield n}},jY=(t,e=E2)=>{let r=new Uint8Array(e);async function*i(){for(;;)yield r.slice()}return MY(i(),t)},KPe=async function*(t){for(let e=0;e<t.length;e++)yield*t[e]()},VPe=async function*(t,e){let r=0;for await(let i of t)r+=i.length,yield i;for await(let i of e(r))r+=i.length,yield i};f();var qY=A(mn()),UY=t=>{let e={cid:t.cid,name:t.name,type:t.type==="directory"?"directory":"file",size:t.size};return(t.type==="file"||t.type==="directory")&&(e.mode=t.unixfs.mode,e.mtime=t.unixfs.mtime),e};function FY(t){async function*e(r,i={}){let n=await jr(t,r,i),s=await Fi(n.mfsPath,t.repo.blocks);if(s.type==="directory"){yield*(0,qY.default)(s.content(i),UY);return}yield UY(s)}return Q(e)}var zPe={stat:cl},HPe={chmod:xY,cp:Gp,flush:RY,mkdir:Gf,mv:IY,rm:Wp,touch:CY},KY={write:LY,read:OY,ls:FY},VY=({options:t,mfs:e,operations:r,lock:i})=>{Object.keys(r).forEach(n=>{e[n]=i(r[n](t))})},$Pe={repoOwner:!0,repo:null};function GPe(t){let{repoOwner:e}=Object.assign({},$Pe||{},t),r=Vy(e),i=o=>r.readLock(o),n=o=>r.writeLock(o),s={};return VY({options:t,mfs:s,operations:zPe,lock:i}),VY({options:t,mfs:s,operations:HPe,lock:n}),Object.keys(KY).forEach(o=>{s[o]=KY[o](t)}),s}function zY({repo:t,preload:e,hashers:r,options:i}){let n=GPe({repo:t,repoOwner:Boolean(i.repoOwner),hashers:r}),s=o=>(...c)=>{let u=c.filter(l=>gA.default.ipfsPath(l)||gA.default.cid(l));if(u.length){let l=c[c.length-1];l&&l.preload!==!1&&u.forEach(h=>e(h))}return o(...c)};return{...n,chmod:n.chmod,cp:s(n.cp),mkdir:n.mkdir,stat:s(n.stat),rm:n.rm,read:s(n.read),touch:n.touch,write:n.write,mv:s(n.mv),flush:n.flush,ls:s(async function*(...o){for await(let a of n.ls(...o))yield{...a,size:a.size||0}})}}f();f();function HY({keychain:t}){return Q((r,i)=>t.exportKey(r,i))}f();var $Y="ed25519",GY=2048;function WY({keychain:t}){return Q((r,i={type:$Y,size:GY})=>t.createKey(r,i.type||$Y,i.size||GY))}f();function YY({keychain:t}){return Q((r,i,n)=>t.importKey(r,i,n))}f();function XY({keychain:t}){return Q(r=>t.findKeyByName(r))}f();function QY({keychain:t}){return Q(()=>t.listKeys())}f();function ZY({keychain:t}){return Q(async(r,i)=>{let n=await t.renameKey(r,i);return{was:r,now:n.name,id:n.id,overwrite:!1}})}f();function JY({keychain:t}){return Q(r=>t.removeKey(r))}var mA=class{constructor({keychain:e}){this.gen=WY({keychain:e}),this.list=QY({keychain:e}),this.rm=JY({keychain:e}),this.rename=ZY({keychain:e}),this.export=HY({keychain:e}),this.import=YY({keychain:e}),this.info=XY({keychain:e})}};f();f();f();function jn({repo:t,preload:e}){async function r(i,n={}){n.preload!==!1&&e(i);let s=await t.blocks.get(i,n);return Ct(s)}return Q(r)}function eX({repo:t,preload:e}){let r=jn({repo:t,preload:e});async function i(n,s={}){return(await r(n,s)).Data||new Uint8Array(0)}return Q(i)}f();Es();ye();function bA(t,e=[]){for(let r in t){let i=t[r];if(r==="/"&&Object.keys(t).length===1)try{e.push({Name:"",Tsize:0,Hash:q.parse(i)});continue}catch(s){}let n=q.asCID(i);if(n){e.push({Name:"",Tsize:0,Hash:n});continue}Array.isArray(i)&&bA(i,e),i&&typeof i=="object"&&bA(i,e)}return e}function tX({repo:t,codecs:e}){async function r(i,n={}){let s=await e.getCodec(i.code),o=await t.blocks.get(i,n),a=s.decode(o);switch(i.code){case fi:return[];case gt:return a.Links;case pv:case _v:return bA(a);default:throw new Error(`Cannot resolve links from codec ${i.code}`)}}return Q(r)}f();ti();ye();function rX({repo:t,preload:e}){async function r(i={}){let n;if(i.template)if(i.template==="unixfs-dir")n=new at({type:"directory"}).marshal();else throw new Error("unknown template");let s=st({Data:n,Links:[]}),o=await Sr.digest(s),a=q.createV0(o);return await t.blocks.put(a,s,{signal:i.signal}),i.preload!==!1&&e(a),a}return Q(r)}f();ye();ti();function Ma({repo:t,preload:e}){async function r(i,n={}){let s=await t.gcLock.readLock();try{let o=st(i),a=await Sr.digest(o),c=q.createV1(gt,a);return await t.blocks.put(c,o,{signal:n.signal}),n.preload!==!1&&e(c),n.pin&&await t.pins.pinRecursively(c,{signal:n.signal}),c}finally{s()}}return Q(r)}f();function iX({repo:t,preload:e}){let r=jn({repo:t,preload:e});async function i(n,s={}){let o=await r(n,s),c=st(o).length,u=o.Links.reduce((l,h)=>l+(h.Tsize||0),0);return{Hash:n,NumLinks:o.Links.length,BlockSize:c,LinksSize:c-(o.Data||[]).length,DataSize:(o.Data||[]).length,CumulativeSize:c+u}}return Q(i)}f();f();function nX({repo:t,preload:e}){let r=jn({repo:t,preload:e}),i=Ma({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a);return i({...c,Links:c.Links.concat([o])},a)}return Q(n)}f();Wi();function sX({repo:t,preload:e}){let r=jn({repo:t,preload:e}),i=Ma({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a),u=ji([c.Data||[],o]);return i({...c,Data:u},a)}return Q(n)}f();function oX({repo:t,preload:e}){let r=jn({repo:t,preload:e}),i=Ma({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a),u=(typeof o=="string"?o:o.Name)||"";return c.Links=c.Links.filter(l=>l.Name!==u),i(c,a)}return Q(n)}f();function aX({repo:t,preload:e}){let r=jn({repo:t,preload:e}),i=Ma({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a);return i({...c,Data:o},a)}return Q(n)}var wA=class{constructor({repo:e,preload:r}){this.addLink=nX({repo:e,preload:r}),this.appendData=sX({repo:e,preload:r}),this.rmLink=oX({repo:e,preload:r}),this.setData=aX({repo:e,preload:r})}};var _A=class{constructor({repo:e,codecs:r,preload:i}){this.data=eX({repo:e,preload:i}),this.get=jn({repo:e,preload:i}),this.links=tX({repo:e,codecs:r}),this.new=rX({repo:e,preload:i}),this.put=Ma({repo:e,preload:i}),this.stat=iX({repo:e,preload:i}),this.patch=new wA({repo:e,preload:i})}};f();f();var cX=A(ce());var WPe=(0,cX.default)("ipfs:repo:gc");function uX({repo:t,hashers:e}){async function*r(i={}){let n=Date.now(),s;try{s=await Vp({repo:t,hashers:e},i),await t.pins.pinRecursively(s),yield*t.gc()}finally{s&&await t.pins.unpin(s)}WPe(`Complete (${Date.now()-n}ms)`)}return Q(r)}f();function Sb({repo:t}){async function e(r={}){let i=await t.stat();return{numObjects:BigInt(i.numObjects.toString()),repoSize:BigInt(i.repoSize.toString()),repoPath:i.repoPath,version:`${i.version}`,storageMax:BigInt(i.storageMax.toString())}}return Q(e)}f();f();var Xp=11;function lX({repo:t}){async function e(r={}){try{await t._checkInitialized(r)}catch(i){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(s=>s.test(i.message)))return Xp;throw i}return t.version.get()}return Q(e)}var vA=class{constructor({repo:e,hashers:r}){this.gc=uX({repo:e,hashers:r}),this.stat=Sb({repo:e}),this.version=lX({repo:e}),this.setApiAddr=i=>e.apiAddr.set(i)}};f();f();var fX=A(_t());var hX=A(Je());function dX(t,e){let r;if(t.metrics?e.peer?r=t.metrics.forPeer(hX.default.parse(e.peer)):e.proto?r=t.metrics.forProtocol(e.proto):r=t.metrics.global:r=void 0,!r)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};let{movingAverages:i,snapshot:n}=r;return{totalIn:BigInt(n.dataReceived.integerValue().toString()),totalOut:BigInt(n.dataSent.integerValue().toString()),rateIn:i.dataReceived[6e4].movingAverage()/60,rateOut:i.dataSent[6e4].movingAverage()/60}}function pX({network:t}){return Q(async function*(r={}){let{libp2p:i}=await t.use(r);if(!r.poll){yield dX(i,r);return}let n=r.interval||1e3,s=-1;try{if(s=typeof n=="string"?Tu(n)||-1:n,!s||s<0)throw new Error("invalid duration")}catch(a){throw(0,fX.default)(a,"ERR_INVALID_POLL_INTERVAL")}let o;try{for(;;)yield dX(i,r),await new Promise(a=>{o=setTimeout(a,s)})}finally{clearTimeout(o)}})}var EA=class{constructor({repo:e,network:r}){this.repo=Sb({repo:e}),this.bw=pX({network:r}),this.bitswap=l6({network:r})}};f();var $me=A(ce());f();f();var HA=A(SA()),kQ=A(ce()),eh=A(Wf());f();f();f();ye();Ar();var wX=A(ce()),_X=A(Yy());Mi();Es();Gi();var ZPe=(0,wX.default)("ipfs:repo:migrator:migration-8");function vX(t){return t.child?vX(t.child):t}function JPe(t){try{let e=tr.decode(`b${t.toString().toLowerCase().slice(1)}`),r=q.decode(e).multihash.bytes,i=tr.encode(r).slice(1).toUpperCase();return new Te(`/${i}`,!1)}catch(e){return t}}function eCe(t){try{let e=tr.decode(`b${t.toString().toLowerCase().slice(1)}`),r=Wr(e),i=tr.encode(q.createV1(fi,r).bytes).slice(1);return new Te(`/${i.toUpperCase()}`,!1)}catch{return t}}async function EX(t,e,r){let i=t.blocks;await i.open();let n=vX(i),s=await(0,_X.default)(n.queryKeys({filters:[o=>r(o).toString()!==o.toString()]}));try{let o=0;for await(let a of n.query({})){let c=r(a.key);c.toString()!==a.key.toString()&&(o+=1,ZPe(`Migrating Block from ${a.key} to ${c}`,await n.has(a.key)),await n.delete(a.key),await n.put(c,a.value),e(o/s*100,`Migrated Block from ${a.key} to ${c}`))}}finally{await i.close()}}var SX={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(t,e=()=>{})=>EX(t,e,JPe),revert:(t,e=()=>{})=>EX(t,e,eCe)};f();ye();f();ye();f();var Yf=A(Si()),AX=Yf.default.Reader,tCe=Yf.default.Writer,b3t=Yf.default.util,Ab=Yf.default.roots.default||(Yf.default.roots.default={}),xX=Ab.ipfs=(()=>{let t={};return t.pin=function(){let e={};return e.Set=function(){function r(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(n,s){return s||(s=tCe.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&s.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&s.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&s.uint32(29).fixed32(n.seed),s},r.decode=function(n,s){n instanceof AX||(n=AX.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new Ab.ipfs.pin.Set;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.version=n.uint32();break;case 2:a.fanout=n.uint32();break;case 3:a.seed=n.fixed32();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof Ab.ipfs.pin.Set)return n;var s=new Ab.ipfs.pin.Set;return n.version!=null&&(s.version=n.version>>>0),n.fanout!=null&&(s.fanout=n.fanout>>>0),n.seed!=null&&(s.seed=n.seed>>>0),s},r.toObject=function(n,s){s||(s={});var o={};return s.defaults&&(o.version=0,o.fanout=0,o.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(o.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(o.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(o.seed=n.seed),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Yf.default.util.toJSONOptions)},r}(),e}(),t})();var CX=A(IX()),Rb=A(Cn());f();Ar();Mi();ye();var Xy=new Te("/local/pins"),xb=256,TX=8192,xA=q.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),Xf={direct:"direct",recursive:"recursive"};function RA(t){return new Te(`/${tr.encode(t.multihash.bytes).toUpperCase().substring(1)}`)}Wi();TA();Qe();ht();ti();var PA=xX.pin.Set;function rCe(t){let e=t.Data;if(!e)throw new Error("No data present");let r=Rb.default.decode(e),i=Rb.default.decode.bytes;if(i<=0)throw new Error("Invalid Set header length");if(i+r>e.length)throw new Error("Impossibly large set header length");let n=e.slice(i,r+i),s=PA.toObject(PA.decode(n),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(s.version!==1)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>t.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:e.slice(r+i)}}function iCe(t,e){let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,t,!0);let n=Ye(e.toString()),s=ji([r,n],r.byteLength+n.byteLength);return(0,CX.default)(He(s))}async function*OX(t,e){let r=rCe(e),i=0;for(let n of e.Links){if(i<r.header.fanout){let s=n.Hash;if(!xA.equals(s)){let o=await t.get(s),a=Ct(o);yield*OX(t,a)}}else yield n.Hash;i++}}async function*Qy(t,e,r){let i=e.Links.find(o=>o.Name===r);if(!i)throw new Error("No link found with name "+r);let n=await t.get(i.Hash),s=Ct(n);yield*OX(t,s)}function nCe(t,e){return r(e,0);async function r(i,n){let s=PA.encode({version:1,fanout:xb,seed:n}).finish(),o=Rb.default.encode(s.length),a=ji([o,s]),c=[];for(let l=0;l<xb;l++)c.push({Name:"",Tsize:1,Hash:xA});if(i.length<=TX){let l=i.map(p=>({link:{Name:"",Tsize:1,Hash:p.key},data:p.data||new Uint8Array})).sort((p,y)=>IA(p.link.Hash.bytes,y.link.Hash.bytes)),h=c.concat(l.map(p=>p.link));return{Data:ji([a,...l.map(p=>p.data)]),Links:h}}else{let l=i.reduce((d,p)=>{let y=iCe(n,p.key)%xb;return d[y]=y in d?d[y].concat([p]):[p],d},[]),h=0;for(let d of l){let p=await r(d,n+1);await u(p,h),h++}return{Data:a,Links:c}}async function u(l,h){let d=st(l),p=await Sr.digest(d),y=q.createV0(p);await t.put(y,d);let m=l.Links.reduce((w,b)=>w+(b.Tsize||0),0)+d.length;c[h]={Name:"",Tsize:m,Hash:y}}}}async function CA(t,e,r){let i=await nCe(t,r.map(c=>({key:c}))),n=st(i),s=await Sr.digest(n),o=q.createV0(s);await t.put(o,n);let a=i.Links.reduce((c,u)=>c+u.Tsize,0)+n.length;return{Name:e,Tsize:a,Hash:o}}var Ib=A(Yy());ti();Gi();Mi();async function sCe(t,e,r,i){if(!await e.has(Xy))return;let n=await e.get(Xy),s=q.decode(n),o=await t.get(s),a=Ct(o),c=0,u=await(0,Ib.default)(Qy(t,a,Xf.recursive))+await(0,Ib.default)(Qy(t,a,Xf.direct));for await(let l of Qy(t,a,Xf.recursive)){c++;let h={depth:1/0};l.version!==0&&(h.version=l.version),l.code!==gt&&(h.codec=l.code),await r.put(RA(l),_s(h)),i(c/u*100,`Migrated recursive pin ${l}`)}for await(let l of Qy(t,a,Xf.direct)){c++;let h={depth:0};l.version!==0&&(h.version=l.version),l.code!==gt&&(h.codec=l.code),await r.put(RA(l),_s(h)),i(c/u*100,`Migrated direct pin ${l}`)}await t.delete(s),await e.delete(Xy)}async function oCe(t,e,r,i){let n=[],s=[],o=0,a=await(0,Ib.default)(r.queryKeys({}));for await(let{key:d,value:p}of r.query({})){o++;let y=Ri(p),m=q.create(y.version||0,y.codec||gt,Wr(tr.decode("b"+d.toString().toLowerCase().split("/").pop())));y.depth===0?(i(o/a*100,`Reverted direct pin ${m}`),s.push(m)):(i(o/a*100,`Reverted recursive pin ${m}`),n.push(m))}i(100,"Updating pin root");let c={Links:[await CA(t,Xf.direct,s),await CA(t,Xf.recursive,n)]},u=st(c),l=await Sr.digest(u),h=q.createV0(l);await t.put(h,u),await e.put(Xy,h.bytes)}async function kX(t,e,r){let i=t.blocks,n=t.datastore,s=t.pins;await i.open(),await n.open(),await s.open();try{await r(i,n,s,e)}finally{await s.close(),await n.close(),await i.close()}}var DX={version:9,description:"Migrates pins to datastore",migrate:(t,e=()=>{})=>kX(t,e,sCe),revert:(t,e=()=>{})=>kX(t,e,oCe)};f();f();Ar();Ds();var NX=new Te("/config"),Zy=new Te("/version");function Jy(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function aCe(t,e,r){let i=await e(t);if(i)return i;let n=Jy(r);return n?new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{s(Boolean(a.result))}}):!1}async function cCe(t,e,r,i){if(await r(t))return e(t);let n=Jy(i);if(!n)throw ni();return new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return s(a.result);o(ni())}})}function Tb(t){let e=t.get.bind(t),r=t.has.bind(t);return t.get=i=>cCe(i,e,r,t),t.has=i=>aCe(i,r,t),t}function OA(t){return{...t,root:Tb(t.root),datastore:Tb(t.datastore),pins:Tb(t.pins),keys:Tb(t.keys)}}ht();Qe();async function uCe(t,e,r=()=>{}){let i=Jy(e);if(!i){r(`${t} did not need an upgrade`);return}r(`Upgrading ${t}`),await jX(i,(s,o)=>[{type:"del",key:s},{type:"put",key:Ye(s),value:o}])}async function lCe(t,e,r=()=>{}){let i=Jy(e);if(!i){r(`${t} did not need a downgrade`);return}r(`Downgrading ${t}`),await jX(i,(s,o)=>[{type:"del",key:s},{type:"put",key:He(s),value:o}])}function BX(t){return t.child?BX(t.child):t}async function LX(t,e,r){let i=Object.entries(t).map(([o,a])=>({key:o,backend:BX(a)})).filter(({key:o,backend:a})=>a.constructor.name==="LevelDatastore").map(({key:o,backend:a})=>({name:o,store:a}));e(0,`Migrating ${i.length} dbs`);let n=0,s=o=>{e(Math.round(n/i.length*100),o)};for(let{name:o,store:a}of i){await a.open();try{await r(o,a,s)}finally{n++,await a.close()}}e(100,`Migrated ${i.length} dbs`)}var MX={version:10,description:"Migrates datastore-level keys to binary",migrate:(t,e=()=>{})=>LX(t,e,uCe),revert:(t,e=()=>{})=>LX(t,e,lCe)};function jX(t,e){function r(i,n){let s=t.store("readwrite"),o=s.transaction,a=0,c;o.onabort=()=>n(c||o.error||new Error("aborted by user")),o.oncomplete=()=>n();function u(){let l=i[a++],h=l.key,d;try{d=l.type==="del"?s.delete(h):s.put(l.value,h)}catch(p){c=p,o.abort();return}a<i.length&&(d.onsuccess=u)}u()}return new Promise((i,n)=>{let s=t.iterator(),o=c=>c;s._deserializeKey=s._deserializeValue=o,a();function a(){let c=(u,l,h)=>{if(u||l===void 0){let d=p=>{if(p){n(p);return}i()};s.end(d);return}r(e(l,h),a)};s.next(c)}})}f();Ar();var hl=new Te("/local/filesroot");async function fCe(t,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await t.root.open(),await t.datastore.open(),await t.root.has(hl)){let r=await t.root.get(hl);await t.datastore.put(hl,r),await t.root.delete(hl)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo datastore")}async function hCe(t,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await t.root.open(),await t.datastore.open(),await t.datastore.has(hl)){let r=await t.datastore.get(hl);await t.root.put(hl,r),await t.datastore.delete(hl)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo root datastore")}var qX={version:11,description:"Store mfs root in the datastore",migrate:fCe,revert:hCe};var Qf={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},Pb=[Object.assign({version:1},Qf),Object.assign({version:2},Qf),Object.assign({version:3},Qf),Object.assign({version:4},Qf),Object.assign({version:5},Qf),Object.assign({version:6},Qf),Object.assign({version:7},Qf),SX,DX,MX,qX];f();f();var UX=A(ce());var kA={};kt(kA,{InvalidValueError:()=>rg,MissingRepoOptionsError:()=>Mc,NonReversibleMigrationError:()=>eg,NotInitializedRepoError:()=>Zf,RequiredParameterError:()=>tg});f();var eg=class extends Error{constructor(e){super(e);this.name="NonReversibleMigrationError",this.code=eg.code,this.message=e}};eg.code="ERR_NON_REVERSIBLE_MIGRATION";var Zf=class extends Error{constructor(e){super(e);this.name="NotInitializedRepoError",this.code=Zf.code,this.message=e}};Zf.code="ERR_NOT_INITIALIZED_REPO";var tg=class extends Error{constructor(e){super(e);this.name="RequiredParameterError",this.code=tg.code,this.message=e}};tg.code="ERR_REQUIRED_PARAMETER";var rg=class extends Error{constructor(e){super(e);this.name="InvalidValueError",this.code=rg.code,this.message=e}};rg.code="ERR_INVALID_VALUE";var Mc=class extends Error{constructor(e){super(e);this.name="MissingRepoOptionsError",this.code=Mc.code,this.message=e}};Mc.code="ERR_MISSING_REPO_OPTIONS";var DA=(0,UX.default)("ipfs:repo:migrator:repo:init");async function FX(t){if(!t)throw new Mc("Please pass repo options when trying to open a repo");let e=t.root;try{await e.open();let r=await e.has(Zy),i=await e.has(NX);return!r||!i?(DA(`Version entry present: ${r}`),DA(`Config entry present: ${i}`),!1):!0}catch(r){return DA("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}ht();Qe();async function NA(t){if(!await FX(t))throw new Zf("Repo is not initialized!");let e=t.root;await e.open();try{return parseInt(He(await e.get(Zy)))}finally{await e.close()}}async function ig(t,e){if(!e)throw new Mc("Please pass repo options when trying to open a repo");let r=e.root;await r.open(),await r.put(Zy,Ye(String(t))),await r.close()}var KX=A(ce()),No=(0,KX.default)("ipfs:repo:migrator");function dCe(t){return t=t||Pb,!Array.isArray(t)||t.length===0?0:t[t.length-1].version}async function VX(t,e,r,i,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||Pb,!t)throw new Vs.RequiredParameterError("Path argument is required!");if(!r)throw new Vs.RequiredParameterError("repoOptions argument is required!");if(!i)throw new Vs.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(i)||i<=0)throw new Vs.InvalidValueError("Version has to be positive integer!");e=OA(e);let c=await NA(e);if(c===i){No("Nothing to migrate.");return}if(c>i)throw new Vs.InvalidValueError(`Current repo's version (${c}) is higher then toVersion (${i}), you probably wanted to revert it?`);HX(a,c,i);let u;!o&&!n&&(u=await r.repoLock.lock(t));try{for(let l of a){if(i!==void 0&&l.version>i)break;if(!(l.version<=c)){No(`Migrating version ${l.version}`);try{if(!o){let h=()=>{};s&&(h=(d,p)=>s(l.version,d.toFixed(2),p)),await l.migrate(e,h)}}catch(h){let d=l.version-1;throw No(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${d}`),await ig(d,e),new Error(`During migration to version ${l.version} exception was raised: ${h.stack||h.message||h}`)}No(`Migrating to version ${l.version} finished`)}}o||await ig(i||dCe(a),e),No("Repo successfully migrated",i!==void 0?`to version ${i}!`:"to latest version!")}finally{!o&&!n&&u&&await u.close()}}async function zX(t,e,r,i,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||Pb,!t)throw new Vs.RequiredParameterError("Path argument is required!");if(!r)throw new Vs.RequiredParameterError("repoOptions argument is required!");if(!i)throw new Vs.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(i)||i<=0)throw new Vs.InvalidValueError("Version has to be positive integer!");e=OA(e);let c=await NA(e);if(c===i){No("Nothing to revert.");return}if(c<i)throw new Vs.InvalidValueError(`Current repo's version (${c}) is lower then toVersion (${i}), you probably wanted to migrate it?`);HX(a,i,c,!0);let u;!o&&!n&&(u=await r.repoLock.lock(t)),No(`Reverting from version ${c} to ${i}`);try{let l=a.slice().reverse();for(let h of l){if(h.version<=i)break;if(!(h.version>c)){No(`Reverting migration version ${h.version}`);try{if(!o){let d=()=>{};s&&(d=(p,y)=>s(h.version,p.toFixed(2),y)),await h.revert(e,d)}}catch(d){let p=h.version;throw No(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${p}`),await ig(p,e),d.message=`During reversion to version ${h.version} exception was raised: ${d.message}`,d}No(`Reverting to version ${h.version} finished`)}}o||await ig(i,e),No(`All migrations successfully reverted to version ${i}!`)}finally{!o&&!n&&u&&await u.close()}}function HX(t,e,r,i=!1){let n=0;for(let s of t){if(s.version>r)break;if(s.version>e){if(i&&!s.revert)throw new Vs.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${s.version} is not reversible. Cancelling reversion.`);n++}}if(n!==r-e)throw new Vs.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${r}`)}var Vs=kA;var DQ=A(WX());f();Ar();var ZX=A(ce());Qe();ht();f();f();var Qp=class extends Error{constructor(e){super(e);this.name="LockExistsError",this.code=Qp.code}};Qp.code="ERR_LOCK_EXISTS";var zs=class extends Error{constructor(e){super(e);this.name="NotFoundError",this.code=zs.code}};zs.code="ERR_NOT_FOUND";var Zp=class extends Error{constructor(e){super(e);this.name="InvalidRepoVersionError",this.code=Zp.code}};Zp.code="ERR_INVALID_REPO_VERSION";var Jf="ERR_REPO_NOT_INITIALIZED",YX="ERR_REPO_ALREADY_OPEN",XX="ERR_REPO_ALREADY_CLOSED";async function Ob(t,e,r){let i=await e(t);if(i)return i;let n=QX(r);return n?new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{s(Boolean(a.result))}}):!1}async function kb(t,e,r,i){if(await r(t))return e(t);let n=QX(i);if(!n)throw new zs;return new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return s(a.result);o(new zs)}})}function QX(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var bCe=(0,ZX.default)("ipfs:repo:version"),BA=new Te("version");function JX(t){return{async exists(){return Ob(BA,t.has.bind(t),t)},async get(){let e=await kb(BA,t.get.bind(t),t.has.bind(t),t);return parseInt(He(e),10)},set(e){return t.put(BA,Ye(String(e)))},async check(e){let r=await this.get();return bCe("comparing version: %s and %s",r,e),r===e||(r===6&&e===7||e===6&&r===7)}}}f();Ar();var Db=A(So()),eQ=A(SA()),tQ=A(VS()),Nb=A(Wf());Qe();ht();var wCe=Db.default.default?Db.default.default:Db.default,LA=new Te("config");function rQ(t){let e=new wCe({concurrency:1}),r={async getAll(s={}){let o=await kb(LA,t.get.bind(t),t.has.bind(t),t);return JSON.parse(He(o))},async get(s,o={}){if(s==null)throw new zs(`Key ${s} does not exist in config`);let a=await this.getAll(o),c=(0,eQ.default)(a,s);if(c===void 0)throw new zs(`Key ${s} does not exist in config`);return c},set(s,o,a={}){if(typeof s!="string"&&!(s instanceof String))throw(0,Nb.default)(new Error("Invalid key type: "+typeof s),"ERR_INVALID_KEY");if(o===void 0||o instanceof Uint8Array)throw(0,Nb.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>i({key:s,value:o},a.signal))},replace(s,o={}){if(!s||s instanceof Uint8Array)throw(0,Nb.default)(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return e.add(()=>i({key:void 0,value:s},o.signal))},async exists(){return Ob(LA,t.has.bind(t),t)}};return r;async function i(s,o){if(o&&o.aborted)return;let a=s.key,c=s.value;if(a){let u=await r.getAll();return typeof u=="object"&&u!==null&&(0,tQ.default)(u,a,c),n(u)}return n(c)}function n(s){let o=Ye(JSON.stringify(s,null,2));return t.put(LA,o)}}f();dp();var aQ=A(oQ());Qe();ht();var jA=new Te("datastore_spec");function cQ(t){return{exists(){return t.has(jA)},async get(){let e=await t.get(jA);return JSON.parse(He(e))},async set(e){return t.put(jA,Ye(JSON.stringify((0,aQ.default)(e,{deep:!0}))))}}}f();Ar();ht();var qA=new Te("api");function uQ(t){return{async get(){let e=await t.get(qA);return e&&e.toString()},set(e){return t.put(qA,Ye(e.toString()))},delete(){return t.delete(qA)}}}f();var lQ=A(To()),fQ=A(Ea()),hQ=A(Ln());ye();var dQ=A(Wf());gc();function pQ(t){return{open(){return t.open()},close(){return t.close()},query(e,r){return t.query(e,r)},queryKeys(e,r){return t.queryKeys(e,r)},async get(e,r){let i=pl(e);return i.isIdentity?Promise.resolve(i.digest):t.get(e,r)},async*getMany(e,r){for await(let i of e)yield this.get(i,r)},async put(e,r,i){let{isIdentity:n}=pl(e);n||await t.put(e,r,i)},async*putMany(e,r){let i=(0,fQ.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,hQ.default)(t.putMany(async function*(){for await(let{key:s,value:o}of e)pl(s).isIdentity||(yield{key:s,value:o}),i.push({key:s,value:o})}())),i.end()}catch(s){i.end(s)}}),yield*i},has(e,r){let{isIdentity:i}=pl(e);return i?Promise.resolve(!0):t.has(e,r)},delete(e,r){let{isIdentity:i}=pl(e);return i?Promise.resolve():t.delete(e,r)},deleteMany(e,r){return t.deleteMany((0,lQ.default)(e,i=>!pl(i).isIdentity),r)},batch(){let e=t.batch();return{put(r,i){let{isIdentity:n}=pl(r);n||e.put(r,i)},delete(r){let{isIdentity:i}=pl(r);i||e.delete(r)},commit:r=>e.commit(r)}}}}function pl(t){let e=q.asCID(t);if(e==null)throw(0,dQ.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==Qn.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}f();f();var yQ=A(ce()),gQ=(0,yQ.default)("ipfs:repo:lock:memory"),mQ="repo.lock",ng={};async function _Ce(t){let e=t+"/"+mQ;if(gQ("locking %s",e),ng[e]===!0)throw new Qp(`Lock already being held for file: ${e}`);return ng[e]=!0,{async close(){ng[e]&&delete ng[e]}}}async function vCe(t){let e=t+"/"+mQ;return gQ(`checking lock: ${e}`),Boolean(ng[e])}var Bb={lock:_Ce,locked:vCe};var bQ={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:Bb};f();var UA={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};f();ye();var vQ=A(Wf()),EQ=A(ce()),KA=A(Vf());f();Ar();Ad();Es();var wQ=A(Wf());Mi();Gi();function sg(t){let e=q.asCID(t);if(e==null)throw(0,wQ.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let r=tr.encode(e.multihash.bytes);return new Te("/"+r.slice(1).toUpperCase(),!1)}function FA(t){return Wr(tr.decode(`b${t.toString().toLowerCase().substring(1)}`))}f();var _Q=A(ce());var ECe=(0,_Q.default)("ipfs:repo:utils:walk-dag");async function*Jp(t,e,r,i){try{let n=await e.get(t,i),s=await r(t.code),o=qp({bytes:n,cid:t,codec:s});for(let[,a]of o.links())yield a,yield*Jp(a,e,r,i)}catch(n){throw ECe("Could not walk DAG for CID",t.toString(),n),n}}function SCe(t){let e=`Invalid type '${t}', must be one of {direct, indirect, recursive, all}`;return(0,vQ.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var VA=class{constructor({pinstore:e,blockstore:r,loadCodec:i}){this.pinstore=e,this.blockstore=r,this.loadCodec=i,this.log=(0,EQ.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,r={}){await this.blockstore.get(e,r);let i={depth:0};return e.version!==0&&(i.version=e.version),e.code!==gt&&(i.codec=e.code),r.metadata&&(i.metadata=r.metadata),this.pinstore.put(sg(e),_s(i))}unpin(e,r){return this.pinstore.delete(sg(e),r)}async pinRecursively(e,r={}){await this.fetchCompleteDag(e,r);let i={depth:1/0};e.version!==0&&(i.version=e.version),e.code!==gt&&(i.codec=e.code),r.metadata&&(i.metadata=r.metadata),await this.pinstore.put(sg(e),_s(i))}async*directKeys(e){for await(let r of this.pinstore.query({filters:[i=>Ri(i.value).depth===0]})){let i=Ri(r.value),n=i.version||0,s=i.codec!=null?i.codec:gt,o=FA(r.key);yield{cid:q.create(n,s,o),metadata:i.metadata}}}async*recursiveKeys(e){for await(let r of this.pinstore.query({filters:[i=>Ri(i.value).depth===1/0]})){let i=Ri(r.value),n=i.version||0,s=i.codec!=null?i.codec:gt,o=FA(r.key);yield{cid:q.create(n,s,o),metadata:i.metadata}}}async*indirectKeys(e){for await(let{cid:r}of this.recursiveKeys())for await(let i of Jp(r,this.blockstore,this.loadCodec,e)){let n=[It.recursive];(await this.isPinnedWithType(i,n)).pinned||(yield i)}}async isPinnedWithType(e,r,i){Array.isArray(r)||(r=[r]);let n=r.includes(It.all),s=r.includes(It.direct),o=r.includes(It.recursive),a=r.includes(It.indirect);if(o||s||n){let l=await(0,KA.default)(this.pinstore.query({prefix:sg(e).toString(),filters:[h=>{if(n)return!0;let d=Ri(h.value);return r.includes(d.depth===0?It.direct:It.recursive)}],limit:1}));if(l){let h=Ri(l.value);return{cid:e,pinned:!0,reason:h.depth===0?It.direct:It.recursive,metadata:h.metadata}}}let c=this;async function*u(l,h){for await(let{cid:d}of h)for await(let p of Jp(d,c.blockstore,c.loadCodec))if(p.equals(l)){yield d;return}}if(n||a){let l=await(0,KA.default)(u(e,this.recursiveKeys()));if(l)return{cid:e,pinned:!0,reason:It.indirect,parent:l}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,r){let i=new Set,n=async(s,o)=>{if(i.has(s.toString()))return;i.add(s.toString());let a=await this.blockstore.get(s,o),c=await this.loadCodec(s.code),u=qp({bytes:a,cid:s,codec:c});await Promise.all([...u.links()].map(([,l])=>n(l,o)))};await n(e,r)}static checkPinType(e){if(typeof e!="string"||!Object.keys(It).includes(e))throw SCe(e);return!0}};f();var SQ=A(mn()),AQ=A(Wf());function xQ(t,e){return{open(){return e.open()},close(){return e.close()},query(r,i){return e.query(r,i)},queryKeys(r,i){return e.queryKeys(r,i)},async get(r,i){return e.get(r,i)},async*getMany(r,i){yield*e.getMany(r,i)},async put(r,i,n){await e.put(r,i,n)},async*putMany(r,i){yield*e.putMany(r,i)},has(r,i){return e.has(r,i)},async delete(r,i){return await RQ(r,t),e.delete(r,i)},deleteMany(r,i){return e.deleteMany((0,SQ.default)(r,async n=>(await RQ(n,t),n)),i)},batch(){return e.batch()}}}async function RQ(t,e){let{pinned:r,reason:i}=await e.isPinnedWithType(t,It.all);if(r)throw(0,AQ.default)(new Error(`pinned: ${i}`),"ERR_BLOCK_PINNED")}var NQ=A(aA());f();ye();var IQ=A(ce());Ds();var TQ=A(S6()),PQ=A(vr()),zA=A(Yu()),Lb=A(mn()),CQ=A(To());Ar();Mi();var og=(0,IQ.default)("ipfs:repo:gc"),ACe=ni().code,xCe=256,RCe=new Te("/local/filesroot");function OQ({gcLock:t,pins:e,blockstore:r,root:i,loadCodec:n}){async function*s(){let o=Date.now();og("Creating set of marked blocks");let a=await t.writeLock();try{let c=await ICe({pins:e,blockstore:r,root:i,loadCodec:n}),u=r.queryKeys({});yield*TCe({blockstore:r},c,u),og(`Complete (${Date.now()-o}ms)`)}finally{a()}}return s}async function ICe({pins:t,blockstore:e,loadCodec:r,root:i}){let n=async function*(){let a;try{a=await i.get(RCe)}catch(u){if(u.code===ACe){og("No blocks in MFS");return}throw u}let c=q.decode(a);yield c,yield*Jp(c,e,r)}(),s=(0,zA.default)((0,Lb.default)(t.recursiveKeys(),({cid:a})=>a),t.indirectKeys(),(0,Lb.default)(t.directKeys(),({cid:a})=>a),n),o=new Set;for await(let a of(0,zA.default)(s,n))o.add(tr.encode(a.multihash.bytes));return o}async function*TCe({blockstore:t},e,r){let i=0,n=0;yield*(0,PQ.pipe)((0,TQ.default)((0,Lb.default)(r,async o=>async function(){i++;try{let c=tr.encode(o.multihash.bytes);if(e.has(c))return null;try{await t.delete(o),n++}catch(u){return{err:new Error(`Could not delete block with CID ${o}: ${u.message}`)}}return{cid:o}}catch(c){let u=`Could delete block with CID ${o}`;return og(u,c),{err:new Error(u+`: ${c.message}`)}}}),xCe),o=>(0,CQ.default)(o,Boolean)),og(`Marked set has ${e.size} unique blocks. Blockstore has ${i} blocks. Deleted ${n} blocks.`)}var qn=(0,kQ.default)("ipfs:repo"),PCe=Number.MAX_SAFE_INTEGER,CCe="repoAutoMigrate",BQ=class{constructor(e,r,i,n){if(typeof e!="string")throw new Error("missing repo path");if(typeof r!="function")throw new Error("missing codec loader");this.options=Rt(bQ,n),this.closed=!0,this.path=e,this.root=i.root,this.datastore=i.datastore,this.keys=i.keys;let s=i.blocks,o=i.pins;this.pins=new VA({pinstore:o,blockstore:s,loadCodec:r});let a=xQ(this.pins,s);this.blocks=pQ(a),this.version=JX(this.root),this.config=rQ(this.root),this.spec=cQ(this.root),this.apiAddr=uQ(this.root),this.gcLock=(0,NQ.default)(e,{singleProcess:this.options.repoOwner!==!1}),this.gc=OQ({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:r})}async init(e){qn("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(OCe(e)),await this.spec.set(kCe(e)),await this.version.set(Xp)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(e){return!1}}async open(){if(!this.closed)throw(0,eh.default)(new Error("repo is already open"),YX);qn("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),qn("acquired repo.lock"),!await this.version.check(Xp))if(await this._isAutoMigrationEnabled())await this._migrate(Xp,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new Zp("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");qn("creating datastore"),await this.datastore.open(),qn("creating blocks"),await this.blocks.open(),qn("creating keystore"),await this.keys.open(),qn("creating pins"),await this.pins.pinstore.open(),this.closed=!1,qn("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(r){qn("error removing lock",r)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,eh.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){qn("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(r){throw r.code==="ERR_NOT_FOUND"?(0,eh.default)(new Error("repo is not initialized yet"),Jf,{path:this.path}):r}if(!e)throw(0,eh.default)(new Error("repo is not initialized yet"),Jf,{path:this.path})}async close(){if(this.closed)throw(0,eh.default)(new Error("repo is already closed"),XX);qn("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==Jf&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),qn("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,r,i,n,s]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),LQ(this.datastore),LQ(this.keys)]),o=r.size+n+s;return{repoPath:this.path,storageMax:e,version:i,numObjects:r.count,repoSize:o}}throw(0,eh.default)(new Error("repo is not initialized yet"),Jf,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(CCe)}catch(r){if(r.code===zs.code)e=!0;else throw r}return e}async _migrate(e,r){return await this.version.get()>e?(qn(`reverting to version ${e}`),zX(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(qn(`migrating to version ${e}`),VX(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,DQ.default)(e))}catch(e){return BigInt(PCe)}}async _blockStat(){let e=BigInt(0),r=BigInt(0);if(this.blocks)for await(let{key:i,value:n}of this.blocks.query({}))e+=BigInt(1),r+=BigInt(n.byteLength),r+=BigInt(i.bytes.byteLength);return{count:e,size:r}}};async function LQ(t){let e=BigInt(0);for await(let r of t.query({}))e+=BigInt(r.value.byteLength),e+=BigInt(r.key.uint8Array().byteLength);return e}function MQ(t,e,r,i){return new BQ(t,e,r,i)}function OCe(t){return t.Datastore=Object.assign({},UA,(0,HA.default)(t,"datastore")),t}function kCe(t){let e={...UA.Spec,...(0,HA.default)(t,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(r=>({mountpoint:r.mountpoint,type:r.child.type,path:r.child.path,shardFunc:r.child.shardFunc}))}}f();dp();i6();var Pg=A(To()),bte=A(mn()),yR=A(If()),gR=A(qQ()),wte=A(mte()),gh=class extends Ui{constructor(e,r){super();this.path=e,this.opts=r,r&&r.db?(this.database=r.db,delete r.db):this.database=wte.default}_initDb(){return new Promise((e,r)=>{this.db=this.database(this.path,{...this.opts,valueEncoding:"binary",compression:!1},i=>{if(i)return r(i);e(this.db)})})}async open(){try{this.db?await this.db.open():this.db=await this._initDb()}catch(e){throw Cf.dbOpenFailedError(e)}}async put(e,r){try{await this.db.put(e.toString(),r)}catch(i){throw Cf.dbWriteFailedError(i)}}async get(e){let r;try{r=await this.db.get(e.toString())}catch(i){throw i.notFound?Cf.notFoundError(i):Cf.dbWriteFailedError(i)}return r}async has(e){try{await this.db.get(e.toString())}catch(r){if(r.notFound)return!1;throw r}return!0}async delete(e){try{await this.db.del(e.toString())}catch(r){throw Cf.dbDeleteFailedError(r)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(r,i)=>{e.push({type:"put",key:r.toString(),value:i})},delete:r=>{e.push({type:"del",key:r.toString()})},commit:()=>this.db.batch(e)}}query(e){let r=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(r=e.filters.reduce((s,o)=>(0,Pg.default)(s,o),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,o)=>(0,gR.default)(s,o),r));let{offset:i,limit:n}=e;if(i){let s=0;r=(0,Pg.default)(r,()=>s++>=i)}return n&&(r=(0,yR.default)(r,n)),r}queryKeys(e){let r=(0,bte.default)(this._query({values:!1,prefix:e.prefix}),({key:s})=>s);Array.isArray(e.filters)&&(r=e.filters.reduce((s,o)=>(0,Pg.default)(s,o),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,o)=>(0,gR.default)(s,o),r));let{offset:i,limit:n}=e;if(i){let s=0;r=(0,Pg.default)(r,()=>s++>=i)}return n&&(r=(0,yR.default)(r,n)),r}_query(e){let r={keys:!0,keyAsBuffer:!0,values:e.values};if(e.prefix!=null){let i=e.prefix.toString();r.gte=i,r.lt=i+"\xFF"}return fBe(this.db.iterator(r))}};function fBe(t){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,r)=>{t.next((i,n,s)=>{if(i)return r(i);if(n==null)return t.end(o=>{if(o)return r(o);e({done:!0,value:void 0})});e({done:!1,value:{key:new Te(n,!1),value:s}})})}),return:()=>new Promise((e,r)=>{t.end(i=>{if(i)return r(i);e({done:!0,value:void 0})})})}}}}f();var wR=A(Ln()),_R=A(Ea());Ar();ye();Es();Gi();Mi();Yr();var xte=A(Ete());f();var mR=A(Ln()),mh=A(To()),bR=A(If()),Ste=A(Rf()),Ate=(t,e)=>async function*(){yield*(await(0,Ste.default)(t)).sort(e)}(),Kc=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,i){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(let{key:i,value:n}of e)await this.put(i,n,r),yield{key:i,value:n}}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}async*deleteMany(e,r={}){for await(let i of e)await this.delete(i,r),yield i}batch(){let e=[],r=[];return{put(i,n){e.push({key:i,value:n})},delete(i){r.push(i)},commit:async i=>{await(0,mR.default)(this.putMany(e,i)),e=[],await(0,mR.default)(this.deleteMany(r,i)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let i=this._all(e,r);if(e.prefix!=null&&(i=(0,mh.default)(i,n=>n.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,mh.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>Ate(n,s),i)),e.offset!=null){let n=0;i=(0,mh.default)(i,()=>n++>=(e.offset||0))}return e.limit!=null&&(i=(0,bR.default)(i,e.limit)),i}queryKeys(e,r){let i=this._allKeys(e,r);if(e.prefix!=null&&(i=(0,mh.default)(i,n=>n.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,mh.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>Ate(n,s),i)),e.offset!=null){let n=0;i=(0,mh.default)(i,()=>n++>=e.offset)}return e.limit!=null&&(i=(0,bR.default)(i,e.limit)),i}};function w0(t){let e=q.asCID(t);if(!e)throw(0,xte.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Te("/"+tr.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function El(t){return q.createV1(fi,Wr(tr.decode("b"+t.toString().slice(1).toLowerCase())))}function vR(t){let e=t.substring(0,1);if(e==="/")return vR(t.substring(1));let r;e.toLowerCase()==="b"?r=s=>tr.decode(s.toLowerCase()).subarray(2):e.toLowerCase()==="c"?r=s=>tv.decode(s.toLowerCase()).subarray(2):e==="z"?r=s=>ft.decode(s).subarray(2):e==="Q"?r=s=>ft.decode("z"+s):r=s=>tr.decode("b"+s.toLowerCase()).subarray(2);let i;for(let s=1;s<t.length;s++)try{i=r(t.substring(0,s))}catch(o){if(o.message!=="Unexpected end of data")throw o}let n="/C";return i&&(n=`/${tr.encode(i).slice(1,-1).toUpperCase()||"C"}`),n}function dBe(t){return{...t,prefix:t.prefix?vR(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e({key:El(r.key),value:r.value})):void 0,orders:t.orders?t.orders.map(e=>(r,i)=>e({key:El(r.key),value:r.value},{key:El(i.key),value:i.value})):void 0}}function pBe(t){return{...t,prefix:t.prefix?vR(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e(El(r))):void 0,orders:t.orders?t.orders.map(e=>(r,i)=>e(El(r),El(i))):void 0}}var ER=class extends Kc{constructor(e){super();this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,r){for await(let{key:i,value:n}of this.child.query(dBe(e),r))yield{key:El(i),value:n}}async*queryKeys(e,r){for await(let i of this.child.queryKeys(pBe(e),r))yield El(i)}async get(e,r){return this.child.get(w0(e),r)}async*getMany(e,r){for await(let i of e)yield this.get(i,r)}async put(e,r,i){await this.child.put(w0(e),r,i)}async*putMany(e,r){let i=(0,_R.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let s=this.child;await(0,wR.default)(this.child.putMany(async function*(){for await(let o of e){let a=w0(o.key);await s.has(a,r)||(yield{key:a,value:o.value}),i.push(o)}}())),i.end()}catch(s){i.end(s)}}),yield*i}has(e,r){return this.child.has(w0(e),r)}delete(e,r){return this.child.delete(w0(e),r)}deleteMany(e,r){let i=(0,_R.default)();return(0,wR.default)(this.child.deleteMany(async function*(){for await(let n of e)yield w0(n),i.push(n);i.end()}(),r)).catch(n=>{i.end(n)}),i}};function Rte(t,e,r){let i=r.path||"ipfs";return MQ(i,n=>e.getCodec(n),{root:new gh(i,{prefix:"",version:2}),blocks:new ER(new gh(`${i}/blocks`,{prefix:"",version:2})),datastore:new gh(`${i}/datastore`,{prefix:"",version:2}),keys:new gh(`${i}/keys`,{prefix:"",version:2}),pins:new gh(`${i}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||t,repoLock:Bb})}ht();Qe();var l_=A(Je());f();var Ft=A(sy());var Ume=A(_t());f();var Rie=A(eI()),tI={gossipsub:Rie.default};var Fme=A(Die()),Kme=A(qie());f();f();var xMe=t=>Promise.reject(new Error(`No base found for "${t}"`)),Bg=class{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||xMe;for(let r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];let r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};f();var RMe=t=>Promise.reject(new Error(`No codec found for "${t}"`)),Lg=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||RMe;for(let r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];let i=await this._loadCodec(e);return r[e]==null&&this.addCodec(i),i}listCodecs(){return Object.values(this._codecsByName)}};f();var IMe=t=>Promise.reject(new Error(`No hasher found for "${t}"`)),Mg=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||IMe;for(let r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];let i=await this._loadHasher(e);return r[e]==null&&this.addHasher(i),i}listHashers(){return Object.values(this._hashersByName)}};gc();P3();f();f();ye();f();f();var iI=A(ct()),za=A(K1());var Vie=A(ce()),Sh=A(Vd());f();var Uie=A(ct()),Fie=A(hb());function rI(t){try{t=(0,Fie.default)(new Uie.Multiaddr(t))}catch(e){}return t=t.toString(),t}f();var Kie=()=>{};var zie=(0,Vie.default)("ipfs-http-client:lib:error-handler"),TMe=Rt.bind({ignoreUndefined:!0}),PMe=za.isBrowser||za.isWebWorker?location.protocol:"http",CMe=za.isBrowser||za.isWebWorker?location.hostname:"localhost",OMe=za.isBrowser||za.isWebWorker?location.port:"5001",kMe=(t={})=>{let e,r={},i;if(typeof t=="string"||iI.Multiaddr.isMultiaddr(t))e=new URL(rI(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||iI.Multiaddr.isMultiaddr(t.url))e=new URL(rI(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};let n=(r.protocol||PMe).replace(":",""),s=(r.host||CMe).split(":")[0],o=r.port||OMe;e=new URL(`${n}://${s}:${o}`)}if(r.apiPath?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),za.isNode){let n=Kie(e);i=r.agent||new n({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:i}},DMe=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){let i=await t.json();zie(i),e=i.Message||i.message}else e=await t.text()}catch(i){zie("Failed to parse error response",i),e=i.message}let r=new Sh.default.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new Sh.default.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new Sh.default.TimeoutError)),e&&e.includes("request timed out")&&(r=new Sh.default.TimeoutError),e&&(r.message=e),r},NMe=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Hie=t=>t.replace(NMe,function(e){return"-"+e.toLowerCase()}),BMe=t=>typeof t=="string"?Tu(t):t,Ah=class extends Sh.default{constructor(e={}){let r=kMe(e);super({timeout:BMe(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:DMe,transformSearchParams:n=>{let s=new URLSearchParams;for(let[o,a]of n)a!=="undefined"&&a!=="null"&&o!=="signal"&&s.append(Hie(o),a),o==="timeout"&&!isNaN(a)&&s.append(Hie(o),a);return s},agent:r.agent});delete this.get,delete this.put,delete this.delete,delete this.options;let i=this.fetch;this.fetch=(n,s={})=>(typeof n=="string"&&!n.startsWith("/")&&(n=`${r.url}/${n}`),i.call(this,n,TMe(s,{method:"POST"})))}},A8t=Sh.default.HTTPError;var K=t=>e=>t(new Ah(e),e);f();f();function Z5(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}f();var Wie=A(xh());function J5(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),i=Math.floor(r/1e3);e={secs:i,nsecs:(r-i*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,Wie.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function $({arg:t,searchParams:e,hashAlg:r,mtime:i,mode:n,...s}={}){e&&(s={...s,...e}),r&&(s.hash=r),i!=null&&(i=J5(i),s.mtime=i.secs,s.mtimeNsecs=i.nsecs),n!=null&&(s.mode=Z5(n)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);let o=new URLSearchParams(s);return t.forEach(a=>o.append("arg",a)),o}var Yie=K(t=>{async function e(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()).Keys||[]).map(n=>q.parse(n["/"]))}return e});f();ye();var Xie=K(t=>{async function e(r,i={}){return((await(await t.post("bitswap/wantlist",{signal:i.signal,searchParams:$({...i,peer:r.toString()}),headers:i.headers})).json()).Keys||[]).map(s=>q.parse(s["/"]))}return e});f();ye();var e8=K(t=>{async function e(r={}){let i=await t.post("bitswap/stat",{searchParams:$(r),signal:r.signal,headers:r.headers});return MMe(await i.json())}return e});function MMe(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map(e=>q.parse(e["/"])),peers:t.Peers||[],blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}f();var Qie=K(t=>{async function e(r,i={}){return(await t.post("bitswap/unwant",{signal:i.signal,searchParams:$({arg:r.toString(),...i}),headers:i.headers})).json()}return e});function Zie(t){return{wantlist:Yie(t),wantlistForPeer:Xie(t),unwant:Qie(t),stat:e8(t)}}f();f();var t8=K(t=>{async function e(r,i={}){let n=await t.post("block/get",{signal:i.signal,searchParams:$({arg:r.toString(),...i}),headers:i.headers});return new Uint8Array(await n.arrayBuffer())}return e});f();ye();f();f();f();var Jie=A(cf()),ene=A(Ep()),tne=A(vp()),rne=A(Rf());async function ine(t){if(js(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(Cc(t))return t;if(Oc(t)&&(t=(0,tne.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=(0,ene.default)(t),{value:r,done:i}=await e.peek();if(i)return nne(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await(0,rne.default)(e))]);if(js(r)||typeof r=="string"||r instanceof String)return nne(e)}throw(0,Jie.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function nne(t){let e=[];for await(let r of t)e.push(r);return new Blob(e)}function sne(t){return O6(t,ine,!0)}f();function one(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function oi(t,e,r={}){let i=[],n=new FormData,s=0,o=0;for await(let{content:a,path:c,mode:u,mtime:l}of sne(t)){let h="",d=a?"file":"dir";s>0&&(h=`-${s}`);let p=d+h,y=[];if(u!=null&&y.push(`mode=${one(u)}`),l!=null){let{secs:m,nsecs:w}=l;y.push(`mtime=${m}`),w!=null&&y.push(`mtime-nsecs=${w}`)}if(y.length&&(p=`${p}?${y.join("&")}`),a){n.set(p,a,c!=null?encodeURIComponent(c):void 0);let m=o+a.size;i.push({name:c,start:o,end:m}),o=m}else if(c!=null)n.set(p,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:o,parts:i,headers:r,body:n}}f();var ane=A(Eo());function jMe(t){return t.filter(Boolean)}function ai(...t){return(0,ane.anySignal)(jMe(t))}var cne=A(Ii()),une=K(t=>{async function e(r,i={}){let n=new cne.AbortController,s=ai(n.signal,i.signal),o;try{o=await(await t.post("block/put",{signal:s,searchParams:$(i),...await oi([r],n,i.headers)})).json()}catch(a){if(i.format==="dag-pb")return e(r,{...i,format:"protobuf"});if(i.format==="dag-cbor")return e(r,{...i,format:"cbor"});throw a}return q.parse(o.Key)}return e});f();ye();var lne=K(t=>{async function*e(r,i={}){Array.isArray(r)||(r=[r]);let n=await t.post("block/rm",{signal:i.signal,searchParams:$({arg:r.map(s=>s.toString()),"stream-channels":!0,...i}),headers:i.headers});for await(let s of n.ndjson())yield qMe(s)}return e});function qMe(t){let e={cid:q.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}f();ye();var fne=K(t=>{async function e(r,i={}){let s=await(await t.post("block/stat",{signal:i.signal,searchParams:$({arg:r.toString(),...i}),headers:i.headers})).json();return{cid:q.parse(s.Key),size:s.Size}}return e});function hne(t){return{get:t8(t),put:une(t),rm:lne(t),stat:fne(t)}}f();f();var dne=A(ct()),pne=K(t=>{async function e(r,i={}){let n=await t.post("bootstrap/add",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers}),{Peers:s}=await n.json();return{Peers:s.map(o=>new dne.Multiaddr(o))}}return e});f();var yne=A(ct()),gne=K(t=>{async function e(r={}){let i=await t.post("bootstrap/rm",{signal:r.signal,searchParams:$({...r,all:!0}),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new yne.Multiaddr(s))}}return e});f();var mne=A(ct()),bne=K(t=>{async function e(r={}){let i=await t.post("bootstrap/list",{signal:r.signal,searchParams:$(r),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new mne.Multiaddr(s))}}return e});f();var wne=A(ct()),_ne=K(t=>{async function e(r={}){let i=await t.post("bootstrap/add",{signal:r.signal,searchParams:$({...r,default:!0}),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new wne.Multiaddr(s))}}return e});f();var vne=A(ct()),Ene=K(t=>{async function e(r,i={}){let n=await t.post("bootstrap/rm",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers}),{Peers:s}=await n.json();return{Peers:s.map(o=>new vne.Multiaddr(o))}}return e});function Sne(t){return{add:pne(t),clear:gne(t),list:bne(t),reset:_ne(t),rm:Ene(t)}}f();f();f();var Ane=K(t=>{async function e(r,i={}){let s=await(await t.post("config/profile/apply",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return e});f();f();function Pt(t){if(t==null)return t;let e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((i,n)=>(e.test(n)?i[n.toLowerCase()]=t[n]:e.test(n[0])?i[n[0].toLowerCase()+n.slice(1)]=t[n]:i[n]=t[n],i),r)}var xne=K(t=>{async function e(r={}){return(await(await t.post("config/profile/list",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()).map(s=>Pt(s))}return e});function Rne(t){return{apply:Ane(t),list:xne(t)}}f();var Ine=K(t=>async(r,i={})=>{if(!r)throw new Error("key argument is required");return(await(await t.post("config",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).json()).Value});f();var Tne=K(t=>async(r={})=>await(await t.post("config/show",{signal:r.signal,searchParams:$({...r}),headers:r.headers})).json());f();ht();var Pne=A(Ii()),Cne=K(t=>async(r,i={})=>{let n=new Pne.AbortController,s=ai(n.signal,i.signal);await(await t.post("config/replace",{signal:s,searchParams:$(i),...await oi([Ye(JSON.stringify(r))],n,i.headers)})).text()});f();var One=K(t=>async(r,i,n={})=>{if(typeof r!="string")throw new Error("Invalid key type");let s={...n,...UMe(r,i)};await(await t.post("config",{signal:n.signal,searchParams:$(s),headers:n.headers})).text()}),UMe=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function kne(t){return{getAll:Tne(t),get:Ine(t),set:One(t),replace:Cne(t),profiles:Rne(t)}}f();f();var Dne=K(t=>{async function*e(r,i={}){yield*(await t.post("dag/export",{signal:i.signal,searchParams:$({arg:r.toString()}),headers:i.headers})).iterator()}return e});f();f();ye();var nI=A(xh());async function*sI(t,e,r,i,n){let s=async u=>{let l=await r.getCodec(u.code),h=await i(u,n);return l.decode(h)},o=e.split("/").filter(Boolean),a=await s(t),c=t;for(;o.length;){let u=o.shift();if(!u)throw(0,nI.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:o.join("/")};else throw(0,nI.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let l=q.asCID(a);l&&(c=l,a=await s(a))}yield{value:a,remainderPath:""}}var Nne=A(Vf()),Bne=A(kn()),Lne=A(xh());var Mne=(t,e)=>K((i,n)=>{let s=t8(n);return async(a,c={})=>{if(c.path){let p=c.localResolve?await(0,Nne.default)(sI(a,c.path,t,s,c)):await(0,Bne.default)(sI(a,c.path,t,s,c));if(!p)throw(0,Lne.default)(new Error("Not found"),"ERR_NOT_FOUND");return p}let u=await t.getCodec(a.code),l=await s(a,c);return{value:u.decode(l),remainderPath:""}}})(e);f();var jne=A(Ii());ye();var qne=K(t=>{async function*e(r,i={}){let n=new jne.AbortController,s=ai(n.signal,i.signal),{headers:o,body:a}=await oi(r,n,i.headers),c=await t.post("dag/import",{signal:s,headers:o,body:a,searchParams:$({"pin-roots":i.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":l},PinErrorMsg:h}=u;yield{root:{cid:q.parse(l),pinErrorMsg:h}}}}return e});f();ye();var Une=A(Ii()),r8=(t,e)=>K(i=>async(s,o={})=>{let a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o},c;if(a.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");c=s}else c=(await t.getCodec(a.storeCodec)).encode(s),a.inputCodec=a.storeCodec;let u=new Une.AbortController,l=ai(u.signal,a.signal),d=await(await i.post("dag/put",{timeout:a.timeout,signal:l,searchParams:$(a),...await oi([c],u,a.headers)})).json();return q.parse(d.Cid["/"])})(e);f();ye();var Fne=K(t=>async(r,i={})=>{let s=await(await t.post("dag/resolve",{signal:i.signal,searchParams:$({arg:`${r}${i.path?`/${i.path}`.replace(/\/[/]+/g,"/"):""}`,...i}),headers:i.headers})).json();return{cid:q.parse(s.Cid["/"]),remainderPath:s.RemPath}});function Kne(t,e){return{export:Dne(e),get:Mne(t,e),import:qne(e),put:r8(t,e),resolve:Fne(e)}}f();f();f();ht();f();var Vne=0,zne=1,Hne=2,$ne=3,Gne=4,Wne=5,Yne=6,Xne=7;var jg=A(ct()),Ws=t=>{if(t.Type===Vne)return{to:t.ID,name:"SENDING_QUERY",type:t.Type};if(t.Type===zne)return{from:t.ID,name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:e,multiaddrs:r.map(i=>new jg.Multiaddr(i))})),providers:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:e,multiaddrs:r.map(i=>new jg.Multiaddr(i))}))};if(t.Type===Hne){let e={id:t.ID,multiaddrs:[]};return t.Responses&&t.Responses.length&&(e={id:t.Responses[0].ID,multiaddrs:t.Responses[0].Addrs.map(r=>new jg.Multiaddr(r))}),{from:t.ID,name:"FINAL_PEER",type:t.Type,peer:e}}if(t.Type===$ne)return{from:t.ID,name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===Gne)return{from:t.ID,name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:e,Addrs:r})=>({id:e,multiaddrs:r.map(i=>new jg.Multiaddr(i))}))};if(t.Type===Wne)return{from:t.ID,name:"VALUE",type:t.Type,value:Ye(t.Extra,"base64pad")};if(t.Type===Yne){let e=t.Responses.map(({ID:r})=>r);if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(t.Type===Xne)return{name:"DIALING_PEER",type:t.Type,peer:t.ID};throw new Error("Unknown DHT event type")};var Qne=K(t=>{async function*e(r,i={}){let n=await t.post("dht/findpeer",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers});for await(let s of n.ndjson())yield Ws(s)}return e});f();var Zne=K(t=>{async function*e(r,i={}){let n=await t.post("dht/findprovs",{signal:i.signal,searchParams:$({arg:r.toString(),...i}),headers:i.headers});for await(let s of n.ndjson())yield Ws(s)}return e});f();Qe();var Jne=K(t=>{async function*e(r,i={}){let n=await t.post("dht/get",{signal:i.signal,searchParams:$({arg:r instanceof Uint8Array?He(r):r.toString(),...i}),headers:i.headers});for await(let s of n.ndjson())yield Ws(s)}return e});f();var ese=K(t=>{async function*e(r,i={recursive:!1}){let n=Array.isArray(r)?r:[r],s=await t.post("dht/provide",{signal:i.signal,searchParams:$({arg:n.map(o=>o.toString()),...i}),headers:i.headers});for await(let o of s.ndjson())yield Ws(o)}return e});f();var tse=A(Ii());Qe();var rse=K(t=>{async function*e(r,i,n={}){let s=new tse.AbortController,o=ai(s.signal,n.signal),a=await t.post("dht/put",{signal:o,searchParams:$({arg:r instanceof Uint8Array?He(r):r.toString(),...n}),...await oi([i],s,n.headers)});for await(let c of a.ndjson())yield Ws(c)}return e});f();var ise=K(t=>{async function*e(r,i={}){let n=await t.post("dht/query",{signal:i.signal,searchParams:$({arg:r.toString(),...i}),headers:i.headers});for await(let s of n.ndjson())yield Ws(s)}return e});function nse(t){return{findPeer:Qne(t),findProvs:Zne(t),get:Jne(t),provide:ese(t),put:rse(t),query:ise(t)}}f();f();var sse=K(t=>{async function e(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()}return e});f();var ose=K(t=>{async function e(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()}return e});f();var ase=K(t=>{async function e(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()}return e});function cse(t){return{cmds:sse(t),net:ose(t),sys:ase(t)}}f();f();var use=K(t=>{async function e(r,i,n={}){await(await t.post("files/chmod",{signal:n.signal,searchParams:$({arg:r,mode:i,...n}),headers:n.headers})).text()}return e});f();ye();var lse=K(t=>{async function e(r,i,n={}){let s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:n.signal,searchParams:$({arg:s.concat(i).map(a=>q.asCID(a)?`/ipfs/${a}`:a),...n}),headers:n.headers})).text()}return e});f();ye();var fse=K(t=>{async function e(r,i={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await t.post("files/flush",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).json();return q.parse(s.Cid)}return e});f();ye();f();function qg(t){let e=Pt(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}var hse=K(t=>{async function*e(r,i={}){if(!r)throw new Error("ipfs.files.ls requires a path");let n=await t.post("files/ls",{signal:i.signal,searchParams:$({arg:q.asCID(r)?`/ipfs/${r}`:r,long:!0,...i,stream:!0}),headers:i.headers});for await(let s of n.ndjson())if("Entries"in s)for(let o of s.Entries||[])yield dse(qg(o));else yield dse(qg(s))}return e});function dse(t){return t.hash&&(t.cid=q.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}f();var pse=K(t=>{async function e(r,i={}){await(await t.post("files/mkdir",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).text()}return e});f();var yse=K(t=>{async function e(r,i,n={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:n.signal,searchParams:$({arg:r.concat(i),...n}),headers:n.headers})).text()}return e});f();var mse=A(Ug()),bse=K(t=>{async function*e(r,i={}){let n=await t.post("files/read",{signal:i.signal,searchParams:$({arg:r,count:i.length,...i}),headers:i.headers});yield*(0,mse.default)(n.body)}return e});f();var wse=A(Vd()),_se=K(t=>{async function e(r,i={}){let n=await t.post("files/rm",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers}),s=await n.text();if(s!==""){let o=new wse.default.HTTPError(n);throw o.message=s,o}}return e});f();ye();var i8=K(t=>{async function e(r,i={}){let s=await(await t.post("files/stat",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).json();return s.WithLocality=s.WithLocality||!1,FMe(qg(s))}return e});function FMe(t){return t.cid=q.parse(t.hash),delete t.hash,t}f();var vse=K(t=>{async function e(r,i={}){await(await t.post("files/touch",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).text()}return e});f();var Ese=A(Ii()),Sse=K(t=>{async function e(r,i,n={}){let s=new Ese.AbortController,o=ai(s.signal,n.signal);await(await t.post("files/write",{signal:o,searchParams:$({arg:r,streamChannels:!0,count:n.length,...n}),...await oi([{content:i,path:"arg",mode:Z5(n.mode),mtime:J5(n.mtime)}],s,n.headers)})).text()}return e});function Ase(t){return{chmod:use(t),cp:lse(t),flush:fse(t),ls:hse(t),mkdir:pse(t),mv:yse(t),read:bse(t),rm:_se(t),stat:i8(t),touch:vse(t),write:Sse(t)}}f();f();var xse=A(xh()),Rse=K(t=>async(r,i,n={})=>{throw(0,xse.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});f();var Ise=K(t=>{async function e(r,i={type:"rsa",size:2048}){let s=await(await t.post("key/gen",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).json();return Pt(s)}return e});f();var Tse=K(t=>{async function e(r,i,n,s={}){let a=await(await t.post("key/import",{signal:s.signal,searchParams:$({arg:r,pem:i,password:n,...s}),headers:s.headers})).json();return Pt(a)}return e});f();var Pse=A(xh()),Cse=K(t=>async(r,i={})=>{throw(0,Pse.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});f();var Ose=K(t=>{async function e(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()).Keys||[]).map(s=>Pt(s))}return e});f();var kse=K(t=>{async function e(r,i,n={}){let s=await t.post("key/rename",{signal:n.signal,searchParams:$({arg:[r,i],...n}),headers:n.headers});return Pt(await s.json())}return e});f();var Dse=K(t=>{async function e(r,i={}){let s=await(await t.post("key/rm",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).json();return Pt(s.Keys[0])}return e});function Nse(t){return{export:Rse(t),gen:Ise(t),import:Tse(t),info:Cse(t),list:Ose(t),rename:kse(t),rm:Dse(t)}}f();f();var Bse=K(t=>{async function e(r,i,n={}){let s=await t.post("log/level",{signal:n.signal,searchParams:$({arg:[r,i],...n}),headers:n.headers});return Pt(await s.json())}return e});f();var Lse=K(t=>{async function e(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()).Strings}return e});f();var Mse=K(t=>{async function*e(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:$(r),headers:r.headers})).ndjson()}return e});function jse(t){return{level:Bse(t),ls:Lse(t),tail:Mse(t)}}f();f();var qse=K(t=>{async function e(r,i={}){let n=await t.post("name/publish",{signal:i.signal,searchParams:$({arg:`${r}`,...i}),headers:i.headers});return Pt(await n.json())}return e});f();var Use=K(t=>{async function*e(r,i={}){let n=await t.post("name/resolve",{signal:i.signal,searchParams:$({arg:r,stream:!0,...i}),headers:i.headers});for await(let s of n.ndjson())yield s.Path}return e});f();f();var Fse=K(t=>{async function e(r,i={}){let n=await t.post("name/pubsub/cancel",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers});return Pt(await n.json())}return e});f();var Kse=K(t=>{async function e(r={}){let i=await t.post("name/pubsub/state",{signal:r.signal,searchParams:$(r),headers:r.headers});return Pt(await i.json())}return e});f();var Vse=K(t=>{async function e(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()).Strings||[]}return e});function zse(t){return{cancel:Fse(t),state:Kse(t),subs:Vse(t)}}function Hse(t){return{publish:qse(t),resolve:Use(t),pubsub:zse(t)}}f();f();ye();var $se=K(t=>{async function e(r,i={}){let s=await(await t.post("object/data",{signal:i.signal,searchParams:$({arg:`${r instanceof Uint8Array?q.decode(r):r}`,...i}),headers:i.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return e});f();ye();ht();var Gse=K(t=>{async function e(r,i={}){let s=await(await t.post("object/get",{signal:i.signal,searchParams:$({arg:`${r instanceof Uint8Array?q.decode(r):r}`,dataEncoding:"base64",...i}),headers:i.headers})).json();return{Data:Ye(s.Data,"base64pad"),Links:(s.Links||[]).map(o=>({Name:o.Name,Hash:q.parse(o.Hash),Tsize:o.Size}))}}return e});f();ye();var Wse=K(t=>{async function e(r,i={}){return((await(await t.post("object/links",{signal:i.signal,searchParams:$({arg:`${r instanceof Uint8Array?q.decode(r):r}`,...i}),headers:i.headers})).json()).Links||[]).map(o=>({Name:o.Name,Tsize:o.Size,Hash:q.parse(o.Hash)}))}return e});f();ye();var Yse=K(t=>{async function e(r={}){let i=await t.post("object/new",{signal:r.signal,searchParams:$({arg:r.template,...r}),headers:r.headers}),{Hash:n}=await i.json();return q.parse(n)}return e});f();var Xse=(t,e)=>K(i=>{let n=r8(t,e);async function s(o,a={}){return n(o,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return s})(e);f();ye();var Qse=K(t=>{async function e(r,i={}){let s=await(await t.post("object/stat",{signal:i.signal,searchParams:$({arg:`${r}`,...i}),headers:i.headers})).json();return{...s,Hash:q.parse(s.Hash)}}return e});f();f();ye();var Zse=K(t=>{async function e(r,i,n={}){let s=await t.post("object/patch/add-link",{signal:n.signal,searchParams:$({arg:[`${r}`,i.Name||i.name||"",(i.Hash||i.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:o}=await s.json();return q.parse(o)}return e});f();ye();var Jse=A(Ii()),eoe=K(t=>{async function e(r,i,n={}){let s=new Jse.AbortController,o=ai(s.signal,n.signal),a=await t.post("object/patch/append-data",{signal:o,searchParams:$({arg:`${r}`,...n}),...await oi([i],s,n.headers)}),{Hash:c}=await a.json();return q.parse(c)}return e});f();ye();var toe=K(t=>{async function e(r,i,n={}){let s=await t.post("object/patch/rm-link",{signal:n.signal,searchParams:$({arg:[`${r}`,i.Name||i.name||null],...n}),headers:n.headers}),{Hash:o}=await s.json();return q.parse(o)}return e});f();ye();var roe=A(Ii()),ioe=K(t=>{async function e(r,i,n={}){let s=new roe.AbortController,o=ai(s.signal,n.signal),a=await t.post("object/patch/set-data",{signal:o,searchParams:$({arg:[`${r}`],...n}),...await oi([i],s,n.headers)}),{Hash:c}=await a.json();return q.parse(c)}return e});function noe(t){return{addLink:Zse(t),appendData:eoe(t),rmLink:toe(t),setData:ioe(t)}}function soe(t,e){return{data:$se(e),get:Gse(e),links:Wse(e),new:Yse(e),put:Xse(t,e),stat:Qse(e),patch:noe(e)}}f();f();ye();var n8=K(t=>{async function*e(r,i={}){for await(let{path:n,recursive:s,metadata:o}of va(r)){let a=await t.post("pin/add",{signal:i.signal,searchParams:$({...i,arg:n,recursive:s,metadata:o?JSON.stringify(o):void 0,stream:!0}),headers:i.headers});for await(let c of a.ndjson()){if(c.Pins){for(let u of c.Pins)yield q.parse(u);continue}yield q.parse(c)}}}return e});f();var ooe=A(kn());function aoe(t){let e=n8(t);return K(()=>{async function r(i,n={}){return(0,ooe.default)(e([{path:i,...n}],n))}return r})(t)}f();ye();function coe(t,e,r){let i={type:t,cid:q.parse(e)};return r&&(i.metadata=r),i}var uoe=K(t=>{async function*e(r={}){let i=[];r.paths&&(i=Array.isArray(r.paths)?r.paths:[r.paths]);let n=await t.post("pin/ls",{signal:r.signal,searchParams:$({...r,arg:i.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(let s of n.ndjson()){if(s.Keys){for(let o of Object.keys(s.Keys))yield coe(s.Keys[o].Type,o,s.Keys[o].Metadata);return}yield coe(s.Type,s.Cid,s.Metadata)}}return e});f();ye();var s8=K(t=>{async function*e(r,i={}){for await(let{path:n,recursive:s}of va(r)){let o=new URLSearchParams(i.searchParams);o.append("arg",`${n}`),s!=null&&o.set("recursive",String(s));let a=await t.post("pin/rm",{signal:i.signal,headers:i.headers,searchParams:$({...i,arg:`${n}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(u=>q.parse(u));continue}yield q.parse(c)}}}return e});f();var loe=A(kn());var foe=t=>{let e=s8(t);return K(()=>{async function r(i,n={}){return(0,loe.default)(e([{path:i,...n}],n))}return r})(t)};f();f();f();ye();var o8=({Name:t,Status:e,Cid:r})=>({cid:q.parse(r),name:t,status:e}),hoe=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},doe=t=>{if(q.asCID(t))return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},T0=({service:t,cid:e,name:r,status:i,all:n})=>{let s=$({service:hoe(t),name:r,force:n?!0:void 0});if(e)for(let o of e)s.append("cid",doe(o));if(i)for(let o of i)s.append("status",o);return s},poe=({cid:t,service:e,background:r,name:i,origins:n})=>{let s=$({arg:doe(t),service:hoe(e),name:i,background:r?!0:void 0});if(n)for(let o of n)s.append("origin",o.toString());return s};function yoe(t){async function e(r,{timeout:i,signal:n,headers:s,...o}){let a=await t.post("pin/remote/add",{timeout:i,signal:n,headers:s,searchParams:poe({cid:r,...o})});return o8(await a.json())}return e}f();function goe(t){async function*e({timeout:r,signal:i,headers:n,...s}){let o=await t.post("pin/remote/ls",{timeout:r,signal:i,headers:n,searchParams:T0(s)});for await(let a of o.ndjson())yield o8(a)}return e}f();function moe(t){async function e({timeout:r,signal:i,headers:n,...s}){await t.post("pin/remote/rm",{timeout:r,signal:i,headers:n,searchParams:T0({...s,all:!1})})}return e}f();function boe(t){async function e({timeout:r,signal:i,headers:n,...s}){await t.post("pin/remote/rm",{timeout:r,signal:i,headers:n,searchParams:T0({...s,all:!0})})}return e}f();f();f();function woe(t){let e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function _oe(t){return{service:t.Service,endpoint:new URL(t.ApiEndpoint),...t.Stat&&{stat:KMe(t.Stat)}}}function KMe(t){switch(t.Status){case"valid":{let{Pinning:e,Pinned:r,Queued:i,Failed:n}=t.PinCount;return{status:"valid",pinCount:{queued:i,pinning:e,pinned:r,failed:n}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function voe(t){async function e(r,i){let{endpoint:n,key:s,headers:o,timeout:a,signal:c}=i;await t.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:$({arg:[r,woe(n),s]}),headers:o})}return e}f();function Eoe(t){async function e(r={}){let{stat:i,headers:n,timeout:s,signal:o}=r,a=await t.post("pin/remote/service/ls",{timeout:s,signal:o,headers:n,searchParams:i===!0?$({stat:i}):void 0}),{RemoteServices:c}=await a.json();return c.map(_oe)}return e}f();function Soe(t){async function e(r,i={}){await t.post("pin/remote/service/rm",{signal:i.signal,headers:i.headers,searchParams:$({arg:r})})}return e}function Aoe(t){let e=new Ah(t);return{add:voe(e),ls:Eoe(e),rm:Soe(e)}}function xoe(t){let e=new Ah(t);return{add:yoe(e),ls:goe(e),rm:moe(e),rmAll:boe(e),service:Aoe(t)}}function Roe(t){return{addAll:n8(t),add:aoe(t),ls:uoe(t),rmAll:s8(t),rm:foe(t),remote:xoe(t)}}f();f();f();ht();Qe();nf();var a8=t=>Array.isArray(t)?t.map(VMe):t,VMe=t=>He(c8(t)),c8=t=>A3.decode(t),P0=t=>A3.encode(Ye(t));var Ioe=K(t=>{async function e(r={}){let{Strings:i}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:$(r),headers:r.headers})).json();return a8(i)||[]}return e});f();var Toe=K(t=>{async function e(r,i={}){let n=await t.post("pubsub/peers",{signal:i.signal,searchParams:$({arg:P0(r),...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e});f();var Poe=A(Ii()),Coe=K(t=>{async function e(r,i,n={}){let s=$({arg:P0(r),...n}),o=new Poe.AbortController,a=ai(o.signal,n.signal);await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await oi([i],o,n.headers)})).text()}return e});f();var Ooe=A(ce());var zMe=(0,Ooe.default)("ipfs-http-client:pubsub:subscribe"),koe=(t,e)=>K(r=>{async function i(n,s,o={}){o.signal=e.subscribe(n,s,o.signal);let a,c,u=new Promise((h,d)=>{a=h,c=d}),l=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:o.signal,searchParams:$({arg:P0(n),...o}),headers:o.headers}).catch(h=>{e.unsubscribe(n,s),c(h)}).then(h=>{clearTimeout(l),!!h&&(HMe(h,{onMessage:s,onEnd:()=>e.unsubscribe(n,s),onError:o.onError}),a())}),u}return i})(t);async function HMe(t,{onMessage:e,onEnd:r,onError:i}){i=i||zMe;try{for await(let n of t.ndjson())try{if(!n.from)continue;e({from:n.from,data:c8(n.data),seqno:c8(n.seqno),topicIDs:a8(n.topicIDs)})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,i(s,!1,n)}}catch(n){$Me(n)||i(n,!0)}finally{r()}}var $Me=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};f();var Doe=(t,e)=>{async function r(i,n){e.unsubscribe(i,n)}return r};f();var Noe=A(Ii()),oI=class{constructor(){this._subs=new Map}subscribe(e,r,i){let n=this._subs.get(e)||[];if(n.find(o=>o.handler===r))throw new Error(`Already subscribed to ${e} with this handler`);let s=new Noe.AbortController;return this._subs.set(e,[{handler:r,controller:s}].concat(n)),i&&i.addEventListener("abort",()=>this.unsubscribe(e,r)),s.signal}unsubscribe(e,r){let i=this._subs.get(e)||[],n;r?(this._subs.set(e,i.filter(s=>s.handler!==r)),n=i.filter(s=>s.handler===r)):(this._subs.set(e,[]),n=i),(this._subs.get(e)||[]).length||this._subs.delete(e),n.forEach(s=>s.controller.abort())}};function Boe(t){let e=new oI;return{ls:Ioe(t),peers:Toe(t),publish:Coe(t),subscribe:koe(t,e),unsubscribe:Doe(t,e)}}f();ye();f();var Loe=K(t=>{async function*e(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:Pt,searchParams:$(r),headers:r.headers})).ndjson()}return e});var Moe=K((t,e)=>Object.assign(async function*(i,n={}){let s=Array.isArray(i)?i:[i];yield*(await t.post("refs",{signal:n.signal,searchParams:$({arg:s.map(a=>`${a instanceof Uint8Array?q.decode(a):a}`),...n}),headers:n.headers,transform:Pt})).ndjson()},{local:Loe(e)}));f();f();ye();var joe=K(t=>{async function*e(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:$(r),headers:r.headers,transform:n=>({err:n.Error?new Error(n.Error):null,cid:(n.Key||{})["/"]?q.parse(n.Key["/"]):null})})).ndjson()}return e});f();var u8=K(t=>{async function e(r={}){let n=await(await t.post("repo/stat",{signal:r.signal,searchParams:$(r),headers:r.headers})).json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}}return e});f();var qoe=K(t=>{async function e(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:$(r),headers:r.headers})).json()).Version}return e});function Uoe(t){return{gc:joe(t),stat:u8(t),version:qoe(t)}}f();f();var Foe=K(t=>{async function*e(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:$(r),headers:r.headers,transform:n=>({totalIn:BigInt(n.TotalIn),totalOut:BigInt(n.TotalOut),rateIn:parseFloat(n.RateIn),rateOut:parseFloat(n.RateOut)})})).ndjson()}return e});function Koe(t){return{bitswap:e8(t),repo:u8(t),bw:Foe(t)}}f();f();var Voe=A(ct());var zoe=K(t=>{async function e(r={}){let i=await t.post("swarm/addrs",{signal:r.signal,searchParams:$(r),headers:r.headers}),{Addrs:n}=await i.json();return Object.keys(n).map(s=>({id:s,addrs:(n[s]||[]).map(o=>new Voe.Multiaddr(o))}))}return e});f();var Hoe=K(t=>{async function e(r,i={}){let n=await t.post("swarm/connect",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e});f();var $oe=K(t=>{async function e(r,i={}){let n=await t.post("swarm/disconnect",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e});f();var Goe=A(ct());var Woe=K(t=>{async function e(r={}){let i=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:$(r),headers:r.headers}),{Strings:n}=await i.json();return(n||[]).map(s=>new Goe.Multiaddr(s))}return e});f();var Yoe=A(ct());var Xoe=K(t=>{async function e(r={}){let i=await t.post("swarm/peers",{signal:r.signal,searchParams:$(r),headers:r.headers}),{Peers:n}=await i.json();return(n||[]).map(s=>({addr:new Yoe.Multiaddr(s.Addr),peer:s.Peer,muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return e});function Qoe(t){return{addrs:zoe(t),connect:Hoe(t),disconnect:$oe(t),localAddrs:Woe(t),peers:Xoe(t)}}f();f();ye();var Zoe=A(Ii()),l8=K(t=>{async function*e(r,i={}){let n=new Zoe.AbortController,s=ai(n.signal,i.signal),{headers:o,body:a,total:c,parts:u}=await oi(r,n,i.headers),[l,h]=typeof i.progress=="function"?GMe(c,u,i.progress):[void 0,void 0],d=await t.post("add",{searchParams:$({"stream-channels":!0,...i,progress:Boolean(l)}),onUploadProgress:h,signal:s,headers:o,body:a});for await(let p of d.ndjson())p=Pt(p),p.hash!==void 0?yield YMe(p):l&&l(p.bytes||0,p.name)}return e}),GMe=(t,e,r)=>e?[void 0,WMe(t,e,r)]:[r,void 0],WMe=(t,e,r)=>{let i=0,n=e.length;return({loaded:s,total:o})=>{let a=Math.floor(s/o*t);for(;i<n;){let{start:c,end:u,name:l}=e[i];if(a<u){r(a-c,l);break}else r(u-c,l),i+=1}}};function YMe({name:t,hash:e,size:r,mode:i,mtime:n,mtimeNsecs:s}){let o={path:t,cid:q.parse(e),size:parseInt(r)};return i!=null&&(o.mode=parseInt(i,8)),n!=null&&(o.mtime={secs:n,nsecs:s||0}),o}var Joe=A(kn());function eae(t){let e=l8(t);return K(()=>{async function r(i,n={}){return await(0,Joe.default)(e(v6(i),n))}return r})(t)}f();var tae=K(t=>{async function*e(r,i={}){yield*(await t.post("cat",{signal:i.signal,searchParams:$({arg:r.toString(),...i}),headers:i.headers})).iterator()}return e});f();var rae=K(t=>async(r={})=>(await t.post("commands",{signal:r.signal,searchParams:$(r),headers:r.headers})).json());f();var iae=K(t=>async(r,i={})=>(await(await t.post("dns",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers})).json()).Path);f();var nae=K(t=>()=>{let e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}});f();ye();var sae=K(t=>{async function*e(r,i={}){let n={arg:`${r instanceof Uint8Array?q.decode(r):r}`,...i};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel),yield*(await t.post("get",{signal:i.signal,searchParams:$(n),headers:i.headers})).iterator()}return e});f();var oae=A(ct());var f8=K(t=>{async function e(r={}){let n=await(await t.post("id",{signal:r.signal,searchParams:$({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...Pt(n)};return s.addresses&&(s.addresses=s.addresses.map(o=>new oae.Multiaddr(o))),s}return e});f();var aae=t=>{let e=f8(t);async function r(i={}){let n=await e(i);return Boolean(n&&n.addresses&&n.addresses.length)}return r};f();ye();var cae=K((t,e)=>{async function*r(i,n={}){let s=`${i instanceof Uint8Array?q.decode(i):i}`;async function o(c){let u=c.Hash;if(u.includes("/")){let h=u.startsWith("/ipfs/")?u:`/ipfs/${u}`;u=(await i8(e)(h)).cid}else u=q.parse(u);let l={name:c.Name,path:s+(c.Name?`/${c.Name}`:""),size:c.Size,cid:u,type:XMe(c)};return c.Mode&&(l.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(l.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(l.mtime.nsecs=c.MtimeNsecs)),l}let a=await t.post("ls",{signal:n.signal,searchParams:$({arg:s,...n}),headers:n.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let u=c.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(!u.length){yield o(c);return}yield*u.map(o)}}return r});function XMe(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}f();var uae=K(t=>{async function e(r={}){let i=await t.post("dns",{signal:r.signal,searchParams:$(r),headers:r.headers});return Pt(await i.json())}return e});f();var lae=K(t=>{async function*e(r,i={}){yield*(await t.post("ping",{signal:i.signal,searchParams:$({arg:`${r}`,...i}),headers:i.headers,transform:Pt})).ndjson()}return e});f();var fae=K(t=>{async function e(r,i={}){let n=await t.post("resolve",{signal:i.signal,searchParams:$({arg:r,...i}),headers:i.headers}),{Path:s}=await n.json();return s}return e});f();var hae=A(xh()),dae=K(t=>async(r={})=>{throw(0,hae.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});f();var pae=K(t=>{async function e(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:$(r),headers:r.headers})).text()}return e});f();var yae=K(t=>{async function e(r={}){let i=await t.post("version",{signal:r.signal,searchParams:$(r),headers:r.headers});return{...Pt(await i.json()),"ipfs-http-client":"1.0.0"}}return e});var eje=A(aI());ye();var tje=A(ct()),rje=A(cI());function mae(t={}){let e={name:Qn.name,code:Qn.code,encode:u=>u,decode:u=>u},r=Object.values(sf);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach(u=>r.push(u));let i=new Bg({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),n=Object.values(T3);[un,n2,a2,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(u=>n.push(u));let s=new Lg({codecs:n,loadCodec:t.ipld&&t.ipld.loadCodec}),o=Object.values(I3);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach(u=>o.push(u));let a=new Mg({hashers:o,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:eae(t),addAll:l8(t),bitswap:Zie(t),block:hne(t),bootstrap:Sne(t),cat:tae(t),commands:rae(t),config:kne(t),dag:Kne(s,t),dht:nse(t),diag:cse(t),dns:iae(t),files:Ase(t),get:sae(t),getEndpointConfig:nae(t),id:f8(t),isOnline:aae(t),key:Nse(t),log:jse(t),ls:cae(t),mount:uae(t),name:Hse(t),object:soe(s,t),pin:Roe(t),ping:lae(t),pubsub:Boe(t),refs:Moe(t),repo:Uoe(t),resolve:fae(t),start:dae(t),stats:Koe(t),stop:pae(t),swarm:Qoe(t),version:yae(t),bases:i,codecs:s,hashers:a}}var Vme=A(ct());f();var Tpe=A(mce()),Ppe=A(rle()),Cpe=A(xle()),Ope=A(Hfe()),kpe=A(xpe()),Dpe=A(eI());f();var Rpe={func:(t,e)=>Af.validate(e,t)};function Ipe(t,e){return Af.select(e[0],e[1])}function Npe(){return{dialer:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4},modules:{transport:[Tpe.default,Ppe.default],streamMuxer:[Cpe.default],connEncryption:[Ope.NOISE],peerDiscovery:[],dht:kpe.default,pubsub:Dpe.default},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0},webRTCStar:{enabled:!0}},dht:{kBucketSize:20,enabled:!0,clientMode:!0,validators:{ipns:Rpe},selectors:{ipns:Ipe}},pubsub:{enabled:!0,emitSelf:!0},nat:{enabled:!1}},metrics:{enabled:!0},peerStore:{persistence:!0,threshold:1}}}var zme=A(jpe()),Hme=A(qme());var TJe=Rt.bind({ignoreUndefined:!0});function Lm({options:t={},peerId:e,multiaddrs:r=[],repo:i,keychainConfig:n={},config:s={}}){let{datastore:o,keys:a}=i,c=PJe({options:t,config:s,datastore:o,keys:a,keychainConfig:n,peerId:e,multiaddrs:r});return typeof t.libp2p=="function"?t.libp2p({libp2pOptions:c,options:t,config:s,datastore:o,peerId:e}):Hme.default.create(c)}function PJe({options:t,config:e,datastore:r,keys:i,keychainConfig:n,peerId:s,multiaddrs:o}){let a=()=>{let y=(0,Ft.default)(e,"Pubsub.Router")||"gossipsub";if(!tI[y])throw(0,Ume.default)(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${y} router.`),"ERR_NOT_SUPPORTED");return tI[y]},c={datastore:r,peerId:s,modules:{}},u={modules:{pubsub:a(),contentRouting:[],peerRouting:[]},config:{peerDiscovery:{mdns:{enabled:(0,Ft.default)(t,"config.Discovery.MDNS.Enabled",(0,Ft.default)(e,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:(0,Ft.default)(t,"config.Discovery.webRTCStar.Enabled",(0,Ft.default)(e,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:(0,Ft.default)(t,"config.Bootstrap",(0,Ft.default)(e,"Bootstrap",[]))}},relay:{enabled:(0,Ft.default)(t,"relay.enabled",(0,Ft.default)(e,"relay.enabled",!0)),hop:{enabled:(0,Ft.default)(t,"relay.hop.enabled",(0,Ft.default)(e,"relay.hop.enabled",!1)),active:(0,Ft.default)(t,"relay.hop.active",(0,Ft.default)(e,"relay.hop.active",!1))}},dht:{enabled:(0,Ft.default)(e,"Routing.Type","none")!=="none",clientMode:(0,Ft.default)(e,"Routing.Type","dht")!=="dhtserver",kBucketSize:(0,Ft.default)(t,"dht.kBucketSize",20),validators:{ipns:Af}},pubsub:{enabled:(0,Ft.default)(t,"config.Pubsub.Enabled",(0,Ft.default)(e,"Pubsub.Enabled",!0))},nat:{enabled:!(0,Ft.default)(e,"Swarm.DisableNatPortMap",!1)}},addresses:{listen:o.map(y=>y.toString()),announce:(0,Ft.default)(t,"addresses.announce",(0,Ft.default)(e,"Addresses.Announce",[])),noAnnounce:(0,Ft.default)(t,"addresses.noAnnounce",(0,Ft.default)(e,"Addresses.NoAnnounce",[]))},connectionManager:(0,Ft.default)(t,"connectionManager",{maxConnections:(0,Ft.default)(t,"config.Swarm.ConnMgr.HighWater",(0,Ft.default)(e,"Swarm.ConnMgr.HighWater")),minConnections:(0,Ft.default)(t,"config.Swarm.ConnMgr.LowWater",(0,Ft.default)(e,"Swarm.ConnMgr.LowWater"))}),keychain:{datastore:i,...n},host:{agentVersion:`js-ipfs/${Kf}`}},l=(0,Ft.default)(t,"libp2p",void 0);typeof l=="function"&&(l=void 0);let h=TJe(c,Npe(),u,l);(0,Ft.default)(h,"config.peerDiscovery.bootstrap.list",[]).length>0&&h.modules.peerDiscovery.push(zme.default);let p=(0,Ft.default)(t,"config.Addresses.Delegates",(0,Ft.default)(e,"Addresses.Delegates",[]));if(p.length>0){let y=p[Math.floor(Math.random()*p.length)],m=new Vme.Multiaddr(y).toOptions(),w={host:m.host,protocol:parseInt(m.port)===443?"https":"http",port:m.port},b=mae(w);u.modules.contentRouting=u.modules.contentRouting||[],u.modules.contentRouting.push(new Kme.default(s,b)),u.modules.peerRouting=u.modules.peerRouting||[],u.modules.peerRouting.push(new Fme.default(b))}return h}var Gme=Rt.bind({ignoreUndefined:!0}),Mm=(0,$me.default)("ipfs:components:peer:storage"),jm=class{constructor(e,r,i,n,s){this.print=n,this.peerId=e,this.keychain=r,this.repo=i,this.print=n,this.isNew=s}static async start(e,r,i){let{repoAutoMigrate:n,repo:s,onMigrationProgress:o}=i,a=typeof s=="string"||s==null?Rte(e,r,{path:s,autoMigrate:n,onMigrationProgress:o}):s,{peerId:c,keychain:u,isNew:l}=await CJe(e,a,i);return new jm(c,u,a,e,l)}},CJe=async(t,e,r)=>{if(!e.closed)return{...await Wme(e,r),isNew:!1};try{return await e.open(),{...await Wme(e,r),isNew:!1}}catch(i){if(i.code!==Jf)throw i;if(r.init&&r.init.allowNew===!1)throw new oa("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await OJe(t,e,r),isNew:!0}}},OJe=async(t,e,r)=>{let i=r.init||{},n=await e.exists();if(Mm("repo exists?",n),n===!0)throw new Error("repo already exists");let s=i.privateKey?await kJe(i.privateKey):await DJe(t,i),o=NJe(s);Mm("peer identity: %s",o.PeerID);let a={...Gme(Yme(Pc(),i.profiles),r.config),Identity:o};await e.init(a),await e.open(),Mm("repo opened");let c={pass:r.pass};try{c.dek=await e.config.get("Keychain.DEK")}catch(l){if(l.code!=="ERR_NOT_FOUND")throw l}let u=await Lm({options:void 0,multiaddrs:void 0,peerId:s,repo:e,config:a,keychainConfig:c});return u.keychain&&u.keychain.opts&&(await u.loadKeychain(),await e.config.set("Keychain",{DEK:u.keychain.opts.dek})),{peerId:s,keychain:u.keychain}},kJe=t=>(Mm("using user-supplied private-key"),typeof t=="object"?t:l_.default.createFromPrivKey(Ye(t,"base64pad"))),DJe=(t,{algorithm:e="Ed25519",bits:r=2048})=>(t("generating %s keypair...",e),l_.default.create({keyType:e,bits:r})),NJe=t=>({PeerID:t.toB58String(),PrivKey:He(t.privKey.bytes,"base64pad")}),Wme=async(t,e)=>{let r=e.config,i=e.init&&e.init.profiles||[],n=e.pass,s=await t.config.getAll(),o=BJe(Yme(s,i),r);if(s!==o&&await t.config.replace(o),!o.Identity||!o.Identity.PrivKey)throw new Au("No private key was found in the config, please intialize the repo");let a=await l_.default.createFromPrivKey(o.Identity.PrivKey),c=await Lm({options:void 0,multiaddrs:void 0,peerId:a,repo:t,config:o,keychainConfig:{pass:n,...o.Keychain}});return c.keychain&&await c.loadKeychain(),{peerId:a,keychain:c.keychain}},BJe=(t,e)=>e?Gme(t,e):t,Yme=(t,e)=>(e||[]).reduce((r,i)=>{let n=jp[i];if(!n)throw new Error(`Could not find profile with name '${i}'`);return Mm("applying profile %s",i),n.transform(r)},t);f();f();f();f();f();ye();ti();Yr();var y3e=A(u3e());f();var qm=A(Cn());function YJe(t){let e=new Uint8Array(t.reduce((i,n)=>i+qm.default.encodingLength(n),0)),r=0;for(let i of t)e=qm.encode(i,e,r),r+=qm.default.encodingLength(i);return e}var l3e=YJe;f();var dC=A(ce());qi();f();f();f();Yr();var f_=class{constructor(e,r,i){this._refCounter=1,this.cid=e,this.priority=r||1,this.wantType=i}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(ft)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}};Yr();f();var Yo=A(Si()),nc=Yo.default.Reader,Um=Yo.default.Writer,Ht=Yo.default.util,Mt=Yo.default.roots["ipfs-bitswap"]||(Yo.default.roots["ipfs-bitswap"]={}),hs=Mt.Message=(()=>{function t(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.wantlist=null,t.prototype.blocks=Ht.emptyArray,t.prototype.payload=Ht.emptyArray,t.prototype.blockPresences=Ht.emptyArray,t.prototype.pendingBytes=0,t.encode=function(r,i){if(i||(i=Um.create()),r.wantlist!=null&&Object.hasOwnProperty.call(r,"wantlist")&&Mt.Message.Wantlist.encode(r.wantlist,i.uint32(10).fork()).ldelim(),r.blocks!=null&&r.blocks.length)for(var n=0;n<r.blocks.length;++n)i.uint32(18).bytes(r.blocks[n]);if(r.payload!=null&&r.payload.length)for(var n=0;n<r.payload.length;++n)Mt.Message.Block.encode(r.payload[n],i.uint32(26).fork()).ldelim();if(r.blockPresences!=null&&r.blockPresences.length)for(var n=0;n<r.blockPresences.length;++n)Mt.Message.BlockPresence.encode(r.blockPresences[n],i.uint32(34).fork()).ldelim();return r.pendingBytes!=null&&Object.hasOwnProperty.call(r,"pendingBytes")&&i.uint32(40).int32(r.pendingBytes),i},t.decode=function(r,i){r instanceof nc||(r=nc.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Mt.Message;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.wantlist=Mt.Message.Wantlist.decode(r,r.uint32());break;case 2:s.blocks&&s.blocks.length||(s.blocks=[]),s.blocks.push(r.bytes());break;case 3:s.payload&&s.payload.length||(s.payload=[]),s.payload.push(Mt.Message.Block.decode(r,r.uint32()));break;case 4:s.blockPresences&&s.blockPresences.length||(s.blockPresences=[]),s.blockPresences.push(Mt.Message.BlockPresence.decode(r,r.uint32()));break;case 5:s.pendingBytes=r.int32();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Mt.Message)return r;var i=new Mt.Message;if(r.wantlist!=null){if(typeof r.wantlist!="object")throw TypeError(".Message.wantlist: object expected");i.wantlist=Mt.Message.Wantlist.fromObject(r.wantlist)}if(r.blocks){if(!Array.isArray(r.blocks))throw TypeError(".Message.blocks: array expected");i.blocks=[];for(var n=0;n<r.blocks.length;++n)typeof r.blocks[n]=="string"?Ht.base64.decode(r.blocks[n],i.blocks[n]=Ht.newBuffer(Ht.base64.length(r.blocks[n])),0):r.blocks[n].length&&(i.blocks[n]=r.blocks[n])}if(r.payload){if(!Array.isArray(r.payload))throw TypeError(".Message.payload: array expected");i.payload=[];for(var n=0;n<r.payload.length;++n){if(typeof r.payload[n]!="object")throw TypeError(".Message.payload: object expected");i.payload[n]=Mt.Message.Block.fromObject(r.payload[n])}}if(r.blockPresences){if(!Array.isArray(r.blockPresences))throw TypeError(".Message.blockPresences: array expected");i.blockPresences=[];for(var n=0;n<r.blockPresences.length;++n){if(typeof r.blockPresences[n]!="object")throw TypeError(".Message.blockPresences: object expected");i.blockPresences[n]=Mt.Message.BlockPresence.fromObject(r.blockPresences[n])}}return r.pendingBytes!=null&&(i.pendingBytes=r.pendingBytes|0),i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.blocks=[],n.payload=[],n.blockPresences=[]),i.defaults&&(n.wantlist=null,n.pendingBytes=0),r.wantlist!=null&&r.hasOwnProperty("wantlist")&&(n.wantlist=Mt.Message.Wantlist.toObject(r.wantlist,i)),r.blocks&&r.blocks.length){n.blocks=[];for(var s=0;s<r.blocks.length;++s)n.blocks[s]=i.bytes===String?Ht.base64.encode(r.blocks[s],0,r.blocks[s].length):i.bytes===Array?Array.prototype.slice.call(r.blocks[s]):r.blocks[s]}if(r.payload&&r.payload.length){n.payload=[];for(var s=0;s<r.payload.length;++s)n.payload[s]=Mt.Message.Block.toObject(r.payload[s],i)}if(r.blockPresences&&r.blockPresences.length){n.blockPresences=[];for(var s=0;s<r.blockPresences.length;++s)n.blockPresences[s]=Mt.Message.BlockPresence.toObject(r.blockPresences[s],i)}return r.pendingBytes!=null&&r.hasOwnProperty("pendingBytes")&&(n.pendingBytes=r.pendingBytes),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Yo.default.util.toJSONOptions)},t.Wantlist=function(){function e(r){if(this.entries=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.entries=Ht.emptyArray,e.prototype.full=!1,e.encode=function(i,n){if(n||(n=Um.create()),i.entries!=null&&i.entries.length)for(var s=0;s<i.entries.length;++s)Mt.Message.Wantlist.Entry.encode(i.entries[s],n.uint32(10).fork()).ldelim();return i.full!=null&&Object.hasOwnProperty.call(i,"full")&&n.uint32(16).bool(i.full),n},e.decode=function(i,n){i instanceof nc||(i=nc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Mt.Message.Wantlist;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.entries&&o.entries.length||(o.entries=[]),o.entries.push(Mt.Message.Wantlist.Entry.decode(i,i.uint32()));break;case 2:o.full=i.bool();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Mt.Message.Wantlist)return i;var n=new Mt.Message.Wantlist;if(i.entries){if(!Array.isArray(i.entries))throw TypeError(".Message.Wantlist.entries: array expected");n.entries=[];for(var s=0;s<i.entries.length;++s){if(typeof i.entries[s]!="object")throw TypeError(".Message.Wantlist.entries: object expected");n.entries[s]=Mt.Message.Wantlist.Entry.fromObject(i.entries[s])}}return i.full!=null&&(n.full=Boolean(i.full)),n},e.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.entries=[]),n.defaults&&(s.full=!1),i.entries&&i.entries.length){s.entries=[];for(var o=0;o<i.entries.length;++o)s.entries[o]=Mt.Message.Wantlist.Entry.toObject(i.entries[o],n)}return i.full!=null&&i.hasOwnProperty("full")&&(s.full=i.full),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Yo.default.util.toJSONOptions)},e.WantType=function(){let r={},i=Object.create(r);return i[r[0]="Block"]=0,i[r[1]="Have"]=1,i}(),e.Entry=function(){function r(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}return r.prototype.block=Ht.newBuffer([]),r.prototype.priority=0,r.prototype.cancel=!1,r.prototype.wantType=0,r.prototype.sendDontHave=!1,r.encode=function(n,s){return s||(s=Um.create()),n.block!=null&&Object.hasOwnProperty.call(n,"block")&&s.uint32(10).bytes(n.block),n.priority!=null&&Object.hasOwnProperty.call(n,"priority")&&s.uint32(16).int32(n.priority),n.cancel!=null&&Object.hasOwnProperty.call(n,"cancel")&&s.uint32(24).bool(n.cancel),n.wantType!=null&&Object.hasOwnProperty.call(n,"wantType")&&s.uint32(32).int32(n.wantType),n.sendDontHave!=null&&Object.hasOwnProperty.call(n,"sendDontHave")&&s.uint32(40).bool(n.sendDontHave),s},r.decode=function(n,s){n instanceof nc||(n=nc.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new Mt.Message.Wantlist.Entry;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.block=n.bytes();break;case 2:a.priority=n.int32();break;case 3:a.cancel=n.bool();break;case 4:a.wantType=n.int32();break;case 5:a.sendDontHave=n.bool();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof Mt.Message.Wantlist.Entry)return n;var s=new Mt.Message.Wantlist.Entry;switch(n.block!=null&&(typeof n.block=="string"?Ht.base64.decode(n.block,s.block=Ht.newBuffer(Ht.base64.length(n.block)),0):n.block.length&&(s.block=n.block)),n.priority!=null&&(s.priority=n.priority|0),n.cancel!=null&&(s.cancel=Boolean(n.cancel)),n.wantType){case"Block":case 0:s.wantType=0;break;case"Have":case 1:s.wantType=1;break}return n.sendDontHave!=null&&(s.sendDontHave=Boolean(n.sendDontHave)),s},r.toObject=function(n,s){s||(s={});var o={};return s.defaults&&(s.bytes===String?o.block="":(o.block=[],s.bytes!==Array&&(o.block=Ht.newBuffer(o.block))),o.priority=0,o.cancel=!1,o.wantType=s.enums===String?"Block":0,o.sendDontHave=!1),n.block!=null&&n.hasOwnProperty("block")&&(o.block=s.bytes===String?Ht.base64.encode(n.block,0,n.block.length):s.bytes===Array?Array.prototype.slice.call(n.block):n.block),n.priority!=null&&n.hasOwnProperty("priority")&&(o.priority=n.priority),n.cancel!=null&&n.hasOwnProperty("cancel")&&(o.cancel=n.cancel),n.wantType!=null&&n.hasOwnProperty("wantType")&&(o.wantType=s.enums===String?Mt.Message.Wantlist.WantType[n.wantType]:n.wantType),n.sendDontHave!=null&&n.hasOwnProperty("sendDontHave")&&(o.sendDontHave=n.sendDontHave),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Yo.default.util.toJSONOptions)},r}(),e}(),t.Block=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.prefix=Ht.newBuffer([]),e.prototype.data=Ht.newBuffer([]),e.encode=function(i,n){return n||(n=Um.create()),i.prefix!=null&&Object.hasOwnProperty.call(i,"prefix")&&n.uint32(10).bytes(i.prefix),i.data!=null&&Object.hasOwnProperty.call(i,"data")&&n.uint32(18).bytes(i.data),n},e.decode=function(i,n){i instanceof nc||(i=nc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Mt.Message.Block;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.prefix=i.bytes();break;case 2:o.data=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Mt.Message.Block)return i;var n=new Mt.Message.Block;return i.prefix!=null&&(typeof i.prefix=="string"?Ht.base64.decode(i.prefix,n.prefix=Ht.newBuffer(Ht.base64.length(i.prefix)),0):i.prefix.length&&(n.prefix=i.prefix)),i.data!=null&&(typeof i.data=="string"?Ht.base64.decode(i.data,n.data=Ht.newBuffer(Ht.base64.length(i.data)),0):i.data.length&&(n.data=i.data)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.prefix="":(s.prefix=[],n.bytes!==Array&&(s.prefix=Ht.newBuffer(s.prefix))),n.bytes===String?s.data="":(s.data=[],n.bytes!==Array&&(s.data=Ht.newBuffer(s.data)))),i.prefix!=null&&i.hasOwnProperty("prefix")&&(s.prefix=n.bytes===String?Ht.base64.encode(i.prefix,0,i.prefix.length):n.bytes===Array?Array.prototype.slice.call(i.prefix):i.prefix),i.data!=null&&i.hasOwnProperty("data")&&(s.data=n.bytes===String?Ht.base64.encode(i.data,0,i.data.length):n.bytes===Array?Array.prototype.slice.call(i.data):i.data),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Yo.default.util.toJSONOptions)},e}(),t.BlockPresenceType=function(){let e={},r=Object.create(e);return r[e[0]="Have"]=0,r[e[1]="DontHave"]=1,r}(),t.BlockPresence=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.cid=Ht.newBuffer([]),e.prototype.type=0,e.encode=function(i,n){return n||(n=Um.create()),i.cid!=null&&Object.hasOwnProperty.call(i,"cid")&&n.uint32(10).bytes(i.cid),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&n.uint32(16).int32(i.type),n},e.decode=function(i,n){i instanceof nc||(i=nc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Mt.Message.BlockPresence;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.cid=i.bytes();break;case 2:o.type=i.int32();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Mt.Message.BlockPresence)return i;var n=new Mt.Message.BlockPresence;switch(i.cid!=null&&(typeof i.cid=="string"?Ht.base64.decode(i.cid,n.cid=Ht.newBuffer(Ht.base64.length(i.cid)),0):i.cid.length&&(n.cid=i.cid)),i.type){case"Have":case 0:n.type=0;break;case"DontHave":case 1:n.type=1;break}return n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.cid="":(s.cid=[],n.bytes!==Array&&(s.cid=Ht.newBuffer(s.cid))),s.type=n.enums===String?"Have":0),i.cid!=null&&i.hasOwnProperty("cid")&&(s.cid=n.bytes===String?Ht.base64.encode(i.cid,0,i.cid.length):n.bytes===Array?Array.prototype.slice.call(i.cid):i.cid),i.type!=null&&i.hasOwnProperty("type")&&(s.type=n.enums===String?Mt.Message.BlockPresenceType[i.type]:i.type),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Yo.default.util.toJSONOptions)},e}(),t})();var f3e={Block:hs.Wantlist.WantType.Block,Have:hs.Wantlist.WantType.Have},XJe=(t,e)=>Array.prototype.slice.call(e,0).sort((r,i)=>{let n=t(r),s=t(i);return n<s?-1:n>s?1:0}),sc=class{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,r,i){let n=e.toString(ft),s=this.set.get(n);s?(s.inc(),s.priority=r,s.wantType===f3e.Have&&i===f3e.Block&&(s.wantType=i)):(this.set.set(n,new f_(e,r,i)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){let r=e.toString(ft),i=this.set.get(r);!i||(i.dec(),!i.hasRefs()&&(this.set.delete(r),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(XJe(e=>e[1].key,Array.from(this.set.entries())))}contains(e){let r=e.toString(ft);return this.set.has(r)}get(e){let r=e.toString(ft);return this.set.get(r)}};sc.Entry=f_;Yr();var QJe=sc.Entry,ed=class{constructor(e,r,i,n,s){this.entry=new QJe(e,r,i),this.cancel=Boolean(n),this.sendDontHave=Boolean(s)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(ft)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}};var lo=(t,e)=>{let r=["bitswap"];return e&&r.push(e),t&&r.push(`${t.toB58String().slice(0,8)}`),Object.assign((0,dC.default)(r.join(":")),{error:(0,dC.default)(r.concat(["error"]).join(":"))})};var h_=(t,e)=>{if(t.size!==e.size)return!1;for(let[r,i]of t){let n=e.get(r);if(n===void 0||i instanceof Uint8Array&&n instanceof Uint8Array&&!aa(i,n)||i instanceof ed&&n instanceof ed&&!i.equals(n))return!1}return!0};var g3e=A(p3e()),er=class{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return this.blocks.size===0&&this.wantlist.size===0&&this.blockPresences.size===0}addEntry(e,r,i,n,s){i==null&&(i=er.WantType.Block);let o=e.toString(ft),a=this.wantlist.get(o);a?(a.wantType===i&&(a.priority=r),n&&(a.cancel=Boolean(n)),s&&(a.sendDontHave=Boolean(s)),i===er.WantType.Block&&a.wantType===er.WantType.Have&&(a.wantType=i)):this.wantlist.set(o,new ed(e,r,i,n,s))}addBlock(e,r){let i=e.toString(ft);this.blocks.set(i,r)}addHave(e){let r=e.toString(ft);this.blockPresences.has(r)||this.blockPresences.set(r,er.BlockPresenceType.Have)}addDontHave(e){let r=e.toString(ft);this.blockPresences.has(r)||this.blockPresences.set(r,er.BlockPresenceType.DontHave)}cancel(e){let r=e.toString(ft);this.wantlist.delete(r),this.addEntry(e,0,er.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(r=>({block:r.cid.bytes,priority:Number(r.priority),cancel:Boolean(r.cancel)})),full:this.full?!0:void 0},blocks:Array.from(this.blocks.values())};return hs.encode(e).finish()}serializeToBitswap110(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(r=>({block:r.cid.bytes,priority:Number(r.priority),wantType:r.wantType,cancel:Boolean(r.cancel),sendDontHave:Boolean(r.sendDontHave)})),full:this.full?!0:void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(let[r,i]of this.blocks.entries()){let n=q.parse(r),s=n.version,o=n.code,a=n.multihash.code,c=n.multihash.digest.length,u=l3e([s,o,a,c]);e.payload.push(new hs.Block({prefix:u,data:i}))}for(let[r,i]of this.blockPresences)e.blockPresences.push(new hs.BlockPresence({cid:q.parse(r).bytes,type:i}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),hs.encode(e).finish()}equals(e){return!(this.full!==e.full||this.pendingBytes!==e.pendingBytes||!h_(this.wantlist,e.wantlist)||!h_(this.blocks,e.blocks)||!h_(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){let e=Array.from(this.wantlist.keys()),r=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${r}>`}};er.deserialize=async(t,e)=>{let r=hs.decode(t),i=r.wantlist&&r.wantlist.full||!1,n=new er(i);return r.wantlist&&r.wantlist.entries&&r.wantlist.entries.forEach(s=>{if(!s.block)return;let o=q.decode(s.block);n.addEntry(o,s.priority||0,s.wantType,Boolean(s.cancel),Boolean(s.sendDontHave))}),r.blockPresences&&r.blockPresences.forEach(s=>{if(!s.cid)return;let o=q.decode(s.cid);s.type===er.BlockPresenceType.Have?n.addHave(o):n.addDontHave(o)}),r.blocks.length>0?(await Promise.all(r.blocks.map(async s=>{let o=await Sr.digest(s),a=q.createV0(o);n.addBlock(a,s)})),n):(r.payload.length>0&&(await Promise.all(r.payload.map(async s=>{if(!s.prefix||!s.data)return;let o=(0,y3e.default)(s.prefix),a=o[0],c=o[1],u=o[2],l=u===Sr.code?Sr:e&&await e.getHasher(u);if(!l)throw(0,g3e.default)(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");let h=await l.digest(s.data),d=q.create(a,c,h);n.addBlock(d,s.data)})),n.setPendingBytes(r.pendingBytes)),n)};er.blockPresenceSize=t=>t.bytes.length+1;er.Entry=ed;er.WantType={Block:hs.Wantlist.WantType.Block,Have:hs.Wantlist.WantType.Have};er.BlockPresenceType={Have:hs.BlockPresenceType.Have,DontHave:hs.BlockPresenceType.DontHave};f();var pC=1e3,m3e=3,b3e=10*pC,YDt=15*pC,XDt=15*pC,w3e=Math.pow(2,31)-1,_3e=1e3,v3e=1;f();var A3e=A(S3e());var yC=class{constructor(e,r,i){this.peerId=r,this.network=i,this.refcnt=1,this._entries=[],this._log=lo(e,"msgqueue"),this.sendEntries=(0,A3e.default)(this._sendEntries.bind(this),v3e)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;let e=new er(!1);this._entries.forEach(r=>{r.cancel?e.cancel(r.cid):e.addEntry(r.cid,r.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(r){this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),r.message);return}this._log("sending message to peer %s",this.peerId.toB58String()),this.network.sendMessage(this.peerId,e).catch(r=>{this._log.error("send error: %s",r.message)})}};Yr();var gC=class{constructor(e,r,i){this.peers=new Map,this.wantlist=new sc(i),this.network=r,this._stats=i,this._peerId=e,this._log=lo(e,"want")}_addEntries(e,r,i){let n=e.map((s,o)=>new er.Entry(s,w3e-o,er.WantType.Block,r));n.forEach(s=>{s.cancel?i?this.wantlist.removeForce(s.cid.toString(ft)):this.wantlist.remove(s.cid):(this._log("adding to wl"),this.wantlist.add(s.cid,s.priority))});for(let s of this.peers.values())s.addEntries(n)}_startPeerHandler(e){let r=this.peers.get(e.toB58String());if(r){r.refcnt++;return}r=new yC(this._peerId,e,this.network);let i=new er(!0);for(let n of this.wantlist.entries())i.addEntry(n[1].cid,n[1].priority);return r.addMessage(i),this.peers.set(e.toB58String(),r),r}_stopPeerHandler(e){let r=this.peers.get(e.toB58String());!r||(r.refcnt--,!(r.refcnt>0)&&this.peers.delete(e.toB58String()))}wantBlocks(e,r={}){this._addEntries(e,!1),r&&r.signal&&r.signal.addEventListener("abort",()=>{this.cancelWants(e)})}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach(e=>this.disconnected(e.peerId))}};f();var mC=A(qo()),bC=A(vr()),x3e=A(D5());var wC="/ipfs/bitswap/1.0.0",_C="/ipfs/bitswap/1.1.0",vC="/ipfs/bitswap/1.2.0",EC=class{constructor(e,r,i,n={}){this._log=lo(e.peerId,"network"),this._libp2p=e,this._bitswap=r,this._protocols=[wC],n.b100Only||(this._protocols.unshift(_C),this._protocols.unshift(vC)),this._stats=i,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=n.hashLoader}start(){this._running=!0,this._libp2p.handle(this._protocols,this._onConnection);let e=new x3e.default({multicodecs:this._protocols,handlers:{onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}});this._registrarId=this._libp2p.registrar.register(e);for(let r of this._libp2p.peerStore.peers.values()){let i=this._libp2p.connectionManager.get(r.id);i&&this._onPeerConnect(i.remotePeer)}}stop(){this._running=!1,this._libp2p.unhandle(this._protocols),this._registrarId!=null&&this._libp2p.registrar.unregister(this._registrarId)}async _onConnection({protocol:e,stream:r,connection:i}){if(!!this._running){this._log("incoming new bitswap %s connection from %s",e,i.remotePeer.toB58String());try{await(0,bC.pipe)(r,mC.default.decode(),async n=>{for await(let s of n)try{let o=await er.deserialize(s.slice(),this._hashLoader);await this._bitswap._receiveMessage(i.remotePeer,o)}catch(o){this._bitswap._receiveError(o);break}})}catch(n){this._log(n)}}}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,r,i={}){return this._libp2p.contentRouting.findProviders(e,{timeout:b3e,maxNumProviders:r})}async findAndConnect(e,r){let i=[];for await(let n of this.findProviders(e,m3e,r))this._log(`connecting to provider ${n.id}`),i.push(this.connectTo(n.id,r).catch(s=>{this._log.error(s)}));await Promise.all(i)}async provide(e,r){await this._libp2p.contentRouting.provide(e,r)}async sendMessage(e,r){if(!this._running)throw new Error("network isn't running");let i=e.toB58String();this._log("sendMessage to %s",i,r);let n=await this._libp2p.dial(e),{stream:s,protocol:o}=await n.newStream([vC,_C,wC]),a;switch(o){case wC:a=r.serializeToBitswap100();break;case _C:case vC:a=r.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+o)}eet(s,a,this._log),this._updateSentStats(e,r.blocks)}async connectTo(e,r){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,r)}_updateSentStats(e,r){let i=e.toB58String();if(this._stats){for(let n of r.values())this._stats.push(i,"dataSent",n.length);this._stats.push(i,"blocksSent",r.size)}}};async function eet(t,e,r){try{await(0,bC.pipe)([e],mC.default.encode(),t)}catch(i){r(i)}}f();ye();Yr();f();var SC=class{constructor(e){this.partner=e,this.wantlist=new sc,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesRecv+=e}wants(e,r,i){this.wantlist.add(e,r,i)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}};f();f();var d_=class extends Map{constructor(e,r){super();this._cmp=r||this._defaultSort,this._keys=[];for(let[i,n]of e||[])this.set(i,n)}update(e){if(e<0||e>=this._keys.length)return;let r=this._keys[e];this._keys.splice(e,1);let i=this._find(r);this._keys.splice(i,0,r)}set(e,r){if(this.has(e)){let n=this.indexOf(e);this._keys.splice(n,1)}super.set(e,r);let i=this._find(e);return this._keys.splice(i,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;let r=this.indexOf(e);return this._keys.splice(r,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;let r=this._find(e);if(this._keys[r]===e)return r;for(let i=1;i<this._keys.length;i++){if(this._keys[r+i]===e)return r+i;if(this._keys[r-i]===e)return r-i}return-1}_find(e){let r=0,i=this._keys.length;for(;r<i;){let n=r+i>>>1,s=this._kCmp(this._keys[n],e);if(s<0)r=n+1;else if(s>0)i=n;else return n}return r}*keys(){for(let e of this._keys)yield e}*values(){for(let e of this._keys)yield this.get(e)}*entries(){for(let e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,r){if(!!e)for(let i of this._keys)e.apply(r,[[i,this.get(i)]])}_defaultSort(e,r){return e[0]<r[0]?-1:r[0]<e[0]?1:0}_kCmp(e,r){return this._cmp([e,this.get(e)],[r,this.get(r)])}};var tet={hasNewInfo(){return!1},merge(){}},AC=class{constructor(e=tet){this._taskMerger=e,this._byPeer=new d_([],xC.compare)}pushTasks(e,r){let i=this._byPeer.get(e.toB58String());i||(i=new xC(e,this._taskMerger)),i.pushTasks(r),this._byPeer.set(e.toB58String(),i)}popTasks(e){let r=this._head();if(r===void 0)return{tasks:[],pendingSize:0};let{tasks:i,pendingSize:n}=r.popTasks(e);if(i.length===0)return{tasks:i,pendingSize:n};let s=r.peerId;return r.isIdle()?this._byPeer.delete(s.toB58String()):this._byPeer.update(0),{peerId:s,tasks:i,pendingSize:n}}_head(){if(this._byPeer.size!==0)for(let[,e]of this._byPeer)return e}remove(e,r){let i=this._byPeer.get(r.toB58String());i&&i.remove(e)}tasksDone(e,r){let i=this._byPeer.get(e.toB58String());if(!i)return;let n=this._byPeer.indexOf(e.toB58String());for(let s of r)i.taskDone(s);this._byPeer.update(n)}},xC=class{constructor(e,r){this.peerId=e,this._taskMerger=r,this._activeTotalSize=0,this._pending=new R3e,this._active=new Set}pushTasks(e){for(let r of e)this._pushTask(r)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;let r=this._pending.get(e.topic);if(r){e.priority>r.priority&&this._pending.updatePriority(e.topic,e.priority),this._taskMerger.merge(e,r);return}this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){let r=[];for(let i of this._active)i.topic===e.topic&&r.push(i);return r.length===0?!0:this._taskMerger.hasNewInfo(e,r)}popTasks(e){let r=0,i=[],n=this._pending.tasks();for(let s=0;s<n.length&&r<e;s++){let o=n[s];i.push(o),r+=o.size,this._pending.delete(o.topic),this._activeTotalSize+=o.size,this._active.add(o)}return{tasks:i,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return this._pending.length===0&&this._active.size===0}static compare(e,r){return e[1]._pending.length===0?1:r[1]._pending.length===0?-1:e[1]._activeTotalSize===r[1]._activeTotalSize?r[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-r[1]._activeTotalSize}},R3e=class{constructor(){this._tasks=new d_([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce((e,r)=>e+r.task.size,0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map(e=>e.task)}updatePriority(e,r){let i=this._tasks.get(e);if(!i)return;let n=this._tasks.indexOf(e);i.task.priority=r,this._tasks.update(n)}_compare(e,r){return e[1].task.priority===r[1].task.priority?e[1].created-r[1].created:r[1].task.priority-e[1].task.priority}};f();var I3e={hasNewInfo(t,e){let r=!1,i=!1;for(let n of e)n.data.haveBlock&&(r=!0),n.data.isWantBlock&&(i=!0);return!!(!i&&t.data.isWantBlock||!r&&t.data.haveBlock)},merge(t,e){let r=t.data,i=e.data;!i.haveBlock&&r.haveBlock&&(i.haveBlock=r.haveBlock,i.blockSize=r.blockSize),!i.isWantBlock&&r.isWantBlock&&(i.isWantBlock=!0,(!i.haveBlock||r.haveBlock)&&(i.haveBlock=r.haveBlock,e.size=t.size)),i.isWantBlock&&i.haveBlock&&(e.size=i.blockSize)}};var T3e=er.WantType,ret=16*1024,iet=1024,RC=class{constructor(e,r,i,n,s={}){this._log=lo(e,"engine"),this.blockstore=r,this.network=i,this._stats=n,this._opts=this._processOpts(s),this.ledgerMap=new Map,this._running=!1,this._requestQueue=new AC(I3e)}_processOpts(e){return{maxSizeReplaceHasWithBlock:iet,targetMessageSize:ret,...e}}_scheduleProcessTasks(){setTimeout(()=>{this._processTasks()})}async _processTasks(){if(!this._running)return;let{peerId:e,tasks:r,pendingSize:i}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(r.length===0)return;let n=new er(!1);n.setPendingBytes(i);let s=[],o=new Map;for(let c of r){let u=q.parse(c.topic);c.data.haveBlock?c.data.isWantBlock?(s.push(u),o.set(c.topic,c.data)):n.addHave(u):n.addDontHave(u)}let a=await this._getBlocks(s);for(let[c,u]of o){let l=q.parse(c),h=a.get(c);h?n.addBlock(l,h):u.sendDontHave&&n.addDontHave(l)}if(n.empty){e&&this._requestQueue.tasksDone(e,r),this._scheduleProcessTasks();return}try{e&&await this.network.sendMessage(e,n);for(let[c,u]of a.entries())e&&this.messageSent(e,q.parse(c),u)}catch(c){this._log.error(c)}e&&this._requestQueue.tasksDone(e,r),this._scheduleProcessTasks()}wantlistForPeer(e){let r=e.toB58String(),i=this.ledgerMap.get(r);return i?i.wantlist.sortedEntries():new Map}ledgerForPeer(e){let r=e.toB58String(),i=this.ledgerMap.get(r);return i?{peer:i.partner,value:i.debtRatio(),sent:i.accounting.bytesSent,recv:i.accounting.bytesRecv,exchanged:i.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){if(!!e.length){for(let r of this.ledgerMap.values())for(let i of e){let n=r.wantlistContains(i.cid);if(!n)continue;let s=i.data.length,o=this._sendAsBlock(n.wantType,s),a=s;o||(a=er.blockPresenceSize(n.cid)),this._requestQueue.pushTasks(r.partner,[{topic:n.cid.toString(ft),priority:n.priority,size:a,data:{blockSize:s,isWantBlock:o,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,r){let i=this._findOrCreate(e);if(r.empty)return;if(r.full&&(i.wantlist=new sc),this._updateBlockAccounting(r.blocks,i),r.wantlist.size===0){this._scheduleProcessTasks();return}let n=[],s=[];r.wantlist.forEach(o=>{o.cancel?(i.cancelWant(o.cid),n.push(o.cid)):(i.wants(o.cid,o.priority,o.wantType),s.push(o))}),this._cancelWants(e,n),await this._addWants(e,s),this._scheduleProcessTasks()}_cancelWants(e,r){for(let i of r)this._requestQueue.remove(i.toString(ft),e)}async _addWants(e,r){let i=await this._getBlockSizes(r.map(s=>s.cid)),n=[];for(let s of r){let o=s.cid.toString(ft),a=i.get(o);if(a==null)s.sendDontHave&&n.push({topic:o,priority:s.priority,size:er.blockPresenceSize(s.cid),data:{isWantBlock:s.wantType===T3e.Block,blockSize:0,haveBlock:!1,sendDontHave:s.sendDontHave}});else{let c=this._sendAsBlock(s.wantType,a),u=a;c||(u=er.blockPresenceSize(s.cid)),n.push({topic:o,priority:s.priority,size:u,data:{isWantBlock:c,blockSize:a,haveBlock:!0,sendDontHave:s.sendDontHave}})}this._requestQueue.pushTasks(e,n)}}_sendAsBlock(e,r){return e===T3e.Block||r<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){let r=await this._getBlocks(e);return new Map([...r].map(([i,n])=>[i,n.length]))}async _getBlocks(e){let r=new Map;return await Promise.all(e.map(async i=>{try{let n=await this.blockstore.get(i);r.set(i.toString(ft),n)}catch(n){n.code!=="ERR_NOT_FOUND"&&this._log.error("failed to query blockstore for %s: %s",i,n)}})),r}_updateBlockAccounting(e,r){for(let i of e.values())this._log("got block (%s bytes)",i.length),r.receivedBytes(i.length)}messageSent(e,r,i){let n=this._findOrCreate(e);n.sentBytes(i.length),n.wantlist.remove(r)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){let r=e.toB58String(),i=this.ledgerMap.get(r);if(i)return i;let n=new SC(e);return this.ledgerMap.set(r,n),this._stats&&this._stats.push(r,"peerCount",1),n}start(){this._running=!0}stop(){this._running=!1}};f();var P3e=A(Wt());Qe();var C3e=t=>`unwant:${He(t.multihash.bytes,"base64")}`,O3e=t=>`block:${He(t.multihash.bytes,"base64")}`,IC=class extends P3e.EventEmitter{constructor(e){super();this.setMaxListeners(_3e),this._log=lo(e,"notif")}hasBlock(e,r){let i=O3e(e);this._log(i),this.emit(i,r)}wantBlock(e,r={}){if(!e)throw new Error("Not a valid cid");let i=O3e(e),n=C3e(e);return this._log(`wantBlock:${e}`),new Promise((s,o)=>{let a=()=>{this.removeListener(i,c),o(new Error(`Block for ${e} unwanted`))},c=u=>{this.removeListener(n,a),s(u)};this.once(n,a),this.once(i,c),r&&r.signal&&r.signal.addEventListener("abort",()=>{this.removeListener(i,c),this.removeListener(n,a),o(new Error(`Want for ${e} aborted`))})})}unwantBlock(e){let r=C3e(e);this._log(r),this.emit(r)}};f();var D3e=A(Wt());f();var k3e=A(Wt()),TC=A(jP()),p_=class extends k3e.EventEmitter{constructor(e,r){super();this._options=r,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(i=>{this._stats[i]=BigInt(0),this._movingAverages[i]={},this._options.movingAverageIntervals.forEach(n=>{(this._movingAverages[i][n]=(0,TC.default)(n)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,r){this._enabled&&(this._queue.push([e,r,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){let r=e=this._queue.shift();r&&this._applyOp(r)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let r=e-this._frequencyLastTime;r&&Object.keys(this._stats).forEach(i=>{this._updateFrequencyFor(i,r,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,r,i){let n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let s=n/r*1e3,o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(a=>{let c=o[a];c||(c=o[a]=(0,TC.default)(a)),c.push(i,s)})}_applyOp(e){let r=e[0],i=e[1];if(typeof i!="number")throw new Error(`invalid increment number: ${i}`);Object.prototype.hasOwnProperty.call(this._stats,r)||(this._stats[r]=BigInt(0)),this._stats[r]=BigInt(this._stats[r])+BigInt(i),this._frequencyAccumulators[r]||(this._frequencyAccumulators[r]=0),this._frequencyAccumulators[r]+=i}};var N3e={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3]},PC=class extends D3e.EventEmitter{constructor(e=[],r=N3e){super();let i=Object.assign({},N3e,r);if(typeof i.computeThrottleTimeout!="number")throw new Error("need computeThrottleTimeout");if(typeof i.computeThrottleMaxQueueSize!="number")throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=i,this._enabled=this._options.enabled,this._global=new p_(e,i),this._global.on("update",n=>this.emit("update",n)),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(let e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){let r=typeof e!="string"&&e.toB58String?e.toB58String():`${e}`;return this._peers.get(r)}push(e,r,i){if(this._enabled&&(this._global.push(r,i),e)){let n=this._peers.get(e);n||(n=new p_(this._initialCounters,this._options),this._peers.set(e,n)),n.push(r,i)}}disconnected(e){let r=e.toB58String(),i=this._peers.get(r);i&&(i.stop(),this._peers.delete(r))}};var B3e=A(Ii()),L3e=A(Eo());ye();var net={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},set=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],CC=class extends Kc{constructor(e,r,i={}){super();this._libp2p=e,this._log=lo(this.peerId),this._options=Object.assign({},net,i),this._stats=new PC(set,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new EC(e,this,this._stats,{hashLoader:i.hashLoader}),this.blockstore=r,this.engine=new RC(this.peerId,r,this.network,this._stats),this.wm=new gC(this.peerId,this.network,this._stats),this.notifications=new IC(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,r){try{await this.engine.messageReceived(e,r)}catch(n){this._log("failed to receive message",r)}if(r.blocks.size===0)return;let i=[];for(let[n,s]of r.blocks.entries()){let o=q.parse(n);i.push({wasWanted:this.wm.wantlist.contains(o),cid:o,data:s})}this.wm.cancelWants(i.filter(({wasWanted:n})=>n).map(({cid:n})=>n)),await Promise.all(i.map(({cid:n,wasWanted:s,data:o})=>this._handleReceivedBlock(e,n,o,s)))}async _handleReceivedBlock(e,r,i,n){this._log("received block");let s=await this.blockstore.has(r);this._updateReceiveCounters(e.toB58String(),r,i,s),!!n&&await this.put(r,i)}_updateReceiveCounters(e,r,i,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",i.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",i.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,r){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,r={}){let i=(u,l)=>(this.wm.wantBlocks([u],l),this.notifications.wantBlock(u,l)),n=!1,s=async(u,l)=>{try{return await this.blockstore.get(u,l)}catch(h){if(h.code!=="ERR_NOT_FOUND")throw h;return n||(n=!0,this.network.findAndConnect(u).catch(d=>this._log.error(d))),i(u,l)}},o=new B3e.AbortController,a=r.signal?(0,L3e.anySignal)([r.signal,o.signal]):o.signal,c=await Promise.race([this.notifications.wantBlock(e,{signal:a}),s(e,{signal:a})]);return o.abort(),c}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}unwant(e){let r=Array.isArray(e)?e:[e];this.wm.unwantBlocks(r),r.forEach(i=>this.notifications.unwantBlock(i))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,r,i){await this.blockstore.put(e,r),this._sendHaveBlockNotifications(e,r)}async*putMany(e,r){for await(let{key:i,value:n}of this.blockstore.putMany(e,r))this._sendHaveBlockNotifications(i,n),yield{key:i,value:n}}_sendHaveBlockNotifications(e,r){this.notifications.hasBlock(e,r),this.engine.receivedBlocks([{cid:e,data:r}]),this.network.provide(e).catch(i=>{this._log.error("Failed to provide: %s",i.message)})}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}start(){this.wm.start(),this.network.start(),this.engine.start(),this.started=!0}stop(){this._stats.stop(),this.wm.stop(),this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}};var M3e=(t,e,r={})=>new CC(t,e,r);var z3e=A(ct()),H3e=A(_t());f();f();var kC={};kt(kC,{abortedError:()=>aet,notFoundError:()=>F3e});f();var OC=A(U3e());function F3e(t){return t=t||new Error("Not Found"),(0,OC.default)(t,"ERR_NOT_FOUND")}function aet(t){return t=t||new Error("Aborted"),(0,OC.default)(t,"ERR_ABORTED")}f();Mi();Es();ye();Gi();var rBt={...kC};var K3e=A(Yu()),DC=A(Ea()),V3e=A(To()),NC=class extends Kc{constructor(e,r){super();this.child=e,this.bitswap=r}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,r,i={}){await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,r,i):await this.child.put(e,r,i))}async*putMany(e,r={}){let i=(0,V3e.default)(e,async({key:n})=>!await this.has(n));this.bitswap.isStarted()?yield*this.bitswap.putMany(i,r):yield*this.child.putMany(i,r)}async get(e,r={}){return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,r):this.child.get(e,r)}async*getMany(e,r={}){let i=(0,DC.default)(),n=(0,DC.default)();Promise.resolve().then(async()=>{for await(let s of e)!await this.has(s)&&this.bitswap.isStarted()?i.push(s):n.push(s);i.end(),n.end()}),yield*(0,K3e.default)(this.bitswap.getMany(i,r),this.child.getMany(n,r))}async delete(e,r){await this.child.delete(e,r)}async*deleteMany(e,r){yield*this.child.deleteMany(e,r)}async has(e,r={}){return this.child.has(e,r)}async*query(e,r={}){yield*this.child.query(e,r)}async*queryKeys(e,r={}){yield*this.child.queryKeys(e,r)}};var Fm=class{constructor(e,r,i,n,s){this.peerId=e,this.libp2p=r,this.bitswap=i,this.repo=n,this.blockstore=s}static async start({peerId:e,repo:r,print:i,hashers:n,options:s}){r.closed&&await r.open();let o=await r.config.getAll(),a=await Lm({options:s,repo:r,peerId:e,multiaddrs:cet(e,o),config:o,keychainConfig:void 0});a.keychain&&await a.loadKeychain(),await a.start();for(let l of a.multiaddrs)i(`Swarm listening on ${l}/p2p/${e.toB58String()}`);let c=M3e(a,r.blocks,{statsEnabled:!0,hashLoader:n});await c.start();let u=new NC(r.blocks,c);return r.blocks=u,r.pins.blockstore=u,new Fm(e,a,c,r,u)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await Promise.all([e.bitswap.stop(),e.libp2p.stop()])}},cet=(t,e)=>{let r=t.toB58String(),i=[],n=e.Addresses&&e.Addresses.Swarm||[];for(let s of n){let o=new z3e.Multiaddr(s);if(o.protoCodes().includes(uet))throw(0,H3e.default)(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");let a=o.getPeerId();a&&a!==r&&(o=o.encapsulate(`/p2p/${r}`)),i.push(o)}return i},uet=479;f();f();function $3e({network:t}){async function e(r={}){let i=[],{libp2p:n}=await t.use(r);for(let[s,o]of n.peerStore.peers.entries())i.push({id:s,addrs:o.addresses.map(a=>a.multiaddr)});return i}return Q(e)}f();function G3e({network:t}){async function e(r,i={}){let{libp2p:n}=await t.use(i);await n.dial(r,i)}return Q(e)}f();function W3e({network:t}){async function e(r,i={}){let{libp2p:n}=await t.use(i);await n.hangUp(r)}return Q(e)}f();function Y3e({network:t}){async function e(r={}){let{libp2p:i}=await t.use(r);return i.multiaddrs}return Q(e)}f();function X3e({network:t}){async function e(r={}){let{libp2p:i}=await t.use(r),n=[];for(let[s,o]of i.connections)for(let a of o){let c={addr:a.remoteAddr,peer:s};(r.verbose||r.direction)&&(c.direction=a.stat.direction),r.verbose&&(c.muxer=a.stat.multiplexer,c.latency="n/a",c.streams=[]),n.push(c)}return n}return Q(e)}var BC=class{constructor({network:e}){this.addrs=$3e({network:e}),this.connect=G3e({network:e}),this.disconnect=W3e({network:e}),this.localAddrs=Y3e({network:e}),this.peers=X3e({network:e})}};f();var Q3e=A(Je());var Km={success:!0,time:0,text:""};function Z3e({network:t}){async function*e(r,i={}){let{libp2p:n}=await t.use();i.count=i.count||10;let s=Q3e.default.createFromB58String(r),o=n.peerStore.get(s),a=o&&o.id;if(!a){yield{...Km,text:`Looking up peer ${r}`};let l=await n.peerRouting.findPeer(s);a=l&&l.id}if(!a)throw new Error("Peer was not found");yield{...Km,text:`PING ${a.toB58String()}`};let c=0,u=0;for(let l=0;l<i.count;l++)try{let h=await n.ping(a);u+=h,c++,yield{...Km,time:h}}catch(h){yield{...Km,success:!1,text:h.toString()}}if(c){let l=u/c;yield{...Km,text:`Average latency: ${l}ms`}}}return Q(e)}f();var LC=A(Je()),y_=A(_t());var J3e=A(sy());var td=A(mn());ye();Yr();u2();Wi();ht();var MC="/ipns/";function e4e(t){t.startsWith(MC)&&(t=t.substring(MC.length));let e;if((t[0]==="1"||t[0]==="Q")&&(t=`z${t}`),t[0]==="z"&&(e=ft.decode(t)),t[0]==="k"&&(e=Rd.decode(t)),!e)throw new Error("Could not parse string");if(e[0]!==1&&e[1]!==114&&(e=ji([[1,114],e])),e.length!==40)throw new Error("Incorrect length "+e.length);return ji([Ye(MC),e.subarray(2)])}function B1(t){if(t.name==="SENDING_QUERY")return{type:t.type,name:t.name,to:t.to.toB58String()};if(t.name==="PEER_RESPONSE")return{type:t.type,name:t.name,messageType:t.messageType,messageName:t.messageName,closer:t.closer.map(({id:e,multiaddrs:r})=>({id:e.toB58String(),multiaddrs:r})),providers:t.providers.map(({id:e,multiaddrs:r})=>({id:e.toB58String(),multiaddrs:r})),record:t.record,from:t.from.toB58String()};if(t.name==="FINAL_PEER")return{type:t.type,name:t.name,from:t.from.toB58String(),peer:{id:t.peer.id.toB58String(),multiaddrs:t.peer.multiaddrs}};if(t.name==="QUERY_ERROR")return{type:t.type,name:t.name,error:t.error,from:t.from.toB58String()};if(t.name==="PROVIDER")return{type:t.type,name:t.name,providers:t.providers.map(({id:e,multiaddrs:r})=>({id:e.toB58String(),multiaddrs:r})),from:t.from.toB58String()};if(t.name==="VALUE")return{type:t.type,name:t.name,value:t.value,from:t.from.toB58String()};if(t.name==="ADDING_PEER")return{type:t.type,name:t.name,peer:t.peer.toB58String()};if(t.name==="DIALING_PEER")return{type:t.type,name:t.name,peer:t.peer.toB58String()};throw(0,y_.default)(new Error("Unknown DHT event type"),"ERR_UNKNOWN_DHT_EVENT")}function t4e({network:t,repo:e,peerId:r}){let{get:i,put:n,findProvs:s,findPeer:o,provide:a,query:c}={async*get(u,l={}){let{libp2p:h}=await L1(t,r,l),d=u instanceof Uint8Array?u:e4e(u);yield*(0,td.default)(h._dht.get(d,l),B1)},async*put(u,l,h){let{libp2p:d}=await L1(t,r,h),p=u instanceof Uint8Array?u:e4e(u);yield*(0,td.default)(d._dht.put(p,l),B1)},async*findProvs(u,l={}){let{libp2p:h}=await L1(t,r,l);yield*(0,td.default)(h._dht.findProviders(u,{signal:l.signal}),B1)},async*findPeer(u,l={}){let{libp2p:h}=await L1(t,r,l);yield*(0,td.default)(h._dht.findPeer(LC.default.parse(u),{signal:l.signal}),B1)},async*provide(u,l={recursive:!1}){let{libp2p:h}=await L1(t,r,l);if(!await e.blocks.has(u))throw(0,y_.default)(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(l.recursive)throw(0,y_.default)(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");yield*(0,td.default)(h._dht.provide(u),B1)},async*query(u,l={}){let{libp2p:h}=await L1(t,r,l),d,p=q.asCID(u);p!=null?d=p.multihash.bytes:d=LC.default.parse(u.toString()).toBytes(),yield*(0,td.default)(h._dht.getClosestPeers(d,l),B1)}};return{get:Q(i),put:Q(n),findProvs:Q(s),findPeer:Q(o),provide:Q(a),query:Q(c)}}var L1=async(t,e,r)=>{let i=await t.use(r);if((0,J3e.default)(i.libp2p,"_config.dht.enabled",!1))return i;{let n=async function*(){yield{from:e,name:"QUERY_ERROR",type:3,error:new oa("dht not enabled")}};return{libp2p:{_dht:{get:n,put:n,findProvs:n,findPeer:n,provide:n,query:n}}}}};f();var r4e=A(_t());var i4e=A(sy());function n4e({network:t,config:e}){let r=(0,i4e.default)(e||{},"Pubsub.Enabled",!0);return{subscribe:r?Q(i):Vm,unsubscribe:r?Q(n):Vm,publish:r?Q(s):Vm,ls:r?Q(o):Vm,peers:r?Q(a):Vm};async function i(c,u,l={}){let{libp2p:h}=await t.use(l);return h.pubsub.subscribe(c,u,l)}async function n(c,u,l={}){let{libp2p:h}=await t.use(l);h.pubsub.unsubscribe(c,u,l)}async function s(c,u,l={}){let{libp2p:h}=await t.use(l);if(!u)throw(0,r4e.default)(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await h.pubsub.publish(c,u)}async function o(c={}){let{libp2p:u}=await t.use(c);return u.pubsub.getTopics()}async function a(c,u={}){let{libp2p:l}=await t.use(u);return l.pubsub.getSubscribers(c)}}var Vm=async()=>{throw new oa("pubsub not enabled")};var fet=Rt.bind({ignoreUndefined:!0}),qC=(0,o4e.default)("ipfs"),a4e=class{constructor({print:e,storage:r,codecs:i,options:n}){let{peerId:s,repo:o,keychain:a}=r,c=fn.create(Fm),u=bW(n.preload),l=WL(),h=YL({network:c}),d=new g9(n),p=Object.values(I3);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach(De=>p.push(De)),this.hashers=new Mg({hashers:p,loadHasher:n.ipld&&n.ipld.loadHasher});let y=Object.values(sf);(n.ipld&&n.ipld.bases?n.ipld.bases:[]).forEach(De=>y.push(De)),this.bases=new Bg({bases:y,loadBase:n.ipld&&n.ipld.loadBase});let m=new dE({repo:o,codecs:i}),w=new P9({codecs:i,hashers:this.hashers,preload:u,repo:o}),b=new S9({dns:l,ipns:d,repo:o,codecs:i,peerId:s,isOnline:h,keychain:a,options:n}),v=nU({repo:o,codecs:i,bases:this.bases,name:b}),x=new ZS({repo:o,codecs:i,hashers:this.hashers,preload:u}),B=Object.assign(xK({repo:o,codecs:i,resolve:v,preload:u}),{local:RK({repo:r.repo})}),{add:O,addAll:R,cat:N,get:F,ls:U}=new KS({preload:u,repo:o,options:n.EXPERIMENTAL}),ie=zY({repo:o,preload:u,hashers:this.hashers,options:n}),te=wW({files:ie,preload:u,options:n.preload});this.preload=u,this.name=b,this.ipns=d,this.pin=m,this.resolve=v,this.block=w,this.refs=B,this.start=pL({network:c,peerId:s,repo:o,preload:u,ipns:d,mfsPreload:te,print:e,keychain:a,hashers:this.hashers,options:n}),this.stop=yL({network:c,preload:u,mfsPreload:te,ipns:d,repo:o}),this.dht=t4e({network:c,repo:o,peerId:s}),this.pubsub=n4e({network:c,config:n.config}),this.dns=l,this.isOnline=h,this.id=OG({network:c,peerId:s}),this.version=IG({repo:o}),this.bitswap=new R9({network:c}),this.bootstrap=new I9({repo:o}),this.config=BG({repo:o}),this.ping=Z3e({network:c}),this.add=O,this.addAll=R,this.cat=N,this.get=F,this.ls=U,this.dag=x,this.files=ie,this.key=new mA({keychain:a}),this.object=new _A({preload:u,codecs:i,repo:o}),this.repo=new vA({repo:o,hashers:this.hashers}),this.stats=new EA({repo:o,network:c}),this.swarm=new BC({network:c}),Object.defineProperty(this,"libp2p",{get(){let De=c.try();return De?De.libp2p:void 0}});let ae=()=>Promise.reject((0,jC.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")),ue=async function*(){throw(0,jC.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};this.commands=ae,this.diag={cmds:ae,net:ae,sys:ae},this.log={level:ae,ls:ae,tail:ue},this.mount=ae,this.codecs=i}async init(){throw new sa}},het=async t=>{let e=st({Data:new at({type:"directory"}).marshal(),Links:[]}),r=await t.block.put(e,{mhtype:"sha2-256",format:"dag-pb"});return await t.pin.add(r),r},det=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!s4e.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}});async function c4e(t={}){t=fet(det(),t);let e=t.init||{},r={name:Qn.name,code:Qn.code,encode:u=>u,decode:u=>u},i=Object.values(T3);[un,n2,a2,r].concat(t.ipld&&t.ipld.codecs||[]).forEach(u=>i.push(u));let n=new Lg({codecs:i,loadCodec:t.ipld&&t.ipld.loadCodec}),s=t.silent?qC:console.log,o=await jm.start(s,n,t),a=await o.repo.config.getAll(),c=new a4e({storage:o,print:s,codecs:n,options:{...t,config:a}});if(await c.preload.start(),c.ipns.startOffline(o),o.isNew&&!e.emptyRepo){let u=await het(c);qC("adding default assets"),await vN({addAll:c.addAll,print:s}),qC("initializing IPNS keyspace"),await c.ipns.initializeKeyspace(o.peerId.privKey,Ye(`/ipfs/${u}`))}return t.start!==!1&&await c.start(),c}var u4e=A(Ic()),l4e=A(jd());ye();var f4e=A(ct()),h4e=A(Je()),d4e=A(aI()),p4e=A(cI()),y4e=c4e,g4e=u4e.default,m4e=l4e.default,b4e=q,w4e=f4e.Multiaddr,_4e=h4e.default,v4e=d4e.default,E4e=p4e.default;f();function S4e(){throw new Error("Not supported in browsers")}var pet=y4e,yet=g4e,get=m4e,met=b4e,bet=w4e,wet=_4e,_et=v4e,vet=E4e,Eet=S4e;return Aet;})();
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
return Ipfs}));
